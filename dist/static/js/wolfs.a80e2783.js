var A=Object.defineProperty;var L=(m,p,t)=>p in m?A(m,p,{enumerable:!0,configurable:!0,writable:!0,value:t}):m[p]=t;var a=(m,p,t)=>(L(m,typeof p!="symbol"?p+"":p,t),t);import{p as E,q as b}from"./element-plus.c1dd77d3.js";import{G as g}from"./GlobalData.15756761.js";import{B as f,G as x,f as _}from"./format.31ee9e47.js";import{a as u,k as T,G as k}from"./unit.8181a508.js";import{_ as D}from"./lodash.c9626c09.js";import{J as O,c as R,X as n,R as d,u as w,F as M,a as c,o as N}from"./@vue.19ab7578.js";import"./lodash-es.6689e95d.js";import"./@vueuse.ad796436.js";import"./@element-plus.517593ad.js";import"./@popperjs.c75af06c.js";import"./@ctrl.43a4208a.js";import"./dayjs.5fc4293f.js";import"./@xmldom.03ad400b.js";import"./async-validator.dee29e8b.js";import"./memoize-one.297ddbcb.js";import"./escape-html.1d60d822.js";import"./normalize-wheel-es.ed76fb12.js";import"./@floating-ui.b3b4f581.js";import"./x2js.53e2bce6.js";const S=class extends f{constructor(t,e=1,l=1,s=0,i=null,o=null){super();a(this,"index");a(this,"keyId");a(this,"m_level");a(this,"exp");a(this,"hp");a(this,"hpMax");a(this,"hpRate");a(this,"dowerSkills");a(this,"learnSkills");t==""&&(t="dahuil");let h=t.indexOf("|");h!=-1&&(this.keyId=t,t=t.slice(0,h)),this.m_data=T.getOnlyExample().getData(t),this.m_data==null&&(this.m_data=T.getOnlyExample().getData("dahuil")),this.hpRate=l,this.updateLevelExp(e,s),this.updateSkills(i,o)}static newMonster(t){let e=null;return t&&(e=new S(t.wids,t.level,1,t.experience,t.init_skills,t.skills)),e}conflictSkillList(t){let e=null,l=0,s=0,i=[];if(t==null)return i;let o=g.$_conflict_skill_kind,h=t.data.kindId;for(skills[h]&&i.push(MonsterSkill.getKindName(h)),l=0;l<o.length;l++)if(e=o[l],e.indexOf(h)!=-1)for(s=0;s<e.length;s++)h!=e[s]&&skills[e[s]]&&i.push(MonsterSkill.getKindName(e[s]));return i}getDowerSkillsList(){let t=0,e=null,l=null,s=[];for(this.isTame?l=this.dowerSkills:l=this.data.skills,t=0;t<l.length;t++)e=this.getSkillById(l[t][f.SKILL_ID]),e&&s.push(e);return s}getLearnSkillsList(){let t=0,e=null,l=[];for(t=0;t<this.learnSkills.length;t++)e=this.getSkillById(this.learnSkills[t][f.SKILL_ID]),e&&l.push(e);return l}getSkillById(t){let e,l=null;for(e in skills)if(l=skills[e],l.data.id==t)return l;return null}updateLevelExp(t=0,e=0){this.level=t,this.exp=e}updateSkills(t=null,e=null){this.dowerSkills=t,this.learnSkills=e,this.isTame&&this.initSkills()}getAllSkills(t=null,e=null){let l=0,s=[];if(t||(t=this.dowerSkills),e||(e=this.learnSkills),this.isTame){for(l=0;l<t.length;l++)s.push(t[l]);for(l=0;l<e.length;l++)s.push(e[l])}else s=this.data.skills;return s}get allSkillsScore(){let t=0,e=1,l=this.getAllSkills();for(t=0;t<l.length;t++)e*=this.getSkillScore(l[t][f.SKILL_ID],l[t][f.SKILL_LEVEL]);return e}getSkillScore(t,e){let l=null,s=g.$_skill_grade_score,i=t.indexOf("_");return t.indexOf("_")==-1?1:(l=t.slice(i+1,t.length),s[l]&&s[l][String(e)]?s[l][String(e)]:1)}get levelMax(){return this.isTame?g.$_camp_wolf_lv_max:Number.MAX_SAFE_INTEGER}get expMax(){let t=this.m_level+1;return Math.round(this.monsterData.expMaxA+this.monsterData.expMaxB*t+this.monsterData.expMaxC*t*t+this.monsterData.expMaxD*t*t*t)}get level(){return this.m_level}set level(t){this.m_level=Math.max(Math.min(t,this.levelMax),0),k.currentMap&&k.currentMap&&(this.hpMax=parseInt((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate)),this.hpMax<=1&&(this.hpMax=1)}refreshLevel(){this.hpMax=parseInt((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate*k.currentMap.unkennelSoloDifficulty),this.hpMax<=1&&(this.hpMax=1)}get monsterData(){return this.m_data}get power(){let t=g.$_wolf_worth_factor,e=this.hpMax,l=this.monsterData.speedBase,s=this.allSkillsScore;return Math.round(e*l*s*t[2])}initMonsterSkills(){this.isTame||this.initSkills()}initMonster(){this.initMonsterSkills(),this.initStatuses()}get skillInfo(){let t,e=0,l=null,s=null,i="";if(this.skills==null)return i;let o=[];for(t in this.skills)o.push(this.skills[t]);for(o.sort((h,I)=>h[x.DATA_KEY_INDEX]-I[x.DATA_KEY_INDEX]),e=0;e<o.length;e++)l=o[e],s=l.skillInfo,console.log(s,l.skillTag1,l.skillTag2,l.skillTag3,l.level),s!=""&&(i+=s);return i}get isTame(){return!!(this.dowerSkills||this.learnSkills)}};let r=S;a(r,"MONSTER_SAY_ARRAY",[u.getLanguageStr(1250),u.getLanguageStr(1251),u.getLanguageStr(1252),u.getLanguageStr(1253),u.getLanguageStr(1254),u.getLanguageStr(1255),u.getLanguageStr(1256),u.getLanguageStr(1257),u.getLanguageStr(1258),u.getLanguageStr(1259)]),a(r,"MONSTER","monster"),a(r,"FRAME_NAME_DEAD","dead"),a(r,"STATUS_MOVE","statusMove"),a(r,"RES_AIMING","aiming"),a(r,"PATH_PATH","pathPath"),a(r,"PHOTO_WIDTH",66),a(r,"PHOTO_HEIGHT",64),a(r,"PHOTO_ROUND",50),a(r,"PHOTO_SIZE",800),a(r,"WEIGHTILY_SIZE",487500),a(r,"CARD_RATIO",2),a(r,"CARD_WIDTH",32),a(r,"CARD_HEIGHT",40),a(r,"CARD_ROUND",10),a(r,"CARD_SIZE",400),a(r,"CARD_ROTATION",-10),a(r,"ICON_RATIO",1.5),a(r,"ICON_WIDTH",44),a(r,"ICON_HEIGHT",44),a(r,"ICON_ROUND",20),a(r,"ICON_SIZE",400),a(r,"ICON_ROTATION",-10),a(r,"PATH_NUM",5),a(r,"PATH_RATE",.01),a(r,"RE_FIND_PATH_STEP",2500);const v=c("h1",null,"狼数据",-1),C=c("p",null,"前排解释：",-1),H=c("p",null,"pop 为狼在一波中占的容量，一般来说 pop 越大则出现机会越少。",-1),y=c("p",null,"charm 影响到寻路，charm 为负值越小则其他狼越会排斥它。",-1),B=c("p",null,"hp_factor 影响血量关于等级增长，是二次函数系数。",-1),G=["innerHTML"],st=O({__name:"wolfs",setup(m){console.log("init wolfs");const p=D.map(g.$_wolfAtt_Obj,(l,s)=>s).sort().map(l=>{let s=new r(l,0,0);s.initSkills();let i=s.monsterData;return{id:l,data:i,skills:D.map(s.skills,(o,h)=>`<p>${e(o)}</p>`).join("")}});function t(l){return l.isDebuff?_("↓",0,!0,"","monospace"):_("↑",16711680,!0,"","monospace")}function e(l){let i=[];return i.push(t(l)+" "+_(l.name,64,!0,"")+"&nbsp;"),i.push(_(`[${l.data.id}] `,7829367,!0,"smaller")),i.push(_(l.skillInfo,3355443,!1,"smaller")),l.skillTag1&&i.push(_(l.skillTag1,4210928,!1,"small")),l.skillTag2&&i.push(_(l.skillTag2,4210928,!1,"small")),l.skillTag3&&i.push(_(l.skillTag3,4210928,!1,"small")),i.join("")}return(l,s)=>{const i=E,o=b;return N(),R(M,null,[v,C,H,y,B,n(o,{data:w(p),"default-sort":{prop:"id",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},"max-height":"600",style:{width:"100%","max-width":"1200px"}},{default:d(()=>[n(i,{prop:"id",label:"id",sortable:""}),n(i,{prop:"data.name",label:"name",sortable:""}),n(i,{prop:"data.speedBase",label:"speedBase",sortable:""}),n(i,{prop:"data.population",label:"population",sortable:""}),n(i,{prop:"data.charm",label:"charm",sortable:""}),n(i,{label:"size"},{default:d(()=>[n(i,{prop:"data.width",label:"width",sortable:""}),n(i,{prop:"data.height",label:"height",sortable:""})]),_:1}),n(i,{label:"hpFactor"},{default:d(()=>[n(i,{prop:"data.hpMaxA",label:"a",sortable:""}),n(i,{prop:"data.hpMaxB",label:"b",sortable:""}),n(i,{prop:"data.hpMaxC",label:"c",sortable:""})]),_:1}),n(i,{label:"skills",type:"expand",width:"60"},{default:d(h=>[c("div",{innerHTML:h.row.skills,style:{"margin-left":"2em"}},null,8,G)]),_:1})]),_:1},8,["data"])],64)}}});export{st as default};

var te=Object.defineProperty;var ee=(A,e,t)=>e in A?te(A,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):A[e]=t;var s=(A,e,t)=>(ee(A,typeof e!="symbol"?e+"":e,t),t);import{a as n,G as O}from"./c-GlobalData.65768074.js";const B=class{constructor(e){s(this,"typeId");s(this,"kindId");s(this,"id");s(this,"name");s(this,"info");s(this,"help");this.typeId=e[B.DATA_TYPE_ID],this.kindId=e[B.DATA_KIND_ID],this.id=e[B.DATA_ID],this.name=n.getDataProfileTxt(e[B.DATA_NAME]),this.info=n.getDataProfileTxt(e[B.DATA_INFO]),this.help=e[B.DATA_HELP]?n.getDataProfileTxt(e[B.DATA_HELP]):""}};let S=B;s(S,"DATA_TYPE_ID","typeId"),s(S,"DATA_KIND_ID","kindId"),s(S,"DATA_ID","id"),s(S,"DATA_NAME","name"),s(S,"DATA_INFO","info"),s(S,"DATA_HELP","help");const It=class extends S{constructor(t){super(t);s(this,"res");s(this,"resColor");t[It.DATA_RESOURCE_CLASS]==null?this.res=t[S.DATA_ID]:this.res=t[It.DATA_RESOURCE_CLASS],this.resColor=t[It.DATA_RESOURCE_COLOR_CLASS]}};let L=It;s(L,"TYPE_MONSTER","wolf"),s(L,"TYPE_TOWER","tower"),s(L,"TYPE_WALL","wall"),s(L,"TYPE_BARRIER","barrier"),s(L,"TYPE_ENTRANCE","typeEntrance"),s(L,"TYPE_EXPORT","typeExport"),s(L,"TYPE_BOX","box"),s(L,"TYPE_GEM_ITEM","gem"),s(L,"TYPE_TRAP_ITEM","snarp"),s(L,"TYPE_CARD_ITEM","card"),s(L,"TYPE_WOLF_CARD_ITEM","wc"),s(L,"TYPE_TAME_ITEM","tame"),s(L,"TYPE_FIX_ITEM","bomb"),s(L,"TYPE_MONSTER_SKILL","monsterSkill"),s(L,"ID_SPADE_ITEM","mc"),s(L,"ID_GEM_HAMMER","gem_hammer"),s(L,"ID_GEM_OPENER","gem_opener"),s(L,"DATA_RESOURCE_CLASS","res"),s(L,"DATA_RESOURCE_COLOR_CLASS","resColor");class J{constructor(){s(this,"m_manager",{});this.clearData()}getDataById(e){return this.m_manager[e]}get manager(){return this.m_manager}clearData(){this.m_manager=new Object}}class yt{constructor(){s(this,"m_data");this.m_data=new S({})}get baseData(){return this.m_data}}class me extends yt{constructor(){super()}}const C=class extends L{constructor(t){super(t);s(this,"scoreMax");s(this,"populationMax");s(this,"hardA");s(this,"hardB");s(this,"passBy");s(this,"unkennelDelay");s(this,"unkennelRule");s(this,"bossList");s(this,"monsterList");s(this,"teleportRule");this.scoreMax=t[C.DATA_SCORE_MAX]?t[C.DATA_SCORE_MAX]:C.DEFAULT_SCORE_MAX,this.populationMax=t[C.DATA_POPULATION_MAX]?t[C.DATA_POPULATION_MAX]:C.DEFAULT_POPULATION_MAX,this.hardA=t[C.DATA_HARD_A],this.hardB=t[C.DATA_HARD_B],this.passBy=t[C.DATA_PASS_BY],this.unkennelDelay=t[C.DATA_UNKENNEL_RATE],this.unkennelRule=t[C.DATA_UNKENNEL_RULE],this.bossList=t[C.DATA_BOSS_LIST],this.monsterList=t[C.DATA_MONSTER_LIST]?t[C.DATA_MONSTER_LIST].map(i=>i[1]):[],this.teleportRule=t[C.DATA_TELEPORT_RULE]}getDifficultyLevel(t){return Math.sqrt(this.hardA+this.hardB*t)}};let K=C;s(K,"DEFAULT_SCORE_MAX",100),s(K,"DEFAULT_POPULATION_MAX",10),s(K,"RULE_MULTICAST",1),s(K,"DATA_SCORE_MAX","pass_score"),s(K,"DATA_POPULATION_MAX","pop_max"),s(K,"DATA_HARD_A","yield_val"),s(K,"DATA_HARD_B","hard_ness"),s(K,"DATA_PASS_BY","passBy"),s(K,"DATA_UNKENNEL_RATE","interval"),s(K,"DATA_UNKENNEL_RULE","interval_rule"),s(K,"DATA_BOSS_LIST","boss"),s(K,"DATA_MONSTER_LIST","wolf_proportion"),s(K,"DATA_TELEPORT_RULE","teleport_rule"),s(K,"DATA_DEBUG","debug");const Y=class extends J{constructor(){super(),Y.onlyExample=this,this.loadData(O.$_map_Obj)}static getOnlyExample(){return Y.onlyExample==null&&(Y.onlyExample=new Y),Y.onlyExample}loadData(e){for(const t in e){const i=e[t];i[S.DATA_ID]=t,this.m_manager[t]=new K(e[t])}}getData(e){return this.getDataById(e)}};let rt=Y;s(rt,"DATA_COUNT",6),s(rt,"onlyExample");class f extends yt{constructor(t,i=!0){super();s(this,"score",0);s(this,"wave",null);this.m_data=rt.getOnlyExample().getData(t)}static getMapData(t){return rt.getOnlyExample().getData(t)}get gameMapData(){return this.m_data}get canUnkennelAdjust(){return!1}}s(f,"DEFEND_MAP_1","mfx1"),s(f,"ENDLESS_MAP_1","m11"),s(f,"REFRESH_RATE",40),s(f,"currentMap"),s(f,"SIGN_SUCCESS","success"),s(f,"SIGN_FAILED","failed"),s(f,"SIGN_PASS","pass");const Kt=class extends L{constructor(t){super(t);s(this,"parameter");s(this,"levels");this.parameter=t[Kt.DATA_PARAMETER],this.levels=t[Kt.DATA_LEVELS]}getLevelParam(t,i){return this.parameter!=null?this.parameter[i]:this.levels!=null?(t=Math.min(Math.max(0,t-1),this.levels.length-1),this.levels[t][i]):null}hasLevel(){return this.parameter==null}};let v=Kt;s(v,"TYPE_TOWER_SKILL","typeTowerSkill"),s(v,"TYPE_MONSTER_SKILL","typeMonsterSkill"),s(v,"DATA_PARAMETER","params"),s(v,"DATA_LEVELS","levels");class c extends v{constructor(e){super(e),e[S.DATA_TYPE_ID]=v.TYPE_TOWER_SKILL}}s(c,"KIND_AURA","Aura"),s(c,"KIND_CHANGE_BULLET","Bultype"),s(c,"KIND_CHANGE_DAMAGE","ChangeDam"),s(c,"KIND_CHANGE_RATE","ChangeRate"),s(c,"KIND_CHANGE_RANGE","ChangeRange"),s(c,"KIND_FIELD_ATTACK","ALLAP"),s(c,"KIND_DIVIDED_ATTACK","DivAP"),s(c,"KIND_SCATTER_ATTACK","ScaAP"),s(c,"KIND_COMBO_ATTACK","ComAP"),s(c,"KIND_GUIDED_BULLET","GuidedBul"),s(c,"KIND_ATTACK_RATE","AttackRate"),s(c,"KIND_AOE_ATTACK","AoeAP"),s(c,"KIND_THROUGHOUT_ATTACK","ThoAP"),s(c,"KIND_BOUNCE_ATTACK","BouAP"),s(c,"KIND_FLOAT_DAMAGE","FloatDam"),s(c,"KIND_CRIT","Crit"),s(c,"KIND_REDUCED_DEFENSE","RedDef"),s(c,"KIND_POISON","Poison"),s(c,"KIND_SLOW","Slow"),s(c,"KIND_BURN_COLD","BC"),s(c,"KIND_BEAT_BACK","Beat"),s(c,"KIND_SILENCE","Silence"),s(c,"KIND_VERTIGO","Vertigo"),s(c,"KIND_INTIMIDATE","Intimidate"),s(c,"KIND_CUSS","Cuss"),s(c,"KIND_BURN","Burn"),s(c,"KIND_COLD","Cold");const g=class extends v{constructor(e){super(e),e[S.DATA_TYPE_ID]=v.TYPE_MONSTER_SKILL}static get allMonsterSkill(){return[g.KIND_FLY,g.KIND_AIRBORNE,g.KIND_ISOLATION,g.KIND_RELIVE,g.KIND_SUICIDE,g.KIND_REINCARNATE,g.KIND_RESIST_FIRE,g.KIND_RESIST_FROST,g.KIND_RESIST_POISON,g.KIND_RESIST_BEAT,g.KIND_RESIST_SILENCE,g.KIND_RESIST_VERTIGO,g.KIND_RESIST_CRIT,g.KIND_RESIST_LIGHT,g.KIND_RESIST_STRSMOOTH,g.KIND_SLOWF,g.KIND_WEAK_FIRE,g.KIND_WEAK_FROST,g.KIND_WEAK_POISON,g.KIND_WEAK_BEAT,g.KIND_WEAK_SILENCE,g.KIND_WEAK_VERTIGO,g.KIND_WEAK_CRIT,g.KIND_WEAK_LIGHT,g.KIND_RUN,g.KIND_MIRROR,g.KIND_SUMMON,g.KIND_CLOUD,g.KIND_CURE,g.KIND_BLINK,g.KIND_HIDE,g.KIND_SHIELD,g.KIND_SNEER,g.KIND_TRANSFORM,g.KIND_LINKS]}};let r=g;s(r,"EVENT_RED",1),s(r,"EVENT_YELLOW",2),s(r,"EVENT_GREEN",3),s(r,"EVENT_FULL",4),s(r,"EVENT_INTIMIDATE",20),s(r,"EVENT_VERTIGO",21),s(r,"EVENT_SILENCE",22),s(r,"EVENT_SLOW",23),s(r,"EVENT_REDUCED_DEFENSE",24),s(r,"EVENT_POISON",25),s(r,"EVENT_BURN",26),s(r,"EVENT_COLD",27),s(r,"EVENT_HIT",40),s(r,"EVENT_CRIT",41),s(r,"EVENT_BEAT_BACK",42),s(r,"EVENT_FRIENT_DIE",43),s(r,"EVENT_DIE",44),s(r,"KIND_FLY","fly"),s(r,"KIND_AIRBORNE","airborne"),s(r,"KIND_ISOLATION","isolation"),s(r,"KIND_RELIVE","revive"),s(r,"KIND_SUICIDE","burst"),s(r,"KIND_REINCARNATE","reborn"),s(r,"KIND_SLOWF","slowf"),s(r,"KIND_RESIST_FIRE","resistFire"),s(r,"KIND_RESIST_FROST","resistFrost"),s(r,"KIND_RESIST_POISON","resistPoison"),s(r,"KIND_RESIST_SLOW","resistSlow"),s(r,"KIND_RESIST_BEAT","resistBeat"),s(r,"KIND_RESIST_SILENCE","resistSilence"),s(r,"KIND_RESIST_VERTIGO","resistVertigo"),s(r,"KIND_RESIST_CRIT","resistCrit"),s(r,"KIND_RESIST_LIGHT","resistLight"),s(r,"KIND_RESIST_INTIMIDATE","resistIntimidate"),s(r,"KIND_WEAK_FIRE","weakFire"),s(r,"KIND_WEAK_FROST","weakFrost"),s(r,"KIND_WEAK_POISON","weakPoison"),s(r,"KIND_WEAK_SLOW","weakSlow"),s(r,"KIND_WEAK_BEAT","weakBeat"),s(r,"KIND_WEAK_SILENCE","weakSilence"),s(r,"KIND_WEAK_VERTIGO","weakVertigo"),s(r,"KIND_WEAK_CRIT","weakCrit"),s(r,"KIND_WEAK_LIGHT","weakLight"),s(r,"KIND_WEAK_INTIMIDATE","weakIntimidate"),s(r,"KIND_RESIST_STRSMOOTH","strsmooth"),s(r,"KIND_RUN","sprint"),s(r,"KIND_MIRROR","divide"),s(r,"KIND_SUMMON","summon"),s(r,"KIND_CLOUD","cloud"),s(r,"KIND_CURE","massTreatment"),s(r,"KIND_BLINK","blink"),s(r,"KIND_HIDE","invisible"),s(r,"KIND_SHIELD","shield"),s(r,"KIND_SNEER","taunt"),s(r,"KIND_TRANSFORM","morph"),s(r,"KIND_LINKS","links");const M=class extends J{constructor(){super(),M.onlyExample=this,this.loadData(O.$_skillAtt_Obj)}static getOnlyExample(){return M.onlyExample==null&&(M.onlyExample=new M),M.onlyExample}loadData(e){for(const t in e[M.TOWER_SKILL]){const i=e[M.TOWER_SKILL][t];i[S.DATA_ID]=t,this.m_manager[t]=new c(i)}for(const t in e[M.MONSTER_SKILL]){const i=e[M.MONSTER_SKILL][t];i[S.DATA_ID]=t,this.m_manager[t]=new r(i)}}getData(e){return this.getDataById(e)}};let X=M;s(X,"onlyExample"),s(X,"TOWER_SKILL","towerSkill"),s(X,"MONSTER_SKILL","monsterSkill"),s(X,"TRAP_SKILL","trapSkill");const at=class extends S{constructor(t){super(t);s(this,"skillsList");t[at.DATA_SKILLS_LIST]instanceof Array?this.skillsList=t[at.DATA_SKILLS_LIST]:t[at.DATA_SKILLS_LIST]instanceof String&&(this.skillsList=[t[at.DATA_SKILLS_LIST]])}};let dt=at;s(dt,"DATA_SKILLS_LIST","skills");const k=class extends J{constructor(){super(),k.onlyExample=this,this.loadData(O.$_skillPackage_Obj)}static getOnlyExample(){return k.onlyExample==null&&(k.onlyExample=new k),k.onlyExample}loadData(e){for(const t in e){const i=e[t];i[S.DATA_ID]=t,this.m_manager[t]=new dt(e[t])}}getData(e){return this.getDataById(e)}};let Dt=k;s(Dt,"onlyExample");const u=class{static gridToVector(e=0,t=0){return new Point(Math.atan2(t,e),new Point(e,t).length)}static vectorToGrid(e,t){return new Point(Math.cos(e)*t,Math.sin(e)*t)}static gridToPixel(e=0,t=0,i=1,a=1){let l=u.gridToSubGrid(new Point(e,t),i,a);return u.subGridToPixel(l.x,l.y)}static pixelToGrid(e=0,t=0,i=1,a=1){let l=u.pixelToSubGrid(e,t);return u.subGridToGrid(l,i,a)}static subGridToPixel(e=0,t=0,i=0){let a=new Point;return a.x=Math.round(e*u.SUB_X),a.y=Math.round(t*u.SUB_Y-i*u.SUB_Z),a}static pixelToSubGrid(e=0,t=0){let i=new Point;return i.x=Math.round(e/u.SUB_X),i.y=Math.round(t/u.SUB_Y),i}static gridToSubGrid(e,t=1,i=1){if(e==null)return null;let a=new Point;return a.x=u.gridToSubGridSolo(e.x,t),a.y=u.gridToSubGridSolo(e.y,i),a}static gridToSubGridSolo(e,t=1){return Math.floor((e+(t-1)/2)*u.SUB_GRID_AMOUNT)}static subGridToGrid(e,t=1,i=1){if(e==null)return null;let a=new Point;return a.x=u.subGridToGridSolo(e.x,t),a.y=u.subGridToGridSolo(e.y,i),a}static subGridToGridSolo(e,t=1){return Math.round(e/u.SUB_GRID_AMOUNT+(1-t)/2)}static getMapStartPoint(e=8,t=8,i=1){let a=new Point;return a.x=u.SCREEN_CENTER_POINT.x-e*u.LANDFORM_X/2*i,a.y=u.SCREEN_CENTER_POINT.y-t*u.LANDFORM_Y/2*i,a}static getWolfStartPoint(e,t,i=1){let a=new Point;return a.x=u.SCREEN_CENTER_POINT.x-e/u.SUB_GRID_AMOUNT*u.LANDFORM_X*i,a.y=u.SCREEN_CENTER_POINT.y-t/u.SUB_GRID_AMOUNT*u.LANDFORM_Y*i,a}static checkStep(e,t,i){let a=0,l=null,E=new Object;return Math.abs(t.x)<Math.abs(t.y)?Math.abs(t.x)>=i?t.x>0?(l=new Point(e.x+i,e.y),a=u.DIR_RIGHT):(l=new Point(e.x-i,e.y),a=u.DIR_LEFT):t.y>0?(l=new Point(e.x+t.x,e.y+(i-Math.abs(t.x))),a=u.DIR_DOWN):(l=new Point(e.x+t.x,e.y-(i-Math.abs(t.x))),a=u.DIR_UP):Math.abs(t.y)>=i?t.y>0?(l=new Point(e.x,e.y+i),a=u.DIR_DOWN):(l=new Point(e.x,e.y-i),a=u.DIR_UP):t.x>0?(l=new Point(e.x+(i-Math.abs(t.y)),e.y+t.y),a=u.DIR_RIGHT):(l=new Point(e.x-(i-Math.abs(t.y)),e.y+t.y),a=u.DIR_LEFT),E[u.DIR]=a,E[u.POINT]=l,E}static toPercentage(e){return Math.round(e*100*100)/100+"%"}static toGridStr(e){return String(Math.round(e/100)/10)}static getPosID(e,t){return e+"_"+t}static getIDPos(e){let t=e.indexOf("_"),i=new Point;return i.x=parseInt(e.slice(0,t)),i.y=parseInt(e.slice(t+1,e.length)),i}static getRandomPos(e,t){let i=new Point(e.x,e.y);return i.x=i.x+Math.random()*t*2-t,i.y=i.y+Math.random()*t*2-t,i}static getBetweenPosList(e,t){let i=0,a=0,l=null,E=[];if(e.x==t.x){if(a=e.y-t.y,Math.abs(a)<=1)return E;for(i=a>0?1:-1;e.y!=t.y+i;)l=new Point(t.x,t.y+i),i+=a>0?1:-1,l.y!=t.y&&E.unshift(l)}else{if(e.y!=t.y)return null;if(a=e.x-t.x,Math.abs(a)<=1)return E;for(i=a>0?1:-1;e.x!=t.x+i;)l=new Point(t.x+i,t.y),i+=a>0?1:-1,l.x!=t.x&&E.unshift(l)}return E}static getCrossPosList(e,t){let i=0,a=[e];for(i=e.x-t;i<=e.x+t;i++)i!=e.x&&a.push(new Point(i,e.y));for(i=e.y-t;i<=e.y+t;i++)i!=e.y&&a.push(new Point(e.x,i));return a}static getSquarePosList(e,t){let i=0,a=0,l=[];for(i=e.x-t;i<=e.x+t;i++)for(a=e.y-t;a<=e.y+t;a++)l.push(new Point(i,a));return l}static getDiamondPosList(e,t){let i=0,a=0,l=[];for(i=e.x-t;i<=e.x+t;i++)for(a=e.y-t;a<=e.y+t;a++)Math.abs(i-e.x)+Math.abs(a-e.y)<=t&&l.push(new Point(i,a));return l}static getCirclePosList(e,t){let i=0,a=0,l=null,E=[];for(i=e.x-t;i<=e.x+t;i++)for(a=e.y-t;a<=e.y+t;a++)l=new Point(i-e.x,a-e.y),l.length<=t&&E.push(new Point(i,a));return E}static getRingPosList(e,t,i){let a=0,l=0,E=null,F=[];for(a=e.x-i;a<=e.x+i;a++)for(l=e.y-i;l<=e.y+i;l++)E=new Point(a-e.x,l-e.y),E.length>=t&&E.length<=i&&F.push(new Point(a,l));return F}static getIntersectionPosList(e,t){let i=0,a=0,l=[];for(i=0;i<=e.length;i++)for(a=0;a<=t.length;a++)e[i].x==t[a].x&&e[i].y==t[a].y&&l.push(new Point(e[i].x,e[i].y));return l}static getDistance(e,t){return new Point(e.x-t.x,e.y-t.y).length}static getRadians(e,t){let i=null;return i=new Point(t.x-e.x,t.y-e.y),(Math.atan2(i.y,i.x)+Math.PI*2)%(Math.PI*2)}static sortPosList(e,t){let i=0,a=null,l=null,E=[],F=[],z=t.length;for(i=0;i<z;i++)a=u.gridToSubGrid(t[i]),l={},l.distance=new Point(e.x-a.x,e.y-a.y).length,l.pos=t[i],F[i]=l;for(F=F.sortOn("distance",Array.NUMERIC),i=0;i<z;i++)E[i]=F[i].pos;return E}static getNearestSubPosInPos(e,t,i=400){let a=new Point,l=u.subGridToGrid(e);return t.x<l.x?a.x=u.gridToSubGridSolo(t.x)+i:t.x>l.x?a.x=u.gridToSubGridSolo(t.x)-i:a.x=e.x,t.y<l.y?a.y=u.gridToSubGridSolo(t.y)+i:t.y>l.y?a.y=u.gridToSubGridSolo(t.y)-i:a.y=e.y,a}static getPosList(e,t,i){let a=0,l=0,E=[],F=e.x,z=e.y;for(a=0;a<t;a++)for(l=0;l<i;l++)E.push(new Point(F+a,z+l));return E}static getPosIdList(e,t,i){let a=0,l=0,E=[],F=e.x,z=e.y;for(a=0;a<t;a++)for(l=0;l<i;l++)E.push(this.Position.getPosID(F+a,z+l));return E}};let h=u;s(h,"LANDFORM_X",65),s(h,"LANDFORM_Y",50),s(h,"LANDFORM_Z",50),s(h,"FLOOR_SCALE",u.LANDFORM_X/u.LANDFORM_Y),s(h,"SUB_GRID_AMOUNT",1e3),s(h,"SUB_X",u.LANDFORM_X/u.SUB_GRID_AMOUNT),s(h,"SUB_Y",u.LANDFORM_Y/u.SUB_GRID_AMOUNT),s(h,"SUB_Z",u.LANDFORM_Z/u.SUB_GRID_AMOUNT),s(h,"ENTER_DISTANCE",200),s(h,"MAP_SCALE",.05),s(h,"MAP_X",u.LANDFORM_X*u.MAP_SCALE),s(h,"MAP_Y",u.LANDFORM_Y*u.MAP_SCALE),s(h,"MAP_SUB_X",u.MAP_X/u.SUB_GRID_AMOUNT),s(h,"MAP_SUB_Y",u.MAP_Y/u.SUB_GRID_AMOUNT),s(h,"MAP_DEFAULT_X",8),s(h,"MAP_DEFAULT_Y",8),s(h,"MAP_MAX_X",30),s(h,"MAP_MIN_X",1),s(h,"MAP_MAX_Y",30),s(h,"MAP_MIN_Y",1),s(h,"MAP_MAX_AREA",600),s(h,"MAP_MIN_AREA",4),s(h,"DIR_AMOUNT",4),s(h,"DIR_RIGHT",0),s(h,"DIR_DOWN",1),s(h,"DIR_LEFT",2),s(h,"DIR_UP",3),s(h,"DIR","dir"),s(h,"POINT","point");class I extends L{constructor(e){super(e)}}s(I,"KIND_HIT","hit"),s(I,"KIND_INVASION","invasion"),s(I,"KIND_TELEPORT","teleport"),s(I,"KIND_BUFF_TOP","buffTop"),s(I,"KIND_BUFF_MID","buffMid"),s(I,"KIND_BUFF_BOT","buffBot"),s(I,"KIND_MAGIC","effectMagic"),s(I,"KIND_PATH","effectPath"),s(I,"KIND_CRIT","effectCrit"),s(I,"KIND_SUMMON","effectSummon"),s(I,"KIND_CLOUD","effectCloud"),s(I,"KIND_MIRROR","effectMirror"),s(I,"KIND_CURE","effectCure"),s(I,"KIND_CURE_ONE","effectCureOne"),s(I,"KIND_SNEER","effectSneer"),s(I,"KIND_LINKS","effectLinks"),s(I,"KIND_RELIVE","effectRelive"),s(I,"KIND_SUICIDE","effectSuicide"),s(I,"KIND_BLINK_IN","effectBlinkIn"),s(I,"KIND_BLINK_OUT","effectBlinkOut"),s(I,"KIND_LIGHTNING","lightning"),s(I,"KIND_FIELD_ATTACK","allAttack"),s(I,"KIND_FIELD_ATTACK_AOE","allAttackAOE"),s(I,"KIND_CUSS","effectCuss"),s(I,"KIND_CUSS_BREAK","effectCussBreak"),s(I,"KIND_SIGN_SUMMON","signSummon"),s(I,"KIND_SIGN_CURE","signCure"),s(I,"KIND_SIGN_CLOUD","signCloud"),s(I,"KIND_SIGN_SHIELD","signShield"),s(I,"KIND_SIGN_TRANSFORM","signTransform"),s(I,"KIND_BOSS","effectBoss");function fe(A,e){let t=A.toFixed(8),i=t.indexOf(".");return i==-1||t.length-i-1<=e?t:A.toFixed(e).replace(/\.?0+$/,"")}function jt(A,e=0,t=!1,i="14",a=""){return`<span style="color:#${e.toString(16).padStart(6,"0")};${t?"font-weight:bold;":""}${i?`font-size:${i};`:""}${a?`font-family:${a};`:""}">${A.replaceAll(`
`,"<br>")}</span>`}function Ke(A){return Math.floor(A/3600)+":"+Math.floor(A/60%60).toString().padStart(2,"0")+":"+(A%60).toString().padStart(2,"0")}class $t extends yt{constructor(t,i,a=!1){super();s(this,"level",0);s(this,"index",0);s(this,"m_skillInfo","");s(this,"m_nextLevelSkillInfo","");s(this,"skillTag1","");s(this,"skillTag2","");s(this,"skillTag3","");s(this,"nextLevelSkillTag1","");s(this,"nextLevelSkillTag2","");s(this,"nextLevelSkillTag3","");s(this,"m_updateFunction",()=>{});if(a){this.m_data=new T({id:t+"_0",kindId:t});return}this.m_data=X.getOnlyExample().getData(t),this.level=i}get data(){return this.m_data}get skillInfo(){return this.m_updateFunction!=null&&this.m_updateFunction(),this.m_skillInfo||(this.m_skillInfo=""),this.m_skillInfo}get nextLevelSkillInfo(){return this.m_nextLevelSkillInfo||(this.m_nextLevelSkillInfo=""),this.m_nextLevelSkillInfo}}class N extends $t{constructor(t,i,a){super(t,i);s(this,"tower");this.tower=a,this.m_data.typeId=v.TYPE_TOWER_SKILL}shouldTransferBullet(){switch(this.data.kindId){case c.KIND_GUIDED_BULLET:case c.KIND_ATTACK_RATE:case c.KIND_AOE_ATTACK:case c.KIND_THROUGHOUT_ATTACK:case c.KIND_BOUNCE_ATTACK:case c.KIND_FLOAT_DAMAGE:case c.KIND_CRIT:case c.KIND_REDUCED_DEFENSE:case c.KIND_POISON:case c.KIND_SLOW:case c.KIND_BURN_COLD:case c.KIND_BEAT_BACK:case c.KIND_SILENCE:case c.KIND_VERTIGO:case c.KIND_INTIMIDATE:case c.KIND_CUSS:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case c.KIND_AURA:return new St(this.data.id,this.level,this.tower);case c.KIND_CHANGE_BULLET:return new re(this.data.id,this.level,this.tower);case c.KIND_CHANGE_DAMAGE:return new ae(this.data.id,this.level,this.tower);case c.KIND_CHANGE_RATE:return new he(this.data.id,this.level,this.tower);case c.KIND_CHANGE_RANGE:return new ne(this.data.id,this.level,this.tower);case c.KIND_FIELD_ATTACK:return new mt(this.data.id,this.level,this.tower);case c.KIND_DIVIDED_ATTACK:return new Rt(this.data.id,this.level,this.tower);case c.KIND_SCATTER_ATTACK:return new ft(this.data.id,this.level,this.tower);case c.KIND_COMBO_ATTACK:return new et(this.data.id,this.level,this.tower);case c.KIND_GUIDED_BULLET:return new ce(this.data.id,this.level,this.tower);case c.KIND_ATTACK_RATE:return new se(this.data.id,this.level,this.tower);case c.KIND_AOE_ATTACK:return new Q(this.data.id,this.level,this.tower);case c.KIND_THROUGHOUT_ATTACK:return new it(this.data.id,this.level,this.tower);case c.KIND_BOUNCE_ATTACK:return new W(this.data.id,this.level,this.tower);case c.KIND_FLOAT_DAMAGE:return new le(this.data.id,this.level,this.tower);case c.KIND_CRIT:return new st(this.data.id,this.level,this.tower);case c.KIND_REDUCED_DEFENSE:return new ut(this.data.id,this.level,this.tower);case c.KIND_POISON:return new ct(this.data.id,this.level,this.tower);case c.KIND_SLOW:return new gt(this.data.id,this.level,this.tower);case c.KIND_BURN_COLD:return new ie(this.data.id,this.level,this.tower);case c.KIND_BEAT_BACK:return new tt(this.data.id,this.level,this.tower);case c.KIND_SILENCE:return new At(this.data.id,this.level,this.tower);case c.KIND_VERTIGO:return new Et(this.data.id,this.level,this.tower);case c.KIND_INTIMIDATE:return new lt(this.data.id,this.level,this.tower);case c.KIND_CUSS:return new ht(this.data.id,this.level,this.tower);default:return this}}}const _t=class extends N{constructor(e,t,i){super(e,t,i),this.index=1050,this.m_skillInfo=n.getLanguageStr(3001,this.radiiInfo,h.toPercentage(this.nextEffectRate))}get radii(){return this.data.getLevelParam(this.level,0)+_t.DEFAULT_RADII}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+_t.DEFAULT_NEXT_EFFECT_RATE,_t.MAX_NEXT_EFFECT_RATE)}get radiiInfo(){return this.radii.toString()}};let Q=_t;s(Q,"DEFAULT_RADII",0),s(Q,"DEFAULT_NEXT_EFFECT_RATE",0),s(Q,"MAX_NEXT_EFFECT_RATE",1);class se extends N{constructor(e,t,i){super(e,t,i),this.index=1040;let a=this.floorRate,l=this.airRate;a<=0&&l>0?this.m_skillInfo=n.getLanguageStr(3029):l<=0&&a>0?this.m_skillInfo=n.getLanguageStr(3028):a!=1?this.m_skillInfo=n.getLanguageStr(3030,h.toPercentage(a)):l!=1&&(this.m_skillInfo=n.getLanguageStr(3031,h.toPercentage(l)))}get floorRate(){return this.data.getLevelParam(this.level,0)}get airRate(){return this.data.getLevelParam(this.level,1)}}const Xt=class extends N{constructor(e,t,i){super(e,t,i),this.index=1500,this.m_skillInfo=n.getLanguageStr(3002)}get spId(){return this.data.getLevelParam(this.level,0)}get spLevel(){return this.data.getLevelParam(this.level,1)}get radii(){return this.data.getLevelParam(this.level,2)*this.level+Xt.DEFAULT_RADII}};let St=Xt;s(St,"DEFAULT_RADII",1e3);const Ct=class extends N{constructor(e,t,i){super(e,t,i),this.index=1060,this.m_skillInfo=n.getLanguageStr(3003,h.toPercentage(this.chances),this.distanceInfo)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Ct.DEFAULT_CHANCES,1),0)}get beatBackDistance(){return this.data.getLevelParam(this.level,1)+Ct.DEFAULT_BEAT_BACK_DISTANCE}get distanceInfo(){let e=null,t=this.beatBackDistance;return t<100?e=n.getLanguageStr(3505):t<250?e=n.getLanguageStr(3506):t<450?e=n.getLanguageStr(3507):t<700?e=n.getLanguageStr(3508):e=n.getLanguageStr(3509),e}};let tt=Ct;s(tt,"SHIFT_TIME",.2),s(tt,"DEFAULT_CHANCES",0),s(tt,"DEFAULT_BEAT_BACK_DISTANCE",0);const Tt=class extends N{constructor(e,t,i){super(e,t,i),this.index=1070,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(3004,this.bounceNum,h.toPercentage(1-this.nextEffectRate),this.attackInfo)}}get bounceNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Tt.DEFAULT_BOUNCE_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)*this.level+Tt.DEFAULT_NEXT_EFFECT_RATE,Tt.MAX_NEXT_EFFECT_RATE)}get attackInfo(){var t;let e=null;return((t=this.tower)==null?void 0:t.newBullet().bulletData.hitEffectId)==I.KIND_LIGHTNING?e=n.getLanguageStr(3516):e=n.getLanguageStr(3515),e}};let W=Tt;s(W,"DEFAULT_BOUNCE_NUM",.5),s(W,"DEFAULT_NEXT_EFFECT_RATE",.35),s(W,"MAX_NEXT_EFFECT_RATE",1),s(W,"MAX_DISTANCE",3e3);class ie extends N{constructor(e,t,i){super(e,t,i),this.index=1080,this.m_updateFunction=function(){this.burnColdValue>0?this.m_skillInfo=n.getLanguageStr(3005,this.burn):this.m_skillInfo=n.getLanguageStr(3006,h.toPercentage(this.cold))}}get burnColdValue(){let e=1;this.tower&&(e=this.tower.buffEffect());let t=Math.pow(this.data.getLevelParam(this.level,0)*this.level*e,2);return this.data.getLevelParam(this.level,0)<0&&(t=-t),Math.floor(t)}get burn(){return Math.floor(Math.sqrt(this.burnColdValue))}get cold(){let e=1;this.tower&&(e=this.tower.buffEffect());let t=Math.pow(this.data.getLevelParam(this.level,0)*this.level*e,2);return Math.pow(t,.25)*.03}}class re extends N{constructor(e,t,i){super(e,t,i)}get bulletId(){return this.data.getLevelParam(this.level,0)}}class ae extends N{constructor(e,t,i){super(e,t,i),this.index=1e3,this.damageRate>1?this.m_skillInfo=n.getLanguageStr(3007,h.toPercentage(this.damageRate-1)):this.damageRate<1&&(this.m_skillInfo=n.getLanguageStr(3008,h.toPercentage(1-this.damageRate)))}get damageAdd(){return this.data.getLevelParam(this.level,0)*this.level}get damageRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get damageA(){return this.data.getLevelParam(this.level,2)}get damageB(){return this.data.getLevelParam(this.level,3)}get damageC(){return this.data.getLevelParam(this.level,4)}isChangeBase(){return!(this.damageA==0&&this.damageB==0&&this.damageC==0)}}class ne extends N{constructor(e,t,i){super(e,t,i),this.index=1010,this.rangeRate>1?this.m_skillInfo=n.getLanguageStr(3009,h.toPercentage(this.rangeRate-1)):this.m_skillInfo=n.getLanguageStr(3010,h.toPercentage(1-this.rangeRate)),this.rangeMin>0&&(this.m_skillInfo+=n.getLanguageStr(3027))}get rangeAdd(){return this.data.getLevelParam(this.level,0)*this.level}get rangeRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get range(){return this.data.getLevelParam(this.level,2)}get rangeMin(){return this.data.getLevelParam(this.level,3)}isChangeBase(){return this.range!=0}}class he extends N{constructor(e,t,i){super(e,t,i),this.index=1020,this.rateRate>1?this.m_skillInfo=n.getLanguageStr(3011,h.toPercentage(this.rateRate-1)):this.m_skillInfo=n.getLanguageStr(3012,h.toPercentage(1-this.rateRate))}get rateRate(){return this.data.getLevelParam(this.level,0)+this.data.getLevelParam(this.level,1)*this.level+1}get rate(){return this.data.getLevelParam(this.level,2)}isChangeBase(){return this.rate!=0}}const xt=class extends N{constructor(e,t,i){super(e,t,i),this.index=1090,this.m_skillInfo=n.getLanguageStr(3013,h.toPercentage(this.chances),this.extraBullet+1)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)+xt.DEFAULT_CHANCES,1),0)}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,1)*this.level+xt.DEFAULT_EXTRA_BULLET)}};let et=xt;s(et,"DEFAULT_CHANCES",0),s(et,"DEFAULT_EXTRA_BULLET",.5),s(et,"DEFAULT_RATE",.08);const Lt=class extends N{constructor(e,t,i){super(e,t,i),this.index=1100,this.m_skillInfo=n.getLanguageStr(3014,h.toPercentage(this.chances),this.damageEffectRate.toFixed(1))}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Lt.DEFAULT_CHANCES,1),0)}get damageEffectRate(){return this.data.getLevelParam(this.level,1)*this.level+Lt.DEFAULT_DAMAGE_EFFECT_RATE+1}get buffEffectRate(){return this.data.getLevelParam(this.level,2)*this.level+Lt.DEFAULT_BUFF_EFFECT_RATE+1}};let st=Lt;s(st,"DEFAULT_CHANCES",.1),s(st,"DEFAULT_DAMAGE_EFFECT_RATE",.5),s(st,"DEFAULT_BUFF_EFFECT_RATE",.1);const Pt=class extends N{constructor(e,t,i){super(e,t,i),this.index=1110,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(3026,Math.round(this.cussPower),this.duration.toFixed(0))}}get cussPower(){return this.data.getLevelParam(this.level,0)*this.level*this.tower.level+Pt.DEFAULT_CUSS_POWER}get duration(){return this.data.getLevelParam(this.level,1)+Pt.DEFAULT_DURATION}};let ht=Pt;s(ht,"DEFAULT_CUSS_POWER",0),s(ht,"DEFAULT_DURATION",0);const Wt=class extends N{constructor(e,t,i){super(e,t,i),this.index=1120,this.m_skillInfo=n.getLanguageStr(3015,this.extraBullet+1)}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Wt.DEFAULT_EXTRA_BULLET)}};let Rt=Wt;s(Rt,"DEFAULT_EXTRA_BULLET",.5);class le extends N{constructor(e,t,i){super(e,t,i),this.m_skillInfo=n.getLanguageStr(3017)}get floatDamageRate(){return this.data.getLevelParam(this.level,0)*this.level}}class ce extends N{constructor(e,t,i){super(e,t,i),this.m_skillInfo=""}get guideRatio(){return this.data.getLevelParam(this.level,0)}get bulletSpeedRate(){return this.data.getLevelParam(this.level,1)+1}get bulletAccSpeed(){return this.data.getLevelParam(this.level,2)}get guideInfo(){let e=null,t=this.guideRatio;return t<.1?e=n.getLanguageStr(3500):t<.2?e=n.getLanguageStr(3501):t<.3?e=n.getLanguageStr(3502):t<.4?e=n.getLanguageStr(3503):e=n.getLanguageStr(3504),e}}const Ot=class extends N{constructor(e,t,i){super(e,t,i),this.index=1140,this.m_skillInfo=n.getLanguageStr(3019,h.toPercentage(this.chances),this.duration.toFixed(1))}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Ot.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+Ot.DEFAULT_DURATION}};let lt=Ot;s(lt,"DEFAULT_CHANCES",.05),s(lt,"DEFAULT_DURATION",0);const Yt=class extends N{constructor(e,t,i){super(e,t,i),this.index=1130,this.m_skillInfo=n.getLanguageStr(3016)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Yt.DEFAULT_CHANCES,1),0)}};let mt=Yt;s(mt,"DEFAULT_CHANCES",.05);const pt=class extends N{constructor(t,i,a){super(t,i,a);s(this,"m_poisonRate",-1);this.index=1150,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(3e3,Math.round(this.poisonRate*this.tower.damage()),this.duration.toFixed(0))}}get poisonRate(){return this.m_poisonRate<0?this.data.getLevelParam(this.level,0)*this.level+pt.DEFAULT_POISON_RATE:this.m_poisonRate}set poisonRate(t){this.m_poisonRate<0&&(this.m_poisonRate=t)}get duration(){return this.data.getLevelParam(this.level,1)+pt.DEFAULT_DURATION}};let ct=pt;s(ct,"DEFAULT_POISON_RATE",0),s(ct,"DEFAULT_DURATION",0);const vt=class extends N{constructor(e,t,i){super(e,t,i),this.index=1160,this.m_skillInfo=n.getLanguageStr(3020,h.toPercentage(this.reducedDefenseRate),this.duration.toFixed(1))}get reducedDefenseRate(){return this.data.getLevelParam(this.level,0)*this.level+vt.DEFAULT_REDUCED_DEFENSE_RATE}get duration(){return this.data.getLevelParam(this.level,1)+vt.DEFAULT_DURATION}};let ut=vt;s(ut,"DEFAULT_REDUCED_DEFENSE_RATE",.1),s(ut,"DEFAULT_DURATION",0);const kt=class extends N{constructor(e,t,i){super(e,t,i),this.index=1170,this.m_skillInfo=n.getLanguageStr(3021,this.extraBullet+1)}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+kt.DEFAULT_EXTRA_BULLET)}};let ft=kt;s(ft,"DEFAULT_EXTRA_BULLET",.5);const Ft=class extends N{constructor(e,t,i){super(e,t,i),this.index=1180,this.m_skillInfo=n.getLanguageStr(3022,h.toPercentage(this.chances),this.duration.toFixed(1))}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Ft.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+Ft.DEFAULT_DURATION}};let At=Ft;s(At,"DEFAULT_CHANCES",.05),s(At,"DEFAULT_DURATION",0);const Ut=class extends N{constructor(e,t,i){super(e,t,i),this.index=1190,this.m_skillInfo=n.getLanguageStr(3023,h.toPercentage(this.slowRate),this.duration.toFixed(1))}get slowRate(){return this.data.getLevelParam(this.level,0)*this.level+Ut.DEFAULT_SLOW_RATE}get duration(){return this.data.getLevelParam(this.level,1)+Ut.DEFAULT_DURATION}};let gt=Ut;s(gt,"DEFAULT_SLOW_RATE",.1),s(gt,"DEFAULT_DURATION",0);const ot=class extends N{constructor(e,t,i){super(e,t,i),this.index=1200,this.m_skillInfo=n.getLanguageStr(3024,this.throughoutNum)}get throughoutNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+ot.DEFAULT_THROUGHOUT_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+ot.DEFAULT_NEXT_EFFECT_RATE,ot.MAX_NEXT_EFFECT_RATE)}};let it=ot;s(it,"DEFAULT_THROUGHOUT_NUM",.5),s(it,"DEFAULT_NEXT_EFFECT_RATE",0),s(it,"MAX_NEXT_EFFECT_RATE",1);const Mt=class extends N{constructor(e,t,i){super(e,t,i),this.index=1210,this.m_skillInfo=n.getLanguageStr(3025,h.toPercentage(this.chances),this.duration.toFixed(1))}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Mt.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+Mt.DEFAULT_DURATION}};let Et=Mt;s(Et,"DEFAULT_CHANCES",0),s(Et,"DEFAULT_DURATION",0);const Nt=class extends $t{constructor(t,i,a,l=!1){super(t,i,l);s(this,"monster");s(this,"m_levelMax",0);this.monster=a,this.m_data.typeId=v.TYPE_MONSTER_SKILL}static getKindName(t){switch(t){case r.KIND_FLY:return n.getLanguageStr(2507);case r.KIND_AIRBORNE:return n.getLanguageStr(2510);case r.KIND_RESIST_FIRE:return n.getLanguageStr(2515,n.getLanguageStr(2710));case r.KIND_RESIST_FROST:return n.getLanguageStr(2515,n.getLanguageStr(2711));case r.KIND_RESIST_POISON:return n.getLanguageStr(2515,n.getLanguageStr(2712));case r.KIND_RESIST_SLOW:return n.getLanguageStr(2515,n.getLanguageStr(2719));case r.KIND_RESIST_BEAT:return n.getLanguageStr(2515,n.getLanguageStr(2717));case r.KIND_RESIST_SILENCE:return n.getLanguageStr(2515,n.getLanguageStr(2722));case r.KIND_RESIST_VERTIGO:return n.getLanguageStr(2515,n.getLanguageStr(2715));case r.KIND_RESIST_CRIT:return n.getLanguageStr(2515,n.getLanguageStr(2716));case r.KIND_RESIST_LIGHT:return n.getLanguageStr(2515,n.getLanguageStr(2714));case r.KIND_RESIST_INTIMIDATE:return n.getLanguageStr(2515,n.getLanguageStr(2718));case r.KIND_RESIST_STRSMOOTH:return n.getLanguageStr(2723);case r.KIND_SLOWF:return n.getLanguageStr(2725);case r.KIND_WEAK_FIRE:return n.getLanguageStr(2516,n.getLanguageStr(2710));case r.KIND_WEAK_FROST:return n.getLanguageStr(2516,n.getLanguageStr(2711));case r.KIND_WEAK_POISON:return n.getLanguageStr(2516,n.getLanguageStr(2712));case r.KIND_WEAK_SLOW:return n.getLanguageStr(2516,n.getLanguageStr(2719));case r.KIND_WEAK_BEAT:return n.getLanguageStr(2516,n.getLanguageStr(2717));case r.KIND_WEAK_SILENCE:return n.getLanguageStr(2516,n.getLanguageStr(2722));case r.KIND_WEAK_VERTIGO:return n.getLanguageStr(2516,n.getLanguageStr(2715));case r.KIND_WEAK_CRIT:return n.getLanguageStr(2516,n.getLanguageStr(2716));case r.KIND_WEAK_LIGHT:return n.getLanguageStr(2516,n.getLanguageStr(2714));case r.KIND_WEAK_INTIMIDATE:return n.getLanguageStr(2516,n.getLanguageStr(2718));case r.KIND_ISOLATION:return n.getLanguageStr(2517);case r.KIND_RUN:return n.getLanguageStr(2500);case r.KIND_MIRROR:return n.getLanguageStr(2501);case r.KIND_SUMMON:return n.getLanguageStr(2502);case r.KIND_CLOUD:return n.getLanguageStr(2503);case r.KIND_CURE:return n.getLanguageStr(2504);case r.KIND_BLINK:return n.getLanguageStr(2505);case r.KIND_HIDE:return n.getLanguageStr(2506);case r.KIND_RELIVE:return n.getLanguageStr(2508);case r.KIND_SUICIDE:return n.getLanguageStr(2509);case r.KIND_SHIELD:return n.getLanguageStr(2511);case r.KIND_SNEER:return n.getLanguageStr(2512);case r.KIND_REINCARNATE:return n.getLanguageStr(2514);case r.KIND_TRANSFORM:return n.getLanguageStr(2513);case r.KIND_LINKS:return n.getLanguageStr(2727);default:return""}}get name(){return this.canLevelUp(1)?n.getLanguageStr(2416,this.data.name,this.level):this.data.name}get isDebuff(){return this.grade.indexOf(Nt.RES_FG_X)!=-1}get skillSign(){return this.isDebuff?jt(n.getLanguageStr(2422),0,!0,13):jt(n.getLanguageStr(2421),16711680,!0,13)}get isDowerSkill(){return!1}get isLearnSkill(){return!1}getConflictStr(){let t=null,i=0,a=0,l=O.$_conflict_skill_kind,E="";for(i=0;i<l.length;i++)if(t=l[i],t.indexOf(this.data.kindId)!=-1)for(a=0;a<t.length;a++)t[a]!=this.data.kindId&&(E+=Nt.getKindName(t[a]),E+=n.getLanguageStr(2406));return E.length>0&&(E=E.slice(0,E.length-1)),E}canLevelUp(t=-1){return t<0&&(t=this.level),t<this.levelMax}get levelMax(){let t=null,i=null,a=0;if(this.m_levelMax<=0)if(t=O.$_skill_lvup_spend,i=this.grade,t[i]){for(a=1;a<100&&t[i][String(a)];a++);this.m_levelMax=a}else this.m_levelMax=1;return this.m_levelMax}levelUpSpend(t=-1){t<0&&(t=this.level);let i=O.$_skill_lvup_spend,a=this.grade;return i[a]&&i[a][String(t)]?i[a][String(t)]:null}get skillScore(){let t=O.$_skill_grade_score,i=this.grade;return t[i]&&t[i][String(this.level)]?t[i][String(this.level)]:1}get grade(){let t=this.data.id,i=t.indexOf("_");return i==-1?Nt.RES_FG_X:t.slice(i+1,t.length)}isEventSkill(){switch(this.data.kindId){case r.KIND_RUN:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case r.KIND_FLY:return new Ee(this.data.id,this.level,this.monster);case r.KIND_AIRBORNE:return new Bt(this.data.id,this.level,this.monster);case r.KIND_RESIST_FIRE:case r.KIND_RESIST_FROST:case r.KIND_RESIST_POISON:case r.KIND_RESIST_SLOW:case r.KIND_RESIST_BEAT:case r.KIND_RESIST_SILENCE:case r.KIND_RESIST_VERTIGO:case r.KIND_RESIST_CRIT:case r.KIND_RESIST_LIGHT:case r.KIND_RESIST_INTIMIDATE:case r.KIND_RESIST_STRSMOOTH:case r.KIND_SLOWF:case r.KIND_WEAK_FIRE:case r.KIND_WEAK_FROST:case r.KIND_WEAK_POISON:case r.KIND_WEAK_SLOW:case r.KIND_WEAK_BEAT:case r.KIND_WEAK_SILENCE:case r.KIND_WEAK_VERTIGO:case r.KIND_WEAK_CRIT:case r.KIND_WEAK_LIGHT:case r.KIND_WEAK_INTIMIDATE:return new H(this.data.id,this.level,this.monster);case r.KIND_ISOLATION:return new Ie(this.data.id,this.level,this.monster);case r.KIND_RUN:return new Te(this.data.id,this.level,this.monster);case r.KIND_MIRROR:return new Zt(this.data.id,this.level,this.monster);case r.KIND_SUMMON:return new zt(this.data.id,this.level,this.monster);case r.KIND_CLOUD:return new Ae(this.data.id,this.level,this.monster);case r.KIND_CURE:return new ge(this.data.id,this.level,this.monster);case r.KIND_BLINK:return new ue(this.data.id,this.level,this.monster);case r.KIND_HIDE:return new Ht(this.data.id,this.level,this.monster);case r.KIND_RELIVE:return new Jt(this.data.id,this.level,this.monster);case r.KIND_SUICIDE:return new Vt(this.data.id,this.level,this.monster);case r.KIND_SHIELD:return new Le(this.data.id,this.level,this.monster);case r.KIND_SNEER:return new oe(this.data.id,this.level,this.monster);case r.KIND_REINCARNATE:return new qt(this.data.id,this.level,this.monster);case r.KIND_TRANSFORM:return new Ne(this.data.id,this.level,this.monster);case r.KIND_LINKS:return new _e(this.data.id,this.level,this.monster);default:return this}}};let D=Nt;s(D,"RES_SKILL","skill_"),s(D,"RES_FG_A","A"),s(D,"RES_FG_B","B"),s(D,"RES_FG_C","C"),s(D,"RES_FG_Z","Z"),s(D,"RES_FG_X","X"),s(D,"RES_FG_0","0"),s(D,"RES_BG","bg"),s(D,"PHOTO_WIDTH",34),s(D,"PHOTO_HEIGHT",34),s(D,"PHOTO_ROUND",8);class w extends D{constructor(e,t,i){super(e,t,i)}warmup(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}cooldown(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}chances(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,2)}eventType(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,3)}duration(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,4)}refreshTag(e=!1){this.skillTag1=this.getTagEventType(),this.nextLevelSkillTag1=this.getTagEventType(this.level+1),this.skillTag2=this.getTagCooldown(),this.nextLevelSkillTag2=this.getTagCooldown(this.level+1),e&&(this.skillTag3=this.getTagDuration(),this.nextLevelSkillTag3=this.getTagDuration(this.level+1))}getTagEventType(e=-1){let t=0;e<0&&(e=this.level);let i="",a=this.eventType(e);if(a.length!=4){for(t=0;t<a.length;t++)a[t]==r.EVENT_RED?i+=n.getLanguageStr(2402)+n.getLanguageStr(2406):a[t]==r.EVENT_YELLOW?i+=n.getLanguageStr(2403)+n.getLanguageStr(2406):a[t]==r.EVENT_GREEN?i+=n.getLanguageStr(2404)+n.getLanguageStr(2406):a[t]==r.EVENT_FULL&&(i+=n.getLanguageStr(2405)+n.getLanguageStr(2406));i=i.slice(0,i.length-1),i=n.getLanguageStr(2400,i)}return i}getTagCooldown(e=-1){return e<0&&(e=this.level),""+n.getLanguageStr(2401,this.cooldown(e))}getTagDuration(e=-1){return e<0&&(e=this.level),""+n.getLanguageStr(2407,this.duration(e))}}class Bt extends D{constructor(e,t,i){super(e,t,i),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2201)}}heightSpeed(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}pathLengthMin(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}pathLengthMax(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,2)}}s(Bt,"BALLOON","balloon"),s(Bt,"DEFAULT_HEIGHT",2e3);class ue extends w{constructor(e,t,i){super(e,t,i),this.index=100,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2303,h.toGridStr(this.range())),this.m_nextLevelSkillInfo=n.getLanguageStr(2303,h.toGridStr(this.range(this.level+1))),this.refreshTag()}}range(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}}class Ae extends w{constructor(e,t,i){super(e,t,i),this.index=110,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2302,this.cloudTime()),this.m_nextLevelSkillInfo=n.getLanguageStr(2302,this.cloudTime(this.level+1)),this.refreshTag(!0)}}range(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}cloudTime(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}}class ge extends w{constructor(e,t,i){super(e,t,i),this.index=140,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2300,h.toGridStr(this.cureRange()),h.toPercentage(this.cureRate())),this.m_nextLevelSkillInfo=n.getLanguageStr(2300,h.toGridStr(this.cureRange(this.level+1)),h.toPercentage(this.cureRate(this.level+1))),this.refreshTag()}}cureRange(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}cureRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}}class Ee extends D{constructor(e,t,i){super(e,t,i),this.index=90,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2200),this.m_nextLevelSkillInfo=n.getLanguageStr(2200)}}get flyHeight(){return this.data.getLevelParam(this.level,0)}}class Ht extends w{constructor(e,t,i){super(e,t,i),this.index=150,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2305,this.duration()),this.m_nextLevelSkillInfo=n.getLanguageStr(2305,this.duration(this.level+1)),this.refreshTag()}}}s(Ht,"HIDE_TIME",1),s(Ht,"HIDE_ALPHA",.1);class Ie extends D{constructor(e,t,i){super(e,t,i),this.index=500,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2202)}}}class _e extends w{constructor(e,t,i){super(e,t,i),this.index=116,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2728,h.toGridStr(this.range()),h.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=n.getLanguageStr(2728,h.toGridStr(this.range(this.level+1)),h.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}shieldRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}}class Zt extends w{constructor(e,t,i){super(e,t,i),this.index=130,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2306,this.mirrorNum(),h.toPercentage(this.hpRate()),this.duration()),this.m_nextLevelSkillInfo=n.getLanguageStr(2306,this.mirrorNum(this.level+1),h.toPercentage(this.hpRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}mirrorNum(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}hpRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}}s(Zt,"DEFAULT_DISTANCE",750);class qt extends D{constructor(e,t,i){super(e,t,i),this.index=85,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2215,this.monsterName()),this.m_nextLevelSkillInfo=n.getLanguageStr(2215,this.monsterName(this.level+1))}}monsterIdList(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}monsterName(e=-1){let t=0,i=this.monsterIdList(e),a="";for(t=0;t<i.length;t++)a+=nt.getOnlyExample().getData(i[t]).name,a+=n.getLanguageStr(2406);return a.slice(0,a.length-1),a}}s(qt,"REINCARNATE_TIME",5);class Jt extends D{constructor(e,t,i){super(e,t,i),this.index=170,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2213,this.reliveNum(),h.toPercentage(this.reliveHpRate())),this.m_nextLevelSkillInfo=n.getLanguageStr(2213,this.reliveNum(this.level+1),h.toPercentage(this.reliveHpRate(this.level+1)))}}reliveNum(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}reliveHpRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}}s(Jt,"RELIVE_TIME",8);class H extends D{constructor(t,i,a){super(t,i,a);s(this,"maxHP",0);this.index=300,this.m_updateFunction=function(){this.m_skillInfo=this.resistInfo(),this.m_nextLevelSkillInfo=this.resistInfo(this.level+1)}}getResist(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}getRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}getMaxHP(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}resistInfo(t=-1){let i=this.getResist(t),a="",l=h.toPercentage(Math.abs(i));return i==0||(i>0?a=n.getLanguageStr(2409):a=n.getLanguageStr(2408),this.data.kindId==r.KIND_SLOWF&&(a=h.toGridStr(this.getRange())),a=n.getLanguageStr(this.resistInfoNumber,a,l),this.data.kindId==r.KIND_RESIST_STRSMOOTH&&this.getMaxHP(t)>0&&(a+=n.getLanguageStr(2730,this.getMaxHP(t)))),a}get resistInfoNumber(){switch(this.data.kindId){case r.KIND_RESIST_FIRE:case r.KIND_WEAK_FIRE:return 2203;case r.KIND_RESIST_FROST:case r.KIND_WEAK_FROST:return 2204;case r.KIND_RESIST_POISON:case r.KIND_WEAK_POISON:return 2205;case r.KIND_RESIST_SLOW:case r.KIND_WEAK_SLOW:return 2206;case r.KIND_RESIST_BEAT:case r.KIND_WEAK_BEAT:return 2207;case r.KIND_RESIST_SILENCE:case r.KIND_WEAK_SILENCE:return 2208;case r.KIND_RESIST_VERTIGO:case r.KIND_WEAK_VERTIGO:return 2209;case r.KIND_RESIST_CRIT:case r.KIND_WEAK_CRIT:return 2210;case r.KIND_RESIST_LIGHT:case r.KIND_WEAK_LIGHT:return 2211;case r.KIND_RESIST_INTIMIDATE:case r.KIND_WEAK_INTIMIDATE:return 2212;case r.KIND_RESIST_STRSMOOTH:return 2724;case r.KIND_SLOWF:return 2726;default:return 0}}}s(H,"IMMUNITY",2701),s(H,"RESIST_SUPER",2702),s(H,"RESIST_HIGH",2703),s(H,"RESIST",2704),s(H,"FEAR",2705),s(H,"FEAR_HIGH",2706),s(H,"FEAR_SUPER",2707);class Te extends w{constructor(e,t,i){super(e,t,i),this.index=160,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2304,h.toPercentage(this.speedRate()-1),this.duration()),this.m_nextLevelSkillInfo=n.getLanguageStr(2304,h.toPercentage(this.speedRate(this.level+1)-1),this.duration(this.level+1)),this.refreshTag()}}speedRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)+1}}class Le extends w{constructor(e,t,i){super(e,t,i),this.index=105,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2308,h.toPercentage(this.shieldRate()),this.shieldTime()),this.m_nextLevelSkillInfo=n.getLanguageStr(2308,h.toPercentage(this.shieldRate(this.level+1)),this.shieldTime(this.level+1)),this.refreshTag(!0)}}range(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}shieldTime(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}shieldRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,7)}}class oe extends w{constructor(e,t,i){super(e,t,i),this.index=106,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2309,h.toGridStr(this.range()),h.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=n.getLanguageStr(2309,h.toGridStr(this.range(this.level+1)),h.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}shieldRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}}class Vt extends D{constructor(e,t,i){super(e,t,i),this.index=185,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2214,h.toGridStr(this.cloudRange()),this.cloudTime()),this.m_nextLevelSkillInfo=n.getLanguageStr(2214,h.toGridStr(this.cloudRange(this.level+1)),this.cloudTime(this.level+1))}}cloudRange(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}cloudTime(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}}s(Vt,"isEveryTime",!0),s(Vt,"SUICIDE_TIME",.5);class zt extends w{constructor(e,t,i){super(e,t,i),this.index=120,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2301,this.summonNum(),h.toPercentage(this.hpRate()),this.summonName()),this.m_nextLevelSkillInfo=n.getLanguageStr(2301,this.summonNum(this.level+1),h.toPercentage(this.hpRate(this.level+1)),this.summonName(this.level+1)),this.refreshTag(!0)}}summonId(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}summonName(e=-1){return e<0&&(e=this.level),nt.getOnlyExample().getData(this.summonId(e)).name}summonNum(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}hpRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,7)}}s(zt,"DEFAULT_DISTANCE",750);class Ne extends w{constructor(e,t,i){super(e,t,i),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=n.getLanguageStr(2307,this.transformName()),this.m_nextLevelSkillInfo=n.getLanguageStr(2307,this.transformName(this.level+1)),this.refreshTag(!0)}}transformId(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}transformName(e=-1){return e<0&&(e=this.level),nt.getOnlyExample().getData(this.transformId(e)).name}}class de extends yt{constructor(t,i=1){super();s(this,"level");this.m_data=Dt.getOnlyExample().getData(t),this.level=i}get skillsPackageData(){return this.m_data}}class Qt{}s(Qt,"COLOR_LIST",[6316128,13631488,13668352,43520,28927,8913056,0]);const y=class extends L{constructor(t){super(t);s(this,"m_price");s(this,"priceCoin",0);s(this,"priceGold",0);s(this,"priceScore",0);s(this,"unlockMapId","");s(this,"index",0);this.m_price=t[y.DATA_PRICE],this.initPrice(),this.unlockMapId=t[y.DATA_UNLOCK_MAP_ID],this.index=t[y.DATA_INDEX]}get price(){return this instanceof p&&f.currentMap&&f.currentMap.isDefendMap&&this.campPrice instanceof Array?this.campPrice:this.m_price}initPrice(){let t=this.price;if(t)if(t instanceof Array){const i=t;i[0]==y.DATA_COIN?this.priceCoin=i[1]:i[0]==y.DATA_GOLD?this.priceGold=i[1]:i[0]==y.DATA_SCORE&&(this.priceScore=i[1])}else this.priceCoin=t[y.DATA_COIN],this.priceGold=t[y.DATA_GOLD],this.priceScore=t[y.DATA_SCORE]}get isRare(){if(this.priceCoin>0){if(this.priceCoin>=O.$_rare_item_coin||this.index<0)return!0}else if(this.priceScore>0&&(this.priceScore>=O.$_rare_item_invite_score||this.index<0))return!0;return!1}};let G=y;s(G,"DATA_PRICE","price"),s(G,"DATA_UNLOCK_MAP_ID","unlock_mid"),s(G,"DATA_COIN","coin"),s(G,"DATA_GOLD","gold"),s(G,"DATA_SCORE","invite_score"),s(G,"DATA_INDEX","index");const V=class extends G{constructor(t){super(t);s(this,"gemLevel");s(this,"towerSkillPackage");s(this,"nextLevelId");s(this,"colorIndex");this.typeId=L.TYPE_GEM_ITEM,this.gemLevel=t[V.DATA_GEM_LEVEL],this.towerSkillPackage=t[V.DATA_TOWER_SKILL_PACKAGE],this.nextLevelId=t[V.DATA_NEXT_LEVEL_ID],this.colorIndex=t[V.DATA_COLOR_INDEX],this.res=this.resString}getSkillPackage(t){if(this.towerSkillPackage==null)return null;let i=/\D/gi;t=t.match(i).join("");let a=this.towerSkillPackage[t];return a==null?null:new de(a[V.SKILL_PACKAGE_ID],a[V.SKILL_PACKAGE_LEVEL])}get color(){return Qt.COLOR_LIST[this.colorIndex]}get resString(){return"hong"+this.gemLevel}};let U=V;s(U,"TYPE_PURE","typePure"),s(U,"TYPE_MIX","typeMix"),s(U,"DATA_GEM_LEVEL","gamLevel"),s(U,"DATA_TOWER_SKILL_PACKAGE","sp"),s(U,"DATA_NEXT_LEVEL_ID","nextId"),s(U,"DATA_COLOR_INDEX","color"),s(U,"SKILL_PACKAGE_ID","id"),s(U,"SKILL_PACKAGE_LEVEL","lv");const j=class extends J{constructor(){super(),j.onlyExample=this,this.loadData(O.$_global_properties[L.TYPE_GEM_ITEM])}static getOnlyExample(){return j.onlyExample==null&&(j.onlyExample=new j),j.onlyExample}loadData(e){let t;for(t in e)this.m_manager[t]=new U(e[t])}initData(){}getData(e){return this.getDataById(e)}};let wt=j;s(wt,"onlyExample");const P=class extends G{constructor(t){super(t);s(this,"skillPackageId");s(this,"skillPackageLevel");s(this,"skills");s(this,"xGrid");s(this,"yGrid");if(this.skillPackageId=t[P.DATA_SKILL_PACKAGE_ID],this.skillPackageLevel=t[P.DATA_SKILL_PACKAGE_LEVEL],t[P.DATA_SKILLS]instanceof Array)this.skills=t[P.DATA_SKILLS];else if(t[P.DATA_SKILLS]instanceof Object){this.skills=[];for(const i in t[P.DATA_SKILLS])this.skills.push({skid:i,lev:t[P.DATA_SKILLS][i]})}t[P.DATA_X_GRID]?this.xGrid=t[P.DATA_X_GRID]:this.xGrid=1,t[P.DATA_Y_GRID]?this.yGrid=t[P.DATA_Y_GRID]:this.yGrid=1}};let _=P;s(_,"DATA_A","a"),s(_,"DATA_B","b"),s(_,"DATA_C","c"),s(_,"DATA_D","d"),s(_,"DATA_SKILL_PACKAGE_ID","skill"),s(_,"DATA_SKILL_PACKAGE_LEVEL","skillLv"),s(_,"DATA_SKILLS","skills"),s(_,"DATA_X_GRID","x_grid"),s(_,"DATA_Y_GRID","y_grid");const m=class extends _{constructor(t){super(t);s(this,"m_buildValueA",0);s(this,"m_buildValueB",0);s(this,"m_buildValueC",0);s(this,"m_campPrice",["",0]);s(this,"m_campBuildValueA",0);s(this,"m_campBuildValueB",0);s(this,"m_campBuildValueC",0);s(this,"range");s(this,"rate");s(this,"limitNum");t[m.DATA_BUILD_VALUE]?(this.m_buildValueA=t[m.DATA_BUILD_VALUE][_.DATA_A],this.m_buildValueB=t[m.DATA_BUILD_VALUE][_.DATA_B],this.m_buildValueC=t[m.DATA_BUILD_VALUE][_.DATA_C]):t[m.DATA_EXP_VALUE]&&(this.m_buildValueA=t[m.DATA_EXP_VALUE][_.DATA_A],this.m_buildValueB=t[m.DATA_EXP_VALUE][_.DATA_B],this.m_buildValueC=t[m.DATA_EXP_VALUE][_.DATA_C]),t[m.DATA_CAMP_PRICE]&&(this.m_campPrice=t[m.DATA_CAMP_PRICE]),t[m.DATA_CAMP_BUILD_VALUE]&&(this.m_campBuildValueA=t[m.DATA_CAMP_BUILD_VALUE][_.DATA_A],this.m_campBuildValueB=t[m.DATA_CAMP_BUILD_VALUE][_.DATA_B],this.m_campBuildValueC=t[m.DATA_CAMP_BUILD_VALUE][_.DATA_C]),this.range=t[m.DATA_RANGE],this.rate=Math.round(t[m.DATA_RATE]*10),this.limitNum=t[m.DATA_LIMIT_NUM]}get buildValueA(){return f.currentMap&&f.currentMap.isDefendMap?this.m_campBuildValueA:this.m_buildValueA}get buildValueB(){return f.currentMap&&f.currentMap.isDefendMap?this.m_campBuildValueB:this.m_buildValueB}get buildValueC(){return f.currentMap&&f.currentMap.isDefendMap?this.m_campBuildValueC:this.m_buildValueC}get campPrice(){return this.m_campPrice}get buildCostPrice(){return this.price[0]}get buildCost(){return this.price[1]}get buildValueAConst(){return this.m_buildValueA}get buildValueBConst(){return this.m_buildValueB}get buildValueCConst(){return this.m_buildValueC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}};let p=m;s(p,"DATA_BUILD_VALUE","build_val"),s(p,"DATA_EXP_VALUE","exp_val"),s(p,"DATA_CAMP_PRICE","camp_price"),s(p,"DATA_CAMP_BUILD_VALUE","camp_build_val"),s(p,"DATA_RANGE","range"),s(p,"DATA_RATE","rate"),s(p,"DATA_LIMIT_NUM","limit_num");const x=class extends p{constructor(t){super(t);s(this,"valueList");s(this,"effectType");s(this,"effectKind");s(this,"effectRange");s(this,"useNum");s(this,"colddown");s(this,"delay");s(this,"attackEffectId");this.typeId=L.TYPE_TRAP_ITEM,this.valueList=t[x.DATA_VALUE_LIST],this.effectType=t[x.DATA_EFFECT_TYPE],this.effectKind=t[x.DATA_EFFECT_KIND],t[x.DATA_USE_NUM]?this.useNum=t[x.DATA_USE_NUM]:this.useNum=1,t[x.DATA_COLDDOWN]?this.colddown=t[x.DATA_COLDDOWN]:this.colddown=.1,t[x.DATA_DELAY]?this.delay=t[x.DATA_DELAY]:this.delay=0,t[x.DATA_EFFECT_RANGE]?this.effectRange=t[x.DATA_EFFECT_RANGE]:this.effectRange=this.range,this.attackEffectId=t[x.DATA_EFFECT]}};let d=x;s(d,"KIND_BLAST","1"),s(d,"KIND_DAMAGE","2"),s(d,"KIND_VERTIGO","3"),s(d,"KIND_SLOW","4"),s(d,"KIND_BEAT_BACK","5"),s(d,"KIND_COLD_BULLET","50"),s(d,"KIND_BULLET","100"),s(d,"KIND_BULLET_RANDOM","101"),s(d,"EFFECT_TYPE_FLOOR","1"),s(d,"EFFECT_TYPE_AIR","2"),s(d,"EFFECT_TYPE_ALL","3"),s(d,"EFFECT_TYPE_LIGHTNING","4"),s(d,"EFFECT_KIND_SINGLE","1"),s(d,"EFFECT_KIND_MULTI","2"),s(d,"DATA_VALUE_LIST","value"),s(d,"DATA_EFFECT_TYPE","effectType"),s(d,"DATA_EFFECT_KIND","effectKind"),s(d,"DATA_EFFECT_RANGE","effectRange"),s(d,"DATA_USE_NUM","use_times"),s(d,"DATA_COLDDOWN","colddown"),s(d,"DATA_DELAY","delay"),s(d,"DATA_EFFECT","effect");class De extends p{constructor(t){super(t);s(this,"m_buildCostA");s(this,"m_buildCostB");s(this,"m_buildCostC");s(this,"m_campBuildCostA");s(this,"m_campBuildCostB");s(this,"m_campBuildCostC");s(this,"damageA");s(this,"damageB");s(this,"damageC");s(this,"bulletId","");s(this,"buffEffect");s(this,"levelMax");this.m_buildCostA=t.build_cost.a,this.m_buildCostB=t.build_cost.b,this.m_buildCostC=t.build_cost.c,this.m_campBuildCostA=t.camp_build_cost.a,this.m_campBuildCostB=t.camp_build_cost.b,this.m_campBuildCostC=t.camp_build_cost.c,this.damageA=t.damage.a,this.damageB=t.damage.b,this.damageC=t.damage.c,this.buffEffect=t.buffEffect,this.levelMax=t.lev_max}get buildCostA(){var t;return(t=f.currentMap)!=null&&t.isDefendMap?this.m_campBuildCostA:this.m_buildCostA}get buildCostB(){var t;return(t=f.currentMap)!=null&&t.isDefendMap?this.m_campBuildCostB:this.m_buildCostB}get buildCostC(){var t;return(t=f.currentMap)!=null&&t.isDefendMap?this.m_campBuildCostC:this.m_buildCostC}get buildCostAConst(){return this.m_buildCostA}get buildCostBConst(){return this.m_buildCostB}get buildCostCConst(){return this.m_buildCostC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}get isMagicTower(){return this.id=="xiangqianta"}}const $=class extends J{constructor(){super(),$.onlyExample=this,this.loadData(O.$_towerAtt_Obj)}static getOnlyExample(){return $.onlyExample==null&&($.onlyExample=new $),$.onlyExample}loadData(e){for(const t in e){const i=e[t];i[S.DATA_ID]=t,this.m_manager[t]=new De(e[t])}}getData(e){return this.getDataById(e)}};let Gt=$;s(Gt,"onlyExample");const b=class extends _{constructor(t){super(t);s(this,"shapeMode");s(this,"damageMode");s(this,"radii");s(this,"shadow");s(this,"fallAccSpeed");s(this,"floorPathId");s(this,"hitEffectId");this.shapeMode=t[b.DATA_SHAPE_MODE],this.damageMode=t[b.DATA_DAMAGE_MODE],this.radii=t[b.DATA_RADII],t[b.DATA_SHADOW]?this.shadow=t[b.DATA_SHADOW]:this.shadow=1,this.fallAccSpeed=t[b.DATA_FALL_ACC_SPEED],this.floorPathId=t[b.DATA_FLOOR_PATH_ID],this.hitEffectId=t[b.DATA_HIT_EFFECT_ID]}};let R=b;s(R,"SHAPE_COMMON",0),s(R,"SHAPE_DIRECTION",1),s(R,"SHAPE_ROLL",2),s(R,"DAMAGE_NULL",0),s(R,"DAMAGE_COMMON",1),s(R,"DAMAGE_PERFORATIVE",2),s(R,"DAMAGE_MAGICAL",3),s(R,"DAMAGE_SIEGE",4),s(R,"DAMAGE_MIXED",5),s(R,"FALL_ACC_SPEED_THRESHOLD",-7),s(R,"DATA_SHAPE_MODE","shapeMode"),s(R,"DATA_DAMAGE_MODE","damageMode"),s(R,"DATA_RADII","radii"),s(R,"DATA_SHADOW","shadow"),s(R,"DATA_FALL_ACC_SPEED","fallAcc"),s(R,"DATA_FLOOR_PATH_ID","path"),s(R,"DATA_HIT_EFFECT_ID","effect");const Z=class extends J{constructor(){super(),Z.onlyExample=this,this.loadData(O.$_bulletAtt_Obj)}static getOnlyExample(){return Z.onlyExample==null&&(Z.onlyExample=new Z),Z.onlyExample}loadData(e){for(const t in e){const i=e[t];i[S.DATA_ID]=t,this.m_manager[t]=new R(e[t])}}getData(e){return this.getDataById(e)}};let bt=Z;s(bt,"onlyExample");const o=class extends _{constructor(t){super(t);s(this,"hpMaxA");s(this,"hpMaxB");s(this,"hpMaxC");s(this,"expMaxA",0);s(this,"expMaxB",0);s(this,"expMaxC",0);s(this,"expMaxD",0);s(this,"speedBase");s(this,"charm");s(this,"height");s(this,"width");s(this,"speakList",[]);s(this,"population");t[o.DATA_HP_MAX]?(this.hpMaxA=t[o.DATA_HP_MAX][_.DATA_A],this.hpMaxB=t[o.DATA_HP_MAX][_.DATA_B],this.hpMaxC=t[o.DATA_HP_MAX][_.DATA_C]):(this.hpMaxA=t[o.DATA_HP_MAX_A],this.hpMaxB=t[o.DATA_HP_MAX_B],this.hpMaxC=t[o.DATA_HP_MAX_C]),t[o.DATA_EXP_MAX]&&(this.expMaxA=t[o.DATA_EXP_MAX][_.DATA_A],this.expMaxB=t[o.DATA_EXP_MAX][_.DATA_B],this.expMaxC=t[o.DATA_EXP_MAX][_.DATA_C],this.expMaxD=t[o.DATA_EXP_MAX][_.DATA_D]),this.speedBase=t[o.DATA_SPEED_BASE],this.charm=t[o.DATA_CHARM],this.height=t[o.DATA_HEIGHT],this.width=t[o.DATA_WIDTH],t[o.DATA_SPEAK_LIST]instanceof Array&&(this.speakList=t[o.DATA_SPEAK_LIST]),this.population=t[o.DATA_POPULATION]}getSpeak(t=0){if(this.speakList instanceof Array&&this.speakList.length>t){if(this.speakList[t]instanceof String)return this.speakList[t];if(this.speakList[t]instanceof Array){const i=this.speakList[t];return i[Math.floor(Math.random()*i.length)]}}return""}getSpeakEnter(){return this.getSpeak(o.SPEAK_ENTER)}getSpeakIdle(){return this.getSpeak(o.SPEAK_IDLE)}getSpeakInjury(){return this.getSpeak(o.SPEAK_INJURY)}getSpeakDie(){return this.getSpeak(o.SPEAK_DIE)}getSpeakInvade(){return this.getSpeak(o.SPEAK_INVADE)}getSpeakCast(){return this.getSpeak(o.SPEAK_CAST)}get isBoss(){return this.population>=100}get isRandomBoss(){return this.population==99}getHpMax(t,i=1){return Math.floor((this.hpMaxA+t*(this.hpMaxB+t*this.hpMaxC))*i)}};let T=o;s(T,"SPEAK_ENTER",0),s(T,"SPEAK_IDLE",1),s(T,"SPEAK_INJURY",2),s(T,"SPEAK_DIE",3),s(T,"SPEAK_INVADE",4),s(T,"SPEAK_CAST",5),s(T,"DEFENSE_NULL",0),s(T,"DEFENSE_LIGHT",1),s(T,"DEFENSE_COMMON",2),s(T,"DEFENSE_HEAVY",3),s(T,"DEFENSE_BUILDING",4),s(T,"DEFENSE_BOSS",5),s(T,"DEFENSE_HOLY",6),s(T,"DEFENSE_INVINCIBLE",7),s(T,"DATA_HP_MAX","hp_factor"),s(T,"DATA_EXP_MAX","explev"),s(T,"DATA_HP_MAX_A","ha"),s(T,"DATA_HP_MAX_B","hb"),s(T,"DATA_HP_MAX_C","hc"),s(T,"DATA_SPEED_BASE","speed"),s(T,"DATA_CHARM","charm"),s(T,"DATA_HEIGHT","height"),s(T,"DATA_WIDTH","width"),s(T,"DATA_SPEAK_LIST","speak"),s(T,"DATA_POPULATION","pop");const q=class extends J{constructor(){super(),q.onlyExample=this,this.loadData(O.$_wolfAtt_Obj)}static getOnlyExample(){return q.onlyExample==null&&(q.onlyExample=new q),q.onlyExample}loadData(e){for(const t in e){const i=e[t];i[S.DATA_ID]=t,this.m_manager[t]=new T(i)}}getBossList(e){const t=[];if(!(e instanceof Array))return t;for(let i=0;i<e.length;i++){const a=this.getData(e[i]);a&&a.isBoss&&t.push(e[i])}return t}getRandomBossList(e){const t=[];if(!(e instanceof Array))return t;for(let i=0;i<e.length;i++){const a=this.getData(e[i]);a&&a.isRandomBoss&&t.push(e[i])}return t}getData(e){return this.getDataById(e)}};let nt=q;s(nt,"onlyExample");export{se as A,bt as B,ae as C,wt as G,nt as M,de as S,d as T,Gt as a,N as b,c,ne as d,he as e,re as f,jt as g,yt as h,Ke as i,f as j,D as k,me as l,fe as t};

import{g as K,h as q,v as c,t as O,j as f,n as p,A as S,k as n,w as i,l as d,z as b,G as J,J as P,Z as X,o as r,F as w,q as h,a1 as Z,V as H,W as Q,a3 as Y,a2 as ee,c as g,D as le}from"./c-.pnpm.7f1b424d.js";import{h as $,n as C}from"./c-unit.25af6ba0.js";import{M as D}from"./c-Monster.2aee4aae.js";import{t as ae}from"./c-translate.75fb4910.js";import{_ as te}from"./e-index.1d447eab.js";import"./c-BaseUnit.e944e696.js";const j=k=>(H("data-v-6a46d020"),k=k(),Q(),k),ne=j(()=>p("h1",null,"狼相关计算",-1)),oe=j(()=>p("p",null,"技能",-1)),de=K({__name:"wolf-calc",setup(k){const V=q(),y=c.sortBy(c.map($.$_wolfAtt_Obj,(e,l)=>({id:l,name:e.name,label:`${ae(l)} [${l}]`})),"id"),B=y.filter(e=>e.name.startsWith("camp_")),L=y.filter(e=>e.id.startsWith("D_")),z=c.difference(y,B,L),_=c.groupBy($.$_skillAtt_Obj.monsterSkill,e=>e.kindId);c.each(_,(e,l)=>_[l]=c.sortBy(e,"id")),console.log(_);const N=Object.keys(_).sort();c.map(_,(e,l)=>({label:l,value:l,children:e.map(s=>({value:s.id}))}));const t=O({wid:"al",level:1,levelMax:60,power:0,hpMax:0,expMax:0,speed:0,tableData:[],selected:[]}),I=new D("daihuil"),T=new C("WeakFire_X1",1,I).getSubClasses();m();const x=e=>O({kindId:e.data.kindId,id:e.data.id,name:e.data.name,level:e.level,levelMax:e.levelMax,score:e.skillScore,info:e.skillInfo}),A=()=>{var l;const e=x(T);t.tableData.push(e),(l=V.value)==null||l.toggleRowSelection(e,!0)},R=e=>{t.selected=e.map(l=>l.id),m()};function W(){var s;const e=new D(t.wid,t.level,1,0,[]);e.initSkills();const l=c.sortBy(e.skills,"index");t.speed=e.monsterData.speedBase,t.levelMax=e.levelMax,t.tableData=l.map(v=>x(v)),(s=V.value)==null||s.toggleAllSelection(),m()}function F(e){const l=new C(_[e.kindId][0].id,1,I).getSubClasses();Object.assign(e,x(l)),m()}function E(e){console.log(e);const l=new C(e.id,e.level,I).getSubClasses();Object.assign(e,x(l)),m()}function m(){let e=t.tableData.filter(s=>t.selected.includes(s.id)).map(s=>({skid:s.id,lev:s.level})),l=new D(t.wid,t.level,1,0,e,[]);l.refreshLevel(),t.hpMax=l.hpMax,t.expMax=l.expMax,t.power=l.power}return(e,l)=>{const s=le,v=Y,M=J,U=P,u=ee,G=X;return r(),f("div",null,[ne,p("p",null,[S(" 狼： "),n(M,{modelValue:d(t).wid,"onUpdate:modelValue":l[0]||(l[0]=a=>d(t).wid=a),onChange:W},{default:i(()=>[n(v,{label:"前线"},{default:i(()=>[(r(!0),f(w,null,h(d(z),a=>(r(),g(s,{key:a.id,label:a.label,value:a.id},null,8,["label","value"]))),128))]),_:1}),n(v,{label:"防线"},{default:i(()=>[(r(!0),f(w,null,h(d(B),a=>(r(),g(s,{key:a.id,label:a.label,value:a.id},null,8,["label","value"]))),128))]),_:1}),n(v,{label:"噩梦"},{default:i(()=>[(r(!0),f(w,null,h(d(L),a=>(r(),g(s,{key:a.id,label:a.label,value:a.id},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),p("p",null,[S(" 等级： "),n(U,{modelValue:d(t).level,"onUpdate:modelValue":l[1]||(l[1]=a=>d(t).level=a),min:1,onChange:m},null,8,["modelValue"]),S(" 最高等级："+b(d(t).levelMax),1)]),p("p",null,"升级经验："+b(d(t).expMax),1),p("p",null,"血量："+b(d(t).hpMax),1),p("p",null,"速度："+b(d(t).speed),1),p("p",null,"实力："+b(d(t).power),1),oe,n(d(Z),{ref_key:"skillTableRef",ref:V,data:d(t).tableData,style:{"font-size":"small"},onSelectionChange:R},{default:i(()=>[n(u,{type:"selection",width:30}),n(u,{label:"KindId",width:160,"header-align":"center"},{default:i(a=>[n(M,{modelValue:a.row.kindId,"onUpdate:modelValue":o=>a.row.kindId=o,onChange:o=>F(a.row),style:{"font-size":"small"}},{default:i(()=>[(r(!0),f(w,null,h(d(N),o=>(r(),g(s,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(u,{label:"Id",width:200,"header-align":"center"},{default:i(a=>[n(M,{modelValue:a.row.id,"onUpdate:modelValue":o=>a.row.id=o,onChange:o=>E(a.row),style:{"font-size":"small"}},{default:i(()=>[(r(!0),f(w,null,h(d(_)[a.row.kindId],o=>(r(),g(s,{key:o.id,label:o.id,value:o.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(u,{prop:"name",label:"Name",width:120,"header-align":"center",align:"center"}),n(u,{prop:"level",label:"Level",width:120,"header-align":"center",align:"center"},{default:i(a=>[n(U,{modelValue:a.row.level,"onUpdate:modelValue":o=>a.row.level=o,min:1,max:a.row.levelMax,size:"small",style:{width:"80px"},onChange:o=>E(a.row)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:1}),n(u,{prop:"levelMax",label:"Level Max",width:100,"header-align":"center",align:"center"}),n(u,{prop:"score",label:"Score",width:100,"header-align":"center",align:"center"}),n(u,{prop:"info",label:"Info"})]),_:1},8,["data"]),n(G,{onClick:A},{default:i(()=>[S("增加一行")]),_:1})])}}});const _e=te(de,[["__scopeId","data-v-6a46d020"]]);export{_e as default};

var ql=Object.defineProperty;var Zl=(h,t,e)=>t in h?ql(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var a=(h,t,e)=>(Zl(h,typeof t!="symbol"?t+"":t,e),e);import{ae as bt,o as A,S as F,R as _,an as Nl,T as vl,ao as Jl,E as oe,b as he,h as Ql,c as v,O as r,P as k,ag as j,u,A as nt,a as L,V as x,W as N,X as Ie,x as z,U as xl,J as De,ap as Et,aq as bl,n as ea,L as ta,d as Tl,I as la,ar as wt,as as Rt}from"./@vue-d0ae6b81.js";/* empty css                    */import{E as aa,a as sa,b as Ye,c as ut,d as je,e as ze,f as qe,g as ct,h as Ne,i as dt,j as gt,k as ia,l as dl,m as wl,n as na,o as _l,p as Rl,q as Cl,r as ra,s as oa,t as ua}from"./element-plus-f2c12185.js";import{l as ca}from"./vatex-58321dc0.js";import{c as da,a as _a,u as ha,b as ma}from"./vue-router-ac94e6e4.js";import{l as X}from"./lodash-es-f1aaab28.js";import{u as ga}from"./vue-clipboard3-9b4f599e.js";import{u as fa,k as pa}from"./@element-plus-701c722f.js";import{V as Aa}from"./vue-json-pretty-c7b461f1.js";import{B as hl}from"./vue-echarts-ae997641.js";import{C as Ea}from"./color-b12075af.js";import{u as ml,i as gl,a as fl,b as pl,c as Al,d as El,e as Ia,f as Ta,g as Da}from"./echarts-7521af5c.js";import{d as Ae,l as La,a as Dl,b as Sa,w as Na}from"./assets-ed5b024e.js";import{X as va}from"./x2js-8ae16efe.js";import"./async-validator-dee29e8b.js";import"./@vueuse-569d60dd.js";import"./@ctrl-f8748455.js";import"./@sxzz-c75af06c.js";import"./memoize-one-297ddbcb.js";import"./escape-html-099bfe2e.js";import"./@xmldom-8222efe8.js";import"./normalize-wheel-es-ed76fb12.js";import"./katex-32f78592.js";import"./clipboard-77e6e508.js";import"./vue-73d94913.js";import"./resize-detector-a5205554.js";import"./color-string-327061cf.js";import"./color-name-b7949e8c.js";import"./simple-swizzle-d8bc59f1.js";import"./is-arrayish-4445f582.js";import"./color-convert-01838e1d.js";import"./tslib-54e39b60.js";import"./zrender-80a93648.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();const Ze=(h,t)=>{const e=h.__vccOpts||h;for(const[l,s]of t)e[l]=s;return e},xa={};function ba(h,t){const e=bt("router-view");return A(),F(e,null,{default:_(({Component:l})=>[(A(),F(Nl,null,[(A(),F(vl(l)))],1024))]),_:1})}const wa=Ze(xa,[["render",ba]]),Ra="modulepreload",Ca=function(h,t){return new URL(h,t).href},Ll={},Ee=function(t,e,l){if(!e||e.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(e.map(i=>{if(i=Ca(i,l),i in Ll)return;Ll[i]=!0;const o=i.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(!!l)for(let E=s.length-1;E>=0;E--){const b=s[E];if(b.href===i&&(!o||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${n}`))return;const g=document.createElement("link");if(g.rel=o?"stylesheet":Ra,o||(g.as="script",g.crossOrigin=""),g.href=i,document.head.appendChild(g),o)return new Promise((E,b)=>{g.addEventListener("load",E),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Oa=(h,t)=>{const e=h[t];return e?typeof e=="function"?e():Promise.resolve(e):new Promise((l,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})},Ol=[{name:"user",label:"User"},{name:"towers",label:"Towers"},{name:"wolfs",label:"Wolfs"},{name:"umaps",label:"Umaps"},{name:"umapdetail",label:"Umap Detail"},{name:"dmaps",label:"Dream Maps"},{name:"dmap-detail",label:"Dream Map Detail"},{name:"wolf-calc",label:"Wolf Calculation"},{name:"baoxiang",label:"Baoxiang Properties"},{name:"dream-design",label:"Dream Design"},{name:"tower-design",label:"Tower Design"}],ya=[{path:"/",name:"index",component:()=>Ee(()=>Promise.resolve().then(()=>Ua),void 0,import.meta.url),children:Ol.map(h=>({path:"/"+h.name,name:h.name,meta:{keepAlive:!0},component:()=>Oa(Object.assign({"../views/sections/baoxiang.vue":()=>Ee(()=>Promise.resolve().then(()=>Ja),void 0,import.meta.url),"../views/sections/dmap-detail.vue":()=>Ee(()=>Promise.resolve().then(()=>Ds),void 0,import.meta.url),"../views/sections/dmaps.vue":()=>Ee(()=>Promise.resolve().then(()=>xs),void 0,import.meta.url),"../views/sections/dream-design.vue":()=>Ee(()=>Promise.resolve().then(()=>Cs),void 0,import.meta.url),"../views/sections/tower-design.vue":()=>Ee(()=>Promise.resolve().then(()=>Bs),void 0,import.meta.url),"../views/sections/towers.vue":()=>Ee(()=>Promise.resolve().then(()=>Ys),void 0,import.meta.url),"../views/sections/umapdetail.vue":()=>Ee(()=>Promise.resolve().then(()=>ui),void 0,import.meta.url),"../views/sections/umaps.vue":()=>Ee(()=>Promise.resolve().then(()=>gi),void 0,import.meta.url),"../views/sections/user.vue":()=>Ee(()=>Promise.resolve().then(()=>pi),void 0,import.meta.url),"../views/sections/wolf-calc.vue":()=>Ee(()=>Promise.resolve().then(()=>Li),void 0,import.meta.url),"../views/sections/wolfs.vue":()=>Ee(()=>Promise.resolve().then(()=>Vi),void 0,import.meta.url)}),`../views/sections/${h.name}.vue`)}))}],Pa=da({history:_a("/tdsheepvillage-view/"),routes:ya});const yl=Jl(wa);yl.use(Pa).use(ca);yl.mount("#app");const Ka={class:"content"},Ma=oe({__name:"index",setup(h){const t=ha(),e=ma(),l=he(""),s=(i,o)=>{t.push({name:i.paneName})};return Ql(()=>{l.value=e.name}),(i,o)=>{const n=aa,d=sa,g=bt("router-view");return A(),v("main",null,[r(d,{modelValue:u(l),"onUpdate:modelValue":o[0]||(o[0]=E=>nt(l)?l.value=E:null),type:"card",onTabClick:s},{default:_(()=>[(A(!0),v(k,null,j(u(Ol),E=>(A(),F(n,{key:E.name,label:E.label,name:E.name},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),L("div",Ka,[r(g,null,{default:_(({Component:E})=>[(A(),F(Nl,null,[(A(),F(vl(E)))],1024))]),_:1})])])}}});const Ua=Object.freeze(Object.defineProperty({__proto__:null,default:Ma},Symbol.toStringTag,{value:"Module"}));function Fa(h,t=!1){t||(h=h.toLowerCase());let e=1315423911;for(let l=h.length-1;l>=0;l--)e^=(e<<5)+h.charCodeAt(l)+(e>>2);return e&2147483647}const ka=function(h){return/^[a-zA-Z]+$/.test(h)},Va=function(h,t){return h<t?-1:h>t?1:0};function*$a(h){let t=0;for(const e of h)t+=e,yield t}function Be(h){if(h===0)return 1;if(h=Math.abs(h),h%1===0)return Math.pow(10,Math.floor(Math.log10(h)));const t=h.toString();return Math.pow(10,t.indexOf(".")-t.length+1)}function Ct(h){return X.mapValues(h,(t,e)=>Ot(t,e))}function Ot(h,t){return X.mapValues(h,(e,l)=>Ba(e,t,l))}function Ba(h,t,e){return{...h,type:t,id:e}}const m=function(){const h=new va;let t=Ae.camp_system_simple;const e=n=>parseInt(new RegExp("(?<=m).+(?=[A-Z]*)").exec(ka(n[n.length-1])?n:n+"A")[0],36),l=Object.keys(Ae.umaps).sort((n,d)=>Va(e(n),e(d))),s=Ct(Ae.building),i=Ct(Ae.skill),o={$_global_language_str:h.xml2dom(La),$_global_properties:Ct(Ae.properties),$_skillAtt_Obj:i,$_skillPackage_Obj:Ae.skill_package,$_map_Obj:Ae.umaps,$_towerAtt_Obj:s.tower,$_bulletAtt_Obj:Ae.bullet,$_wolfAtt_Obj:Ot(Ae.wolfs,"wolf"),$_wallAtt_Obj:s.wall,$_barrierAtt_Obj:Ae.barrier,$_level_up_gift:Ae.level_up_gift,$_pass_map_gift:Ae.pass_map_gift,$Maps:Ae.version_ctrl.Maps,$_wolfs_unlock_lv:t.camp_wolf_lv_max_factor,$_wolfs_unlock_gold:t.camp_wolf_gold_max_factor,$_camp_hold_time:t.hold_time,$_camp_pk_cd_time:t.pk_cd_time,$_camp_pk_times_max:t.pk_times_max,$_camp_defend_times_max:t.defend_times_max,$_camp_pk_arena_times_max:t.pk_arena_times_max,$_camp_defend_arena_times_max:t.defend_arena_times_max,$_camp_mining_rate:t.mine_rate,$_camp_sell_building_dis:t.sell_building_dis,$_tower_worth_factor:t.tower_worth_factor,$_wolf_worth_factor:t.wolf_worth_factor,$_defend_map_snarp_max:t.defend_map_snarp_max,$_defend_succ_factor:t.defend_succ_factor,$_defend_failed_factor:t.defend_failed_factor,$_defend_arena_succ_factor:t.defend_arena_succ_factor,$_defend_arena_failed_factor:t.defend_arena_failed_factor,$_conflict_skill_kind:t.conflict_skill_kind,$_skill_lvup_spend:t.skill_lvup_spend,$_skill_grade_score:t.skill_grade_score,$_camp_use_exp_wolf_max:t.use_exp_wolf_max,$_camp_use_exp_tower_max:t.use_exp_tower_max,$_camp_wolf_lv_max:t.wolf_lv_max,$_camp_need_user_level:t.camp_need_user_level,$_camp_arena_need_user_level:t.arena_need_user_level,$_camp_create_mine_help_max:t.create_mine_help_max,$_camp_create_mine_help_friends_num:t.create_mine_help_friends_num,umapsById:l.map(n=>[n,Ae.umaps[n]]),dream_data:Dl,dream_maps:Ot(Dl.dmaps,"dmaps"),dream_waves:Sa,skillTemplates:X.chain(Object.values(i.towerSkill)).groupBy(n=>n.kindId).mapValues(n=>({id:n[0].id,params:n[0].params})).value()};return console.log("init",o.umapsById),o}(),At=h=>X.mapValues(h,t=>{let e=t.name;return e.includes("^")?e.substring(e.indexOf("^")+1):e}),yt=Object.assign({},At(m.$_map_Obj),At(m.$_wolfAtt_Obj),At(m.$_towerAtt_Obj),...Object.values(m.$_global_properties).map(h=>At(h)));console.log("dict",yt);function Re(h){return typeof h=="string"?yt[h]:h.map(t=>yt[t])}const Ha={key:0},Ga={key:0},Wa={class:"ml-4"},Xa={key:1},Ya={key:1},ja={key:0},za={key:1},qa={class:"ml-4"},Za=oe({__name:"baoxiang",setup(h){const t=X.chain(m.$_global_properties.card).values().filter(e=>e.id.startsWith("baoxiang")).sortBy(e=>Math.abs(e.index)).value();return(e,l)=>{const s=Ye,i=ut,o=je;return A(),v("div",null,[r(o,{data:u(t),style:{"font-size":"small"}},{default:_(()=>[r(s,{label:"id",prop:"id",width:120}),r(s,{label:"name",prop:"name",width:160}),r(s,{label:"open_num",prop:"open_num",width:100}),r(s,{label:"info",prop:"info",width:400}),r(s,{label:"data"},{default:_(n=>[n.row.default_gift?(A(),v("ul",Ha,[(A(!0),v(k,null,j(n.row.default_gift,(d,g)=>(A(),v(k,{key:g},[String(g)=="properties"?(A(),v("li",Ga,[r(i,{type:"warning"},{default:_(()=>[x(N(g),1)]),_:2},1024),L("ul",Wa,[(A(!0),v(k,null,j(d,(E,b)=>(A(),v("li",{key:b},[r(i,null,{default:_(()=>[x(N(b),1)]),_:2},1024),(A(!0),v(k,null,j(E,(w,U)=>(A(),F(i,{key:U,type:"info",title:U},{default:_(()=>[x(N(u(Re)(String(U)))+": "+N(w),1)]),_:2},1032,["title"]))),128))]))),128))])])):(A(),v("li",Xa,[r(i,{type:"warning"},{default:_(()=>[x(N(g),1)]),_:2},1024),r(i,{type:"info"},{default:_(()=>[x(N(d),1)]),_:2},1024)]))],64))),128))])):Ie("",!0),n.row.data?(A(),v("ul",Ya,[(A(!0),v(k,null,j(n.row.data,d=>(A(),v(k,{key:d[0]},[d[1]=="invite_score"?(A(),v("li",ja,[r(i,{type:"success"},{default:_(()=>[x(N(d[0]),1)]),_:2},1024),r(i,{type:"warning"},{default:_(()=>[x(N(d[1]),1)]),_:2},1024),r(i,null,{default:_(()=>[x(N(d[2]),1)]),_:2},1024)])):Ie("",!0),d[1]=="properties"?(A(),v("li",za,[r(i,{type:"success"},{default:_(()=>[x(N(d[0]),1)]),_:2},1024),r(i,{type:"warning"},{default:_(()=>[x(N(d[1]),1)]),_:2},1024),L("ul",qa,[(A(!0),v(k,null,j(d[2],g=>(A(),v("li",{key:g[0]},[r(i,{type:"success"},{default:_(()=>[x(N(g[0]),1)]),_:2},1024),r(i,{type:"warning"},{default:_(()=>[x(N(g[1]),1)]),_:2},1024),r(i,null,{default:_(()=>[(A(!0),v(k,null,j(g[2],E=>(A(),F(i,{title:E,type:"info",key:E},{default:_(()=>[x(N(u(Re)(E)),1)]),_:2},1032,["title"]))),128))]),_:2},1024)]))),128))])])):Ie("",!0)],64))),128))])):Ie("",!0)]),_:1})]),_:1},8,["data"])])}}}),Ja=Object.freeze(Object.defineProperty({__proto__:null,default:Za},Symbol.toStringTag,{value:"Module"})),Te=class Te{static formatTime(t,e=!1){let l=t%60,s=Math.floor(t/60)%60,i=Math.floor(t/3600),o="";if(e){if(i>0)return o=i.toString()+c.getLanguageStr(21),o+(s.toString()+c.getLanguageStr(22));if(s>0)return o+=s.toString()+c.getLanguageStr(22),o+(l.toString()+c.getLanguageStr(23));l>=0&&(o+=l.toString()+c.getLanguageStr(23))}else i>=0&&(o=(i>9?i.toString():"0"+i.toString())+":"),s>=0&&(o+=(s>9?s.toString():"0"+s.toString())+":"),l>=0&&(o+=Math.floor(l)>9?Math.floor(l).toString():"0"+Math.floor(l).toString());return o}static formatTime_day(t){let e=Math.floor(t/3600),l=Math.floor(e/24),s=Math.ceil(t/60)%60,i=e%24,o="";return l>0&&(o=l.toString()+c.getLanguageStr(20)),i>0&&(o+=i.toString()+c.getLanguageStr(21)),s>0&&(o+=s.toString()+c.getLanguageStr(22)),o}static formatTime_M(t,e=!1){let l=Math.floor(t/60)%60,s=Math.floor(t/3600),i="";return e?s>0?(i=s.toString()+c.getLanguageStr(21),i+(l.toString()+c.getLanguageStr(22))):l>0?i+(l.toString()+c.getLanguageStr(22)):c.getLanguageStr(24):(s>=0&&(i=s.toString()+":"),l>=0&&(i+=l.toString()+":"),i)}static getElementNum(t){let e,l=0;for(e in t)l++;return l}static randomElement(t){let e,l=0,s=Te.getElementNum(t),i=Math.floor(Math.random()*s);for(e of t){if(l==i)return e;l++}return null}static formatHtmlText_normal(t,e=10,l=3355443,s=""){return Te.formatHtmlText(t,l,!1,14,s,e)}static getSimpleNumStr(t,e=!1){let l;return t>1e4?(l=e?c.getLanguageStr(116):c.getLanguageStr(108),Math.round(t/1e4)+l):String(t)}static fillSpace(t,e=10,l=!0){let s=0,i=0,o=0,n=0,d="";for(i=0;i<t.length;i++)o=t.charCodeAt(i),o>=32&&o<=126?s=1:s=2,n+=s;for(i=n;i<e;i++)d+=" ";return l?d+=t:d=t+d,d}static formatHtmlText(t,e=3355443,l=!1,s=14,i="",o=12,n=null){let d="",g="",E="#"+e.toString(16);return o<1e3?(d=t,g=Te.formatLine(d,`
`,o*2,n)):g=t,l?'<font color="'+E+'" size="'+s+'" face="'+i+'"><b>'+g+"</b></font>":'<font color="'+E+'" size="'+s+'" face="'+i+'">'+g+"</font>"}static getLine(t=40,e="=",l="",s=5){let i=0,o="";for(e==""&&(e="="),l==""&&(l="left"),i=0;i<t;i++)o+=e;return HtmlTextFormat.format(o,l,6316128,s)}static formatHtmlTextBr(t,e="left"){let l="";for(let s=0;s<t.length;s++)l+='<P ALIGN="'+e+'">'+t[s]+"</P>";return l}static formatLine(t,e=`
`,l=16,s=null){let i=0,o=0,n=0,d=null,g="",E=0;for(s==null&&(s=[]),l<=1&&(l=2),i=0;i<t.length;i++)n=t.charCodeAt(i),d=t.charAt(i),d==`
`?(E=0,g+=d):(s.indexOf(d)!=-1?o=0:n>=32&&n<=126?o=1:o=2,E+=o,E>l&&(g+=e,E=o),g+=d);return g}static clearLine(t){return t=t.replace(`
`,""),t=t.replace("<br>",""),t.replace("</br>","")}static isHtml(t){let e=t.indexOf("<"),l=t.indexOf(">");return e!=-1&&l!=-1&&e<l}static insertStr(t,e=`
`,l=4,s=1){let i="",o="",n=0;for(s<=0&&(s=int.MAX_VALUE),l<=0&&(l=1);n<s;)o=t.substr(n*l,l),n++,o.length!=l&&(i+=o),o+=e,i+=o;return i+t.substr(n*l)}static getGlobalAttValue_byID(t,e=0){return t["id_"+e]}static setObjAttributeValue(t,e,l){for(let s=0;s<e.length;s++)t[e[s][l]]=e[s];return t}static getObjAttributeValue(t,e){return t[e]==null&&t[e]==null?null:t[e]}static isNullAndUndefined(t){return t==null||t==null}static isNullForArray(t){return!(t!=null&&t.length>0)}static addObjectNewAtt(t,e){let l=null;if(!Te.isNullAndUndefined(e))for(l in e)t[l]=e[l];return t}static isSameDate(t,e){return!t||!e?!1:t.getUTCFullYear()==e.getUTCFullYear()&&t.getUTCMonth()==e.getUTCMonth()&&t.getUTCDate()==e.getUTCDate()}static getRandom(t,e){let l=0;return t==e?t:(t>e&&(l=t,t=e,e=l),l=e-t+1,Math.floor(t+Math.random()*l))}static replaceString(t,e,l){let s=new RegExp(e,"g");return t.replace(s,l)}static getDateSecond(t){return Math.floor(t.getTime()*.001)}static isNoChildrenInArr(t){let e=!1;return t!=null&&t.length>0?e=!1:e=!0,e}static isNoChildrenInObj(t){let e=0,l=null,s=!0;if(t){e=0;for(l in t)e++;e>0&&(s=!1)}return s}static toString(t,e=0,l=!1){let s=0,i=0,o=null,n="";if(e++,t==null)return"null";let d=typeof t,g=0;switch(d){case"number":return t.toString()+"";case"string":return'"'+t+'"';case"object":if(t instanceof Array){if(g=Te.getElementNum(t),g>1)for(e>1&&(n+=`
`),i=0;i<e-1;i++)n+="	";for(n+="[",s=0;s<t.length;s++){if(g>1)for(n+=`
`,i=0;i<e;i++)n+="	";n+=toString(t[s],e),n+=","}if(g>0&&(n=n.slice(0,n.length-1)),g>1)for(n+=`
`,i=0;i<e-1;i++)n+="	";n+="]"}else if(t instanceof Date)n="new Date("+t.getTime()+")";else{if(g=Te.getElementNum(t),g>1)for(e>1&&(n+=`
`),i=0;i<e-1;i++)n+="	";n+="{";for(o in t){if(g>1)for(n+=`
`,i=0;i<e;i++)n+="	";!isNaN(Number(o.slice(0,1)))||o.search(/[^a-zA-Z0-9_]/)!=-1?n+='"'+o+'":'+Te.toString(t[o],e):n+=o+":"+Te.toString(t[o],e),n+=","}if(g>0&&(n=n.slice(0,n.length-1)),g>1)for(n+=`
`,i=0;i<e-1;i++)n+="	";n+="}"}break;case"boolean":return t.toString()+""}return n}static getTodayEndUTCTime(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),23,59,59)}static replaceAllBySplit(t,e,l){return t==null?null:t.split(e).join(l)}static formatNumberToString(t){let e;return t>=1e3&&t<=9999?(t=Math.floor(t*.001),e=t.toString()+"千"):t>=1e4?(t=Math.floor(t*1e-4),e=t.toString()+"万"):e=t.toString(),e}};a(Te,"DEFAULT","default");let ae=Te;const V=class V{GlobalDataGetValue(){throw new Error("this.GlobalDataGetValue 无法实例化")}static getSystemMsg(t,e){return m.$_global_systemMsg[t][e]}static getLanguageStr(t,...e){let l=null,s=null,i="";if(m.$_global_language_str!=null&&(m.$_global_language_str.getElementsByTagName("id"+t)[0]!=null?m.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str")=="CHILD2010"?i=m.$_global_language_str.getElementsByTagName("id"+t)[0].children().toString():i=m.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str"):i=null),i.length<=0)return"";let o=i.search("%%");for(;o!=-1;)s=i.slice(o,o+6),i=i.replace(s,V.getLanguageStr(parseInt(s.slice(2)))),o=i.search("%%");for(let n=0;n<e.length;n++)l="%"+n,i=ae.replaceString(i,l,e[n]);return i}static getLogMsgTemp(t,e){let l=null,s=null,i=null,o=null,n=null,d=null,g=null,E="";if(!ae.isNullAndUndefined(e)&&(l=t.msg_type,s=t.hasOwnProperty("friend_id")?t.friend_id:"",i=t.friend_name?t.friend_name:V.getDataProfileTxt(m.$_user_default_name),i='<a href="event:'+s+'"><font color="#FF0000">'+i+"</font></a>",o=ae.isNullAndUndefined(t.data)?{}:t.data,o.friend=i,n="",e.hasOwnProperty(t.msg_type))){E=V.getDataProfileTxt(e[l]),d="";for(g in o)d=g.toString(),d=="user_name"&&o[g]==null?n=this.GlobalDataGetValue.getDataProfileTxt(m.$_user_default_name):d=="p_str"?n=V.getDataProfileTxt_Gem(String(o[g])):n=V.getDataProfileTxt(String(o[g])),d=="user_name"?n="{"+n+"}":d=="number"?n="["+n+"]":(d=="properties"||d!="friend")&&(n="("+n+")"),d="${"+d+"}",E=ae.replaceAllBySplit(E,_var,n)}return E}static setObjecInConfigStr_format(t){return t.hasOwnProperty(UserData.UName)&&(t[UserData.UName]=V.getDataProfileTxt(t[UserData.UName])),t.hasOwnProperty(UserData.INFO)&&(t[UserData.INFO]=V.getDataProfileTxt(t[UserData.INFO])),t.hasOwnProperty(UserData.TITLE)&&(t[UserData.TITLE]=V.getDataProfileTxt(t[UserData.TITLE])),t.hasOwnProperty(UserData.TITLEINFO)&&(t[UserData.TITLEINFO]=V.getDataProfileTxt(t[UserData.TITLEINFO])),t.hasOwnProperty(UserData.INFO1)&&(t[UserData.INFO1]=V.getDataProfileTxt(t[UserData.INFO1])),t.hasOwnProperty(UserData.DESC)&&(t[UserData.DESC]=V.getDataProfileTxt(t[UserData.DESC])),t.hasOwnProperty(UserData.SUMMARY)&&(t[UserData.SUMMARY]=V.getDataProfileTxt(t[UserData.SUMMARY])),t.hasOwnProperty(UserData.MSG)&&(t[UserData.MSG]=V.getDataProfileTxt(t[UserData.MSG])),t.hasOwnProperty(UserData.BUTTON)&&(t[UserData.BUTTON]=V.getDataProfileTxt(t[UserData.BUTTON])),t.hasOwnProperty(UserData.LINK)&&(t[UserData.LINK]=V.getDataProfileTxt(t[UserData.LINK])),t}static formatObjectOneClild(t){let e=null;for(e in t)t[e]=V.setObjecInConfigStr_format(t[e]);return t}static getDataProfileTxt(t){let e=null,l=!1,s=null,i=null,o=null,n=t;return t&&(e=String(t),l=e.indexOf(V.INTER_CONFIG_SPLIT_CHAR)>-1,s=null,i="",o="",l?(s=e.split(V.INTER_CONFIG_SPLIT_CHAR),i=s[0],o=s[1],m.$_global_dataProfile_txt!=null?(m.$_global_dataProfile_txt.getElementsByTagName(i)[0]!=null?n=m.$_global_dataProfile_txt.getElementsByTagName(i)[0].getAttribute("s").toString():n=o,n=n.replace(/\\n/g,`
`)):n=o):n=e,s=null,e="",i="",o=""),n}static getDataProfileTxt_Gem(t){let e=null,l=!1,s=null,i=null,o=0,n=null,d=t;if(t){if(e=String(t),l=e.indexOf(V.INTER_CONFIG_SPLIT_CHAR)>-1,s=null,i="",l){for(s=e.split(","),o=0;o<s.length;o++)s[o].indexOf(V.INTER_CONFIG_SPLIT_CHAR)>-1&&(n=[],n=s[o].split(V.INTER_CONFIG_SPLIT_CHAR),i+=n[1]+",");d=i}s=null,e="",i="",n=null}return d}static getLanguageStr_group(t){let e="";for(let l=0;l<t.length;l++)e+=V.getLanguageStr(t[l]);return e}static getLanguageStr_manual(t,...e){return V.getLanguageStr(t,e)+V.MANUAL_TAG_STR}static getGiftObjById(t,e="gold"){let l=null,s=null,i=null,o=null;if(e.indexOf("properties")>-1){if(l=e.split("_")[1],!ae.isNullAndUndefined(t.properties)){for(s in t.properties)for(i in t.properties[s])if(String(i).indexOf(l)>-1){o={type:l,num:parseInt(t.properties[s][i])};break}}}else o={type:e,num:parseInt(t[e])};return o}static updataGiftPropertiesData_num(t,e=1){let l=null,s=null;for(l in t)for(s in t[l])V.updataToolsData_num(int(t[l][s])*e,l.toString(),s.toString())}static getPassMapGift(){return m.$_pass_map_gift[String(m.$_userLevelData.umid).split("_")[1]]}static getMapName(t,e){return String(t[e]).split("_")[1]}static isCurrMap(t,e){let l=!0;return(t==null||String(t.umid).split("_")[1]!=e.mid)&&(l=!1),l}static getGiftObjByType(t,e="properties"){return t[e]}static setPropertiesForGift(t){let e={};for(let l=0;l<t.length;l++)e[t[l].id]=t[l].num;return{properties:e}}static updataToolsData_num(t,e,l){t>0?ae.isNullAndUndefined(m.$_global_properties_myDataNum[e])?(m.$_global_properties_myDataNum[e]={},m.$_global_properties_myDataNum[e][l]=Math.abs(t)):ae.isNullAndUndefined(m.$_global_properties_myDataNum[e][l])?m.$_global_properties_myDataNum[e][l]=Math.abs(t):m.$_global_properties_myDataNum[e][l]+=Math.abs(t):ae.isNullAndUndefined(m.$_global_properties_myDataNum[e])||ae.isNullAndUndefined(m.$_global_properties_myDataNum[e][l])||(m.$_global_properties_myDataNum[e][l]-=Math.abs(t),m.$_global_properties_myDataNum[e][l]<=0&&delete m.$_global_properties_myDataNum[e][l])}static getToolsData_obj(t,e){let l=null;return m.$_global_properties[t]&&m.$_global_properties[t][e]&&(l=V.setObjecInConfigStr_format(m.$_global_properties[t][e])),l}static getToolsData_num(t,e){let l=0;return m.$_global_properties_myDataNum&&m.$_global_properties_myDataNum[t]&&m.$_global_properties_myDataNum[t][e]&&(l=m.$_global_properties_myDataNum[t][e]),l}static checkGlobalSlave(t){let e=null,l=0;for(e in m.$_global_slave_myData)l=(t-new Date(m.$_global_slave_myData[e][SlaveBaseData.CATCH_TIME]).getTime()*.001)/60,l>=m.$_slave_full_time&&delete m.$_global_slave_myData[e]}static checkMineSlaveCanWork(t,e,l){let s=!1,i=t+l*60,o=t+e*60*60;return i>o&&(s=!0),s}static checkSlaveIsWorking(t){let e=NaN,l=!1;return ae.isNullAndUndefined(m.$_global_slave_myData[t])?l=!1:(e=new Date(m.$_global_slave_myData[t][SlaveBaseData.WORK_TIME]).getTime()*.001,e>=SendAndSelect.$systemTimer_nowSecond?l=!0:l=!1),l}static checkIsCoolingTime(t){let e=NaN,l=!1;return ae.isNullAndUndefined(t[SlaveBaseData.COOLING_TIME])?l=!1:(e=new Date(t[SlaveBaseData.COOLING_TIME]).getTime()*.001,e>SendAndSelect.$systemTimer_nowSecond?l=!0:l=!1),l}static checkGlobalSlaveNum(){let t=null,e=0;for(t in m.$_global_slave_myData)e+=1;return e}static formatGlobalMySlave(t){let e=null;m.$_global_slave_myData={};let l=null;for(e in t)l=m.$_global_slave_const(),l=ae.addObjectNewAtt(l,t[e]),l[SlaveBaseData.ID]=e,l[SlaveBaseData.ID_KEY]=l[SlaveBaseData.ID]+"_"+l[SlaveBaseData.TIME_KEY],l[SlaveBaseData.ISHAVE]=1,l[SlaveBaseData.ISLOCK]=0,m.$_global_slave_myData[e]=l}static getLevelUnlockTools(t,e=5){let l=null,s=m.$_global_properties.gem,i={properties:{gem:{}}};for(l in s)s[l].index>=0&&s[l].unlock_mid==t&&String(s[l].gamLevel)==e.toString()&&(i.properties.gem[l]=V.setObjecInConfigStr_format(s[l]));return i}static getSlave_max_invite_score(t){let e=m.$_slave_max_invite_score.a,l=m.$_slave_max_invite_score.b,s=m.$_slave_max_invite_score.c;return int(e+(t-l)*s)}static formateFriendData(t){let e=[];for(let l=0;l<t.length;l++)e.push(t[l]);return e}static getDalic_isUseing(t,e){let l=t-e;return l<0?l=Math.abs(l):l=0,l}static getDalic_powerValue(t,e){return t=0,e&&(t=Math.floor(t*e[0]+e[1])),t}static getDalic_dTime(t){let e=0;return t.deadline_properties&&t.deadline_properties.dalic&&t.deadline_properties.dalic&&(e=new Date(t.deadline_properties.dalic).getTime()*.001),e}static qqVIPformat(t){m.$_referer=="3366"&&(t.is_vip=t.is_blue_vip,t.is_year_vip=t.is_blue_year_vip,t.vip_level=t.blue_vip_level);let e=0,l=0,s=0;return t.is_vip==null?e=0:e=int(t.is_vip),t.is_year_vip==null?l=0:l=int(t.is_year_vip)>0?10:0,t.vip_level==null?(e=0,l=0,s=0):s=int(t.vip_level)>0?t.vip_level:0,e*(s+l)}static dreamIsOpenByTime(t,e){let l=!1,s=new Date(e.startTime).getTime()*.001,i=new Date(e.endTime).getTime()*.001;return t>=s&&t<i&&(l=!0),l}static changeCampTameWolfData(t,e=!1,l=!1){let s=null;if(e)m.$_global_camp_obj.wolfs=m.$_global_camp_wolfs=t;else for(s in m.$_global_camp_wolfs)if(t.wids==m.$_global_camp_wolfs[s].wids){l?delete m.$_global_camp_wolfs[s]:m.$_global_camp_wolfs[s]=t,m.$_global_camp_obj.wolfs=m.$_global_camp_wolfs;break}}static getCampManorsNum(t=null){let e=null,l=0,i=m.$_GAME_uid==m.$_GAME_fid?m.$_global_camp_obj:m.$_global_camp_obj_f;if(i=t??i,!ae.isNoChildrenInObj(i.manors))for(e in i.manors)l++;return l}static getMining_rate_obj(t){let e=null,l=null;for(e in m.$_camp_mining_rate)if(l=m.$_camp_mining_rate[e],l.harvest_num==t)break;return l}static getTowerAddAllEXP(t){let e=null,l=0;for(e in t)l+=t[e];return l}static getCurrUserMapData(){return m.$_GAME_uid==m.$_GAME_fid?m.$_userLevelData:m.$_friendLevelData}static getGuideId(t){let e=m.$_user_guide;return e&&e[t]!=null?int(e[t]):-1}static getMyWolfsCanTameNum(){let t=m.$_global_camp_obj.wolf_max,e=m.$_global_camp_obj.expand_lv_wolf_max,l=m.$_global_camp_obj.expand_properties_wolf_max;return t+e+l}static getMyWolfsNum(){let t=null,e=0;for(t in m.$_global_camp_obj.wolfs)m.$_global_camp_obj.wolfs[t]&&e++;return e}static get_mine_help_friends_list(t){let e=null,l=null;return ae.isNullAndUndefined(t.records)||(l=t.records,ae.isNullAndUndefined(l.mine_help_friends_list)||(l.mine_help_friends_list instanceof Array||(l.mine_help_friends_list=[]),ae.isNullForArray(l.mine_help_friends_list)||(e=l.mine_help_friends_list))),e}static get_mine_help(t){let e=null,l=null;return ae.isNullAndUndefined(t.mine)||(l=t.mine,ae.isNullAndUndefined(l.help)||ae.isNullForArray(l.help)||(e=l.help)),e}static formatSecondToTxt(t,e){let l=NaN,s=NaN,i=NaN,o=NaN,n=e-t,d="";l=24,s=60,i=s*s;let g=i*l;return n<i?d=Math.ceil(n/s)+V.getLanguageStr(4024):n>=i&&n<g?(o=Math.floor(n/s/s)%l,o=o<1?1:Number(o),d=o+V.getLanguageStr(4546)):n>=g&&(d=Math.floor(n/g)+V.getLanguageStr(20)),d+V.getLanguageStr(4545)}static formatAdvertisingData(t){let e=null;if(t==null)return[];let l=[];for(let s=0;s<t.length;s++)e=t[s],ae.isNullAndUndefined(e.open)||(m.$_referer=="3366"?String(e.open).indexOf("3366")>-1&&l.push(e):String(e.open).indexOf(m.$_lang)>-1&&l.push(e)),ae.isNullAndUndefined(e.hrefList)||ae.isNullAndUndefined(e.hrefList[m.$_lang])||(e.href=e.hrefList[m.$_lang]);return l}static formatFreeGift(t){let e=null,l=null,s=[];m.$_global_freeGiftObj={};for(l in t)e=t[l],e.itemId=String(l),e=V.setObjecInConfigStr_format(e),s.push(e),m.$_global_freeGiftObj[String(l)]=e;return s.sortOn("sort",Array.NUMERIC),s}};a(V,"MANUAL_TAG_STR","_@@A"),a(V,"INTER_CONFIG_SPLIT_CHAR","^");let c=V;const ge=class ge{constructor(t){a(this,"typeId");a(this,"kindId");a(this,"id");a(this,"name");a(this,"info");a(this,"help");this.typeId=t[ge.DATA_TYPE_ID],this.kindId=t[ge.DATA_KIND_ID],this.id=t[ge.DATA_ID],this.name=c.getDataProfileTxt(t[ge.DATA_NAME]),this.info=c.getDataProfileTxt(t[ge.DATA_INFO]),this.help=t[ge.DATA_HELP]?c.getDataProfileTxt(t[ge.DATA_HELP]):""}};a(ge,"DATA_TYPE_ID","typeId"),a(ge,"DATA_KIND_ID","kindId"),a(ge,"DATA_ID","id"),a(ge,"DATA_NAME","name"),a(ge,"DATA_INFO","info"),a(ge,"DATA_HELP","help");let pe=ge;const se=class se extends pe{constructor(e){super(e);a(this,"res");a(this,"resColor");e[se.DATA_RESOURCE_CLASS]==null?this.res=e[pe.DATA_ID]:this.res=e[se.DATA_RESOURCE_CLASS],this.resColor=e[se.DATA_RESOURCE_COLOR_CLASS]}};a(se,"TYPE_MONSTER","wolf"),a(se,"TYPE_TOWER","tower"),a(se,"TYPE_WALL","wall"),a(se,"TYPE_BARRIER","barrier"),a(se,"TYPE_ENTRANCE","typeEntrance"),a(se,"TYPE_EXPORT","typeExport"),a(se,"TYPE_BOX","box"),a(se,"TYPE_GEM_ITEM","gem"),a(se,"TYPE_TRAP_ITEM","snarp"),a(se,"TYPE_CARD_ITEM","card"),a(se,"TYPE_WOLF_CARD_ITEM","wc"),a(se,"TYPE_TAME_ITEM","tame"),a(se,"TYPE_FIX_ITEM","bomb"),a(se,"TYPE_MONSTER_SKILL","monsterSkill"),a(se,"ID_SPADE_ITEM","mc"),a(se,"ID_GEM_HAMMER","gem_hammer"),a(se,"ID_GEM_OPENER","gem_opener"),a(se,"DATA_RESOURCE_CLASS","res"),a(se,"DATA_RESOURCE_COLOR_CLASS","resColor");let Ce=se;class Je{constructor(){a(this,"m_manager",{});this.clearData()}getDataById(t){return this.m_manager[t]}get manager(){return this.m_manager}clearData(){this.m_manager=new Object}}class ft{constructor(){a(this,"m_data");this.m_data=new pe({})}get baseData(){return this.m_data}}class Qa extends ft{constructor(){super()}}const Y=class Y extends Ce{constructor(e){super(e);a(this,"scoreMax");a(this,"populationMax");a(this,"hardA");a(this,"hardB");a(this,"passBy");a(this,"unkennelDelay");a(this,"unkennelRule");a(this,"bossList");a(this,"monsterList");a(this,"teleportRule");this.scoreMax=e[Y.DATA_SCORE_MAX]?e[Y.DATA_SCORE_MAX]:Y.DEFAULT_SCORE_MAX,this.populationMax=e[Y.DATA_POPULATION_MAX]?e[Y.DATA_POPULATION_MAX]:Y.DEFAULT_POPULATION_MAX,this.hardA=e[Y.DATA_HARD_A],this.hardB=e[Y.DATA_HARD_B],this.passBy=e[Y.DATA_PASS_BY],this.unkennelDelay=e[Y.DATA_UNKENNEL_RATE],this.unkennelRule=e[Y.DATA_UNKENNEL_RULE],this.bossList=e[Y.DATA_BOSS_LIST],this.monsterList=e[Y.DATA_MONSTER_LIST]?e[Y.DATA_MONSTER_LIST].map(l=>l[1]):[],this.teleportRule=e[Y.DATA_TELEPORT_RULE]}getDifficultyLevel(e){return Math.sqrt(this.hardA+this.hardB*e)}};a(Y,"DEFAULT_SCORE_MAX",100),a(Y,"DEFAULT_POPULATION_MAX",10),a(Y,"RULE_MULTICAST",1),a(Y,"DATA_SCORE_MAX","pass_score"),a(Y,"DATA_POPULATION_MAX","pop_max"),a(Y,"DATA_HARD_A","yield_val"),a(Y,"DATA_HARD_B","hard_ness"),a(Y,"DATA_PASS_BY","passBy"),a(Y,"DATA_UNKENNEL_RATE","interval"),a(Y,"DATA_UNKENNEL_RULE","interval_rule"),a(Y,"DATA_BOSS_LIST","boss"),a(Y,"DATA_MONSTER_LIST","wolf_proportion"),a(Y,"DATA_TELEPORT_RULE","teleport_rule"),a(Y,"DATA_DEBUG","debug");let Pt=Y;const ve=class ve extends Je{constructor(){super(),ve.onlyExample=this,this.loadData(m.$_map_Obj)}static getOnlyExample(){return ve.onlyExample==null&&(ve.onlyExample=new ve),ve.onlyExample}loadData(t){for(const e in t){const l=t[e];l[pe.DATA_ID]=e,this.m_manager[e]=new Pt(t[e])}}getData(t){return this.getDataById(t)}};a(ve,"DATA_COUNT",6),a(ve,"onlyExample");let It=ve;class le extends ft{constructor(e,l=!0){super();a(this,"score",0);a(this,"wave",null);this.m_data=It.getOnlyExample().getData(e)}static getMapData(e){return It.getOnlyExample().getData(e)}get gameMapData(){return this.m_data}get canUnkennelAdjust(){return!1}}a(le,"DEFEND_MAP_1","mfx1"),a(le,"ENDLESS_MAP_1","m11"),a(le,"REFRESH_RATE",40),a(le,"currentMap"),a(le,"SIGN_SUCCESS","success"),a(le,"SIGN_FAILED","failed"),a(le,"SIGN_PASS","pass");function es(h,t){let e=h.toFixed(8),l=e.indexOf(".");return l==-1||e.length-l-1<=t?e:h.toFixed(t).replace(/\.?0+$/,"")}function Kt(h,t=0,e=!1,l="14",s=""){return`<span style="color:#${t.toString(16).padStart(6,"0")};${e?"font-weight:bold;":""}${l?`font-size:${l};`:""}${s?`font-family:${s};`:""}">${h.replaceAll(`
`,"<br>")}</span>`}function ts(h){return Math.floor(h/3600)+":"+Math.floor(h/60%60).toString().padStart(2,"0")+":"+(h%60).toString().padStart(2,"0")}class W extends Ce{constructor(t){super(t)}}a(W,"KIND_HIT","hit"),a(W,"KIND_INVASION","invasion"),a(W,"KIND_TELEPORT","teleport"),a(W,"KIND_BUFF_TOP","buffTop"),a(W,"KIND_BUFF_MID","buffMid"),a(W,"KIND_BUFF_BOT","buffBot"),a(W,"KIND_MAGIC","effectMagic"),a(W,"KIND_PATH","effectPath"),a(W,"KIND_CRIT","effectCrit"),a(W,"KIND_SUMMON","effectSummon"),a(W,"KIND_CLOUD","effectCloud"),a(W,"KIND_MIRROR","effectMirror"),a(W,"KIND_CURE","effectCure"),a(W,"KIND_CURE_ONE","effectCureOne"),a(W,"KIND_SNEER","effectSneer"),a(W,"KIND_LINKS","effectLinks"),a(W,"KIND_RELIVE","effectRelive"),a(W,"KIND_SUICIDE","effectSuicide"),a(W,"KIND_BLINK_IN","effectBlinkIn"),a(W,"KIND_BLINK_OUT","effectBlinkOut"),a(W,"KIND_LIGHTNING","lightning"),a(W,"KIND_FIELD_ATTACK","allAttack"),a(W,"KIND_FIELD_ATTACK_AOE","allAttackAOE"),a(W,"KIND_CUSS","effectCuss"),a(W,"KIND_CUSS_BREAK","effectCussBreak"),a(W,"KIND_SIGN_SUMMON","signSummon"),a(W,"KIND_SIGN_CURE","signCure"),a(W,"KIND_SIGN_CLOUD","signCloud"),a(W,"KIND_SIGN_SHIELD","signShield"),a(W,"KIND_SIGN_TRANSFORM","signTransform"),a(W,"KIND_BOSS","effectBoss");const ye=class ye extends Ce{constructor(e){super(e);a(this,"parameter");a(this,"levels");this.parameter=e[ye.DATA_PARAMETER],this.levels=e[ye.DATA_LEVELS]}getLevelParam(e,l){return this.parameter!=null?this.parameter[l]:this.levels!=null?(e=Math.min(Math.max(0,e-1),this.levels.length-1),this.levels[e][l]):null}hasLevel(){return this.parameter==null}};a(ye,"TYPE_TOWER_SKILL","typeTowerSkill"),a(ye,"TYPE_MONSTER_SKILL","typeMonsterSkill"),a(ye,"DATA_PARAMETER","params"),a(ye,"DATA_LEVELS","levels");let Xe=ye;class S extends Xe{constructor(t){super(t),t[pe.DATA_TYPE_ID]=Xe.TYPE_TOWER_SKILL}}a(S,"KIND_AURA","Aura"),a(S,"KIND_CHANGE_BULLET","Bultype"),a(S,"KIND_CHANGE_DAMAGE","ChangeDam"),a(S,"KIND_CHANGE_RATE","ChangeRate"),a(S,"KIND_CHANGE_RANGE","ChangeRange"),a(S,"KIND_FIELD_ATTACK","ALLAP"),a(S,"KIND_DIVIDED_ATTACK","DivAP"),a(S,"KIND_SCATTER_ATTACK","ScaAP"),a(S,"KIND_COMBO_ATTACK","ComAP"),a(S,"KIND_GUIDED_BULLET","GuidedBul"),a(S,"KIND_ATTACK_RATE","AttackRate"),a(S,"KIND_AOE_ATTACK","AoeAP"),a(S,"KIND_THROUGHOUT_ATTACK","ThoAP"),a(S,"KIND_BOUNCE_ATTACK","BouAP"),a(S,"KIND_FLOAT_DAMAGE","FloatDam"),a(S,"KIND_CRIT","Crit"),a(S,"KIND_REDUCED_DEFENSE","RedDef"),a(S,"KIND_POISON","Poison"),a(S,"KIND_SLOW","Slow"),a(S,"KIND_BURN_COLD","BC"),a(S,"KIND_BEAT_BACK","Beat"),a(S,"KIND_SILENCE","Silence"),a(S,"KIND_VERTIGO","Vertigo"),a(S,"KIND_INTIMIDATE","Intimidate"),a(S,"KIND_CUSS","Cuss"),a(S,"KIND_BURN","Burn"),a(S,"KIND_COLD","Cold");const I=class I extends Xe{constructor(t){super(t),t[pe.DATA_TYPE_ID]=Xe.TYPE_MONSTER_SKILL}static get allMonsterSkill(){return[I.KIND_FLY,I.KIND_AIRBORNE,I.KIND_ISOLATION,I.KIND_RELIVE,I.KIND_SUICIDE,I.KIND_REINCARNATE,I.KIND_RESIST_FIRE,I.KIND_RESIST_FROST,I.KIND_RESIST_POISON,I.KIND_RESIST_BEAT,I.KIND_RESIST_SILENCE,I.KIND_RESIST_VERTIGO,I.KIND_RESIST_CRIT,I.KIND_RESIST_LIGHT,I.KIND_RESIST_STRSMOOTH,I.KIND_SLOWF,I.KIND_WEAK_FIRE,I.KIND_WEAK_FROST,I.KIND_WEAK_POISON,I.KIND_WEAK_BEAT,I.KIND_WEAK_SILENCE,I.KIND_WEAK_VERTIGO,I.KIND_WEAK_CRIT,I.KIND_WEAK_LIGHT,I.KIND_RUN,I.KIND_MIRROR,I.KIND_SUMMON,I.KIND_CLOUD,I.KIND_CURE,I.KIND_BLINK,I.KIND_HIDE,I.KIND_SHIELD,I.KIND_SNEER,I.KIND_TRANSFORM,I.KIND_LINKS]}};a(I,"EVENT_RED",1),a(I,"EVENT_YELLOW",2),a(I,"EVENT_GREEN",3),a(I,"EVENT_FULL",4),a(I,"EVENT_INTIMIDATE",20),a(I,"EVENT_VERTIGO",21),a(I,"EVENT_SILENCE",22),a(I,"EVENT_SLOW",23),a(I,"EVENT_REDUCED_DEFENSE",24),a(I,"EVENT_POISON",25),a(I,"EVENT_BURN",26),a(I,"EVENT_COLD",27),a(I,"EVENT_HIT",40),a(I,"EVENT_CRIT",41),a(I,"EVENT_BEAT_BACK",42),a(I,"EVENT_FRIENT_DIE",43),a(I,"EVENT_DIE",44),a(I,"KIND_FLY","fly"),a(I,"KIND_AIRBORNE","airborne"),a(I,"KIND_ISOLATION","isolation"),a(I,"KIND_RELIVE","revive"),a(I,"KIND_SUICIDE","burst"),a(I,"KIND_REINCARNATE","reborn"),a(I,"KIND_SLOWF","slowf"),a(I,"KIND_RESIST_FIRE","resistFire"),a(I,"KIND_RESIST_FROST","resistFrost"),a(I,"KIND_RESIST_POISON","resistPoison"),a(I,"KIND_RESIST_SLOW","resistSlow"),a(I,"KIND_RESIST_BEAT","resistBeat"),a(I,"KIND_RESIST_SILENCE","resistSilence"),a(I,"KIND_RESIST_VERTIGO","resistVertigo"),a(I,"KIND_RESIST_CRIT","resistCrit"),a(I,"KIND_RESIST_LIGHT","resistLight"),a(I,"KIND_RESIST_INTIMIDATE","resistIntimidate"),a(I,"KIND_WEAK_FIRE","weakFire"),a(I,"KIND_WEAK_FROST","weakFrost"),a(I,"KIND_WEAK_POISON","weakPoison"),a(I,"KIND_WEAK_SLOW","weakSlow"),a(I,"KIND_WEAK_BEAT","weakBeat"),a(I,"KIND_WEAK_SILENCE","weakSilence"),a(I,"KIND_WEAK_VERTIGO","weakVertigo"),a(I,"KIND_WEAK_CRIT","weakCrit"),a(I,"KIND_WEAK_LIGHT","weakLight"),a(I,"KIND_WEAK_INTIMIDATE","weakIntimidate"),a(I,"KIND_RESIST_STRSMOOTH","strsmooth"),a(I,"KIND_RUN","sprint"),a(I,"KIND_MIRROR","divide"),a(I,"KIND_SUMMON","summon"),a(I,"KIND_CLOUD","cloud"),a(I,"KIND_CURE","massTreatment"),a(I,"KIND_BLINK","blink"),a(I,"KIND_HIDE","invisible"),a(I,"KIND_SHIELD","shield"),a(I,"KIND_SNEER","taunt"),a(I,"KIND_TRANSFORM","morph"),a(I,"KIND_LINKS","links");let p=I;const fe=class fe extends Je{constructor(){super(),fe.onlyExample=this,this.loadData(m.$_skillAtt_Obj)}static getOnlyExample(){return fe.onlyExample==null&&(fe.onlyExample=new fe),fe.onlyExample}loadData(t){for(const e in t[fe.TOWER_SKILL]){const l=t[fe.TOWER_SKILL][e];l[pe.DATA_ID]=e,this.m_manager[e]=new S(l)}for(const e in t[fe.MONSTER_SKILL]){const l=t[fe.MONSTER_SKILL][e];l[pe.DATA_ID]=e,this.m_manager[e]=new p(l)}}getData(t){return this.getDataById(t)}};a(fe,"onlyExample"),a(fe,"TOWER_SKILL","towerSkill"),a(fe,"MONSTER_SKILL","monsterSkill"),a(fe,"TRAP_SKILL","trapSkill");let Mt=fe;const He=class He extends pe{constructor(e){super(e);a(this,"skillsList");e[He.DATA_SKILLS_LIST]instanceof Array?this.skillsList=e[He.DATA_SKILLS_LIST]:e[He.DATA_SKILLS_LIST]instanceof String&&(this.skillsList=[e[He.DATA_SKILLS_LIST]])}};a(He,"DATA_SKILLS_LIST","skills");let Ut=He;const Pe=class Pe extends Je{constructor(){super(),Pe.onlyExample=this,this.loadData(m.$_skillPackage_Obj)}static getOnlyExample(){return Pe.onlyExample==null&&(Pe.onlyExample=new Pe),Pe.onlyExample}loadData(t){for(const e in t){const l=t[e];l[pe.DATA_ID]=e,this.m_manager[e]=new Ut(t[e])}}getData(t){return this.getDataById(t)}};a(Pe,"onlyExample");let Ft=Pe;const D=class D{static gridToVector(t=0,e=0){return new Point(Math.atan2(e,t),new Point(t,e).length)}static vectorToGrid(t,e){return new Point(Math.cos(t)*e,Math.sin(t)*e)}static gridToPixel(t=0,e=0,l=1,s=1){let i=D.gridToSubGrid(new Point(t,e),l,s);return D.subGridToPixel(i.x,i.y)}static pixelToGrid(t=0,e=0,l=1,s=1){let i=D.pixelToSubGrid(t,e);return D.subGridToGrid(i,l,s)}static subGridToPixel(t=0,e=0,l=0){let s=new Point;return s.x=Math.round(t*D.SUB_X),s.y=Math.round(e*D.SUB_Y-l*D.SUB_Z),s}static pixelToSubGrid(t=0,e=0){let l=new Point;return l.x=Math.round(t/D.SUB_X),l.y=Math.round(e/D.SUB_Y),l}static gridToSubGrid(t,e=1,l=1){if(t==null)return null;let s=new Point;return s.x=D.gridToSubGridSolo(t.x,e),s.y=D.gridToSubGridSolo(t.y,l),s}static gridToSubGridSolo(t,e=1){return Math.floor((t+(e-1)/2)*D.SUB_GRID_AMOUNT)}static subGridToGrid(t,e=1,l=1){if(t==null)return null;let s=new Point;return s.x=D.subGridToGridSolo(t.x,e),s.y=D.subGridToGridSolo(t.y,l),s}static subGridToGridSolo(t,e=1){return Math.round(t/D.SUB_GRID_AMOUNT+(1-e)/2)}static getMapStartPoint(t=8,e=8,l=1){let s=new Point;return s.x=D.SCREEN_CENTER_POINT.x-t*D.LANDFORM_X/2*l,s.y=D.SCREEN_CENTER_POINT.y-e*D.LANDFORM_Y/2*l,s}static getWolfStartPoint(t,e,l=1){let s=new Point;return s.x=D.SCREEN_CENTER_POINT.x-t/D.SUB_GRID_AMOUNT*D.LANDFORM_X*l,s.y=D.SCREEN_CENTER_POINT.y-e/D.SUB_GRID_AMOUNT*D.LANDFORM_Y*l,s}static checkStep(t,e,l){let s=0,i=null,o=new Object;return Math.abs(e.x)<Math.abs(e.y)?Math.abs(e.x)>=l?e.x>0?(i=new Point(t.x+l,t.y),s=D.DIR_RIGHT):(i=new Point(t.x-l,t.y),s=D.DIR_LEFT):e.y>0?(i=new Point(t.x+e.x,t.y+(l-Math.abs(e.x))),s=D.DIR_DOWN):(i=new Point(t.x+e.x,t.y-(l-Math.abs(e.x))),s=D.DIR_UP):Math.abs(e.y)>=l?e.y>0?(i=new Point(t.x,t.y+l),s=D.DIR_DOWN):(i=new Point(t.x,t.y-l),s=D.DIR_UP):e.x>0?(i=new Point(t.x+(l-Math.abs(e.y)),t.y+e.y),s=D.DIR_RIGHT):(i=new Point(t.x-(l-Math.abs(e.y)),t.y+e.y),s=D.DIR_LEFT),o[D.DIR]=s,o[D.POINT]=i,o}static toPercentage(t){return Math.round(t*100*100)/100+"%"}static toGridStr(t){return String(Math.round(t/100)/10)}static getPosID(t,e){return t+"_"+e}static getIDPos(t){let e=t.indexOf("_"),l=new Point;return l.x=parseInt(t.slice(0,e)),l.y=parseInt(t.slice(e+1,t.length)),l}static getRandomPos(t,e){let l=new Point(t.x,t.y);return l.x=l.x+Math.random()*e*2-e,l.y=l.y+Math.random()*e*2-e,l}static getBetweenPosList(t,e){let l=0,s=0,i=null,o=[];if(t.x==e.x){if(s=t.y-e.y,Math.abs(s)<=1)return o;for(l=s>0?1:-1;t.y!=e.y+l;)i=new Point(e.x,e.y+l),l+=s>0?1:-1,i.y!=e.y&&o.unshift(i)}else{if(t.y!=e.y)return null;if(s=t.x-e.x,Math.abs(s)<=1)return o;for(l=s>0?1:-1;t.x!=e.x+l;)i=new Point(e.x+l,e.y),l+=s>0?1:-1,i.x!=e.x&&o.unshift(i)}return o}static getCrossPosList(t,e){let l=0,s=[t];for(l=t.x-e;l<=t.x+e;l++)l!=t.x&&s.push(new Point(l,t.y));for(l=t.y-e;l<=t.y+e;l++)l!=t.y&&s.push(new Point(t.x,l));return s}static getSquarePosList(t,e){let l=0,s=0,i=[];for(l=t.x-e;l<=t.x+e;l++)for(s=t.y-e;s<=t.y+e;s++)i.push(new Point(l,s));return i}static getDiamondPosList(t,e){let l=0,s=0,i=[];for(l=t.x-e;l<=t.x+e;l++)for(s=t.y-e;s<=t.y+e;s++)Math.abs(l-t.x)+Math.abs(s-t.y)<=e&&i.push(new Point(l,s));return i}static getCirclePosList(t,e){let l=0,s=0,i=null,o=[];for(l=t.x-e;l<=t.x+e;l++)for(s=t.y-e;s<=t.y+e;s++)i=new Point(l-t.x,s-t.y),i.length<=e&&o.push(new Point(l,s));return o}static getRingPosList(t,e,l){let s=0,i=0,o=null,n=[];for(s=t.x-l;s<=t.x+l;s++)for(i=t.y-l;i<=t.y+l;i++)o=new Point(s-t.x,i-t.y),o.length>=e&&o.length<=l&&n.push(new Point(s,i));return n}static getIntersectionPosList(t,e){let l=0,s=0,i=[];for(l=0;l<=t.length;l++)for(s=0;s<=e.length;s++)t[l].x==e[s].x&&t[l].y==e[s].y&&i.push(new Point(t[l].x,t[l].y));return i}static getDistance(t,e){return new Point(t.x-e.x,t.y-e.y).length}static getRadians(t,e){let l=null;return l=new Point(e.x-t.x,e.y-t.y),(Math.atan2(l.y,l.x)+Math.PI*2)%(Math.PI*2)}static sortPosList(t,e){let l=0,s=null,i=null,o=[],n=[],d=e.length;for(l=0;l<d;l++)s=D.gridToSubGrid(e[l]),i={},i.distance=new Point(t.x-s.x,t.y-s.y).length,i.pos=e[l],n[l]=i;for(n=n.sortOn("distance",Array.NUMERIC),l=0;l<d;l++)o[l]=n[l].pos;return o}static getNearestSubPosInPos(t,e,l=400){let s=new Point,i=D.subGridToGrid(t);return e.x<i.x?s.x=D.gridToSubGridSolo(e.x)+l:e.x>i.x?s.x=D.gridToSubGridSolo(e.x)-l:s.x=t.x,e.y<i.y?s.y=D.gridToSubGridSolo(e.y)+l:e.y>i.y?s.y=D.gridToSubGridSolo(e.y)-l:s.y=t.y,s}static getPosList(t,e,l){let s=0,i=0,o=[],n=t.x,d=t.y;for(s=0;s<e;s++)for(i=0;i<l;i++)o.push(new Point(n+s,d+i));return o}static getPosIdList(t,e,l){let s=0,i=0,o=[],n=t.x,d=t.y;for(s=0;s<e;s++)for(i=0;i<l;i++)o.push(this.Position.getPosID(n+s,d+i));return o}};a(D,"LANDFORM_X",65),a(D,"LANDFORM_Y",50),a(D,"LANDFORM_Z",50),a(D,"FLOOR_SCALE",D.LANDFORM_X/D.LANDFORM_Y),a(D,"SUB_GRID_AMOUNT",1e3),a(D,"SUB_X",D.LANDFORM_X/D.SUB_GRID_AMOUNT),a(D,"SUB_Y",D.LANDFORM_Y/D.SUB_GRID_AMOUNT),a(D,"SUB_Z",D.LANDFORM_Z/D.SUB_GRID_AMOUNT),a(D,"ENTER_DISTANCE",200),a(D,"MAP_SCALE",.05),a(D,"MAP_X",D.LANDFORM_X*D.MAP_SCALE),a(D,"MAP_Y",D.LANDFORM_Y*D.MAP_SCALE),a(D,"MAP_SUB_X",D.MAP_X/D.SUB_GRID_AMOUNT),a(D,"MAP_SUB_Y",D.MAP_Y/D.SUB_GRID_AMOUNT),a(D,"MAP_DEFAULT_X",8),a(D,"MAP_DEFAULT_Y",8),a(D,"MAP_MAX_X",30),a(D,"MAP_MIN_X",1),a(D,"MAP_MAX_Y",30),a(D,"MAP_MIN_Y",1),a(D,"MAP_MAX_AREA",600),a(D,"MAP_MIN_AREA",4),a(D,"DIR_AMOUNT",4),a(D,"DIR_RIGHT",0),a(D,"DIR_DOWN",1),a(D,"DIR_LEFT",2),a(D,"DIR_UP",3),a(D,"DIR","dir"),a(D,"POINT","point");let P=D;class Pl extends ft{constructor(e,l,s=!1){super();a(this,"level",0);a(this,"index",0);a(this,"m_skillInfo","");a(this,"m_nextLevelSkillInfo","");a(this,"skillTag1","");a(this,"skillTag2","");a(this,"skillTag3","");a(this,"nextLevelSkillTag1","");a(this,"nextLevelSkillTag2","");a(this,"nextLevelSkillTag3","");a(this,"m_updateFunction",()=>{});if(s){this.m_data=new Dt({id:e+"_0",kindId:e});return}this.m_data=Mt.getOnlyExample().getData(e),this.level=l}get data(){return this.m_data}get skillInfo(){return this.m_updateFunction!=null&&this.m_updateFunction(),this.m_skillInfo||(this.m_skillInfo=""),this.m_skillInfo}get nextLevelSkillInfo(){return this.m_nextLevelSkillInfo||(this.m_nextLevelSkillInfo=""),this.m_nextLevelSkillInfo}}class q extends Pl{constructor(e,l,s){super(e,l);a(this,"tower");this.tower=s}static create(e,l,s){const i=new q("",l,s);return i.m_data=e,i}shouldTransferBullet(){switch(this.data.kindId){case S.KIND_GUIDED_BULLET:case S.KIND_ATTACK_RATE:case S.KIND_AOE_ATTACK:case S.KIND_THROUGHOUT_ATTACK:case S.KIND_BOUNCE_ATTACK:case S.KIND_FLOAT_DAMAGE:case S.KIND_CRIT:case S.KIND_REDUCED_DEFENSE:case S.KIND_POISON:case S.KIND_SLOW:case S.KIND_BURN_COLD:case S.KIND_BEAT_BACK:case S.KIND_SILENCE:case S.KIND_VERTIGO:case S.KIND_INTIMIDATE:case S.KIND_CUSS:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case S.KIND_AURA:return new Vt(this.data.id,this.level,this.tower);case S.KIND_CHANGE_BULLET:return new Kl(this.data.id,this.level,this.tower);case S.KIND_CHANGE_DAMAGE:return new Ml(this.data.id,this.level,this.tower);case S.KIND_CHANGE_RATE:return new Fl(this.data.id,this.level,this.tower);case S.KIND_CHANGE_RANGE:return new Ul(this.data.id,this.level,this.tower);case S.KIND_FIELD_ATTACK:return new jt(this.data.id,this.level,this.tower);case S.KIND_DIVIDED_ATTACK:return new Xt(this.data.id,this.level,this.tower);case S.KIND_SCATTER_ATTACK:return new Zt(this.data.id,this.level,this.tower);case S.KIND_COMBO_ATTACK:return new Ht(this.data.id,this.level,this.tower);case S.KIND_GUIDED_BULLET:return new is(this.data.id,this.level,this.tower);case S.KIND_ATTACK_RATE:return new ls(this.data.id,this.level,this.tower);case S.KIND_AOE_ATTACK:return new kt(this.data.id,this.level,this.tower);case S.KIND_THROUGHOUT_ATTACK:return new el(this.data.id,this.level,this.tower);case S.KIND_BOUNCE_ATTACK:return new Bt(this.data.id,this.level,this.tower);case S.KIND_FLOAT_DAMAGE:return new ss(this.data.id,this.level,this.tower);case S.KIND_CRIT:return new Gt(this.data.id,this.level,this.tower);case S.KIND_REDUCED_DEFENSE:return new qt(this.data.id,this.level,this.tower);case S.KIND_POISON:return new zt(this.data.id,this.level,this.tower);case S.KIND_SLOW:return new Qt(this.data.id,this.level,this.tower);case S.KIND_BURN_COLD:return new as(this.data.id,this.level,this.tower);case S.KIND_BEAT_BACK:return new $t(this.data.id,this.level,this.tower);case S.KIND_SILENCE:return new Jt(this.data.id,this.level,this.tower);case S.KIND_VERTIGO:return new tl(this.data.id,this.level,this.tower);case S.KIND_INTIMIDATE:return new Yt(this.data.id,this.level,this.tower);case S.KIND_CUSS:return new Wt(this.data.id,this.level,this.tower);default:return this}}}const Ke=class Ke extends q{constructor(t,e,l){super(t,e,l),this.index=1050,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3001,this.radiiInfo,P.toPercentage(this.nextEffectRate))}}get radii(){return this.data.getLevelParam(this.level,0)+Ke.DEFAULT_RADII}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Ke.DEFAULT_NEXT_EFFECT_RATE,Ke.MAX_NEXT_EFFECT_RATE)}get radiiInfo(){return this.radii.toString()}};a(Ke,"DEFAULT_RADII",0),a(Ke,"DEFAULT_NEXT_EFFECT_RATE",0),a(Ke,"MAX_NEXT_EFFECT_RATE",1);let kt=Ke;class ls extends q{constructor(t,e,l){super(t,e,l),this.index=1040,this.m_updateFunction=()=>{let s=this.floorRate,i=this.airRate;s<=0&&i>0?this.m_skillInfo=c.getLanguageStr(3029):i<=0&&s>0?this.m_skillInfo=c.getLanguageStr(3028):s!=1?this.m_skillInfo=c.getLanguageStr(3030,P.toPercentage(s)):i!=1&&(this.m_skillInfo=c.getLanguageStr(3031,P.toPercentage(i)))}}get floorRate(){return this.data.getLevelParam(this.level,0)}get airRate(){return this.data.getLevelParam(this.level,1)}}const St=class St extends q{constructor(t,e,l){super(t,e,l),this.index=1500,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3002)}}get spId(){return this.data.getLevelParam(this.level,0)}get spLevel(){return this.data.getLevelParam(this.level,1)}get radii(){return this.data.getLevelParam(this.level,2)*this.level+St.DEFAULT_RADII}};a(St,"DEFAULT_RADII",1e3);let Vt=St;const Ge=class Ge extends q{constructor(t,e,l){super(t,e,l),this.index=1060,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3003,P.toPercentage(this.chances),this.distanceInfo)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Ge.DEFAULT_CHANCES,1),0)}get beatBackDistance(){return this.data.getLevelParam(this.level,1)+Ge.DEFAULT_BEAT_BACK_DISTANCE}get distanceInfo(){return this.beatBackDistance.toString()}};a(Ge,"SHIFT_TIME",.2),a(Ge,"DEFAULT_CHANCES",0),a(Ge,"DEFAULT_BEAT_BACK_DISTANCE",0);let $t=Ge;const xe=class xe extends q{constructor(t,e,l){super(t,e,l),this.index=1070,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3004,this.bounceNum,P.toPercentage(1-this.nextEffectRate),this.attackInfo)}}get bounceNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+xe.DEFAULT_BOUNCE_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)*this.level+xe.DEFAULT_NEXT_EFFECT_RATE,xe.MAX_NEXT_EFFECT_RATE)}get attackInfo(){var e;let t=null;return((e=this.tower)==null?void 0:e.newBullet().bulletData.hitEffectId)==W.KIND_LIGHTNING?t=c.getLanguageStr(3516):t=c.getLanguageStr(3515),t}};a(xe,"DEFAULT_BOUNCE_NUM",.5),a(xe,"DEFAULT_NEXT_EFFECT_RATE",.35),a(xe,"MAX_NEXT_EFFECT_RATE",1),a(xe,"MAX_DISTANCE",3e3);let Bt=xe;class as extends q{constructor(t,e,l){super(t,e,l),this.index=1080,this.m_updateFunction=()=>{this.burnColdValue>0?this.m_skillInfo=c.getLanguageStr(3005,this.burn):this.m_skillInfo=c.getLanguageStr(3006,P.toPercentage(this.cold))}}get burnColdValue(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return this.data.getLevelParam(this.level,0)<0&&(e=-e),Math.floor(e)}get burn(){return Math.floor(Math.sqrt(this.burnColdValue))}get cold(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return Math.pow(e,.25)*.03}}class Kl extends q{constructor(t,e,l){super(t,e,l)}get bulletId(){return this.data.getLevelParam(this.level,0)}}class Ml extends q{constructor(t,e,l){super(t,e,l),this.index=1e3,this.m_updateFunction=()=>{this.damageRate>1?this.m_skillInfo=c.getLanguageStr(3007,P.toPercentage(this.damageRate-1)):this.damageRate<1&&(this.m_skillInfo=c.getLanguageStr(3008,P.toPercentage(1-this.damageRate)))}}get damageAdd(){return this.data.getLevelParam(this.level,0)*this.level}get damageRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get damageA(){return this.data.getLevelParam(this.level,2)}get damageB(){return this.data.getLevelParam(this.level,3)}get damageC(){return this.data.getLevelParam(this.level,4)}isChangeBase(){return!(this.damageA==0&&this.damageB==0&&this.damageC==0)}}class Ul extends q{constructor(t,e,l){super(t,e,l),this.index=1010,this.m_updateFunction=()=>{this.rangeRate>1?this.m_skillInfo=c.getLanguageStr(3009,P.toPercentage(this.rangeRate-1)):this.m_skillInfo=c.getLanguageStr(3010,P.toPercentage(1-this.rangeRate)),this.rangeMin>0&&(this.m_skillInfo+=c.getLanguageStr(3027))}}get rangeAdd(){return this.data.getLevelParam(this.level,0)*this.level}get rangeRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get range(){return this.data.getLevelParam(this.level,2)}get rangeMin(){return this.data.getLevelParam(this.level,3)}isChangeBase(){return this.range!=0}}class Fl extends q{constructor(t,e,l){super(t,e,l),this.index=1020,this.m_updateFunction=()=>{this.rateRate>1?this.m_skillInfo=c.getLanguageStr(3011,P.toPercentage(this.rateRate-1)):this.m_skillInfo=c.getLanguageStr(3012,P.toPercentage(1-this.rateRate))}}get rateRate(){return this.data.getLevelParam(this.level,0)+this.data.getLevelParam(this.level,1)*this.level+1}get rate(){return this.data.getLevelParam(this.level,2)}isChangeBase(){return this.rate!=0}}const We=class We extends q{constructor(t,e,l){super(t,e,l),this.index=1090,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3013,P.toPercentage(this.chances),this.extraBullet+1)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)+We.DEFAULT_CHANCES,1),0)}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,1)*this.level+We.DEFAULT_EXTRA_BULLET)}};a(We,"DEFAULT_CHANCES",0),a(We,"DEFAULT_EXTRA_BULLET",.5),a(We,"DEFAULT_RATE",.08);let Ht=We;const Me=class Me extends q{constructor(t,e,l){super(t,e,l),this.index=1100,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3014,P.toPercentage(this.chances),this.damageEffectRate.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Me.DEFAULT_CHANCES,1),0)}get damageEffectRate(){return this.data.getLevelParam(this.level,1)*this.level+Me.DEFAULT_DAMAGE_EFFECT_RATE+1}get buffEffectRate(){return this.data.getLevelParam(this.level,2)*this.level+Me.DEFAULT_BUFF_EFFECT_RATE+1}};a(Me,"DEFAULT_CHANCES",.1),a(Me,"DEFAULT_DAMAGE_EFFECT_RATE",.5),a(Me,"DEFAULT_BUFF_EFFECT_RATE",.1);let Gt=Me;const Qe=class Qe extends q{constructor(t,e,l){super(t,e,l),this.index=1110,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3026,Math.round(this.cussPower),this.duration.toFixed(0))}}get cussPower(){return this.data.getLevelParam(this.level,0)*this.level*this.tower.level+Qe.DEFAULT_CUSS_POWER}get duration(){return this.data.getLevelParam(this.level,1)+Qe.DEFAULT_DURATION}};a(Qe,"DEFAULT_CUSS_POWER",0),a(Qe,"DEFAULT_DURATION",0);let Wt=Qe;const Nt=class Nt extends q{constructor(t,e,l){super(t,e,l),this.index=1120,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3015,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Nt.DEFAULT_EXTRA_BULLET)}};a(Nt,"DEFAULT_EXTRA_BULLET",.5);let Xt=Nt;class ss extends q{constructor(t,e,l){super(t,e,l),this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3017)}}get floatDamageRate(){return this.data.getLevelParam(this.level,0)*this.level}}class is extends q{constructor(t,e,l){super(t,e,l),this.m_skillInfo=""}get guideRatio(){return this.data.getLevelParam(this.level,0)}get bulletSpeedRate(){return this.data.getLevelParam(this.level,1)+1}get bulletAccSpeed(){return this.data.getLevelParam(this.level,2)}get guideInfo(){let t=null,e=this.guideRatio;return e<.1?t=c.getLanguageStr(3500):e<.2?t=c.getLanguageStr(3501):e<.3?t=c.getLanguageStr(3502):e<.4?t=c.getLanguageStr(3503):t=c.getLanguageStr(3504),t}}const et=class et extends q{constructor(t,e,l){super(t,e,l),this.index=1140,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3019,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+et.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+et.DEFAULT_DURATION}};a(et,"DEFAULT_CHANCES",.05),a(et,"DEFAULT_DURATION",0);let Yt=et;const vt=class vt extends q{constructor(t,e,l){super(t,e,l),this.index=1130,this.m_skillInfo=c.getLanguageStr(3016)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+vt.DEFAULT_CHANCES,1),0)}};a(vt,"DEFAULT_CHANCES",.05);let jt=vt;const tt=class tt extends q{constructor(e,l,s){super(e,l,s);a(this,"m_poisonRate",-1);this.index=1150,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3e3,Math.round(this.poisonRate*this.tower.damage()),this.duration.toFixed(0))}}get poisonRate(){return this.m_poisonRate<0?this.data.getLevelParam(this.level,0)*this.level+tt.DEFAULT_POISON_RATE:this.m_poisonRate}set poisonRate(e){this.m_poisonRate<0&&(this.m_poisonRate=e)}get duration(){return this.data.getLevelParam(this.level,1)+tt.DEFAULT_DURATION}};a(tt,"DEFAULT_POISON_RATE",0),a(tt,"DEFAULT_DURATION",0);let zt=tt;const lt=class lt extends q{constructor(t,e,l){super(t,e,l),this.index=1160,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3020,P.toPercentage(this.reducedDefenseRate),this.duration.toFixed(1))}}get reducedDefenseRate(){return this.data.getLevelParam(this.level,0)*this.level+lt.DEFAULT_REDUCED_DEFENSE_RATE}get duration(){return this.data.getLevelParam(this.level,1)+lt.DEFAULT_DURATION}};a(lt,"DEFAULT_REDUCED_DEFENSE_RATE",.1),a(lt,"DEFAULT_DURATION",0);let qt=lt;const xt=class xt extends q{constructor(t,e,l){super(t,e,l),this.index=1170,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3021,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+xt.DEFAULT_EXTRA_BULLET)}};a(xt,"DEFAULT_EXTRA_BULLET",.5);let Zt=xt;const at=class at extends q{constructor(t,e,l){super(t,e,l),this.index=1180,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3022,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+at.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+at.DEFAULT_DURATION}};a(at,"DEFAULT_CHANCES",.05),a(at,"DEFAULT_DURATION",0);let Jt=at;const st=class st extends q{constructor(t,e,l){super(t,e,l),this.index=1190,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3023,P.toPercentage(this.slowRate),this.duration.toFixed(1))}}get slowRate(){return this.data.getLevelParam(this.level,0)*this.level+st.DEFAULT_SLOW_RATE}get duration(){return this.data.getLevelParam(this.level,1)+st.DEFAULT_DURATION}};a(st,"DEFAULT_SLOW_RATE",.1),a(st,"DEFAULT_DURATION",0);let Qt=st;const Ue=class Ue extends q{constructor(t,e,l){super(t,e,l),this.index=1200,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3024,this.throughoutNum)}}get throughoutNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Ue.DEFAULT_THROUGHOUT_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Ue.DEFAULT_NEXT_EFFECT_RATE,Ue.MAX_NEXT_EFFECT_RATE)}};a(Ue,"DEFAULT_THROUGHOUT_NUM",.5),a(Ue,"DEFAULT_NEXT_EFFECT_RATE",0),a(Ue,"MAX_NEXT_EFFECT_RATE",1);let el=Ue;const it=class it extends q{constructor(t,e,l){super(t,e,l),this.index=1210,this.m_updateFunction=()=>{this.m_skillInfo=c.getLanguageStr(3025,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+it.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+it.DEFAULT_DURATION}};a(it,"DEFAULT_CHANCES",0),a(it,"DEFAULT_DURATION",0);let tl=it;const de=class de extends Pl{constructor(e,l,s,i=!1){super(e,l,i);a(this,"monster");a(this,"m_levelMax",0);this.monster=s,this.m_data.typeId=Xe.TYPE_MONSTER_SKILL}static getKindName(e){switch(e){case p.KIND_FLY:return c.getLanguageStr(2507);case p.KIND_AIRBORNE:return c.getLanguageStr(2510);case p.KIND_RESIST_FIRE:return c.getLanguageStr(2515,c.getLanguageStr(2710));case p.KIND_RESIST_FROST:return c.getLanguageStr(2515,c.getLanguageStr(2711));case p.KIND_RESIST_POISON:return c.getLanguageStr(2515,c.getLanguageStr(2712));case p.KIND_RESIST_SLOW:return c.getLanguageStr(2515,c.getLanguageStr(2719));case p.KIND_RESIST_BEAT:return c.getLanguageStr(2515,c.getLanguageStr(2717));case p.KIND_RESIST_SILENCE:return c.getLanguageStr(2515,c.getLanguageStr(2722));case p.KIND_RESIST_VERTIGO:return c.getLanguageStr(2515,c.getLanguageStr(2715));case p.KIND_RESIST_CRIT:return c.getLanguageStr(2515,c.getLanguageStr(2716));case p.KIND_RESIST_LIGHT:return c.getLanguageStr(2515,c.getLanguageStr(2714));case p.KIND_RESIST_INTIMIDATE:return c.getLanguageStr(2515,c.getLanguageStr(2718));case p.KIND_RESIST_STRSMOOTH:return c.getLanguageStr(2723);case p.KIND_SLOWF:return c.getLanguageStr(2725);case p.KIND_WEAK_FIRE:return c.getLanguageStr(2516,c.getLanguageStr(2710));case p.KIND_WEAK_FROST:return c.getLanguageStr(2516,c.getLanguageStr(2711));case p.KIND_WEAK_POISON:return c.getLanguageStr(2516,c.getLanguageStr(2712));case p.KIND_WEAK_SLOW:return c.getLanguageStr(2516,c.getLanguageStr(2719));case p.KIND_WEAK_BEAT:return c.getLanguageStr(2516,c.getLanguageStr(2717));case p.KIND_WEAK_SILENCE:return c.getLanguageStr(2516,c.getLanguageStr(2722));case p.KIND_WEAK_VERTIGO:return c.getLanguageStr(2516,c.getLanguageStr(2715));case p.KIND_WEAK_CRIT:return c.getLanguageStr(2516,c.getLanguageStr(2716));case p.KIND_WEAK_LIGHT:return c.getLanguageStr(2516,c.getLanguageStr(2714));case p.KIND_WEAK_INTIMIDATE:return c.getLanguageStr(2516,c.getLanguageStr(2718));case p.KIND_ISOLATION:return c.getLanguageStr(2517);case p.KIND_RUN:return c.getLanguageStr(2500);case p.KIND_MIRROR:return c.getLanguageStr(2501);case p.KIND_SUMMON:return c.getLanguageStr(2502);case p.KIND_CLOUD:return c.getLanguageStr(2503);case p.KIND_CURE:return c.getLanguageStr(2504);case p.KIND_BLINK:return c.getLanguageStr(2505);case p.KIND_HIDE:return c.getLanguageStr(2506);case p.KIND_RELIVE:return c.getLanguageStr(2508);case p.KIND_SUICIDE:return c.getLanguageStr(2509);case p.KIND_SHIELD:return c.getLanguageStr(2511);case p.KIND_SNEER:return c.getLanguageStr(2512);case p.KIND_REINCARNATE:return c.getLanguageStr(2514);case p.KIND_TRANSFORM:return c.getLanguageStr(2513);case p.KIND_LINKS:return c.getLanguageStr(2727);default:return""}}get name(){return this.canLevelUp(1)?c.getLanguageStr(2416,this.data.name,this.level):this.data.name}get isDebuff(){return this.grade.indexOf(de.RES_FG_X)!=-1}get skillSign(){return this.isDebuff?Kt(c.getLanguageStr(2422),0,!0,13):Kt(c.getLanguageStr(2421),16711680,!0,13)}get isDowerSkill(){return!1}get isLearnSkill(){return!1}getConflictStr(){let e=null,l=0,s=0,i=m.$_conflict_skill_kind,o="";for(l=0;l<i.length;l++)if(e=i[l],e.indexOf(this.data.kindId)!=-1)for(s=0;s<e.length;s++)e[s]!=this.data.kindId&&(o+=de.getKindName(e[s]),o+=c.getLanguageStr(2406));return o.length>0&&(o=o.slice(0,o.length-1)),o}canLevelUp(e=-1){return e<0&&(e=this.level),e<this.levelMax}get levelMax(){if(this.m_levelMax<=0){const e=m.$_skill_lvup_spend,l=this.grade;if(e[l])for(const s in e[l])this.m_levelMax=Math.max(this.m_levelMax,parseInt(s))+1;else this.m_levelMax=1}return this.m_levelMax}levelUpSpend(e=-1){e<0&&(e=this.level);let l=m.$_skill_lvup_spend,s=this.grade;return l[s]&&l[s][String(e)]?l[s][String(e)]:null}get skillScore(){let e=m.$_skill_grade_score,l=this.grade;return e[l]&&e[l][String(this.level)]?e[l][String(this.level)]:1}get grade(){let e=this.data.id,l=e.indexOf("_");return l==-1?de.RES_FG_X:e.slice(l+1,e.length)}isEventSkill(){switch(this.data.kindId){case p.KIND_RUN:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case p.KIND_FLY:return new us(this.data.id,this.level,this.monster);case p.KIND_AIRBORNE:return new ll(this.data.id,this.level,this.monster);case p.KIND_RESIST_FIRE:case p.KIND_RESIST_FROST:case p.KIND_RESIST_POISON:case p.KIND_RESIST_SLOW:case p.KIND_RESIST_BEAT:case p.KIND_RESIST_SILENCE:case p.KIND_RESIST_VERTIGO:case p.KIND_RESIST_CRIT:case p.KIND_RESIST_LIGHT:case p.KIND_RESIST_INTIMIDATE:case p.KIND_RESIST_STRSMOOTH:case p.KIND_SLOWF:case p.KIND_WEAK_FIRE:case p.KIND_WEAK_FROST:case p.KIND_WEAK_POISON:case p.KIND_WEAK_SLOW:case p.KIND_WEAK_BEAT:case p.KIND_WEAK_SILENCE:case p.KIND_WEAK_VERTIGO:case p.KIND_WEAK_CRIT:case p.KIND_WEAK_LIGHT:case p.KIND_WEAK_INTIMIDATE:return new Oe(this.data.id,this.level,this.monster);case p.KIND_ISOLATION:return new cs(this.data.id,this.level,this.monster);case p.KIND_RUN:return new _s(this.data.id,this.level,this.monster);case p.KIND_MIRROR:return new kl(this.data.id,this.level,this.monster);case p.KIND_SUMMON:return new Bl(this.data.id,this.level,this.monster);case p.KIND_CLOUD:return new rs(this.data.id,this.level,this.monster);case p.KIND_CURE:return new os(this.data.id,this.level,this.monster);case p.KIND_BLINK:return new ns(this.data.id,this.level,this.monster);case p.KIND_HIDE:return new al(this.data.id,this.level,this.monster);case p.KIND_RELIVE:return new $l(this.data.id,this.level,this.monster);case p.KIND_SUICIDE:return new sl(this.data.id,this.level,this.monster);case p.KIND_SHIELD:return new hs(this.data.id,this.level,this.monster);case p.KIND_SNEER:return new ms(this.data.id,this.level,this.monster);case p.KIND_REINCARNATE:return new Vl(this.data.id,this.level,this.monster);case p.KIND_TRANSFORM:return new gs(this.data.id,this.level,this.monster);case p.KIND_LINKS:return new ds(this.data.id,this.level,this.monster);default:return this}}};a(de,"RES_SKILL","skill_"),a(de,"RES_FG_A","A"),a(de,"RES_FG_B","B"),a(de,"RES_FG_C","C"),a(de,"RES_FG_Z","Z"),a(de,"RES_FG_X","X"),a(de,"RES_FG_0","0"),a(de,"RES_BG","bg"),a(de,"PHOTO_WIDTH",34),a(de,"PHOTO_HEIGHT",34),a(de,"PHOTO_ROUND",8);let me=de;class Se extends me{constructor(t,e,l){super(t,e,l)}warmup(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cooldown(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}chances(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}eventType(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,3)}duration(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,4)}refreshTag(t=!1){this.skillTag1=this.getTagEventType(),this.nextLevelSkillTag1=this.getTagEventType(this.level+1),this.skillTag2=this.getTagCooldown(),this.nextLevelSkillTag2=this.getTagCooldown(this.level+1),t&&(this.skillTag3=this.getTagDuration(),this.nextLevelSkillTag3=this.getTagDuration(this.level+1))}getTagEventType(t=-1){let e=0;t<0&&(t=this.level);let l="",s=this.eventType(t);if(s.length!=4){for(e=0;e<s.length;e++)s[e]==p.EVENT_RED?l+=c.getLanguageStr(2402)+c.getLanguageStr(2406):s[e]==p.EVENT_YELLOW?l+=c.getLanguageStr(2403)+c.getLanguageStr(2406):s[e]==p.EVENT_GREEN?l+=c.getLanguageStr(2404)+c.getLanguageStr(2406):s[e]==p.EVENT_FULL&&(l+=c.getLanguageStr(2405)+c.getLanguageStr(2406));l=l.slice(0,l.length-1),l=c.getLanguageStr(2400,l)}return l}getTagCooldown(t=-1){return t<0&&(t=this.level),""+c.getLanguageStr(2401,this.cooldown(t))}getTagDuration(t=-1){return t<0&&(t=this.level),""+c.getLanguageStr(2407,this.duration(t))}}class ll extends me{constructor(t,e,l){super(t,e,l),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2201)}}heightSpeed(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}pathLengthMin(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}pathLengthMax(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}}a(ll,"BALLOON","balloon"),a(ll,"DEFAULT_HEIGHT",2e3);class ns extends Se{constructor(t,e,l){super(t,e,l),this.index=100,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2303,P.toGridStr(this.range())),this.m_nextLevelSkillInfo=c.getLanguageStr(2303,P.toGridStr(this.range(this.level+1))),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}}class rs extends Se{constructor(t,e,l){super(t,e,l),this.index=110,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2302,this.cloudTime()),this.m_nextLevelSkillInfo=c.getLanguageStr(2302,this.cloudTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class os extends Se{constructor(t,e,l){super(t,e,l),this.index=140,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2300,P.toGridStr(this.cureRange()),P.toPercentage(this.cureRate())),this.m_nextLevelSkillInfo=c.getLanguageStr(2300,P.toGridStr(this.cureRange(this.level+1)),P.toPercentage(this.cureRate(this.level+1))),this.refreshTag()}}cureRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cureRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class us extends me{constructor(t,e,l){super(t,e,l),this.index=90,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2200),this.m_nextLevelSkillInfo=c.getLanguageStr(2200)}}get flyHeight(){return this.data.getLevelParam(this.level,0)}}class al extends Se{constructor(t,e,l){super(t,e,l),this.index=150,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2305,this.duration()),this.m_nextLevelSkillInfo=c.getLanguageStr(2305,this.duration(this.level+1)),this.refreshTag()}}}a(al,"HIDE_TIME",1),a(al,"HIDE_ALPHA",.1);class cs extends me{constructor(t,e,l){super(t,e,l),this.index=500,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2202)}}}class ds extends Se{constructor(t,e,l){super(t,e,l),this.index=116,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2728,P.toGridStr(this.range()),P.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=c.getLanguageStr(2728,P.toGridStr(this.range(this.level+1)),P.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class kl extends Se{constructor(t,e,l){super(t,e,l),this.index=130,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2306,this.mirrorNum(),P.toPercentage(this.hpRate()),this.duration()),this.m_nextLevelSkillInfo=c.getLanguageStr(2306,this.mirrorNum(this.level+1),P.toPercentage(this.hpRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}mirrorNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}a(kl,"DEFAULT_DISTANCE",750);class Vl extends me{constructor(t,e,l){super(t,e,l),this.index=85,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2215,this.monsterName()),this.m_nextLevelSkillInfo=c.getLanguageStr(2215,this.monsterName(this.level+1))}}monsterIdList(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}monsterName(t=-1){let e=0,l=this.monsterIdList(t),s="";for(e=0;e<l.length;e++)s+=Le.getOnlyExample().getData(l[e]).name,s+=c.getLanguageStr(2406);return s.slice(0,s.length-1),s}}a(Vl,"REINCARNATE_TIME",5);class $l extends me{constructor(t,e,l){super(t,e,l),this.index=170,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2213,this.reliveNum(),P.toPercentage(this.reliveHpRate())),this.m_nextLevelSkillInfo=c.getLanguageStr(2213,this.reliveNum(this.level+1),P.toPercentage(this.reliveHpRate(this.level+1)))}}reliveNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}reliveHpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}a($l,"RELIVE_TIME",8);class Oe extends me{constructor(e,l,s){super(e,l,s);a(this,"maxHP",0);this.index=300,this.m_updateFunction=function(){this.m_skillInfo=this.resistInfo(),this.m_nextLevelSkillInfo=this.resistInfo(this.level+1)}}getResist(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}getRange(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}getMaxHP(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}resistInfo(e=-1){let l=this.getResist(e),s="",i=P.toPercentage(Math.abs(l));return l==0||(l>0?s=c.getLanguageStr(2409):s=c.getLanguageStr(2408),this.data.kindId==p.KIND_SLOWF&&(s=P.toGridStr(this.getRange())),s=c.getLanguageStr(this.resistInfoNumber,s,i),this.data.kindId==p.KIND_RESIST_STRSMOOTH&&this.getMaxHP(e)>0&&(s+=c.getLanguageStr(2730,this.getMaxHP(e)))),s}get resistInfoNumber(){switch(this.data.kindId){case p.KIND_RESIST_FIRE:case p.KIND_WEAK_FIRE:return 2203;case p.KIND_RESIST_FROST:case p.KIND_WEAK_FROST:return 2204;case p.KIND_RESIST_POISON:case p.KIND_WEAK_POISON:return 2205;case p.KIND_RESIST_SLOW:case p.KIND_WEAK_SLOW:return 2206;case p.KIND_RESIST_BEAT:case p.KIND_WEAK_BEAT:return 2207;case p.KIND_RESIST_SILENCE:case p.KIND_WEAK_SILENCE:return 2208;case p.KIND_RESIST_VERTIGO:case p.KIND_WEAK_VERTIGO:return 2209;case p.KIND_RESIST_CRIT:case p.KIND_WEAK_CRIT:return 2210;case p.KIND_RESIST_LIGHT:case p.KIND_WEAK_LIGHT:return 2211;case p.KIND_RESIST_INTIMIDATE:case p.KIND_WEAK_INTIMIDATE:return 2212;case p.KIND_RESIST_STRSMOOTH:return 2724;case p.KIND_SLOWF:return 2726;default:return 0}}}a(Oe,"IMMUNITY",2701),a(Oe,"RESIST_SUPER",2702),a(Oe,"RESIST_HIGH",2703),a(Oe,"RESIST",2704),a(Oe,"FEAR",2705),a(Oe,"FEAR_HIGH",2706),a(Oe,"FEAR_SUPER",2707);class _s extends Se{constructor(t,e,l){super(t,e,l),this.index=160,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2304,P.toPercentage(this.speedRate()-1),this.duration()),this.m_nextLevelSkillInfo=c.getLanguageStr(2304,P.toPercentage(this.speedRate(this.level+1)-1),this.duration(this.level+1)),this.refreshTag()}}speedRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)+1}}class hs extends Se{constructor(t,e,l){super(t,e,l),this.index=105,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2308,P.toPercentage(this.shieldRate()),this.shieldTime()),this.m_nextLevelSkillInfo=c.getLanguageStr(2308,P.toPercentage(this.shieldRate(this.level+1)),this.shieldTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}class ms extends Se{constructor(t,e,l){super(t,e,l),this.index=106,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2309,P.toGridStr(this.range()),P.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=c.getLanguageStr(2309,P.toGridStr(this.range(this.level+1)),P.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class sl extends me{constructor(t,e,l){super(t,e,l),this.index=185,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2214,P.toGridStr(this.cloudRange()),this.cloudTime()),this.m_nextLevelSkillInfo=c.getLanguageStr(2214,P.toGridStr(this.cloudRange(this.level+1)),this.cloudTime(this.level+1))}}cloudRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}a(sl,"isEveryTime",!0),a(sl,"SUICIDE_TIME",.5);class Bl extends Se{constructor(t,e,l){super(t,e,l),this.index=120,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2301,this.summonNum(),P.toPercentage(this.hpRate()),this.summonName()),this.m_nextLevelSkillInfo=c.getLanguageStr(2301,this.summonNum(this.level+1),P.toPercentage(this.hpRate(this.level+1)),this.summonName(this.level+1)),this.refreshTag(!0)}}summonId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}summonName(t=-1){return t<0&&(t=this.level),Le.getOnlyExample().getData(this.summonId(t)).name}summonNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}a(Bl,"DEFAULT_DISTANCE",750);class gs extends Se{constructor(t,e,l){super(t,e,l),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=c.getLanguageStr(2307,this.transformName()),this.m_nextLevelSkillInfo=c.getLanguageStr(2307,this.transformName(this.level+1)),this.refreshTag(!0)}}transformId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}transformName(t=-1){return t<0&&(t=this.level),Le.getOnlyExample().getData(this.transformId(t)).name}}class Hl extends ft{constructor(e,l=1){super();a(this,"level");this.m_data=Ft.getOnlyExample().getData(e),this.level=l}get skillsPackageData(){return this.m_data}}class Gl{}a(Gl,"COLOR_LIST",[6316128,13631488,13668352,43520,28927,8913056,0]);const ce=class ce extends Ce{constructor(e){super(e);a(this,"m_price");a(this,"priceCoin",0);a(this,"priceGold",0);a(this,"priceScore",0);a(this,"unlockMapId","");a(this,"index",0);this.m_price=e[ce.DATA_PRICE],this.initPrice(),this.unlockMapId=e[ce.DATA_UNLOCK_MAP_ID],this.index=e[ce.DATA_INDEX]}get price(){return this instanceof mt&&le.currentMap&&le.currentMap.isDefendMap&&this.campPrice instanceof Array?this.campPrice:this.m_price}initPrice(){let e=this.price;if(e)if(e instanceof Array){const l=e;l[0]==ce.DATA_COIN?this.priceCoin=l[1]:l[0]==ce.DATA_GOLD?this.priceGold=l[1]:l[0]==ce.DATA_SCORE&&(this.priceScore=l[1])}else this.priceCoin=e[ce.DATA_COIN],this.priceGold=e[ce.DATA_GOLD],this.priceScore=e[ce.DATA_SCORE]}get isRare(){if(this.priceCoin>0){if(this.priceCoin>=m.$_rare_item_coin||this.index<0)return!0}else if(this.priceScore>0&&(this.priceScore>=m.$_rare_item_invite_score||this.index<0))return!0;return!1}};a(ce,"DATA_PRICE","price"),a(ce,"DATA_UNLOCK_MAP_ID","unlock_mid"),a(ce,"DATA_COIN","coin"),a(ce,"DATA_GOLD","gold"),a(ce,"DATA_SCORE","invite_score"),a(ce,"DATA_INDEX","index");let Tt=ce;const _e=class _e extends Tt{constructor(e){super(e);a(this,"gemLevel");a(this,"towerSkillPackage");a(this,"nextLevelId");a(this,"colorIndex");this.typeId=Ce.TYPE_GEM_ITEM,this.gemLevel=e[_e.DATA_GEM_LEVEL],this.towerSkillPackage=e[_e.DATA_TOWER_SKILL_PACKAGE],this.nextLevelId=e[_e.DATA_NEXT_LEVEL_ID],this.colorIndex=e[_e.DATA_COLOR_INDEX],this.res=this.resString}getSkillPackage(e){if(this.towerSkillPackage==null)return null;let l=/\D/gi;e=e.match(l).join("");let s=this.towerSkillPackage[e];return s==null?null:new Hl(s[_e.SKILL_PACKAGE_ID],s[_e.SKILL_PACKAGE_LEVEL])}get color(){return Gl.COLOR_LIST[this.colorIndex]}get resString(){return"hong"+this.gemLevel}};a(_e,"TYPE_PURE","typePure"),a(_e,"TYPE_MIX","typeMix"),a(_e,"DATA_GEM_LEVEL","gamLevel"),a(_e,"DATA_TOWER_SKILL_PACKAGE","sp"),a(_e,"DATA_NEXT_LEVEL_ID","nextId"),a(_e,"DATA_COLOR_INDEX","color"),a(_e,"SKILL_PACKAGE_ID","id"),a(_e,"SKILL_PACKAGE_LEVEL","lv");let il=_e;const Fe=class Fe extends Je{constructor(){super(),Fe.onlyExample=this,this.loadData(m.$_global_properties[Ce.TYPE_GEM_ITEM])}static getOnlyExample(){return Fe.onlyExample==null&&(Fe.onlyExample=new Fe),Fe.onlyExample}loadData(t){let e;for(e in t)this.m_manager[e]=new il(t[e])}initData(){}getData(t){return this.getDataById(t)}};a(Fe,"onlyExample");let nl=Fe;const ie=class ie extends Tt{constructor(e){super(e);a(this,"skillPackageId");a(this,"skillPackageLevel");a(this,"skills");a(this,"xGrid");a(this,"yGrid");if(this.skillPackageId=e[ie.DATA_SKILL_PACKAGE_ID],this.skillPackageLevel=e[ie.DATA_SKILL_PACKAGE_LEVEL],e[ie.DATA_SKILLS]instanceof Array)this.skills=e[ie.DATA_SKILLS];else if(e[ie.DATA_SKILLS]instanceof Object){this.skills=[];for(const l in e[ie.DATA_SKILLS])this.skills.push({skid:l,lev:e[ie.DATA_SKILLS][l]})}e[ie.DATA_X_GRID]?this.xGrid=e[ie.DATA_X_GRID]:this.xGrid=1,e[ie.DATA_Y_GRID]?this.yGrid=e[ie.DATA_Y_GRID]:this.yGrid=1}};a(ie,"DATA_A","a"),a(ie,"DATA_B","b"),a(ie,"DATA_C","c"),a(ie,"DATA_D","d"),a(ie,"DATA_SKILL_PACKAGE_ID","skill"),a(ie,"DATA_SKILL_PACKAGE_LEVEL","skillLv"),a(ie,"DATA_SKILLS","skills"),a(ie,"DATA_X_GRID","x_grid"),a(ie,"DATA_Y_GRID","y_grid");let re=ie;const te=class te extends re{constructor(e){super(e);a(this,"m_buildValueA",0);a(this,"m_buildValueB",0);a(this,"m_buildValueC",0);a(this,"m_campPrice",["",0]);a(this,"m_campBuildValueA",0);a(this,"m_campBuildValueB",0);a(this,"m_campBuildValueC",0);a(this,"range");a(this,"rate");a(this,"limitNum");e[te.DATA_BUILD_VALUE]?(this.m_buildValueA=e[te.DATA_BUILD_VALUE][re.DATA_A],this.m_buildValueB=e[te.DATA_BUILD_VALUE][re.DATA_B],this.m_buildValueC=e[te.DATA_BUILD_VALUE][re.DATA_C]):e[te.DATA_EXP_VALUE]&&(this.m_buildValueA=e[te.DATA_EXP_VALUE][re.DATA_A],this.m_buildValueB=e[te.DATA_EXP_VALUE][re.DATA_B],this.m_buildValueC=e[te.DATA_EXP_VALUE][re.DATA_C]),e[te.DATA_CAMP_PRICE]&&(this.m_campPrice=e[te.DATA_CAMP_PRICE]),e[te.DATA_CAMP_BUILD_VALUE]&&(this.m_campBuildValueA=e[te.DATA_CAMP_BUILD_VALUE][re.DATA_A],this.m_campBuildValueB=e[te.DATA_CAMP_BUILD_VALUE][re.DATA_B],this.m_campBuildValueC=e[te.DATA_CAMP_BUILD_VALUE][re.DATA_C]),this.range=e[te.DATA_RANGE],this.rate=Math.round(e[te.DATA_RATE]*10),this.limitNum=e[te.DATA_LIMIT_NUM]}get buildValueA(){return le.currentMap&&le.currentMap.isDefendMap?this.m_campBuildValueA:this.m_buildValueA}get buildValueB(){return le.currentMap&&le.currentMap.isDefendMap?this.m_campBuildValueB:this.m_buildValueB}get buildValueC(){return le.currentMap&&le.currentMap.isDefendMap?this.m_campBuildValueC:this.m_buildValueC}get campPrice(){return this.m_campPrice}get buildCostPrice(){return this.price[0]}get buildCost(){return this.price[1]}get buildValueAConst(){return this.m_buildValueA}get buildValueBConst(){return this.m_buildValueB}get buildValueCConst(){return this.m_buildValueC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}};a(te,"DATA_BUILD_VALUE","build_val"),a(te,"DATA_EXP_VALUE","exp_val"),a(te,"DATA_CAMP_PRICE","camp_price"),a(te,"DATA_CAMP_BUILD_VALUE","camp_build_val"),a(te,"DATA_RANGE","range"),a(te,"DATA_RATE","rate"),a(te,"DATA_LIMIT_NUM","limit_num");let mt=te;const $=class $ extends mt{constructor(e){super(e);a(this,"valueList");a(this,"effectType");a(this,"effectKind");a(this,"effectRange");a(this,"useNum");a(this,"colddown");a(this,"delay");a(this,"attackEffectId");this.typeId=Ce.TYPE_TRAP_ITEM,this.valueList=e[$.DATA_VALUE_LIST],this.effectType=e[$.DATA_EFFECT_TYPE],this.effectKind=e[$.DATA_EFFECT_KIND],e[$.DATA_USE_NUM]?this.useNum=e[$.DATA_USE_NUM]:this.useNum=1,e[$.DATA_COLDDOWN]?this.colddown=e[$.DATA_COLDDOWN]:this.colddown=.1,e[$.DATA_DELAY]?this.delay=e[$.DATA_DELAY]:this.delay=0,e[$.DATA_EFFECT_RANGE]?this.effectRange=e[$.DATA_EFFECT_RANGE]:this.effectRange=this.range,this.attackEffectId=e[$.DATA_EFFECT]}};a($,"KIND_BLAST","1"),a($,"KIND_DAMAGE","2"),a($,"KIND_VERTIGO","3"),a($,"KIND_SLOW","4"),a($,"KIND_BEAT_BACK","5"),a($,"KIND_COLD_BULLET","50"),a($,"KIND_BULLET","100"),a($,"KIND_BULLET_RANDOM","101"),a($,"EFFECT_TYPE_FLOOR","1"),a($,"EFFECT_TYPE_AIR","2"),a($,"EFFECT_TYPE_ALL","3"),a($,"EFFECT_TYPE_LIGHTNING","4"),a($,"EFFECT_KIND_SINGLE","1"),a($,"EFFECT_KIND_MULTI","2"),a($,"DATA_VALUE_LIST","value"),a($,"DATA_EFFECT_TYPE","effectType"),a($,"DATA_EFFECT_KIND","effectKind"),a($,"DATA_EFFECT_RANGE","effectRange"),a($,"DATA_USE_NUM","use_times"),a($,"DATA_COLDDOWN","colddown"),a($,"DATA_DELAY","delay"),a($,"DATA_EFFECT","effect");let rl=$;class Il extends mt{constructor(e){super(e);a(this,"m_buildCostA");a(this,"m_buildCostB");a(this,"m_buildCostC");a(this,"m_campBuildCostA");a(this,"m_campBuildCostB");a(this,"m_campBuildCostC");a(this,"damageA");a(this,"damageB");a(this,"damageC");a(this,"bulletId","");a(this,"buffEffect");a(this,"levelMax");this.m_buildCostA=e.build_cost.a,this.m_buildCostB=e.build_cost.b,this.m_buildCostC=e.build_cost.c,this.m_campBuildCostA=e.camp_build_cost.a,this.m_campBuildCostB=e.camp_build_cost.b,this.m_campBuildCostC=e.camp_build_cost.c,this.damageA=e.damage.a,this.damageB=e.damage.b,this.damageC=e.damage.c,this.buffEffect=e.buffEffect,this.levelMax=e.lev_max,this.bulletId=e.bId}get buildCostA(){var e;return(e=le.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostA:this.m_buildCostA}get buildCostB(){var e;return(e=le.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostB:this.m_buildCostB}get buildCostC(){var e;return(e=le.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostC:this.m_buildCostC}get buildCostAConst(){return this.m_buildCostA}get buildCostBConst(){return this.m_buildCostB}get buildCostCConst(){return this.m_buildCostC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}get isMagicTower(){return this.id=="xiangqianta"}}const ke=class ke extends Je{constructor(){super(),ke.onlyExample=this,this.loadData(m.$_towerAtt_Obj)}static getOnlyExample(){return ke.onlyExample==null&&(ke.onlyExample=new ke),ke.onlyExample}loadData(t){for(const e in t){const l=t[e];l[pe.DATA_ID]=e,this.m_manager[e]=new Il(t[e])}}getData(t){return this.getDataById(t)}};a(ke,"onlyExample");let ol=ke;const Q=class Q extends re{constructor(e){super(e);a(this,"shapeMode");a(this,"damageMode");a(this,"radii");a(this,"shadow");a(this,"fallAccSpeed");a(this,"floorPathId");a(this,"hitEffectId");this.shapeMode=e[Q.DATA_SHAPE_MODE],this.damageMode=e[Q.DATA_DAMAGE_MODE],this.radii=e[Q.DATA_RADII],e[Q.DATA_SHADOW]?this.shadow=e[Q.DATA_SHADOW]:this.shadow=1,this.fallAccSpeed=e[Q.DATA_FALL_ACC_SPEED],this.floorPathId=e[Q.DATA_FLOOR_PATH_ID],this.hitEffectId=e[Q.DATA_HIT_EFFECT_ID]}};a(Q,"SHAPE_COMMON",0),a(Q,"SHAPE_DIRECTION",1),a(Q,"SHAPE_ROLL",2),a(Q,"DAMAGE_NULL",0),a(Q,"DAMAGE_COMMON",1),a(Q,"DAMAGE_PERFORATIVE",2),a(Q,"DAMAGE_MAGICAL",3),a(Q,"DAMAGE_SIEGE",4),a(Q,"DAMAGE_MIXED",5),a(Q,"FALL_ACC_SPEED_THRESHOLD",-7),a(Q,"DATA_SHAPE_MODE","shapeMode"),a(Q,"DATA_DAMAGE_MODE","damageMode"),a(Q,"DATA_RADII","radii"),a(Q,"DATA_SHADOW","shadow"),a(Q,"DATA_FALL_ACC_SPEED","fallAcc"),a(Q,"DATA_FLOOR_PATH_ID","path"),a(Q,"DATA_HIT_EFFECT_ID","effect");let ul=Q;const Ve=class Ve extends Je{constructor(){super(),Ve.onlyExample=this,this.loadData(m.$_bulletAtt_Obj)}static getOnlyExample(){return Ve.onlyExample==null&&(Ve.onlyExample=new Ve),Ve.onlyExample}loadData(t){for(const e in t){const l=t[e];l[pe.DATA_ID]=e,this.m_manager[e]=new ul(t[e])}}getData(t){return this.getDataById(t)}};a(Ve,"onlyExample");let cl=Ve;const O=class O extends re{constructor(e){super(e);a(this,"hpMaxA");a(this,"hpMaxB");a(this,"hpMaxC");a(this,"expMaxA",0);a(this,"expMaxB",0);a(this,"expMaxC",0);a(this,"expMaxD",0);a(this,"speedBase");a(this,"charm");a(this,"height");a(this,"width");a(this,"speakList",[]);a(this,"population");e[O.DATA_HP_MAX]?(this.hpMaxA=e[O.DATA_HP_MAX][re.DATA_A],this.hpMaxB=e[O.DATA_HP_MAX][re.DATA_B],this.hpMaxC=e[O.DATA_HP_MAX][re.DATA_C]):(this.hpMaxA=e[O.DATA_HP_MAX_A],this.hpMaxB=e[O.DATA_HP_MAX_B],this.hpMaxC=e[O.DATA_HP_MAX_C]),e[O.DATA_EXP_MAX]&&(this.expMaxA=e[O.DATA_EXP_MAX][re.DATA_A],this.expMaxB=e[O.DATA_EXP_MAX][re.DATA_B],this.expMaxC=e[O.DATA_EXP_MAX][re.DATA_C],this.expMaxD=e[O.DATA_EXP_MAX][re.DATA_D]),this.speedBase=e[O.DATA_SPEED_BASE],this.charm=e[O.DATA_CHARM],this.height=e[O.DATA_HEIGHT],this.width=e[O.DATA_WIDTH],e[O.DATA_SPEAK_LIST]instanceof Array&&(this.speakList=e[O.DATA_SPEAK_LIST]),this.population=e[O.DATA_POPULATION]}getSpeak(e=0){if(this.speakList instanceof Array&&this.speakList.length>e){if(this.speakList[e]instanceof String)return this.speakList[e];if(this.speakList[e]instanceof Array){const l=this.speakList[e];return l[Math.floor(Math.random()*l.length)]}}return""}getSpeakEnter(){return this.getSpeak(O.SPEAK_ENTER)}getSpeakIdle(){return this.getSpeak(O.SPEAK_IDLE)}getSpeakInjury(){return this.getSpeak(O.SPEAK_INJURY)}getSpeakDie(){return this.getSpeak(O.SPEAK_DIE)}getSpeakInvade(){return this.getSpeak(O.SPEAK_INVADE)}getSpeakCast(){return this.getSpeak(O.SPEAK_CAST)}get isBoss(){return this.population>=100}get isRandomBoss(){return this.population==99}getHpMax(e,l=1){return Math.floor((this.hpMaxA+e*(this.hpMaxB+e*this.hpMaxC))*l)}};a(O,"SPEAK_ENTER",0),a(O,"SPEAK_IDLE",1),a(O,"SPEAK_INJURY",2),a(O,"SPEAK_DIE",3),a(O,"SPEAK_INVADE",4),a(O,"SPEAK_CAST",5),a(O,"DEFENSE_NULL",0),a(O,"DEFENSE_LIGHT",1),a(O,"DEFENSE_COMMON",2),a(O,"DEFENSE_HEAVY",3),a(O,"DEFENSE_BUILDING",4),a(O,"DEFENSE_BOSS",5),a(O,"DEFENSE_HOLY",6),a(O,"DEFENSE_INVINCIBLE",7),a(O,"DATA_HP_MAX","hp_factor"),a(O,"DATA_EXP_MAX","explev"),a(O,"DATA_HP_MAX_A","ha"),a(O,"DATA_HP_MAX_B","hb"),a(O,"DATA_HP_MAX_C","hc"),a(O,"DATA_SPEED_BASE","speed"),a(O,"DATA_CHARM","charm"),a(O,"DATA_HEIGHT","height"),a(O,"DATA_WIDTH","width"),a(O,"DATA_SPEAK_LIST","speak"),a(O,"DATA_POPULATION","pop");let Dt=O;const $e=class $e extends Je{constructor(){super(),$e.onlyExample=this,this.loadData(m.$_wolfAtt_Obj)}static getOnlyExample(){return $e.onlyExample==null&&($e.onlyExample=new $e),$e.onlyExample}loadData(t){for(const e in t){const l=t[e];l[pe.DATA_ID]=e,this.m_manager[e]=new Dt(l)}}getBossList(t){const e=[];if(!(t instanceof Array))return e;for(let l=0;l<t.length;l++){const s=this.getData(t[l]);s&&s.isBoss&&e.push(t[l])}return e}getRandomBossList(t){const e=[];if(!(t instanceof Array))return e;for(let l=0;l<t.length;l++){const s=this.getData(t[l]);s&&s.isRandomBoss&&e.push(t[l])}return e}getData(t){return this.getDataById(t)}};a($e,"onlyExample");let Le=$e;function fs(h){return Fa(h)}function rt(h,t,e){return Ea.hsl(fs(h),t,e).string()}const Wl=oe({__name:"WolfHpChart",props:{hpData:{},width:{default:600},height:{default:200}},setup(h){ml([gl,fl,pl,Al,El]);const t=h,e=z(()=>({color:["#00A2E8"],title:{text:"当前狼血量",left:"center",textStyle:{fontStyle:"normal",fontFamily:"sans-serif",fontSize:16}},tooltip:{},xAxis:{type:"value",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}}},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.hpData.map(l=>l.name)},grid:{left:100,top:30,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.hpData.map(l=>l.value),itemStyle:{color:function(l){return rt(l.name,80,45)}}}}));return(l,s)=>(A(),F(u(hl),{class:"chart",option:u(e),style:xl({width:`${l.width}px`,height:`${l.height}px`})},null,8,["option","style"]))}});function Xl(h,t){const e=m.$_wolfAtt_Obj[h].pop;return e<99?e:t??e}function ps(h,t=1){return X.sumBy(h,e=>Xl(e,t))}function Sl(h,t){return Math.round((2+1.07*t)*Math.pow(h/.39,2/3))}function As(h,t){const e=m.dream_data.dm_opt_cfg.tower_sum_exp;return Math.round(t*Math.pow(h,e.power)*e.popu+e.p)}function Es(h,t){const e=m.$_map_Obj[h],l=e.wolf_proportion;let s=e.pop_max;const i=l.map(b=>b[0]),o=l.map(b=>Xl(b[1]));let n=l.map(b=>b[1]),d=o.length;if(d==0)return[[],[]];let g=[],E=new Array(d).fill(0);if(t&&(g=t.flatMap((b,w)=>new Array(b).fill(n[w])),E=t,t.length=o.length,s-=X.chain(o).zip(t).sumBy(b=>b[0]*b[1]).value(),s<0))return null;for(;s>0;){for(;d>0&&s<o[d-1];)d--;if(d==0)break;let b;do{const w=Math.random()*i[d-1];b=X.findIndex(i,U=>w<U)}while(s<o[b]);s-=o[b],g.push(n[b]),E[b]++}return[t?X.shuffle(g):g,X.zip(n,E)]}const Is={class:"space-x-4"},Ts=oe({__name:"dmap-detail",setup(h){const t=X.chain(m.dream_maps).toArray().sortBy("index").value(),e=De({mid:"m2A",score:1}),l=z(()=>m.dream_maps[e.mid]),s=K=>K%10===0?(K-10)%100+10:K%10,i=K=>{const C=s(K).toString(),T=m.dream_waves[e.mid];return K%10==0?T.boss[C]:T.wolf[C]},o=z(()=>i(e.score).map(K=>Le.getOnlyExample().getData(K))),n=(K,C)=>{const T=s(C).toString();return m.dream_waves[e.mid].popu[T]},d=z(()=>n(e.mid,e.score)),g=K=>As(K,n(e.mid,K==0?1:K==9?10:s(K))),E=z(()=>g(e.score)),b=z(()=>Math.sqrt(l.value.hard_ness*e.score+l.value.yield_val)),w=z(()=>{for(const[K,C]of Object.entries(m.dream_data.dm_wolf_hard_ness)){const[T,f]=K.split("_");if(e.score>=Number.parseInt(T)&&e.score<=Number.parseInt(f))return C}return m.dream_data.dm_wolf_hard_ness.default}),U=z(()=>o.value.map(K=>({name:K.name,value:K.getHpMax(b.value,w.value)}))),H=z(()=>{let K=0,C=0;for(let T=1;T<=e.score;T++){let f=Math.sqrt(l.value.yield_val+l.value.hard_ness*T);K+=Sl(f,n(e.mid,T)),C+=g(T)}return{gold:K,exp:C}});return(K,C)=>{const T=ze,f=qe,R=ut,M=ct,ue=Ne,ne=bt("vue-latex"),J=dt;return A(),F(J,{model:u(e),"label-width":"120px"},{default:_(()=>[r(M,{label:"地图"},{default:_(()=>[r(f,{modelValue:u(e).mid,"onUpdate:modelValue":C[0]||(C[0]=ee=>u(e).mid=ee)},{default:_(()=>[(A(!0),v(k,null,j(u(t),ee=>(A(),F(T,{key:ee.id,label:`${ee.id} ${ee.name}`,value:ee.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(R,{effect:"light",class:"mx-1"},{default:_(()=>[x(" 难度系数："+N(u(l).hard_ness)+", "+N(u(l).yield_val),1)]),_:1})]),_:1}),r(M,{label:"进度"},{default:_(()=>[r(ue,{modelValue:u(e).score,"onUpdate:modelValue":C[1]||(C[1]=ee=>u(e).score=ee),min:0},null,8,["modelValue"]),r(R,{effect:"light",class:"mx-1"},{default:_(()=>[x(" HpRate："+N(u(w)),1)]),_:1}),r(R,{effect:"light",class:"mx-1"},{default:_(()=>[x(" Population："+N(u(d)),1)]),_:1})]),_:1}),r(M,null,{default:_(()=>[x(" 银币： "),r(ne,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${u(Sl)(u(b),u(d))}`},null,8,["expression"])]),_:1}),r(M,null,{default:_(()=>[x(" 经验： "),r(ne,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${u(E)}`},null,8,["expression"])]),_:1}),r(M,null,{default:_(()=>[L("div",Is,[L("span",null,"总银币："+N(u(H).gold),1),L("span",null,"总经验："+N(u(H).exp),1)])]),_:1}),r(Wl,{"hp-data":u(U),height:300},null,8,["hp-data"])]),_:1},8,["model"])}}});const Ds=Object.freeze(Object.defineProperty({__proto__:null,default:Ts},Symbol.toStringTag,{value:"Module"})),Ls={key:0,class:"space-y-1"},Ss={class:"space-x-0.5"},Ns=oe({__name:"dmaps",setup(h){const t=X.sortBy(Object.values(m.dream_maps),"name").map(e=>({...e,...m.dream_waves[e.id],waves:Object.assign({},m.dream_waves[e.id].wolf,m.dream_waves[e.id].boss)}));return(e,l)=>{const s=Ye,i=ut,o=je;return A(),v("div",null,[r(o,{data:u(t)},{default:_(()=>[r(s,{prop:"id",label:"id",sortable:"",align:"center"}),r(s,{prop:"name",label:"name",sortable:"",align:"center"}),r(s,{prop:"interval",label:"interval",sortable:"",align:"center"}),r(s,{prop:"interval_rule",label:"interval_rule",sortable:"",align:"center"}),r(s,{prop:"hard_ness",label:"hard_ness",sortable:"",align:"center"}),r(s,{prop:"yield_val",label:"yield_val",sortable:"",align:"center"}),r(s,{label:"waves",type:"expand",width:"80"},{default:_(n=>[n.row.waves?(A(),v("div",Ls,[L("table",null,[(A(!0),v(k,null,j(n.row.waves,(d,g)=>(A(),v("tr",{key:g},[L("td",null,[r(i,null,{default:_(()=>[x(N(g),1)]),_:2},1024)]),L("td",Ss,[(A(!0),v(k,null,j(d,E=>(A(),F(i,{key:E,style:xl({color:u(rt)(E,40,40),"background-color":u(rt)(E,80,90),"border-color":u(rt)(E,50,80)})},{default:_(()=>[x(N(u(Re)(E)),1)]),_:2},1032,["style"]))),128))]),L("td",null,[r(i,null,{default:_(()=>[x(N(n.row.popu[g]),1)]),_:2},1024)])]))),128))]),(A(!0),v(k,null,j(n.row.waves,(d,g)=>(A(),v("div",{key:g,class:"space-x-1"}))),128))])):Ie("",!0)]),_:1})]),_:1},8,["data"])])}}});const vs=Ze(Ns,[["__scopeId","data-v-607d2849"]]),xs=Object.freeze(Object.defineProperty({__proto__:null,default:vs},Symbol.toStringTag,{value:"Module"})),bs=oe({__name:"DreamWaveEditor",props:Et({wolfList:{}},{modelValue:{}}),emits:Et(["change"],["update:modelValue"]),setup(h,{emit:t}){const e=h,l=bl(h,"modelValue"),s=t,i=he(""),o=he(!1),n=he(),d=he(e.wolfList.slice()),g=H=>{l.value.splice(l.value.indexOf(H),1),s("change")},E=()=>{o.value=!0,ea(()=>{n.value.focus()})},b=H=>{console.log(H),d.value=H?e.wolfList.filter(w(H)):e.wolfList},w=H=>K=>K.id.toLowerCase().includes(H.toLowerCase())||K.value.includes(H),U=H=>{l.value.push(H),l.value.sort((K,C)=>K.id.localeCompare(C.id)),o.value=!1,i.value="",s("change")};return(H,K)=>{const C=ut,T=ia,f=ze,R=gt;return A(),v("div",null,[L("div",null,[(A(!0),v(k,null,j(l.value,M=>(A(),F(C,{key:M.id,type:"info",effect:"plain",class:"m-0.5",closable:"","disable-transitions":!1,onClose:ue=>g(M)},{default:_(()=>[L("ruby",null,[x(N(M.value)+" ",1),L("rt",null,N(M.id),1)])]),_:2},1032,["onClose"]))),128)),u(o)?(A(),F(u(qe),{key:0,ref_key:"InputRef",ref:n,modelValue:u(i),"onUpdate:modelValue":K[0]||(K[0]=M=>nt(i)?i.value=M:null),filterable:"","filter-method":b,class:"inline-block m-0.5",placeholder:"Select",size:"small",onChange:U},{default:_(()=>[(A(!0),v(k,null,j(u(d),M=>(A(),F(f,{key:M.id,value:M},{default:_(()=>[x(N(M.value)+" ",1),r(T,{class:"mx-1",type:"primary"},{default:_(()=>[x("["+N(M.id)+"]",1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(A(),F(R,{key:1,class:"button-new-tag m-0.5",type:"primary",plain:"",size:"small",onClick:E},{default:_(()=>[x(" + ")]),_:1}))])])}}}),ws={class:"dialog-footer"},Rs=oe({__name:"dream-design",setup(h){const{toClipboard:t}=ga(),e=he(!1),l=he(""),s=he(!1),i=he({}),o=he(""),n=he(),d=Object.keys(m.$_wolfAtt_Obj).map(C=>({id:C,value:Re(C)})),g=[1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100],E=he(g.map(C=>({key:C,wolf:[],popu:0,popFixed:!1}))),b=(C,T=!1)=>{(!C.popFixed||T)&&(C.popFixed=!1,C.popu=ps(C.wolf.map(f=>f.id)))},w=C=>{C.popu==0?(C.popFixed=!1,b(C)):C.popFixed=!0},U=()=>{const C=JSON.parse(l.value);E.value=g.map(T=>({key:T,wolf:(C.wolf[T]??C.boss[T]??[]).map(f=>({id:f,value:Re(f)})),popu:C.popu[T],popFixed:!0})),e.value=!1},H=()=>{s.value=!0;const C={wolf:{},boss:{},popu:{}};for(const T of E.value){const f=T.wolf.map(R=>R.id);C[T.key<10?"wolf":"boss"][T.key]=f,T.key<10?C.wolf[T.key]=f:C.boss[T.key]=f,C.popu[T.key]=T.popu}i.value=C,o.value=JSON.stringify(C)},K=()=>{t(o.value,n.value.$el),wl.success("已复制到剪贴板")};return(C,T)=>{const f=gt,R=Ye,M=Ne,ue=je,ne=na;return A(),v("div",null,[r(f,{onClick:T[0]||(T[0]=J=>e.value=!0)},{default:_(()=>[x("导入")]),_:1}),r(f,{onClick:H},{default:_(()=>[x("导出")]),_:1}),r(ue,{data:u(E),style:{"max-width":"1200px"}},{default:_(()=>[r(R,{prop:"key",label:"Key",width:80,align:"center"}),r(R,{label:"Wolf"},{default:_(J=>[r(bs,{"wolf-list":u(d),modelValue:J.row.wolf,"onUpdate:modelValue":ee=>J.row.wolf=ee,onChange:ee=>b(J.row)},null,8,["wolf-list","modelValue","onUpdate:modelValue","onChange"])]),_:1}),r(R,{label:"Population",width:160,align:"center"},{default:_(J=>[r(M,{modelValue:J.row.popu,"onUpdate:modelValue":ee=>J.row.popu=ee,size:"small",min:0,onChange:ee=>w(J.row),style:{width:"90px"},class:ta({primary:J.row.popFixed})},null,8,["modelValue","onUpdate:modelValue","onChange","class"]),r(f,{icon:J.row.popFixed?u(fa):u(pa),circle:"",size:"small",class:"m-0.5",onClick:ee=>J.row.popFixed?b(J.row,!0):J.row.popFixed=!0},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),r(ne,{modelValue:u(e),"onUpdate:modelValue":T[3]||(T[3]=J=>nt(e)?e.value=J:null),title:"导出数据"},{footer:_(()=>[L("span",ws,[r(f,{onClick:T[2]||(T[2]=J=>e.value=!1)},{default:_(()=>[x("取消")]),_:1}),r(f,{type:"primary",onClick:U},{default:_(()=>[x(" 确定 ")]),_:1})])]),default:_(()=>[r(u(dl),{type:"textarea",rows:10,modelValue:u(l),"onUpdate:modelValue":T[1]||(T[1]=J=>nt(l)?l.value=J:null),spellcheck:!1},null,8,["modelValue"])]),_:1},8,["modelValue"]),r(ne,{modelValue:u(s),"onUpdate:modelValue":T[4]||(T[4]=J=>nt(s)?s.value=J:null),title:"导出数据"},{default:_(()=>[r(u(Aa),{data:u(i),virtual:"",deep:2},null,8,["data"]),r(f,{onClick:K,ref_key:"someRef",ref:n},{default:_(()=>[x("复制到剪贴板")]),_:1},512)]),_:1},8,["modelValue"])])}}});const Cs=Object.freeze(Object.defineProperty({__proto__:null,default:Rs},Symbol.toStringTag,{value:"Module"}));class G{}a(G,"SNS_ID_XN","xn"),a(G,"SNS_ID_QQ","qq"),a(G,"INDEX_TAG_1",1),a(G,"INDEX_TAG_2",2),a(G,"TOOLS_CARD_RMBBT","rmbbt"),a(G,"TOOLS_CARD_YBB","ybb"),a(G,"TOOLS_CARD_LQXFJ","lqxfj"),a(G,"TOOLS_CARD_DALIC","dalic"),a(G,"TOOLS_CARD_BAOXIANG","baoxiang"),a(G,"TOOLS_CARD_JINYANG","za_jinyang"),a(G,"TOOLS_CARD_SL","sl"),a(G,"TOOLS_CARD_DRWS","drws"),a(G,"TOOLS_CARD_TEXP","texp_"),a(G,"TOOLS_CARD_ZA","za_"),a(G,"TOOLS_CARD_TIEGAO","tiegao"),a(G,"TOOLS_CARD_JUZI","juzi"),a(G,"TOOLS_CARD_HAOJIAO","haojiao"),a(G,"TOOLS_CARD_ZHAIQU","gem_"),a(G,"TOOLS_CARD","card"),a(G,"TOOLS_GEM","gem"),a(G,"TOOLS_WC","wc"),a(G,"TOOLS_TAME","tame"),a(G,"TOOLS_SNARP","snarp"),a(G,"DATA_KEY_INDEX","index"),a(G,"DATA_KEY_CARD_ID","card_id"),a(G,"DATA_KEY_CARD_NAME","card_name"),a(G,"DATA_KEY_BAG_ID","bag_id"),a(G,"DATA_USER_WOLF_CYCLE","wolf_cycle"),a(G,"DATA_USER_WOLF_MAX","wolf_max");const be=class be extends Qa{constructor(){super();a(this,"id","");a(this,"skills",{});a(this,"tag");this.tag="BaseUnit"}init(){this.initSkills()}initSkills(){}get data(){return this.m_data}};a(be,"SKILL_ID","skid"),a(be,"SKILL_LEVEL","lev"),a(be,"STATUS_RATE",200),a(be,"STATUS_TIME",be.STATUS_RATE/1e3),a(be,"AOE_SILENCE_RANGE",1e3),a(be,"AOE_SILENCE_TIME",2);let we=be;class Os extends we{constructor(){super()}get buildingData(){return this.m_data}get range(){return this.buildingData.range}get skillInfo(){let t,e=0,l=null,s=null,i="";if(this.skills==null)return i;let o=[];for(t in this.skills)o.push(this.skills[t]);for(o.sort((n,d)=>n[G.DATA_KEY_INDEX]-d[G.DATA_KEY_INDEX]),e=0;e<o.length;e++)l=o[e],s=l.skillInfo,s!=""&&(i!=""&&(i+=`
`),i+=s);return i==""&&(i=this.buildingData.info),i}}class ys extends we{constructor(e){super();a(this,"damage",0);a(this,"range",0);a(this,"attackType");this.m_data=cl.getOnlyExample().getData(e),this.attackType=rl.EFFECT_TYPE_ALL}get bulletData(){return this.m_data}}const ht=class ht extends Os{constructor(e){super();a(this,"m_level",0);a(this,"gem",null);a(this,"m_attackType","");this.tag="Tower",e&&(this.m_data=ol.getOnlyExample().getData(e),this.initTower()),this.level=1}static fromData(e){const l=new ht(null);return l.m_data=e,l.initTower(),l}get towerData(){return this.m_data}initTower(){this.initSkills()}initSkills(){if(this.skills={},this.towerData.skillPackageId!=""){const e=new Hl(this.towerData.skillPackageId,this.towerData.skillPackageLevel);if(e!=null&&e.skillsPackageData!=null)for(const l of e.skillsPackageData.skillsList){const s=new q(l,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}}if(this.gem){const e=this.gem.gemData.getSkillPackage(this.data.id);if(e!=null&&e.skillsPackageData!=null)for(const l of e.skillsPackageData.skillsList){const s=new q(l,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}this.skills[S.KIND_SCATTER_ATTACK]&&delete this.skills[S.KIND_DIVIDED_ATTACK]}}get color(){return this.gem!=null?this.gem.gemData.color:6316128}get level(){return this.m_level}set level(e){this.m_level=e}get gemLevel(){return this.gem?this.gem.gemData.gemLevel:0}get ability(){const e=this.gemLevel;return this.towerData.isMagicTower?e==0?0:this.m_level*(.8+e/5)*2:this.m_level*(1+e/10)}get power(){const e=this.level,l=m.$_tower_worth_factor,s=this.gemLevel,i=this.valueCostConst(e);return Math.round((i+Math.pow(s,l[0])*l[1])*(l[2]+s/l[3]))}buildValue(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildValueA+this.towerData.buildValueB*e+this.towerData.buildValueC*e*e)}buildCost(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildCostA+this.towerData.buildCostB*e+this.towerData.buildCostC*e*e)}valueCost(e=-1){e==-1&&(e=this.level);const l=e*this.towerData.buildCostA+(e*e+e)/2*this.towerData.buildCostB+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostC+this.towerData.buildCost-this.towerData.buildCostA-this.towerData.buildCostB-this.towerData.buildCostC;return Math.round(l)}valueCostConst(e=-1){e==-1&&(e=this.level);const l=e*this.towerData.buildCostAConst+(e*e+e)/2*this.towerData.buildCostBConst+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostCConst+this.towerData.buildCostConst-this.towerData.buildCostAConst-this.towerData.buildCostBConst-this.towerData.buildCostCConst;return Math.round(l)}buffEffect(e=-1){return e==-1&&(e=this.level),this.towerData.buffEffect*e+1}damage(e=-1){let l=0;if(e==-1&&(e=this.level),this.skills[S.KIND_CHANGE_DAMAGE]instanceof Ml){let s=this.skills[S.KIND_CHANGE_DAMAGE];s.isChangeBase()?l=Math.round((s.damageA+s.damageB*e+s.damageC*e*e)*s.damageRate+s.damageAdd):l=Math.round((this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e)*s.damageRate+s.damageAdd)}else l=Math.round(this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e);return Math.max(l,0)}get range(){let e=0;if(this.skills[S.KIND_CHANGE_RANGE]instanceof Ul){let l=this.skills[S.KIND_CHANGE_RANGE];l.isChangeBase()?e=l.range*l.rangeRate+l.rangeAdd:e=this.towerData.range*l.rangeRate+l.rangeAdd}else e=this.towerData.range;return e}get rate(){let e=0;if(this.skills[S.KIND_CHANGE_RATE]instanceof Fl){let l=this.skills[S.KIND_CHANGE_RATE];l.isChangeBase()?e=Math.round(l.rate*l.rateRate):e=Math.round(this.towerData.rate*l.rateRate)}else e=this.towerData.rate;return e}setGem(e){this.gem=e,this.initSkills()}newBullet(){return new ys(this.getBulletId())}getBulletId(){let e=null;return this.skills[S.KIND_CHANGE_BULLET]instanceof Kl?(e=this.skills[S.KIND_CHANGE_BULLET],e.bulletId):this.towerData.bulletId}getInfoHtml(){return Kt(this.skillInfo,this.color,!1,"14px")}};a(ht,"TOWER","tower"),a(ht,"GEM","gem");let Lt=ht;const Ps={class:"space-x-2"},Ks=oe({__name:"TowerDataForm",props:{tower:{}},setup(h){const t=h;De({});const e=he(m.$_towerAtt_Obj.shaota),l=s=>{t.tower.m_data=new Il(s)};return(s,i)=>{const o=ze,n=qe,d=ct,g=Ne,E=dt,b=_l;return A(),F(b,null,{default:_(()=>[r(E,{"label-width":"100px"},{default:_(()=>[r(d,{label:"原型"},{default:_(()=>[r(n,{modelValue:u(e),"onUpdate:modelValue":i[0]||(i[0]=w=>nt(e)?e.value=w:null),"value-key":"id",onChange:l},{default:_(()=>[(A(!0),v(k,null,j(u(m).$_towerAtt_Obj,(w,U)=>(A(),F(o,{key:U,label:w.name,value:w},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(d,{label:"等级"},{default:_(()=>[r(g,{modelValue:s.tower.m_level,"onUpdate:modelValue":i[1]||(i[1]=w=>s.tower.m_level=w)},null,8,["modelValue"])]),_:1}),r(d,{label:"damage"},{default:_(()=>[L("div",Ps,[L("span",null,[x(" a: "),r(g,{modelValue:s.tower.towerData.damageA,"onUpdate:modelValue":i[2]||(i[2]=w=>s.tower.towerData.damageA=w),"controls-position":"right",step:u(Be)(u(e).damage.a),style:{width:"100px"}},null,8,["modelValue","step"])]),L("span",null,[x(" b: "),r(g,{modelValue:s.tower.towerData.damageB,"onUpdate:modelValue":i[3]||(i[3]=w=>s.tower.towerData.damageB=w),"controls-position":"right",step:u(Be)(u(e).damage.b),style:{width:"100px"}},null,8,["modelValue","step"])]),L("span",null,[x(" c: "),r(g,{modelValue:s.tower.towerData.damageC,"onUpdate:modelValue":i[4]||(i[4]=w=>s.tower.towerData.damageC=w),"controls-position":"right",step:u(Be)(u(e).damage.c),style:{width:"100px"}},null,8,["modelValue","step"])])])]),_:1}),r(d,{label:"rate"},{default:_(()=>[r(g,{modelValue:s.tower.towerData.rate,"onUpdate:modelValue":i[5]||(i[5]=w=>s.tower.towerData.rate=w),step:u(Be)(u(e).rate)},null,8,["modelValue","step"])]),_:1}),r(d,{label:"range"},{default:_(()=>[r(g,{modelValue:s.tower.towerData.range,"onUpdate:modelValue":i[6]||(i[6]=w=>s.tower.towerData.range=w),step:u(Be)(u(e).range)},null,8,["modelValue","step"])]),_:1}),r(d,{label:"buffEffect"},{default:_(()=>[r(g,{modelValue:s.tower.towerData.buffEffect,"onUpdate:modelValue":i[7]||(i[7]=w=>s.tower.towerData.buffEffect=w),step:u(Be)(u(e).buffEffect)},null,8,["modelValue","step"])]),_:1})]),_:1})]),_:1})}}}),Ms=["innerHTML"],Us=oe({__name:"TowerInfo",props:{tower:{}},setup(h){return(t,e)=>{const l=ct,s=dt,i=_l;return A(),F(i,null,{default:_(()=>[r(s,{"label-width":"80px"},{default:_(()=>[r(l,{label:"damage"},{default:_(()=>[x(N(t.tower.damage()),1)]),_:1}),r(l,{label:"rate"},{default:_(()=>[x(N(t.tower.rate),1)]),_:1}),r(l,{label:"range"},{default:_(()=>[x(N(t.tower.range),1)]),_:1}),r(l,{label:"简介"},{default:_(()=>[L("div",{innerHTML:t.tower.getInfoHtml(),style:{"line-height":"1.5em"}},null,8,Ms)]),_:1})]),_:1})]),_:1})}}}),Fs={key:0,class:"ml-2 space-x-2"},ks=oe({__name:"TowerSkillItem",props:Et({tower:{}},{modelValue:{required:!0}}),emits:Et(["update:model-value"],["update:modelValue"]),setup(h,{emit:t}){const e=h,l=bl(h,"modelValue"),s=he(),i=()=>{s.value=m.skillTemplates[l.value.kindId],l.value.params=s.value.params.slice()};return Tl(()=>l.value.kindId,(o,n)=>{var d;if(n!=o){delete e.tower.skills[n];const g=new q(s.value.id,((d=e.tower.skills[o])==null?void 0:d.level)??50,e.tower).getSubClasses();g.m_data=new S(l.value),e.tower.skills[o]=g}}),Tl(l,(o,n)=>{e.tower.skills[o.kindId].m_data=new S(o)},{deep:!0}),la(()=>{l.value.kindId&&delete e.tower.skills[l.value.kindId]}),(o,n)=>{const d=ze,g=qe,E=dl,b=Ne;return A(),v("div",null,[r(g,{modelValue:l.value.kindId,"onUpdate:modelValue":[n[0]||(n[0]=w=>l.value.kindId=w),i]},{default:_(()=>[(A(!0),v(k,null,j(Object.keys(u(m).skillTemplates),w=>(A(),v(k,{key:w},[w in o.tower.skills?Ie("",!0):(A(),F(d,{key:0,label:w,value:w},null,8,["label","value"]))],64))),128))]),_:1},8,["modelValue"]),u(s)?(A(),v("span",Fs,[(A(!0),v(k,null,j(u(s).params,(w,U)=>(A(),v(k,null,[typeof w=="string"?(A(),F(E,{key:0,modelValue:l.value.params[U],"onUpdate:modelValue":H=>l.value.params[U]=H,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])):(A(),F(b,{key:1,modelValue:l.value.params[U],"onUpdate:modelValue":H=>l.value.params[U]=H,size:"small","controls-position":"right",step:u(Be)(w),style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue","step"]))],64))),256))])):Ie("",!0)])}}}),Vs=oe({__name:"TowerSkillTable",props:{tower:{}},setup(h){const t=De([]),e=he(),l=()=>{t.push({data:{kindId:"",params:[]}})},s=(i,o)=>{t.splice(i,1)};return(i,o)=>{const n=Ye,d=Ne,g=gt;return A(),v("div",null,[r(u(je),{ref_key:"skillTableRef",ref:e,data:u(t),stripe:"",border:"","table-layout":"auto",style:{"font-size":"small"}},{default:_(()=>[r(n,{label:"Skill","header-align":"center"},{default:_(E=>[r(ks,{tower:i.tower,modelValue:E.row.data,"onUpdate:modelValue":b=>E.row.data=b},null,8,["tower","modelValue","onUpdate:modelValue"])]),_:1}),r(n,{label:"Level","header-align":"center",width:130},{default:_(E=>[i.tower.skills[E.row.data.kindId]?(A(),F(d,{key:0,modelValue:i.tower.skills[E.row.data.kindId].level,"onUpdate:modelValue":b=>i.tower.skills[E.row.data.kindId].level=b,style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"])):Ie("",!0)]),_:1}),r(n,{label:"Info","header-align":"center"},{default:_(E=>{var b;return[x(N((b=i.tower.skills[E.row.data.kindId])==null?void 0:b.skillInfo),1)]}),_:1}),r(n,{label:"操作",width:100,align:"center"},{default:_(E=>[r(g,{size:"small",type:"danger",onClick:b=>s(E.$index,E.row)},{default:_(()=>[x(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),r(g,{onClick:l},{default:_(()=>[x("新增")]),_:1})])}}}),$s=oe({__name:"tower-design",setup(h){const t=De(new Lt(null));return t.m_data=new Il(m.$_towerAtt_Obj.shaota),(e,l)=>{const s=Rl,i=Cl;return A(),v(k,null,[r(i,{gutter:20},{default:_(()=>[r(s,{span:12},{default:_(()=>[r(Ks,{tower:u(t)},null,8,["tower"])]),_:1}),r(s,{span:12},{default:_(()=>[r(Us,{tower:u(t)},null,8,["tower"])]),_:1})]),_:1}),r(Vs,{tower:u(t),class:"mt-2"},null,8,["tower"])],64)}}}),Bs=Object.freeze(Object.defineProperty({__proto__:null,default:$s},Symbol.toStringTag,{value:"Module"}));class Hs extends ft{constructor(t){super(),this.m_data=nl.getOnlyExample().getData(t)}get gemData(){return this.m_data}}const Gs=["innerHTML"],Ws=L("p",null,"注：升级经验为塔下一级的 buildValue 值",-1),Xs=oe({__name:"towers",setup(h){const t=De({isDefendMap:!1,towerId:"shaota",gemId:"",level:1,buildFrom:0,buildTo:1,buildPower:50}),e=X.map(m.$_towerAtt_Obj,(n,d)=>[n.name,d]),l=X.chain(m.$_global_properties.gem).toPairs().sortBy(n=>Number(Math.abs(n[1].index))).map(n=>[`${n[1].name} [${n[1].index}]`,n[0]]).value(),s=z(()=>{const n=new Lt(t.towerId);return n.level=t.level,t.gemId!==""&&n.setGem(new Hs(t.gemId)),n}),i=()=>{le.currentMap=new le(t.isDefendMap?le.DEFEND_MAP_1:le.ENDLESS_MAP_1)},o=z(()=>{let n=0;if(t.buildFrom>t.buildTo)return NaN;for(let d=t.buildFrom+1;d<=t.buildTo;d++)n+=s.value.buildValue(d);return Math.round(n/t.buildPower)});return(n,d)=>{const g=ra,E=ct,b=ze,w=qe,U=Rl,H=Cl,K=Ne,C=dt;return A(),F(C,{model:u(t),"label-width":"120px"},{default:_(()=>[r(E,{label:"是否为防线"},{default:_(()=>[r(g,{modelValue:u(t).isDefendMap,"onUpdate:modelValue":d[0]||(d[0]=T=>u(t).isDefendMap=T),onChange:i},null,8,["modelValue"])]),_:1}),r(H,null,{default:_(()=>[r(U,{span:12},{default:_(()=>[r(E,{label:"塔"},{default:_(()=>[r(w,{modelValue:u(t).towerId,"onUpdate:modelValue":d[1]||(d[1]=T=>u(t).towerId=T)},{default:_(()=>[(A(!0),v(k,null,j(u(e),([T,f])=>(A(),F(b,{key:f,label:T,value:f},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),r(U,{span:12},{default:_(()=>[r(E,{label:"宝石"},{default:_(()=>[r(w,{modelValue:u(t).gemId,"onUpdate:modelValue":d[2]||(d[2]=T=>u(t).gemId=T)},{default:_(()=>[r(b,{label:"无",value:""}),(A(!0),v(k,null,j(u(l),([T,f])=>(A(),F(b,{key:f,label:T,value:f},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(H,null,{default:_(()=>[r(U,{span:8},{default:_(()=>[r(E,{label:"等级"},{default:_(()=>[r(K,{modelValue:u(t).level,"onUpdate:modelValue":d[3]||(d[3]=T=>u(t).level=T),min:1},null,8,["modelValue"])]),_:1})]),_:1}),r(U,{span:8},{default:_(()=>[r(E,{label:"等级上限"},{default:_(()=>[L("label",null,N(u(s).towerData.levelMax),1)]),_:1})]),_:1}),r(U,{span:8},{default:_(()=>[r(E,{label:"升级经验"},{default:_(()=>[L("label",null,N(u(s).buildValue(u(s).level+1)),1)]),_:1})]),_:1})]),_:1}),r(H,null,{default:_(()=>[r(U,{span:8},{default:_(()=>[r(E,{label:"攻击力"},{default:_(()=>[L("label",null,N(u(s).damage()),1)]),_:1})]),_:1}),r(U,{span:8},{default:_(()=>[r(E,{label:"攻击频率"},{default:_(()=>[L("label",null,N(u(s).rate),1)]),_:1})]),_:1}),r(U,{span:8},{default:_(()=>[r(E,{label:"攻击范围"},{default:_(()=>[L("label",null,N(u(s).range),1)]),_:1})]),_:1})]),_:1}),r(E,{label:"简介"},{default:_(()=>[L("div",{innerHTML:u(s).getInfoHtml(),style:{"line-height":"1.5em"}},null,8,Gs)]),_:1}),r(H,null,{default:_(()=>[r(U,{span:8},{default:_(()=>[r(E,{label:"ability"},{default:_(()=>[L("label",null,N(u(s).ability.toFixed(1)),1)]),_:1})]),_:1}),r(U,{span:8},{default:_(()=>[r(E,{label:"power"},{default:_(()=>[L("label",null,N(u(s).power),1)]),_:1})]),_:1}),r(U,{span:8},{default:_(()=>[r(E,{label:"buffEffect"},{default:_(()=>[L("label",null,N(u(s).buffEffect().toFixed(1)),1)]),_:1})]),_:1})]),_:1}),r(H,null,{default:_(()=>[r(U,{span:8},{default:_(()=>[r(E,{label:"buildValue"},{default:_(()=>[L("label",null,N(u(s).buildValue()),1)]),_:1})]),_:1}),r(U,{span:8},{default:_(()=>[r(E,{label:"buildCost"},{default:_(()=>[L("label",null,N(u(s).buildCost()),1)]),_:1})]),_:1}),r(U,{span:8},{default:_(()=>[r(E,{label:"valueCost"},{default:_(()=>[L("label",null,N(u(s).valueCost()),1)]),_:1})]),_:1})]),_:1}),L("div",null,[r(E,{label:"升级计算",style:{"margin-bottom":"0 !important"}},{default:_(()=>[x(" 从 "),r(K,{modelValue:u(t).buildFrom,"onUpdate:modelValue":d[4]||(d[4]=T=>u(t).buildFrom=T),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),x(" 级到 "),r(K,{modelValue:u(t).buildTo,"onUpdate:modelValue":d[5]||(d[5]=T=>u(t).buildTo=T),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),x(" 级， 苦工总力量 "),r(K,{modelValue:u(t).buildPower,"onUpdate:modelValue":d[6]||(d[6]=T=>u(t).buildPower=T),size:"small","controls-position":"right",style:{width:"8em",margin:"0.5em"}},null,8,["modelValue"])]),_:1}),r(E,{style:{"margin-bottom":"0 !important"}},{default:_(()=>[x(" 需要时间："),L("label",null,N(u(ts)(u(o))),1)]),_:1}),Ws])]),_:1},8,["model"])}}}),Ys=Object.freeze(Object.defineProperty({__proto__:null,default:Xs},Symbol.toStringTag,{value:"Module"})),js=h=>(wt("data-v-aabdd49a"),h=h(),Rt(),h),zs={class:"chart-area"},qs=js(()=>L("h2",{style:{"text-align":"center"}},"狼出现频率（按数量，供参考）",-1)),Zs=oe({__name:"WaveDistribChart",props:{mid:{},height:{default:600},width:{default:600}},setup(h){ml([gl,Ia,fl,pl,Al,Ta,El,Da]);const t=h,e=z(()=>Na[t.mid]),l=z(()=>[m.$_map_Obj[t.mid].name,...m.$_map_Obj[t.mid].wolf_proportion.map(n=>Re(n[1]))]),s=z(()=>X.range(e.value.all.length)),i=z(()=>X.zip(l.value,[e.value.all,...e.value.each]).map((n,d)=>({title:n[0],pdf:n[1],cdf:[...$a(n[1])]}))),o=z(()=>({color:i.value.flatMap(n=>[rt(n.title,70,50),rt(n.title,50,80)]),tooltip:{trigger:"axis",valueFormatter:n=>es(n,6)},title:i.value.map((n,d)=>({text:n.title,left:"center",textVerticalAlign:"middle",top:t.height*((d+.5)/i.value.length)-5,z:-1,textStyle:{fontSize:t.height/i.value.length*.4,color:"#ccc"}})),xAxis:i.value.map((n,d)=>({gridIndex:d,type:"category",axisTick:{alignWithLabel:!0},data:s.value})),yAxis:i.value.flatMap((n,d)=>[{gridIndex:d,type:"value",alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}},{gridIndex:d,type:"value",position:"right",min:0,max:1,interval:.2,alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}}]),grid:i.value.map((n,d)=>({top:t.height*(d/i.value.length)+10,bottom:t.height*(1-(d+1)/i.value.length)+20})),series:i.value.flatMap((n,d)=>[{xAxisIndex:d,yAxisIndex:d*2,type:"bar",barWidth:"90%",data:n.pdf},{xAxisIndex:d,yAxisIndex:d*2+1,type:"line",smooth:!0,data:n.cdf}])}));return(n,d)=>(A(),v("div",zs,[qs,r(u(hl),{class:"chart",option:u(o)},null,8,["option"])]))}});const Js=Ze(Zs,[["__scopeId","data-v-aabdd49a"]]),Qs=oe({__name:"WolfNumberChart",props:{data:{},max:{}},setup(h){ml([pl,gl,fl,Al,El]);const t=h,e=z(()=>({color:["#C00000"],xAxis:{type:"value",interval:1,axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},max:t.max},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.data.map(l=>l.name)},grid:{left:100,top:0,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.data.map(l=>l.num)}}));return(l,s)=>(A(),F(u(hl),{class:"chart",option:u(e)},null,8,["option"]))}});const ei=Ze(Qs,[["__scopeId","data-v-1d3eb83e"]]),Yl=h=>(wt("data-v-c8536048"),h=h(),Rt(),h),ti=Yl(()=>L("h3",null,"波工具",-1)),li=Yl(()=>L("label",null,"下表为预留量",-1)),ai=oe({__name:"WaveTool",props:{mid:{},mapMonsterData:{}},setup(h){const t=h,e=De({count:0,avgHp:"",reservation:[0,0,0,0,0,0,0],extra:"",result:"",resultRaw:""});let l=De([]);const s=()=>{e.reservation.fill(0)},i=()=>{let o=Es(t.mid,[...e.reservation]);if(!o){wl.error("预留量不合法，请重新输入！");return}let[n,d]=o;e.extra&&(n=X.shuffle(n.concat(e.extra.split(",").map(g=>g.trim())))),e.resultRaw=`[${n.map(g=>`"${g}"`).join(",")}]`,e.result=Re(n).join(","),l=d.map(g=>({name:Re(g[0]),num:g[1]})),e.count=X.sumBy(d,g=>g[1])};return(o,n)=>{const d=gt,g=Ne,E=dl,b=_l;return A(),F(b,{id:"wave-tool"},{default:_(()=>[ti,r(d,{onClick:i},{default:_(()=>[x("随机生成波")]),_:1}),L("span",null,[x(" 共 "),r(g,{modelValue:u(e).count,"onUpdate:modelValue":n[0]||(n[0]=w=>u(e).count=w)},null,8,["modelValue"]),x(" 只狼，平均血量 "),r(E,{modelValue:u(e).avgHp,"onUpdate:modelValue":n[1]||(n[1]=w=>u(e).avgHp=w),modelModifiers:{number:!0},style:{width:"100px"}},null,8,["modelValue"])]),r(d,null,{default:_(()=>[x("组成推算")]),_:1}),L("div",null,[L("p",null,[li,r(d,{size:"small",onClick:s},{default:_(()=>[x("重置")]),_:1})]),L("table",null,[L("tbody",null,[L("tr",null,[(A(!0),v(k,null,j(o.mapMonsterData,w=>(A(),v("td",{key:w.id},N(w.name),1))),128))]),L("tr",null,[(A(!0),v(k,null,j(o.mapMonsterData,(w,U)=>(A(),v("td",{key:w.id},[r(g,{modelValue:u(e).reservation[U],"onUpdate:modelValue":H=>u(e).reservation[U]=H,size:"small","controls-position":"right",min:0},null,8,["modelValue","onUpdate:modelValue"])]))),128))])])]),L("p",null,[x(" 额外："),r(E,{modelValue:u(e).extra,"onUpdate:modelValue":n[2]||(n[2]=w=>u(e).extra=w),style:{width:"580px"},placeholder:"多个请用半角逗号分隔",spellcheck:"false"},null,8,["modelValue"])]),L("p",null,[x("波："),r(E,{modelValue:u(e).resultRaw,"onUpdate:modelValue":n[3]||(n[3]=w=>u(e).resultRaw=w),style:{width:"600px"},spellcheck:"false"},null,8,["modelValue"])]),L("p",null,[x("波："),r(E,{modelValue:u(e).result,"onUpdate:modelValue":n[4]||(n[4]=w=>u(e).result=w),style:{width:"600px"},spellcheck:"false"},null,8,["modelValue"])])]),r(ei,{data:u(l),max:10},null,8,["data"])]),_:1})}}});const si=Ze(ai,[["__scopeId","data-v-c8536048"]]),ii={class:"space-x-8"},ni={class:"space-x-4"},ri=L("span",null,"（假设每波+2且不引狼）",-1),oi=oe({__name:"umapdetail",setup(h){const t=X.chain(m.$_map_Obj).map((T,f)=>X.extend(T,{id:f})).toArray().sortBy("index").value(),e=X.chain(m.$_wolfAtt_Obj).toPairs().map(T=>{let f=T[1].name;return{value:T[0],label:f.includes("^")?f.substring(f.indexOf("^")+1):f}}).sortBy("id").value(),l=De({mid:"m1",mid2:"",wid:"dahuil",score:0,diff:1}),s=z(()=>m.$_map_Obj[l.mid]),i=z(()=>le.getMapData(l.mid)),o=z(()=>l.mid2===""?i.value:le.getMapData(l.mid2)),n=z(()=>i.value.monsterList.map(T=>Le.getOnlyExample().getData(T))),d=z(()=>Le.getOnlyExample().getData(l.wid)),g=T=>T.map(f=>{let R=m.$_wolfAtt_Obj[f[1]];return{id:f[1],prob:f[0],name:R.name,pop:R.pop}}),E=T=>T?T.map(f=>{let R=m.$_wolfAtt_Obj[f[1]];return{id:f[1],prob:f[0],name:R.name,diff:parseFloat(f[2])}}):[],b=z(()=>o.value.getDifficultyLevel(l.score)),w=z(()=>d.value.getHpMax(b.value,l.diff)),U=z(()=>n.value.map(T=>({name:T.name,value:T.getHpMax(b.value,l.diff)}))),H=T=>{const f=i.value.populationMax;return Math.round((2+1.07*f)*Math.pow(T/.39,2/3))},K=T=>{const f=i.value.populationMax;return Math.round((3.5+.14*f)*Math.pow(T/.39,2/3))},C=z(()=>{let T=0,f=0;for(let R=0;R<=i.value.scoreMax;R+=2){let M=Math.sqrt(i.value.hardA+i.value.hardB*R);T+=H(M),f+=K(M)}return{gold:T,exp:f}});return(T,f)=>{const R=ze,M=qe,ue=ut,ne=ct,J=oa,ee=Ne,_t=bt("vue-latex"),B=dt;return A(),v(k,null,[r(B,{model:u(l),"label-width":"120px"},{default:_(()=>[r(ne,{label:"地图"},{default:_(()=>[r(M,{modelValue:u(l).mid,"onUpdate:modelValue":f[0]||(f[0]=y=>u(l).mid=y)},{default:_(()=>[(A(!0),v(k,null,j(u(t),y=>(A(),F(R,{key:y.id,label:`${y.id} ${y.name}`,value:y.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(ue,{effect:"light"},{default:_(()=>[x(" 难度系数："+N(u(i).hardA)+","+N(u(i).hardB),1)]),_:1}),r(ue,{effect:"light"},{default:_(()=>[x(" Population："+N(u(i).populationMax),1)]),_:1})]),_:1}),r(ne,{label:"引狼到"},{default:_(()=>[r(M,{modelValue:u(l).mid2,"onUpdate:modelValue":f[1]||(f[1]=y=>u(l).mid2=y),clearable:""},{default:_(()=>[r(R,{label:"无",value:""}),(A(!0),v(k,null,j(u(t),y=>(A(),F(R,{key:y.id,label:`${y.id} ${y.name}`,value:y.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(ne,{label:"该地图的狼"},{default:_(()=>[(A(!0),v(k,null,j(g(u(s).wolf_proportion),y=>(A(),F(ue,{key:y.id,type:"success",class:"mx-1 tag-button",effect:"light",onClick:zl=>u(l).wid=y.id},{default:_(()=>[L("sub",null,N(y.prob),1),x(" "+N(y.name)+" ",1),L("sup",null,N(y.pop),1)]),_:2},1032,["onClick"]))),128))]),_:1}),"random_boss"in u(s)?(A(),F(ne,{key:0,label:"随机 Boss"},{default:_(()=>[(A(!0),v(k,null,j(E(u(s).random_boss),y=>(A(),F(ue,{key:y.id,type:"success",class:"mx-1 tag-button",effect:"light",onClick:zl=>{u(l).wid=y.id,u(l).diff=y.diff}},{default:_(()=>[L("sub",null,N(y.prob),1),x(" "+N(y.name)+" ",1),L("sub",null,N(y.diff),1)]),_:2},1032,["onClick"]))),128))]),_:1})):Ie("",!0),r(ne,{label:"狼"},{default:_(()=>[r(J,{modelValue:u(l).wid,"onUpdate:modelValue":f[2]||(f[2]=y=>u(l).wid=y),options:u(e)},null,8,["modelValue","options"]),r(ue,{effect:"light"},{default:_(()=>[x(" 血量系数："+N(u(d).hpMaxA)+","+N(u(d).hpMaxB)+","+N(u(d).hpMaxC),1)]),_:1})]),_:1}),r(ne,{label:"进度"},{default:_(()=>[r(ee,{modelValue:u(l).score,"onUpdate:modelValue":f[3]||(f[3]=y=>u(l).score=y),min:0},null,8,["modelValue"]),r(ue,{effect:"light",class:"tag-button",onClick:f[4]||(f[4]=y=>u(l).score=u(o).scoreMax)},{default:_(()=>[x(" 通关进度："+N(u(o).scoreMax),1)]),_:1})]),_:1}),r(ne,{label:"难度"},{default:_(()=>[r(M,{modelValue:u(l).diff,"onUpdate:modelValue":f[5]||(f[5]=y=>u(l).diff=y)},{default:_(()=>[r(R,{value:.8,label:"小菜一碟"}),r(R,{value:.9,label:"轻而易举"}),r(R,{value:1,label:"势均力敌"}),r(R,{value:1.1,label:"有惊无险"}),r(R,{value:1.2,label:"稍有难度"}),r(R,{value:1.3,label:"困难重重"})]),_:1},8,["modelValue"])]),_:1}),r(ne,null,{default:_(()=>[L("div",ii,[L("span",null,[x(" 等级： "),r(_t,{expression:`L(x)=\\sqrt{h_a + h_b x}=${u(b).toFixed(2)}`},null,8,["expression"])]),L("span",null,"最大血量："+N(u(w)),1)])]),_:1}),r(ne,null,{default:_(()=>[x(" 银币： "),r(_t,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${H(u(b))}`},null,8,["expression"])]),_:1}),r(ne,null,{default:_(()=>[x(" 经验： "),r(_t,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${K(u(b))}`},null,8,["expression"])]),_:1}),r(ne,null,{default:_(()=>[L("div",ni,[L("span",null,"总银币："+N(u(C).gold),1),L("span",null,"总经验："+N(u(C).exp),1),ri])]),_:1}),r(Wl,{"hp-data":u(U)},null,8,["hp-data"])]),_:1},8,["model"]),r(si,{mid:u(l).mid,mapMonsterData:u(n)},null,8,["mid","mapMonsterData"]),r(Js,{mid:u(l).mid,width:600,height:600},null,8,["mid"])],64)}}});const ui=Object.freeze(Object.defineProperty({__proto__:null,default:oi},Symbol.toStringTag,{value:"Module"})),ci=L("p",null,"前排解释：",-1),di=L("p",null,"狼的等级随进度增加而增加。难度系数 hardA 影响初始狼等级，hardB 影响等级增长速率。",-1),_i=L("p",null,"population 影响一波狼的容量。每只狼都会占用一定容量。",-1),hi=L("p",null,"不同随机boss有出现权重。出现率、难度、奖励水平是相对应的，难的比较稀有，奖励也会比较好。",-1),mi=oe({__name:"umaps",setup(h){const t=X.map(m.$_map_Obj,(s,i)=>X.extend(s,{id:i})),e=(s,i)=>{let o=s.need_lev||0,n=i.need_lev||0;return o-n},l=s=>s.map(i=>{const o=Le.getOnlyExample().getData(i[1]);return{prob:i[0],name:o.name,pop:o.population}});return(s,i)=>{const o=Ye,n=ut,d=je;return A(),v(k,null,[ci,di,_i,hi,r(d,{data:u(t),"default-sort":{prop:"index",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},height:"600px",style:{width:"100%","font-size":"80%"},class:"testbox"},{default:_(()=>[r(o,{prop:"index",label:"index",sortable:"",align:"center",fixed:"",width:"70"}),r(o,{prop:"id",label:"id",sortable:"",align:"center",fixed:"",width:"80"}),r(o,{prop:"name",label:"name",sortable:"",align:"center",fixed:"",width:"80"}),r(o,{prop:"pass_score",label:"scoreMax",sortable:"",align:"center"}),r(o,{label:"hardnessFactor"},{default:_(()=>[r(o,{prop:"yield_val",label:"hardA",sortable:"",align:"center"}),r(o,{prop:"hard_ness",label:"hardB",sortable:"",align:"center"})]),_:1}),r(o,{prop:"pop_max",label:"populationMax",sortable:"",align:"center"}),r(o,{prop:"interval",label:"unkennelDelay",sortable:"",align:"center"}),r(o,{prop:"interval_rule",label:"unkennelRule",sortable:"",align:"center"}),r(o,{prop:"teleport_rule",label:"teleportRule",sortable:"",align:"center"}),r(o,{prop:"need_lev",label:"needLevel",sortable:"","sort-method":e,align:"center"}),r(o,{prop:"pass_by",label:"passBy",align:"center"},{default:_(g=>[x(N(g.row.pass_by.map(E=>u(m).$_map_Obj[E].name).join(", ")),1)]),_:1}),r(o,{prop:"wolf_proportion",label:"monsterList","cell-style":{"text-align":"left"}},{default:_(g=>[(A(!0),v(k,null,j(l(g.row.wolf_proportion),E=>(A(),F(n,{key:E.prob,class:"ml-2"},{default:_(()=>[L("sub",null,N(E.prob),1),x(" "+N(E.name)+" ",1),L("sup",null,N(E.pop),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["data"])],64)}}});const gi=Object.freeze(Object.defineProperty({__proto__:null,default:mi},Symbol.toStringTag,{value:"Module"})),fi=oe({__name:"user",setup(h){const t=De({level:1}),e=z(()=>((2*(t.level+1)+3)*(t.level+1)+4)*(t.level+1)+20),l=z(()=>Math.round((.015*t.level+.8)*t.level+2)),s=z(()=>Math.floor(t.level/4+1)),i=z(()=>(t.level+7)*l.value);return(o,n)=>{const d=Ne,g=ct,E=dt;return A(),F(E,{model:u(t),"label-width":"120px"},{default:_(()=>[r(g,{label:"等级"},{default:_(()=>[r(d,{modelValue:u(t).level,"onUpdate:modelValue":n[0]||(n[0]=b=>u(t).level=b),min:1},null,8,["modelValue"])]),_:1}),r(g,{label:"升级经验"},{default:_(()=>[L("label",null,N(u(e)),1)]),_:1}),r(g,{label:"力量"},{default:_(()=>[L("label",null,N(u(l)),1)]),_:1}),r(g,{label:"连升等级"},{default:_(()=>[L("label",null,N(u(s)),1)]),_:1}),r(g,{label:"苦工价格"},{default:_(()=>[L("label",null,N(u(i)),1)]),_:1})]),_:1},8,["model"])}}}),pi=Object.freeze(Object.defineProperty({__proto__:null,default:fi},Symbol.toStringTag,{value:"Module"})),Z=class Z extends we{constructor(e,l=1,s=1,i=0,o=null,n=null){super();a(this,"index",0);a(this,"keyId","");a(this,"m_level",0);a(this,"exp",0);a(this,"hp",0);a(this,"hpMax",0);a(this,"hpRate");a(this,"dowerSkills",null);a(this,"learnSkills",null);this.tag="Monster",e==""&&(e="dahuil");let d=e.indexOf("|");d!=-1&&(this.keyId=e,e=e.slice(0,d)),this.m_data=Le.getOnlyExample().getData(e),this.m_data==null&&(this.m_data=Le.getOnlyExample().getData("dahuil")),this.hpRate=s,this.updateLevelExp(l,i),this.updateSkills(o,n)}static newMonster(e){let l=null;return e&&(l=new Z(e.wids,e.level,1,e.experience,e.init_skills,e.skills)),l}initSkills(){this.skills={};const e=this.getAllSkills()??this.data.skills;if(e!=null)for(const l of e){const s=new me(l[we.SKILL_ID],l[we.SKILL_LEVEL],this).getSubClasses();this.skills[s.data.kindId]=s}}conflictSkillList(e){const l=[];if(e==null)return[];const s=m.$_conflict_skill_kind,i=e.data.kindId;this.skills[i]&&l.push(me.getKindName(i));for(const o of s)if(o.indexOf(i)!=-1)for(let n=0;n<o.length;n++)i!=o[n]&&this.skills[o[n]]&&l.push(me.getKindName(o[n]));return l}getSkillById(e){let l,s=null;for(l in this.skills)if(s=this.skills[l],s.data.id==e)return s;return null}updateLevelExp(e=0,l=0){this.level=e,this.exp=l}updateSkills(e=null,l=null){this.dowerSkills=e,this.learnSkills=l,this.isTame&&this.initSkills()}getAllSkills(e=null,l=null){let s=[];if(e||(e=this.dowerSkills),l||(l=this.learnSkills),this.isTame&&e&&l){for(let i=0;i<e.length;i++)s.push(e[i]);for(let i=0;i<l.length;i++)s.push(l[i])}else s=this.monsterData.skills;return s}get allSkillsScore(){let e=0,l=1,s=this.getAllSkills();for(e=0;e<s.length;e++)l*=this.getSkillScore(s[e][we.SKILL_ID],s[e][we.SKILL_LEVEL]);return l}getSkillScore(e,l){let s=null,i=m.$_skill_grade_score,o=e.indexOf("_");return e.indexOf("_")==-1?1:(s=e.slice(o+1,e.length),i[s]&&i[s][String(l)]?i[s][String(l)]:1)}get levelMax(){return this.isTame?m.$_camp_wolf_lv_max:Number.MAX_SAFE_INTEGER}get expMax(){let e=this.m_level+1;return Math.round(this.monsterData.expMaxA+this.monsterData.expMaxB*e+this.monsterData.expMaxC*e*e+this.monsterData.expMaxD*e*e*e)}get level(){return this.m_level}set level(e){this.m_level=Math.max(Math.min(e,this.levelMax),0),le.currentMap&&le.currentMap&&(this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate)),this.hpMax<=1&&(this.hpMax=1)}refreshLevel(){this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate*1),this.hpMax<=1&&(this.hpMax=1)}get monsterData(){return this.m_data}get power(){let e=m.$_wolf_worth_factor,l=this.hpMax,s=this.monsterData.speedBase,i=this.allSkillsScore;return Math.round(l*s*i*e[2])}initMonsterSkills(){this.isTame||this.initSkills()}initMonster(){this.initMonsterSkills()}get skillInfo(){if(this.skills==null)return"";const e=Object.values(this.skills);return e.sort((l,s)=>l[G.DATA_KEY_INDEX]-s[G.DATA_KEY_INDEX]),e.map(l=>l.skillInfo).join("")}get isTame(){return!!(this.dowerSkills||this.learnSkills)}};a(Z,"MONSTER_SAY_ARRAY",[c.getLanguageStr(1250),c.getLanguageStr(1251),c.getLanguageStr(1252),c.getLanguageStr(1253),c.getLanguageStr(1254),c.getLanguageStr(1255),c.getLanguageStr(1256),c.getLanguageStr(1257),c.getLanguageStr(1258),c.getLanguageStr(1259)]),a(Z,"MONSTER","monster"),a(Z,"FRAME_NAME_DEAD","dead"),a(Z,"STATUS_MOVE","statusMove"),a(Z,"RES_AIMING","aiming"),a(Z,"PATH_PATH","pathPath"),a(Z,"PHOTO_WIDTH",66),a(Z,"PHOTO_HEIGHT",64),a(Z,"PHOTO_ROUND",50),a(Z,"PHOTO_SIZE",800),a(Z,"WEIGHTILY_SIZE",487500),a(Z,"CARD_RATIO",2),a(Z,"CARD_WIDTH",32),a(Z,"CARD_HEIGHT",40),a(Z,"CARD_ROUND",10),a(Z,"CARD_SIZE",400),a(Z,"CARD_ROTATION",-10),a(Z,"ICON_RATIO",1.5),a(Z,"ICON_WIDTH",44),a(Z,"ICON_HEIGHT",44),a(Z,"ICON_ROUND",20),a(Z,"ICON_SIZE",400),a(Z,"ICON_ROTATION",-10),a(Z,"PATH_NUM",5),a(Z,"PATH_RATE",.01),a(Z,"RE_FIND_PATH_STEP",2500);let ot=Z;const jl=h=>(wt("data-v-43daeb83"),h=h(),Rt(),h),Ai=jl(()=>L("h1",null,"狼相关计算",-1)),Ei=jl(()=>L("p",null,"技能",-1)),Ii={class:"sk-tag"},Ti=oe({__name:"wolf-calc",setup(h){const t=he(),e=X.sortBy(X.map(m.$_wolfAtt_Obj,(f,R)=>({id:R,name:f.name,label:`${Re(R)} [${R}]`})),"id"),l=e.filter(f=>f.name.startsWith("camp_")),s=e.filter(f=>f.id.startsWith("D_")),i=X.difference(e,l,s),o=X.groupBy(m.$_skillAtt_Obj.monsterSkill,f=>f.kindId);X.each(o,(f,R)=>o[R]=X.sortBy(f,"id")),console.log(o);const n=Object.keys(o).sort();X.map(o,(f,R)=>({label:R,value:R,children:f.map(M=>({value:M.id}))}));const d=De({wid:"al",level:1,levelMax:60,power:0,hpMax:0,expMax:0,speed:0,tableData:[],selected:[]}),g=new ot("daihuil"),E=new me("WeakFire_X1",1,g).getSubClasses();T();const b=f=>De({kindId:f.data.kindId,id:f.data.id,name:f.data.name,level:f.level,levelMax:f.levelMax,score:f.skillScore,info:f.skillInfo,tags:f.skillTag1+f.skillTag2+f.skillTag3}),w=()=>{var R;const f=b(E);d.tableData.push(f),(R=t.value)==null||R.toggleRowSelection(f,!0)},U=f=>{d.selected=f.map(R=>R.id),T()};function H(){var M;const f=new ot(d.wid,d.level,1,0,[]);f.initSkills();const R=X.sortBy(f.skills,"index");d.speed=f.monsterData.speedBase,d.levelMax=f.levelMax,d.tableData=R.map(ue=>b(ue)),(M=t.value)==null||M.toggleAllSelection(),T()}function K(f){const R=new me(o[f.kindId][0].id,1,g).getSubClasses();Object.assign(f,b(R)),T()}function C(f){console.log(f);const R=new me(f.id,f.level,g).getSubClasses();Object.assign(f,b(R)),T()}function T(){let f=d.tableData.filter(M=>d.selected.includes(M.id)).map(M=>({skid:M.id,lev:M.level})),R=new ot(d.wid,d.level,1,0,f,[]);R.refreshLevel(),d.hpMax=R.hpMax,d.expMax=R.expMax,d.power=R.power}return(f,R)=>{const M=ze,ue=ua,ne=qe,J=Ne,ee=Ye,_t=gt;return A(),v("div",null,[Ai,L("p",null,[x(" 狼： "),r(ne,{modelValue:u(d).wid,"onUpdate:modelValue":R[0]||(R[0]=B=>u(d).wid=B),onChange:H},{default:_(()=>[r(ue,{label:"前线"},{default:_(()=>[(A(!0),v(k,null,j(u(i),B=>(A(),F(M,{key:B.id,label:B.label,value:B.id},null,8,["label","value"]))),128))]),_:1}),r(ue,{label:"防线"},{default:_(()=>[(A(!0),v(k,null,j(u(l),B=>(A(),F(M,{key:B.id,label:B.label,value:B.id},null,8,["label","value"]))),128))]),_:1}),r(ue,{label:"噩梦"},{default:_(()=>[(A(!0),v(k,null,j(u(s),B=>(A(),F(M,{key:B.id,label:B.label,value:B.id},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),L("p",null,[x(" 等级： "),r(J,{modelValue:u(d).level,"onUpdate:modelValue":R[1]||(R[1]=B=>u(d).level=B),min:1,onChange:T},null,8,["modelValue"]),x(" 最高等级："+N(u(d).levelMax),1)]),L("p",null,"升级经验："+N(u(d).expMax),1),L("p",null,"血量："+N(u(d).hpMax),1),L("p",null,"速度："+N(u(d).speed),1),L("p",null,"实力："+N(u(d).power),1),Ei,r(u(je),{ref_key:"skillTableRef",ref:t,data:u(d).tableData,style:{"font-size":"small"},onSelectionChange:U},{default:_(()=>[r(ee,{type:"selection",width:30}),r(ee,{label:"KindId",width:160,"header-align":"center"},{default:_(B=>[r(ne,{modelValue:B.row.kindId,"onUpdate:modelValue":y=>B.row.kindId=y,onChange:y=>K(B.row),style:{"font-size":"small"}},{default:_(()=>[(A(!0),v(k,null,j(u(n),y=>(A(),F(M,{key:y,label:y,value:y},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),r(ee,{label:"Id",width:200,"header-align":"center"},{default:_(B=>[r(ne,{modelValue:B.row.id,"onUpdate:modelValue":y=>B.row.id=y,onChange:y=>C(B.row),style:{"font-size":"small"}},{default:_(()=>[(A(!0),v(k,null,j(u(o)[B.row.kindId],y=>(A(),F(M,{key:y.id,label:y.id,value:y.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),r(ee,{prop:"name",label:"Name",width:120,"header-align":"center",align:"center"}),r(ee,{prop:"level",label:"Level",width:120,"header-align":"center",align:"center"},{default:_(B=>[r(J,{modelValue:B.row.level,"onUpdate:modelValue":y=>B.row.level=y,min:1,max:B.row.levelMax,size:"small",style:{width:"80px"},onChange:y=>C(B.row)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:1}),r(ee,{prop:"levelMax",label:"Level Max",width:100,"header-align":"center",align:"center"}),r(ee,{prop:"score",label:"Score",width:100,"header-align":"center",align:"center"}),r(ee,{label:"Info"},{default:_(B=>[L("span",null,N(B.row.info),1),L("span",Ii,N(B.row.tags),1)]),_:1})]),_:1},8,["data"]),r(_t,{onClick:w},{default:_(()=>[x("增加一行")]),_:1})])}}});const Di=Ze(Ti,[["__scopeId","data-v-43daeb83"]]),Li=Object.freeze(Object.defineProperty({__proto__:null,default:Di},Symbol.toStringTag,{value:"Module"})),pt=h=>(wt("data-v-98305003"),h=h(),Rt(),h),Si=pt(()=>L("h1",null,"狼数据",-1)),Ni=pt(()=>L("p",null,"前排解释：",-1)),vi=pt(()=>L("p",null,"pop 为狼在一波中占的容量，一般来说 pop 越大则出现机会越少。",-1)),xi=pt(()=>L("p",null,"charm 影响到寻路，charm 为负值越小则其他狼越会排斥它。",-1)),bi=pt(()=>L("p",null,"hp_factor 影响血量关于等级增长，是二次函数系数。",-1)),wi={class:"sk-list"},Ri={key:0,class:"sk-debuff"},Ci={key:1,class:"sk-buff"},Oi={class:"sk-name"},yi={class:"sk-id"},Pi={class:"sk-info"},Ki={key:2,class:"sk-tag"},Mi={key:3,class:"sk-tag"},Ui={key:4,class:"sk-tag"},Fi=oe({__name:"wolfs",setup(h){console.log("init wolfs");const t=X.map(m.$_wolfAtt_Obj,(e,l)=>l).sort().map(e=>{let l=new ot(e,0,0);l.initSkills();let s=l.monsterData;return{id:e,data:s,skills:Object.values(l.skills)}});return console.log(t),(e,l)=>{const s=Ye,i=je;return A(),v(k,null,[Si,Ni,vi,xi,bi,r(i,{data:u(t),"default-sort":{prop:"id",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},"max-height":"600",style:{width:"100%","max-width":"1200px"}},{default:_(()=>[r(s,{prop:"id",label:"id",sortable:"",width:150}),r(s,{prop:"data.name",label:"name",sortable:""}),r(s,{prop:"data.speedBase",label:"speedBase",sortable:""}),r(s,{prop:"data.population",label:"population",sortable:""}),r(s,{prop:"data.charm",label:"charm",sortable:"",width:100}),r(s,{label:"size"},{default:_(()=>[r(s,{prop:"data.width",label:"width",sortable:"",width:100}),r(s,{prop:"data.height",label:"height",sortable:"",width:100})]),_:1}),r(s,{label:"hpFactor"},{default:_(()=>[r(s,{prop:"data.hpMaxA",label:"a",sortable:"",width:100}),r(s,{prop:"data.hpMaxB",label:"b",sortable:"",width:100}),r(s,{prop:"data.hpMaxC",label:"c",sortable:"",width:100})]),_:1}),r(s,{label:"skills",type:"expand",width:"60"},{default:_(o=>[L("div",wi,[(A(!0),v(k,null,j(o.row.skills,n=>(A(),v("p",{key:n.data.id},[n.isDebuff?(A(),v("span",Ri,"↓")):(A(),v("span",Ci,"↑")),L("span",Oi,N(n.name),1),L("span",yi,"["+N(n.data.id)+"]",1),L("span",Pi,N(n.skillInfo),1),n.skillTag1?(A(),v("span",Ki,N(n.skillTag1),1)):Ie("",!0),n.skillTag2?(A(),v("span",Mi,N(n.skillTag2),1)):Ie("",!0),n.skillTag3?(A(),v("span",Ui,N(n.skillTag3),1)):Ie("",!0)]))),128))])]),_:1})]),_:1},8,["data"])],64)}}});const ki=Ze(Fi,[["__scopeId","data-v-98305003"]]),Vi=Object.freeze(Object.defineProperty({__proto__:null,default:ki},Symbol.toStringTag,{value:"Module"}));

var da=Object.defineProperty;var ca=(r,t,e)=>t in r?da(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var a=(r,t,e)=>(ca(r,typeof t!="symbol"?t+"":t,e),e);import{l as _a}from"./vatex-5c8f9151.js";import{ae as je,o as g,S as K,R as c,an as Cl,T as fl,ao as ma,d as B,b as X,i as pa,c as D,O as i,u as d,B as Ae,a as A,P as M,ag as $,V as w,W as L,X as fe,y as F,U as Ol,J as le,ap as _t,aq as He,n as ha,L as ga,ar as fa,e as Pe,I as Aa,K as yl,w as Al,as as Kl,at as Pl}from"./@vue-fd9eda8b.js";import{B as Ml}from"./vue-echarts-af19811e.js";import{V as Vl}from"./vue-json-pretty-42d122c3.js";import{E as xt,a as Nt,b as Xe,c as ze,d as Ye,e as Me,f as Ve,g as Ue,h as De,i as he,j as Ea,k as qe,l as Ul,m as wt,n as El,o as Rt,p as Il,q as Tl,r as Ia,s as ut,t as kl,u as Ta}from"./element-plus-cf711e8e.js";import{c as La,a as va,u as Da,b as Sa}from"./vue-router-fc0acb93.js";import{l as V}from"./lodash-es-f1aaab28.js";import{u as ba,k as xa}from"./@element-plus-ed9a5cee.js";import{u as Fl}from"./vue-clipboard3-9b4f599e.js";/* empty css                            */import{u as Ct,i as Ll,a as Ot,b as yt,c as Kt,d as Pt,e as Na,f as wa,g as Ra,h as Ca,j as Oa}from"./echarts-d3dfb9e8.js";import{C as ya}from"./color-b12075af.js";import{g as Ka}from"./mathjs-a4edadf9.js";import{d as re,l as Pa,a as Mt,b as Ma,w as Va}from"./assets-0d483344.js";import{X as Ua}from"./x2js-8ae16efe.js";import"./katex-32f78592.js";import"./resize-detector-a5205554.js";import"./@xmldom-8222efe8.js";import"./vue-d1503af4.js";import"./async-validator-dee29e8b.js";import"./@vueuse-2fb746c0.js";import"./@ctrl-f8748455.js";import"./@sxzz-c75af06c.js";import"./memoize-one-297ddbcb.js";import"./escape-html-099bfe2e.js";import"./normalize-wheel-es-ed76fb12.js";import"./clipboard-77e6e508.js";import"./tslib-54e39b60.js";import"./zrender-5b234405.js";import"./color-string-327061cf.js";import"./color-name-b7949e8c.js";import"./simple-swizzle-d8bc59f1.js";import"./is-arrayish-4445f582.js";import"./color-convert-01838e1d.js";import"./decimal.js-d133ee8e.js";import"./typed-function-de33f2d8.js";import"./@babel-98964cd2.js";import"./complex.js-2414c071.js";import"./fraction.js-f7f8a9e3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();(function(){String.prototype.isNullOrEmpty||(String.prototype.isNullOrEmpty=function(){return!this}),Array.prototype.firstOrDefault||(Array.prototype.firstOrDefault=function(r){for(let t=0;t<this.length;t++){const e=this[t];if(r(e))return e}return null}),Array.prototype.removeAt||(Array.prototype.removeAt=function(r){const t=this[r];return this.splice(r,1),t}),Array.prototype.removeOne||(Array.prototype.removeOne=function(r){const t=this.indexOf(r);return t>=0?(this.splice(t,1),!0):!1}),Array.prototype.removeRange||(Array.prototype.removeRange=function(r){for(let t=0;t<r.length;t++)this.removeOne(r[t])}),Array.prototype.addRange||(Array.prototype.addRange=function(r){for(let t=0;t<r.length;t++)this.push(r[t])}),Array.prototype.contains||(Array.prototype.contains=function(r){return this.indexOf(r)!=-1}),Array.prototype.empty||(Array.prototype.empty=function(){return this.length==0})})();const Je=(r,t)=>{const e=r.__vccOpts||r;for(const[l,s]of t)e[l]=s;return e},ka={};function Fa(r,t){const e=je("router-view");return g(),K(e,null,{default:c(({Component:l})=>[(g(),K(Cl,null,[(g(),K(fl(l)))],1024))]),_:1})}const $a=Je(ka,[["render",Fa]]),Ba="modulepreload",Ha=function(r,t){return new URL(r,t).href},bl={},_e=function(t,e,l){if(!e||e.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(e.map(n=>{if(n=Ha(n,l),n in bl)return;bl[n]=!0;const o=n.endsWith(".css"),u=o?'[rel="stylesheet"]':"";if(!!l)for(let h=s.length-1;h>=0;h--){const T=s[h];if(T.href===n&&(!o||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${u}`))return;const p=document.createElement("link");if(p.rel=o?"stylesheet":Ba,o||(p.as="script",p.crossOrigin=""),p.href=n,document.head.appendChild(p),o)return new Promise((h,T)=>{p.addEventListener("load",h),p.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t()).catch(n=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n})},Ga=(r,t)=>{const e=r[t];return e?typeof e=="function"?e():Promise.resolve(e):new Promise((l,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})},$l=[{name:"notice",label:"Notice"},{name:"user",label:"User"},{name:"towers",label:"Towers"},{name:"wolfs",label:"Wolfs"},{name:"umaps",label:"Umaps"},{name:"umap-detail",label:"Umap Detail"},{name:"umap-design",label:"Umap Design"},{name:"dmaps",label:"Dream Maps"},{name:"dmap-detail",label:"Dream Map Detail"},{name:"wolf-calc",label:"Wolf Calculation"},{name:"baoxiang",label:"Baoxiang Properties"},{name:"dream-design",label:"Dream Design"},{name:"tower-design",label:"Tower Design"}],Wa=[{path:"/",name:"index",component:()=>_e(()=>Promise.resolve().then(()=>Ya),void 0,import.meta.url),children:$l.map(r=>({path:"/"+r.name,name:r.name,meta:{keepAlive:!0},component:()=>Ga(Object.assign({"../views/sections/baoxiang/index.vue":()=>_e(()=>Promise.resolve().then(()=>ds),void 0,import.meta.url),"../views/sections/dmap-detail/index.vue":()=>_e(()=>Promise.resolve().then(()=>Ks),void 0,import.meta.url),"../views/sections/dmaps/index.vue":()=>_e(()=>Promise.resolve().then(()=>ks),void 0,import.meta.url),"../views/sections/dream-design/index.vue":()=>_e(()=>Promise.resolve().then(()=>Hs),void 0,import.meta.url),"../views/sections/notice/index.vue":()=>_e(()=>Promise.resolve().then(()=>Ys),void 0,import.meta.url),"../views/sections/tower-design/index.vue":()=>_e(()=>Promise.resolve().then(()=>un),void 0,import.meta.url),"../views/sections/towers/index.vue":()=>_e(()=>Promise.resolve().then(()=>pn),void 0,import.meta.url),"../views/sections/umap-design/index.vue":()=>_e(()=>Promise.resolve().then(()=>Nn),void 0,import.meta.url),"../views/sections/umap-detail/index.vue":()=>_e(()=>Promise.resolve().then(()=>$n),void 0,import.meta.url),"../views/sections/umaps/index.vue":()=>_e(()=>Promise.resolve().then(()=>Xn),void 0,import.meta.url),"../views/sections/user/index.vue":()=>_e(()=>Promise.resolve().then(()=>Yn),void 0,import.meta.url),"../views/sections/wolf-calc/index.vue":()=>_e(()=>Promise.resolve().then(()=>ri),void 0,import.meta.url),"../views/sections/wolfs/index.vue":()=>_e(()=>Promise.resolve().then(()=>Di),void 0,import.meta.url)}),`../views/sections/${r.name}/index.vue`)})),redirect:"notice"}],ja=La({history:va("/tdsheepvillage-view/"),routes:Wa});const vl=ma($a);vl.use(ja).use(_a);vl.component("VChart",Ml);vl.mount("#app");const Xa={class:"content"},za=B({__name:"index",setup(r){const t=Da(),e=Sa(),l=X(""),s=(n,o)=>{t.push({name:n.paneName})};return pa(()=>{l.value=e.name}),(n,o)=>{const u=Nt,m=xt,p=je("router-view");return g(),D("main",null,[i(m,{modelValue:d(l),"onUpdate:modelValue":o[0]||(o[0]=h=>Ae(l)?l.value=h:null),type:"card",onTabClick:s},{default:c(()=>[(g(!0),D(M,null,$(d($l),h=>(g(),K(u,{key:h.name,label:h.label,name:h.name},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),A("div",Xa,[i(p,null,{default:c(({Component:h})=>[(g(),K(Cl,null,[(g(),K(fl(h)))],1024))]),_:1})])])}}});const Ya=Object.freeze(Object.defineProperty({__proto__:null,default:za},Symbol.toStringTag,{value:"Module"}));function qa(r,t=!1){t||(r=r.toLowerCase());let e=1315423911;for(let l=r.length-1;l>=0;l--)e^=(e<<5)+r.charCodeAt(l)+(e>>2);return e&2147483647}const Ja=function(r){return/^[a-zA-Z]+$/.test(r)},Za=function(r,t){return r<t?-1:r>t?1:0};function*Qa(r){let t=0;for(const e of r)t+=e,yield t}function ke(r){if(r===0)return 1;if(r=Math.abs(r),r%1===0)return Math.pow(10,Math.floor(Math.log10(r)));const t=r.toString();return Math.pow(10,t.indexOf(".")-t.length+1)}function Vt(r){return V.mapValues(r,(t,e)=>Ut(t,e))}function Ut(r,t){return V.mapValues(r,(e,l)=>es(e,t,l))}function es(r,t,e){return{...r,type:t,id:e}}const N=function(){const r=new Ua;let t=re.camp_system_simple;const e=u=>parseInt(new RegExp("(?<=m).+(?=[A-Z]*)").exec(Ja(u[u.length-1])?u:u+"A")[0],36),l=Object.keys(re.umaps).sort((u,m)=>Za(e(u),e(m))),s=Vt(re.building),n=Vt(re.skill),o={$_global_language_str:r.xml2dom(Pa),$_global_properties:Vt(re.properties),$_skillAtt_Obj:n,$_skillPackage_Obj:re.skill_package,$_map_Obj:re.umaps,$_towerAtt_Obj:s.tower,$_bulletAtt_Obj:re.bullet,$_wolfAtt_Obj:Ut(re.wolfs,"wolf"),$_wallAtt_Obj:s.wall,$_barrierAtt_Obj:re.barrier,$_level_up_gift:re.level_up_gift,$_pass_map_gift:re.pass_map_gift,$_wave_hard_Obj:re.wolf_hard_ness,$Maps:re.version_ctrl.Maps,$_wolfs_unlock_lv:t.camp_wolf_lv_max_factor,$_wolfs_unlock_gold:t.camp_wolf_gold_max_factor,$_camp_hold_time:t.hold_time,$_camp_pk_cd_time:t.pk_cd_time,$_camp_pk_times_max:t.pk_times_max,$_camp_defend_times_max:t.defend_times_max,$_camp_pk_arena_times_max:t.pk_arena_times_max,$_camp_defend_arena_times_max:t.defend_arena_times_max,$_camp_mining_rate:t.mine_rate,$_camp_sell_building_dis:t.sell_building_dis,$_tower_worth_factor:t.tower_worth_factor,$_wolf_worth_factor:t.wolf_worth_factor,$_defend_map_snarp_max:t.defend_map_snarp_max,$_defend_succ_factor:t.defend_succ_factor,$_defend_failed_factor:t.defend_failed_factor,$_defend_arena_succ_factor:t.defend_arena_succ_factor,$_defend_arena_failed_factor:t.defend_arena_failed_factor,$_conflict_skill_kind:t.conflict_skill_kind,$_skill_lvup_spend:t.skill_lvup_spend,$_skill_grade_score:t.skill_grade_score,$_camp_use_exp_wolf_max:t.use_exp_wolf_max,$_camp_use_exp_tower_max:t.use_exp_tower_max,$_camp_wolf_lv_max:t.wolf_lv_max,$_camp_need_user_level:t.camp_need_user_level,$_camp_arena_need_user_level:t.arena_need_user_level,$_camp_create_mine_help_max:t.create_mine_help_max,$_camp_create_mine_help_friends_num:t.create_mine_help_friends_num,$_dream_wolf_hard_ness:Mt.dm_wolf_hard_ness,umapsById:l.map(u=>[u,re.umaps[u]]),dream_data:Mt,dream_maps:Ut(Mt.dmaps,"dmaps"),dream_waves:Ma};return console.log("init",o.umapsById),o}(),At=r=>V.mapValues(r,t=>{let e=t.name;return e.includes("^")?e.substring(e.indexOf("^")+1):e}),kt=Object.assign({},At(N.$_map_Obj),At(N.$_wolfAtt_Obj),At(N.$_towerAtt_Obj),...Object.values(N.$_global_properties).map(r=>At(r)));console.log("dict",kt);function pe(r){return typeof r=="string"?kt[r]:r.map(t=>kt[t])}const ts={key:0},ls={key:0},as={class:"ml-4"},ss={key:1},ns={key:1},is={key:0},rs={key:1},os={class:"ml-4"},us=B({__name:"index",setup(r){const t=V.chain(N.$_global_properties.card).values().filter(e=>e.id.startsWith("baoxiang")).sortBy(e=>Math.abs(e.index)).value();return(e,l)=>{const s=ze,n=Ye,o=Xe;return g(),D("div",null,[i(o,{data:d(t),style:{"font-size":"small"}},{default:c(()=>[i(s,{label:"id",prop:"id",width:120}),i(s,{label:"name",prop:"name",width:160}),i(s,{label:"open_num",prop:"open_num",width:100}),i(s,{label:"info",prop:"info",width:400}),i(s,{label:"data"},{default:c(u=>[u.row.default_gift?(g(),D("ul",ts,[(g(!0),D(M,null,$(u.row.default_gift,(m,p)=>(g(),D(M,{key:p},[String(p)=="properties"?(g(),D("li",ls,[i(n,{type:"warning"},{default:c(()=>[w(L(p),1)]),_:2},1024),A("ul",as,[(g(!0),D(M,null,$(m,(h,T)=>(g(),D("li",{key:T},[i(n,null,{default:c(()=>[w(L(T),1)]),_:2},1024),(g(!0),D(M,null,$(h,(S,E)=>(g(),K(n,{key:E,type:"info",title:E},{default:c(()=>[w(L(d(pe)(String(E)))+": "+L(S),1)]),_:2},1032,["title"]))),128))]))),128))])])):(g(),D("li",ss,[i(n,{type:"warning"},{default:c(()=>[w(L(p),1)]),_:2},1024),i(n,{type:"info"},{default:c(()=>[w(L(m),1)]),_:2},1024)]))],64))),128))])):fe("",!0),u.row.data?(g(),D("ul",ns,[(g(!0),D(M,null,$(u.row.data,m=>(g(),D(M,{key:m[0]},[m[1]=="invite_score"?(g(),D("li",is,[i(n,{type:"success"},{default:c(()=>[w(L(m[0]),1)]),_:2},1024),i(n,{type:"warning"},{default:c(()=>[w(L(m[1]),1)]),_:2},1024),i(n,null,{default:c(()=>[w(L(m[2]),1)]),_:2},1024)])):fe("",!0),m[1]=="properties"?(g(),D("li",rs,[i(n,{type:"success"},{default:c(()=>[w(L(m[0]),1)]),_:2},1024),i(n,{type:"warning"},{default:c(()=>[w(L(m[1]),1)]),_:2},1024),A("ul",os,[(g(!0),D(M,null,$(m[2],p=>(g(),D("li",{key:p[0]},[i(n,{type:"success"},{default:c(()=>[w(L(p[0]),1)]),_:2},1024),i(n,{type:"warning"},{default:c(()=>[w(L(p[1]),1)]),_:2},1024),i(n,null,{default:c(()=>[(g(!0),D(M,null,$(p[2],h=>(g(),K(n,{title:h,type:"info",key:h},{default:c(()=>[w(L(d(pe)(h)),1)]),_:2},1032,["title"]))),128))]),_:2},1024)]))),128))])])):fe("",!0)],64))),128))])):fe("",!0)]),_:1})]),_:1},8,["data"])])}}}),ds=Object.freeze(Object.defineProperty({__proto__:null,default:us},Symbol.toStringTag,{value:"Module"})),me=class me{static formatTime(t,e=!1){let l=t%60,s=Math.floor(t/60)%60,n=Math.floor(t/3600),o="";if(e){if(n>0)return o=n.toString()+_.getLanguageStr(21),o+(s.toString()+_.getLanguageStr(22));if(s>0)return o+=s.toString()+_.getLanguageStr(22),o+(l.toString()+_.getLanguageStr(23));l>=0&&(o+=l.toString()+_.getLanguageStr(23))}else n>=0&&(o=(n>9?n.toString():"0"+n.toString())+":"),s>=0&&(o+=(s>9?s.toString():"0"+s.toString())+":"),l>=0&&(o+=Math.floor(l)>9?Math.floor(l).toString():"0"+Math.floor(l).toString());return o}static formatTime_day(t){let e=Math.floor(t/3600),l=Math.floor(e/24),s=Math.ceil(t/60)%60,n=e%24,o="";return l>0&&(o=l.toString()+_.getLanguageStr(20)),n>0&&(o+=n.toString()+_.getLanguageStr(21)),s>0&&(o+=s.toString()+_.getLanguageStr(22)),o}static formatTime_M(t,e=!1){let l=Math.floor(t/60)%60,s=Math.floor(t/3600),n="";return e?s>0?(n=s.toString()+_.getLanguageStr(21),n+(l.toString()+_.getLanguageStr(22))):l>0?n+(l.toString()+_.getLanguageStr(22)):_.getLanguageStr(24):(s>=0&&(n=s.toString()+":"),l>=0&&(n+=l.toString()+":"),n)}static getElementNum(t){let e,l=0;for(e in t)l++;return l}static randomElement(t){let e,l=0,s=me.getElementNum(t),n=Math.floor(Math.random()*s);for(e of t){if(l==n)return e;l++}return null}static formatHtmlText_normal(t,e=10,l=3355443,s=""){return me.formatHtmlText(t,l,!1,14,s,e)}static getSimpleNumStr(t,e=!1){let l;return t>1e4?(l=e?_.getLanguageStr(116):_.getLanguageStr(108),Math.round(t/1e4)+l):String(t)}static getValueByIndex(t,e){for(const l in e)if(l!=me.DEFAULT){const s=me.getIDPos(l);if(t>=s.x&&t<=s.y)return e[l]}return e[me.DEFAULT]??1}static getIDPos(t){var e=t.indexOf("_");return{x:parseInt(t.slice(0,e)),y:parseInt(t.slice(e+1,t.length))}}static fillSpace(t,e=10,l=!0){let s=0,n=0,o=0,u=0,m="";for(n=0;n<t.length;n++)o=t.charCodeAt(n),o>=32&&o<=126?s=1:s=2,u+=s;for(n=u;n<e;n++)m+=" ";return l?m+=t:m=t+m,m}static formatHtmlText(t,e=3355443,l=!1,s=14,n="",o=12,u=null){let m="",p="",h="#"+e.toString(16);return o<1e3?(m=t,p=me.formatLine(m,`
`,o*2,u)):p=t,l?'<font color="'+h+'" size="'+s+'" face="'+n+'"><b>'+p+"</b></font>":'<font color="'+h+'" size="'+s+'" face="'+n+'">'+p+"</font>"}static getLine(t=40,e="=",l="",s=5){let n=0,o="";for(e==""&&(e="="),l==""&&(l="left"),n=0;n<t;n++)o+=e;return HtmlTextFormat.format(o,l,6316128,s)}static formatHtmlTextBr(t,e="left"){let l="";for(let s=0;s<t.length;s++)l+='<P ALIGN="'+e+'">'+t[s]+"</P>";return l}static formatLine(t,e=`
`,l=16,s=null){let n=0,o=0,u=0,m=null,p="",h=0;for(s==null&&(s=[]),l<=1&&(l=2),n=0;n<t.length;n++)u=t.charCodeAt(n),m=t.charAt(n),m==`
`?(h=0,p+=m):(s.indexOf(m)!=-1?o=0:u>=32&&u<=126?o=1:o=2,h+=o,h>l&&(p+=e,h=o),p+=m);return p}static clearLine(t){return t=t.replace(`
`,""),t=t.replace("<br>",""),t.replace("</br>","")}static isHtml(t){let e=t.indexOf("<"),l=t.indexOf(">");return e!=-1&&l!=-1&&e<l}static insertStr(t,e=`
`,l=4,s=1){let n="",o="",u=0;for(s<=0&&(s=int.MAX_VALUE),l<=0&&(l=1);u<s;)o=t.substr(u*l,l),u++,o.length!=l&&(n+=o),o+=e,n+=o;return n+t.substr(u*l)}static getGlobalAttValue_byID(t,e=0){return t["id_"+e]}static setObjAttributeValue(t,e,l){for(let s=0;s<e.length;s++)t[e[s][l]]=e[s];return t}static getObjAttributeValue(t,e){return t[e]==null&&t[e]==null?null:t[e]}static isNullAndUndefined(t){return t==null||t==null}static isNullForArray(t){return!(t!=null&&t.length>0)}static addObjectNewAtt(t,e){let l=null;if(!me.isNullAndUndefined(e))for(l in e)t[l]=e[l];return t}static isSameDate(t,e){return!t||!e?!1:t.getUTCFullYear()==e.getUTCFullYear()&&t.getUTCMonth()==e.getUTCMonth()&&t.getUTCDate()==e.getUTCDate()}static getRandom(t,e){let l=0;return t==e?t:(t>e&&(l=t,t=e,e=l),l=e-t+1,Math.floor(t+Math.random()*l))}static replaceString(t,e,l){let s=new RegExp(e,"g");return t.replace(s,l)}static getDateSecond(t){return Math.floor(t.getTime()*.001)}static isNoChildrenInArr(t){let e=!1;return t!=null&&t.length>0?e=!1:e=!0,e}static isNoChildrenInObj(t){let e=0,l=null,s=!0;if(t){e=0;for(l in t)e++;e>0&&(s=!1)}return s}static toString(t,e=0,l=!1){let s=0,n=0,o=null,u="";if(e++,t==null)return"null";let m=typeof t,p=0;switch(m){case"number":return t.toString()+"";case"string":return'"'+t+'"';case"object":if(t instanceof Array){if(p=me.getElementNum(t),p>1)for(e>1&&(u+=`
`),n=0;n<e-1;n++)u+="	";for(u+="[",s=0;s<t.length;s++){if(p>1)for(u+=`
`,n=0;n<e;n++)u+="	";u+=toString(t[s],e),u+=","}if(p>0&&(u=u.slice(0,u.length-1)),p>1)for(u+=`
`,n=0;n<e-1;n++)u+="	";u+="]"}else if(t instanceof Date)u="new Date("+t.getTime()+")";else{if(p=me.getElementNum(t),p>1)for(e>1&&(u+=`
`),n=0;n<e-1;n++)u+="	";u+="{";for(o in t){if(p>1)for(u+=`
`,n=0;n<e;n++)u+="	";!isNaN(Number(o.slice(0,1)))||o.search(/[^a-zA-Z0-9_]/)!=-1?u+='"'+o+'":'+me.toString(t[o],e):u+=o+":"+me.toString(t[o],e),u+=","}if(p>0&&(u=u.slice(0,u.length-1)),p>1)for(u+=`
`,n=0;n<e-1;n++)u+="	";u+="}"}break;case"boolean":return t.toString()+""}return u}static getTodayEndUTCTime(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),23,59,59)}static replaceAllBySplit(t,e,l){return t==null?null:t.split(e).join(l)}static formatNumberToString(t){let e;return t>=1e3&&t<=9999?(t=Math.floor(t*.001),e=t.toString()+"千"):t>=1e4?(t=Math.floor(t*1e-4),e=t.toString()+"万"):e=t.toString(),e}};a(me,"DEFAULT","default");let Ft=me;const Qe=class Qe{static getLanguageStr(t,...e){let l=null,s=null,n="";if(N.$_global_language_str!=null&&(N.$_global_language_str.getElementsByTagName("id"+t)[0]!=null?N.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str")=="CHILD2010"?n=N.$_global_language_str.getElementsByTagName("id"+t)[0].children().toString():n=N.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str"):n=null),n.length<=0)return"";let o=n.search("%%");for(;o!=-1;)s=n.slice(o,o+6),n=n.replace(s,Qe.getLanguageStr(parseInt(s.slice(2)))),o=n.search("%%");for(let u=0;u<e.length;u++)l="%"+u,n=Ft.replaceString(n,l,e[u]);return n}static getDataProfileTxt(t){let e=null,l=!1,s=null,n=null,o=null,u=t;return t&&(e=String(t),l=e.indexOf(Qe.INTER_CONFIG_SPLIT_CHAR)>-1,s=null,n="",o="",l?(s=e.split(Qe.INTER_CONFIG_SPLIT_CHAR),n=s[0],o=s[1],N.$_global_dataProfile_txt!=null?(N.$_global_dataProfile_txt.getElementsByTagName(n)[0]!=null?u=N.$_global_dataProfile_txt.getElementsByTagName(n)[0].getAttribute("s").toString():u=o,u=u.replace(/\\n/g,`
`)):u=o):u=e,s=null,e="",n="",o=""),u}};a(Qe,"INTER_CONFIG_SPLIT_CHAR","^");let _=Qe;const oe=class oe{constructor(t){a(this,"typeId");a(this,"kindId");a(this,"id");a(this,"name");a(this,"info");a(this,"help");this.typeId=t[oe.DATA_TYPE_ID],this.kindId=t[oe.DATA_KIND_ID],this.id=t[oe.DATA_ID],this.name=_.getDataProfileTxt(t[oe.DATA_NAME]),this.info=_.getDataProfileTxt(t[oe.DATA_INFO]),this.help=t[oe.DATA_HELP]?_.getDataProfileTxt(t[oe.DATA_HELP]):""}};a(oe,"DATA_TYPE_ID","typeId"),a(oe,"DATA_KIND_ID","kindId"),a(oe,"DATA_ID","id"),a(oe,"DATA_NAME","name"),a(oe,"DATA_INFO","info"),a(oe,"DATA_HELP","help");let ce=oe;const Y=class Y extends ce{constructor(e){super(e);a(this,"res");a(this,"resColor");e[Y.DATA_RESOURCE_CLASS]==null?this.res=e[ce.DATA_ID]:this.res=e[Y.DATA_RESOURCE_CLASS],this.resColor=e[Y.DATA_RESOURCE_COLOR_CLASS]}};a(Y,"TYPE_MONSTER","wolf"),a(Y,"TYPE_TOWER","tower"),a(Y,"TYPE_WALL","wall"),a(Y,"TYPE_BARRIER","barrier"),a(Y,"TYPE_ENTRANCE","typeEntrance"),a(Y,"TYPE_EXPORT","typeExport"),a(Y,"TYPE_BOX","box"),a(Y,"TYPE_GEM_ITEM","gem"),a(Y,"TYPE_TRAP_ITEM","snarp"),a(Y,"TYPE_CARD_ITEM","card"),a(Y,"TYPE_WOLF_CARD_ITEM","wc"),a(Y,"TYPE_TAME_ITEM","tame"),a(Y,"TYPE_FIX_ITEM","bomb"),a(Y,"ID_SPADE_ITEM","mc"),a(Y,"ID_GEM_HAMMER","gem_hammer"),a(Y,"ID_GEM_OPENER","gem_opener"),a(Y,"DATA_RESOURCE_CLASS","res"),a(Y,"DATA_RESOURCE_COLOR_CLASS","resColor");let ve=Y;class Ze{constructor(){a(this,"m_manager",{});this.clearData()}getDataById(t){return this.m_manager[t]}get manager(){return this.m_manager}clearData(){this.m_manager=new Object}}const G=class G extends ve{constructor(e){super(e);a(this,"scoreMax");a(this,"populationMax");a(this,"hardA");a(this,"hardB");a(this,"passBy");a(this,"unkennelDelay");a(this,"unkennelRule");a(this,"bossList");a(this,"monsterList");a(this,"monsterProportion");a(this,"teleportRule");a(this,"randomBossList");this.scoreMax=e[G.DATA_SCORE_MAX]?e[G.DATA_SCORE_MAX]:G.DEFAULT_SCORE_MAX,this.populationMax=e[G.DATA_POPULATION_MAX]?e[G.DATA_POPULATION_MAX]:G.DEFAULT_POPULATION_MAX,this.hardA=e[G.DATA_HARD_A],this.hardB=e[G.DATA_HARD_B],this.passBy=e[G.DATA_PASS_BY],this.unkennelDelay=e[G.DATA_UNKENNEL_RATE],this.unkennelRule=e[G.DATA_UNKENNEL_RULE],this.bossList=e[G.DATA_BOSS_LIST],this.monsterList=e[G.DATA_MONSTER_LIST]?e[G.DATA_MONSTER_LIST].map(l=>l[1]):[],this.monsterProportion=e[G.DATA_MONSTER_LIST],this.teleportRule=e[G.DATA_TELEPORT_RULE],this.randomBossList=e.random_boss}getDifficultyLevel(e){return Math.sqrt(this.hardA+this.hardB*e)}calcPKGold(e){const l=this.populationMax;return Math.round((2+1.07*l)*Math.pow(e/.39,2/3))}calcPKExp(e){const l=this.populationMax;return Math.round((3.5+.14*l)*Math.pow(e/.39,2/3))}calcAccumulative(){let e=0,l=0;for(let s=0;s<=this.scoreMax;s+=2){let n=this.getDifficultyLevel(s);e+=this.calcPKGold(n),l+=this.calcPKExp(n)}return{gold:e,exp:l}}};a(G,"DEFAULT_SCORE_MAX",100),a(G,"DEFAULT_POPULATION_MAX",10),a(G,"RULE_MULTICAST",1),a(G,"DATA_SCORE_MAX","pass_score"),a(G,"DATA_POPULATION_MAX","pop_max"),a(G,"DATA_HARD_A","yield_val"),a(G,"DATA_HARD_B","hard_ness"),a(G,"DATA_PASS_BY","passBy"),a(G,"DATA_UNKENNEL_RATE","interval"),a(G,"DATA_UNKENNEL_RULE","interval_rule"),a(G,"DATA_BOSS_LIST","boss"),a(G,"DATA_MONSTER_LIST","wolf_proportion"),a(G,"DATA_TELEPORT_RULE","teleport_rule"),a(G,"DATA_DEBUG","debug");let mt=G;const Ie=class Ie extends Ze{constructor(){super(),Ie.onlyExample=this,this.loadData(N.$_map_Obj)}static getOnlyExample(){return Ie.onlyExample==null&&(Ie.onlyExample=new Ie),Ie.onlyExample}loadData(t){for(const e in t){const l=t[e];l[ce.DATA_ID]=e,this.m_manager[e]=new mt(t[e])}}getData(t){return this.getDataById(t)}};a(Ie,"DATA_COUNT",6),a(Ie,"onlyExample");let Et=Ie;class gt{constructor(){a(this,"m_data");this.m_data=new ce({})}get baseData(){return this.m_data}}class cs extends gt{constructor(){super()}}class Z extends gt{constructor(e,l=!0){super();a(this,"score",0);a(this,"isDream",!1);this.m_data=Et.getOnlyExample().getData(e)}static getMapData(e){return Et.getOnlyExample().getData(e)}get gameMapData(){return this.m_data}get canUnkennelAdjust(){return!1}}a(Z,"DEFEND_MAP_1","mfx1"),a(Z,"ENDLESS_MAP_1","m11"),a(Z,"currentMap");function _s(r,t){let e=r.toFixed(8),l=e.indexOf(".");return l==-1||e.length-l-1<=t?e:r.toFixed(t).replace(/\.?0+$/,"")}function $t(r,t=0,e=!1,l="14",s=""){return`<span style="color:#${t.toString(16).padStart(6,"0")};${e?"font-weight:bold;":""}${l?`font-size:${l};`:""}${s?`font-family:${s};`:""}">${r.replaceAll(`
`,"<br>")}</span>`}function ms(r){return Math.floor(r/3600)+":"+Math.floor(r/60%60).toString().padStart(2,"0")+":"+(r%60).toString().padStart(2,"0")}class H extends ve{constructor(t){super(t)}}a(H,"KIND_HIT","hit"),a(H,"KIND_INVASION","invasion"),a(H,"KIND_TELEPORT","teleport"),a(H,"KIND_BUFF_TOP","buffTop"),a(H,"KIND_BUFF_MID","buffMid"),a(H,"KIND_BUFF_BOT","buffBot"),a(H,"KIND_MAGIC","effectMagic"),a(H,"KIND_PATH","effectPath"),a(H,"KIND_CRIT","effectCrit"),a(H,"KIND_SUMMON","effectSummon"),a(H,"KIND_CLOUD","effectCloud"),a(H,"KIND_MIRROR","effectMirror"),a(H,"KIND_CURE","effectCure"),a(H,"KIND_CURE_ONE","effectCureOne"),a(H,"KIND_SNEER","effectSneer"),a(H,"KIND_LINKS","effectLinks"),a(H,"KIND_RELIVE","effectRelive"),a(H,"KIND_SUICIDE","effectSuicide"),a(H,"KIND_BLINK_IN","effectBlinkIn"),a(H,"KIND_BLINK_OUT","effectBlinkOut"),a(H,"KIND_LIGHTNING","lightning"),a(H,"KIND_FIELD_ATTACK","allAttack"),a(H,"KIND_FIELD_ATTACK_AOE","allAttackAOE"),a(H,"KIND_CUSS","effectCuss"),a(H,"KIND_CUSS_BREAK","effectCussBreak"),a(H,"KIND_SIGN_SUMMON","signSummon"),a(H,"KIND_SIGN_CURE","signCure"),a(H,"KIND_SIGN_CLOUD","signCloud"),a(H,"KIND_SIGN_SHIELD","signShield"),a(H,"KIND_SIGN_TRANSFORM","signTransform"),a(H,"KIND_BOSS","effectBoss");const be=class be extends ve{constructor(e){super(e);a(this,"parameter");a(this,"levels");this.parameter=e[be.DATA_PARAMETER],this.levels=e[be.DATA_LEVELS]}getLevelParam(e,l){return this.parameter!=null?this.parameter[l]:this.levels!=null?(e=Math.min(Math.max(0,e-1),this.levels.length-1),this.levels[e][l]):null}hasLevel(){return this.parameter==null}};a(be,"TYPE_TOWER_SKILL","typeTowerSkill"),a(be,"TYPE_MONSTER_SKILL","typeMonsterSkill"),a(be,"DATA_PARAMETER","params"),a(be,"DATA_LEVELS","levels");let We=be;class v extends We{constructor(t){super(t),t[ce.DATA_TYPE_ID]=We.TYPE_TOWER_SKILL}}a(v,"KIND_AURA","Aura"),a(v,"KIND_CHANGE_BULLET","Bultype"),a(v,"KIND_CHANGE_DAMAGE","ChangeDam"),a(v,"KIND_CHANGE_RATE","ChangeRate"),a(v,"KIND_CHANGE_RANGE","ChangeRange"),a(v,"KIND_FIELD_ATTACK","ALLAP"),a(v,"KIND_DIVIDED_ATTACK","DivAP"),a(v,"KIND_SCATTER_ATTACK","ScaAP"),a(v,"KIND_COMBO_ATTACK","ComAP"),a(v,"KIND_GUIDED_BULLET","GuidedBul"),a(v,"KIND_ATTACK_RATE","AttackRate"),a(v,"KIND_AOE_ATTACK","AoeAP"),a(v,"KIND_THROUGHOUT_ATTACK","ThoAP"),a(v,"KIND_BOUNCE_ATTACK","BouAP"),a(v,"KIND_FLOAT_DAMAGE","FloatDam"),a(v,"KIND_CRIT","Crit"),a(v,"KIND_REDUCED_DEFENSE","RedDef"),a(v,"KIND_POISON","Poison"),a(v,"KIND_SLOW","Slow"),a(v,"KIND_BURN_COLD","BC"),a(v,"KIND_BEAT_BACK","Beat"),a(v,"KIND_SILENCE","Silence"),a(v,"KIND_VERTIGO","Vertigo"),a(v,"KIND_INTIMIDATE","Intimidate"),a(v,"KIND_CUSS","Cuss"),a(v,"KIND_BURN","Burn"),a(v,"KIND_COLD","Cold");const I=class I extends We{constructor(t){super(t),t[ce.DATA_TYPE_ID]=We.TYPE_MONSTER_SKILL}static get allMonsterSkill(){return[I.KIND_FLY,I.KIND_AIRBORNE,I.KIND_ISOLATION,I.KIND_RELIVE,I.KIND_SUICIDE,I.KIND_REINCARNATE,I.KIND_RESIST_FIRE,I.KIND_RESIST_FROST,I.KIND_RESIST_POISON,I.KIND_RESIST_BEAT,I.KIND_RESIST_SILENCE,I.KIND_RESIST_VERTIGO,I.KIND_RESIST_CRIT,I.KIND_RESIST_LIGHT,I.KIND_RESIST_STRSMOOTH,I.KIND_SLOWF,I.KIND_WEAK_FIRE,I.KIND_WEAK_FROST,I.KIND_WEAK_POISON,I.KIND_WEAK_BEAT,I.KIND_WEAK_SILENCE,I.KIND_WEAK_VERTIGO,I.KIND_WEAK_CRIT,I.KIND_WEAK_LIGHT,I.KIND_RUN,I.KIND_MIRROR,I.KIND_SUMMON,I.KIND_CLOUD,I.KIND_CURE,I.KIND_BLINK,I.KIND_HIDE,I.KIND_SHIELD,I.KIND_SNEER,I.KIND_TRANSFORM,I.KIND_LINKS]}};a(I,"EVENT_RED",1),a(I,"EVENT_YELLOW",2),a(I,"EVENT_GREEN",3),a(I,"EVENT_FULL",4),a(I,"EVENT_INTIMIDATE",20),a(I,"EVENT_VERTIGO",21),a(I,"EVENT_SILENCE",22),a(I,"EVENT_SLOW",23),a(I,"EVENT_REDUCED_DEFENSE",24),a(I,"EVENT_POISON",25),a(I,"EVENT_BURN",26),a(I,"EVENT_COLD",27),a(I,"EVENT_HIT",40),a(I,"EVENT_CRIT",41),a(I,"EVENT_BEAT_BACK",42),a(I,"EVENT_FRIENT_DIE",43),a(I,"EVENT_DIE",44),a(I,"KIND_FLY","fly"),a(I,"KIND_AIRBORNE","airborne"),a(I,"KIND_ISOLATION","isolation"),a(I,"KIND_RELIVE","revive"),a(I,"KIND_SUICIDE","burst"),a(I,"KIND_REINCARNATE","reborn"),a(I,"KIND_SLOWF","slowf"),a(I,"KIND_RESIST_FIRE","resistFire"),a(I,"KIND_RESIST_FROST","resistFrost"),a(I,"KIND_RESIST_POISON","resistPoison"),a(I,"KIND_RESIST_SLOW","resistSlow"),a(I,"KIND_RESIST_BEAT","resistBeat"),a(I,"KIND_RESIST_SILENCE","resistSilence"),a(I,"KIND_RESIST_VERTIGO","resistVertigo"),a(I,"KIND_RESIST_CRIT","resistCrit"),a(I,"KIND_RESIST_LIGHT","resistLight"),a(I,"KIND_RESIST_INTIMIDATE","resistIntimidate"),a(I,"KIND_WEAK_FIRE","weakFire"),a(I,"KIND_WEAK_FROST","weakFrost"),a(I,"KIND_WEAK_POISON","weakPoison"),a(I,"KIND_WEAK_SLOW","weakSlow"),a(I,"KIND_WEAK_BEAT","weakBeat"),a(I,"KIND_WEAK_SILENCE","weakSilence"),a(I,"KIND_WEAK_VERTIGO","weakVertigo"),a(I,"KIND_WEAK_CRIT","weakCrit"),a(I,"KIND_WEAK_LIGHT","weakLight"),a(I,"KIND_WEAK_INTIMIDATE","weakIntimidate"),a(I,"KIND_RESIST_STRSMOOTH","strsmooth"),a(I,"KIND_RUN","sprint"),a(I,"KIND_MIRROR","divide"),a(I,"KIND_SUMMON","summon"),a(I,"KIND_CLOUD","cloud"),a(I,"KIND_CURE","massTreatment"),a(I,"KIND_BLINK","blink"),a(I,"KIND_HIDE","invisible"),a(I,"KIND_SHIELD","shield"),a(I,"KIND_SNEER","taunt"),a(I,"KIND_TRANSFORM","morph"),a(I,"KIND_LINKS","links");let f=I;const ue=class ue extends Ze{constructor(){super(),ue.onlyExample=this,this.loadData(N.$_skillAtt_Obj)}static getOnlyExample(){return ue.onlyExample==null&&(ue.onlyExample=new ue),ue.onlyExample}loadData(t){for(const e in t[ue.TOWER_SKILL]){const l=t[ue.TOWER_SKILL][e];l[ce.DATA_ID]=e,this.m_manager[e]=new v(l)}for(const e in t[ue.MONSTER_SKILL]){const l=t[ue.MONSTER_SKILL][e];l[ce.DATA_ID]=e,this.m_manager[e]=new f(l)}}getData(t){return this.getDataById(t)}};a(ue,"onlyExample"),a(ue,"TOWER_SKILL","towerSkill"),a(ue,"MONSTER_SKILL","monsterSkill"),a(ue,"TRAP_SKILL","trapSkill");let Bt=ue;const Fe=class Fe extends ce{constructor(e){super(e);a(this,"skillsList");e[Fe.DATA_SKILLS_LIST]instanceof Array?this.skillsList=e[Fe.DATA_SKILLS_LIST]:e[Fe.DATA_SKILLS_LIST]instanceof String&&(this.skillsList=[e[Fe.DATA_SKILLS_LIST]])}};a(Fe,"DATA_SKILLS_LIST","skills");let Ht=Fe;const xe=class xe extends Ze{constructor(){super(),xe.onlyExample=this,this.loadData(N.$_skillPackage_Obj)}static getOnlyExample(){return xe.onlyExample==null&&(xe.onlyExample=new xe),xe.onlyExample}loadData(t){for(const e in t){const l=t[e];l[ce.DATA_ID]=e,this.m_manager[e]=new Ht(t[e])}}getData(t){return this.getDataById(t)}};a(xe,"onlyExample");let Gt=xe;class P{static toPercentage(t){return String(Math.round(t*100*100)/100)+"%"}static toGridStr(t){return String(Math.round(t/100)/10)}static getPosID(t,e){return t+"_"+e}}class Bl extends gt{constructor(e,l,s=!1){super();a(this,"level",0);a(this,"index",0);a(this,"enabled",!0);a(this,"m_skillInfo","");a(this,"m_nextLevelSkillInfo","");a(this,"skillTag1","");a(this,"skillTag2","");a(this,"skillTag3","");a(this,"nextLevelSkillTag1","");a(this,"nextLevelSkillTag2","");a(this,"nextLevelSkillTag3","");a(this,"m_updateFunction",()=>{});if(s){this.m_data=new Tt({id:e+"_0",kindId:e});return}this.m_data=Bt.getOnlyExample().getData(e),this.level=l,this.enabled=!0}get data(){return this.m_data}get skillInfo(){return this.m_updateFunction!=null&&this.m_updateFunction(),this.m_skillInfo||(this.m_skillInfo=""),this.m_skillInfo}get nextLevelSkillInfo(){return this.m_nextLevelSkillInfo||(this.m_nextLevelSkillInfo=""),this.m_nextLevelSkillInfo}}class W extends Bl{constructor(e,l,s){super(e,l);a(this,"tower");this.tower=s}static create(e,l,s){const n=new W("",l,s);return n.m_data=e,n}shouldTransferBullet(){switch(this.data.kindId){case v.KIND_GUIDED_BULLET:case v.KIND_ATTACK_RATE:case v.KIND_AOE_ATTACK:case v.KIND_THROUGHOUT_ATTACK:case v.KIND_BOUNCE_ATTACK:case v.KIND_FLOAT_DAMAGE:case v.KIND_CRIT:case v.KIND_REDUCED_DEFENSE:case v.KIND_POISON:case v.KIND_SLOW:case v.KIND_BURN_COLD:case v.KIND_BEAT_BACK:case v.KIND_SILENCE:case v.KIND_VERTIGO:case v.KIND_INTIMIDATE:case v.KIND_CUSS:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case v.KIND_AURA:return new jt(this.data.id,this.level,this.tower);case v.KIND_CHANGE_BULLET:return new Hl(this.data.id,this.level,this.tower);case v.KIND_CHANGE_DAMAGE:return new Gl(this.data.id,this.level,this.tower);case v.KIND_CHANGE_RATE:return new jl(this.data.id,this.level,this.tower);case v.KIND_CHANGE_RANGE:return new Wl(this.data.id,this.level,this.tower);case v.KIND_FIELD_ATTACK:return new el(this.data.id,this.level,this.tower);case v.KIND_DIVIDED_ATTACK:return new Zt(this.data.id,this.level,this.tower);case v.KIND_SCATTER_ATTACK:return new al(this.data.id,this.level,this.tower);case v.KIND_COMBO_ATTACK:return new Yt(this.data.id,this.level,this.tower);case v.KIND_GUIDED_BULLET:return new fs(this.data.id,this.level,this.tower);case v.KIND_ATTACK_RATE:return new ps(this.data.id,this.level,this.tower);case v.KIND_AOE_ATTACK:return new Wt(this.data.id,this.level,this.tower);case v.KIND_THROUGHOUT_ATTACK:return new il(this.data.id,this.level,this.tower);case v.KIND_BOUNCE_ATTACK:return new zt(this.data.id,this.level,this.tower);case v.KIND_FLOAT_DAMAGE:return new gs(this.data.id,this.level,this.tower);case v.KIND_CRIT:return new qt(this.data.id,this.level,this.tower);case v.KIND_REDUCED_DEFENSE:return new ll(this.data.id,this.level,this.tower);case v.KIND_POISON:return new tl(this.data.id,this.level,this.tower);case v.KIND_SLOW:return new nl(this.data.id,this.level,this.tower);case v.KIND_BURN_COLD:return new hs(this.data.id,this.level,this.tower);case v.KIND_BEAT_BACK:return new Xt(this.data.id,this.level,this.tower);case v.KIND_SILENCE:return new sl(this.data.id,this.level,this.tower);case v.KIND_VERTIGO:return new rl(this.data.id,this.level,this.tower);case v.KIND_INTIMIDATE:return new Qt(this.data.id,this.level,this.tower);case v.KIND_CUSS:return new Jt(this.data.id,this.level,this.tower);default:return this}}}const Ne=class Ne extends W{constructor(t,e,l){super(t,e,l),this.index=1050,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3001,this.radiiInfo,P.toPercentage(this.nextEffectRate))}}get radii(){return this.data.getLevelParam(this.level,0)+Ne.DEFAULT_RADII}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Ne.DEFAULT_NEXT_EFFECT_RATE,Ne.MAX_NEXT_EFFECT_RATE)}get radiiInfo(){return this.radii.toString()}};a(Ne,"DEFAULT_RADII",0),a(Ne,"DEFAULT_NEXT_EFFECT_RATE",0),a(Ne,"MAX_NEXT_EFFECT_RATE",1);let Wt=Ne;class ps extends W{constructor(t,e,l){super(t,e,l),this.index=1040,this.m_updateFunction=()=>{let s=this.floorRate,n=this.airRate;s<=0&&n>0?this.m_skillInfo=_.getLanguageStr(3029):n<=0&&s>0?this.m_skillInfo=_.getLanguageStr(3028):s!=1?this.m_skillInfo=_.getLanguageStr(3030,P.toPercentage(s)):n!=1&&(this.m_skillInfo=_.getLanguageStr(3031,P.toPercentage(n)))}}get floorRate(){return this.data.getLevelParam(this.level,0)}get airRate(){return this.data.getLevelParam(this.level,1)}}const vt=class vt extends W{constructor(t,e,l){super(t,e,l),this.index=1500,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3002)}}get spId(){return this.data.getLevelParam(this.level,0)}get spLevel(){return this.data.getLevelParam(this.level,1)}get radii(){return this.data.getLevelParam(this.level,2)*this.level+vt.DEFAULT_RADII}};a(vt,"DEFAULT_RADII",1e3);let jt=vt;const $e=class $e extends W{constructor(t,e,l){super(t,e,l),this.index=1060,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3003,P.toPercentage(this.chances),this.distanceInfo)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+$e.DEFAULT_CHANCES,1),0)}get beatBackDistance(){return this.data.getLevelParam(this.level,1)+$e.DEFAULT_BEAT_BACK_DISTANCE}get distanceInfo(){return this.beatBackDistance.toString()}};a($e,"SHIFT_TIME",.2),a($e,"DEFAULT_CHANCES",0),a($e,"DEFAULT_BEAT_BACK_DISTANCE",0);let Xt=$e;const Te=class Te extends W{constructor(t,e,l){super(t,e,l),this.index=1070,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3004,this.bounceNum,P.toPercentage(1-this.nextEffectRate),this.attackInfo)}}get bounceNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Te.DEFAULT_BOUNCE_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)*this.level+Te.DEFAULT_NEXT_EFFECT_RATE,Te.MAX_NEXT_EFFECT_RATE)}get attackInfo(){var e;let t=null;return((e=this.tower)==null?void 0:e.newBullet().bulletData.hitEffectId)==H.KIND_LIGHTNING?t=_.getLanguageStr(3516):t=_.getLanguageStr(3515),t}};a(Te,"DEFAULT_BOUNCE_NUM",.5),a(Te,"DEFAULT_NEXT_EFFECT_RATE",.35),a(Te,"MAX_NEXT_EFFECT_RATE",1),a(Te,"MAX_DISTANCE",3e3);let zt=Te;class hs extends W{constructor(t,e,l){super(t,e,l),this.index=1080,this.m_updateFunction=()=>{this.burnColdValue>0?this.m_skillInfo=_.getLanguageStr(3005,this.burn):this.m_skillInfo=_.getLanguageStr(3006,P.toPercentage(this.cold))}}get burnColdValue(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return this.data.getLevelParam(this.level,0)<0&&(e=-e),Math.floor(e)}get burn(){return Math.floor(Math.sqrt(this.burnColdValue))}get cold(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return Math.pow(e,.25)*.03}}class Hl extends W{constructor(t,e,l){super(t,e,l)}get bulletId(){return this.data.getLevelParam(this.level,0)}}class Gl extends W{constructor(t,e,l){super(t,e,l),this.index=1e3,this.m_updateFunction=()=>{this.damageRate>1?this.m_skillInfo=_.getLanguageStr(3007,P.toPercentage(this.damageRate-1)):this.damageRate<1&&(this.m_skillInfo=_.getLanguageStr(3008,P.toPercentage(1-this.damageRate)))}}get damageAdd(){return this.data.getLevelParam(this.level,0)*this.level}get damageRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get damageA(){return this.data.getLevelParam(this.level,2)}get damageB(){return this.data.getLevelParam(this.level,3)}get damageC(){return this.data.getLevelParam(this.level,4)}isChangeBase(){return!(this.damageA==0&&this.damageB==0&&this.damageC==0)}}class Wl extends W{constructor(t,e,l){super(t,e,l),this.index=1010,this.m_updateFunction=()=>{this.rangeRate>1?this.m_skillInfo=_.getLanguageStr(3009,P.toPercentage(this.rangeRate-1)):this.m_skillInfo=_.getLanguageStr(3010,P.toPercentage(1-this.rangeRate)),this.rangeMin>0&&(this.m_skillInfo+=_.getLanguageStr(3027))}}get rangeAdd(){return this.data.getLevelParam(this.level,0)*this.level}get rangeRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get range(){return this.data.getLevelParam(this.level,2)}get rangeMin(){return this.data.getLevelParam(this.level,3)}isChangeBase(){return this.range!=0}}class jl extends W{constructor(t,e,l){super(t,e,l),this.index=1020,this.m_updateFunction=()=>{this.rateRate>1?this.m_skillInfo=_.getLanguageStr(3011,P.toPercentage(this.rateRate-1)):this.m_skillInfo=_.getLanguageStr(3012,P.toPercentage(1-this.rateRate))}}get rateRate(){return this.data.getLevelParam(this.level,0)+this.data.getLevelParam(this.level,1)*this.level+1}get rate(){return this.data.getLevelParam(this.level,2)}isChangeBase(){return this.rate!=0}}const Be=class Be extends W{constructor(t,e,l){super(t,e,l),this.index=1090,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3013,P.toPercentage(this.chances),this.extraBullet+1)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)+Be.DEFAULT_CHANCES,1),0)}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,1)*this.level+Be.DEFAULT_EXTRA_BULLET)}};a(Be,"DEFAULT_CHANCES",0),a(Be,"DEFAULT_EXTRA_BULLET",.5),a(Be,"DEFAULT_RATE",.08);let Yt=Be;const we=class we extends W{constructor(t,e,l){super(t,e,l),this.index=1100,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3014,P.toPercentage(this.chances),this.damageEffectRate.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+we.DEFAULT_CHANCES,1),0)}get damageEffectRate(){return this.data.getLevelParam(this.level,1)*this.level+we.DEFAULT_DAMAGE_EFFECT_RATE+1}get buffEffectRate(){return this.data.getLevelParam(this.level,2)*this.level+we.DEFAULT_BUFF_EFFECT_RATE+1}};a(we,"DEFAULT_CHANCES",.1),a(we,"DEFAULT_DAMAGE_EFFECT_RATE",.5),a(we,"DEFAULT_BUFF_EFFECT_RATE",.1);let qt=we;const et=class et extends W{constructor(t,e,l){super(t,e,l),this.index=1110,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3026,Math.round(this.cussPower),this.duration.toFixed(0))}}get cussPower(){return this.data.getLevelParam(this.level,0)*this.level*this.tower.level+et.DEFAULT_CUSS_POWER}get duration(){return this.data.getLevelParam(this.level,1)+et.DEFAULT_DURATION}};a(et,"DEFAULT_CUSS_POWER",0),a(et,"DEFAULT_DURATION",0);let Jt=et;const Dt=class Dt extends W{constructor(t,e,l){super(t,e,l),this.index=1120,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3015,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Dt.DEFAULT_EXTRA_BULLET)}};a(Dt,"DEFAULT_EXTRA_BULLET",.5);let Zt=Dt;class gs extends W{constructor(t,e,l){super(t,e,l),this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3017)}}get floatDamageRate(){return this.data.getLevelParam(this.level,0)*this.level}}class fs extends W{constructor(t,e,l){super(t,e,l),this.m_skillInfo=""}get guideRatio(){return this.data.getLevelParam(this.level,0)}get bulletSpeedRate(){return this.data.getLevelParam(this.level,1)+1}get bulletAccSpeed(){return this.data.getLevelParam(this.level,2)}get guideInfo(){let t=null,e=this.guideRatio;return e<.1?t=_.getLanguageStr(3500):e<.2?t=_.getLanguageStr(3501):e<.3?t=_.getLanguageStr(3502):e<.4?t=_.getLanguageStr(3503):t=_.getLanguageStr(3504),t}}const tt=class tt extends W{constructor(t,e,l){super(t,e,l),this.index=1140,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3019,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+tt.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+tt.DEFAULT_DURATION}};a(tt,"DEFAULT_CHANCES",.05),a(tt,"DEFAULT_DURATION",0);let Qt=tt;const St=class St extends W{constructor(t,e,l){super(t,e,l),this.index=1130,this.m_skillInfo=_.getLanguageStr(3016)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+St.DEFAULT_CHANCES,1),0)}};a(St,"DEFAULT_CHANCES",.05);let el=St;const lt=class lt extends W{constructor(e,l,s){super(e,l,s);a(this,"m_poisonRate",-1);this.index=1150,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3e3,Math.round(this.poisonRate*this.tower.damage()),this.duration.toFixed(0))}}get poisonRate(){return this.m_poisonRate<0?this.data.getLevelParam(this.level,0)*this.level+lt.DEFAULT_POISON_RATE:this.m_poisonRate}set poisonRate(e){this.m_poisonRate<0&&(this.m_poisonRate=e)}get duration(){return this.data.getLevelParam(this.level,1)+lt.DEFAULT_DURATION}};a(lt,"DEFAULT_POISON_RATE",0),a(lt,"DEFAULT_DURATION",0);let tl=lt;const at=class at extends W{constructor(t,e,l){super(t,e,l),this.index=1160,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3020,P.toPercentage(this.reducedDefenseRate),this.duration.toFixed(1))}}get reducedDefenseRate(){return this.data.getLevelParam(this.level,0)*this.level+at.DEFAULT_REDUCED_DEFENSE_RATE}get duration(){return this.data.getLevelParam(this.level,1)+at.DEFAULT_DURATION}};a(at,"DEFAULT_REDUCED_DEFENSE_RATE",.1),a(at,"DEFAULT_DURATION",0);let ll=at;const bt=class bt extends W{constructor(t,e,l){super(t,e,l),this.index=1170,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3021,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+bt.DEFAULT_EXTRA_BULLET)}};a(bt,"DEFAULT_EXTRA_BULLET",.5);let al=bt;const st=class st extends W{constructor(t,e,l){super(t,e,l),this.index=1180,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3022,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+st.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+st.DEFAULT_DURATION}};a(st,"DEFAULT_CHANCES",.05),a(st,"DEFAULT_DURATION",0);let sl=st;const nt=class nt extends W{constructor(t,e,l){super(t,e,l),this.index=1190,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3023,P.toPercentage(this.slowRate),this.duration.toFixed(1))}}get slowRate(){return this.data.getLevelParam(this.level,0)*this.level+nt.DEFAULT_SLOW_RATE}get duration(){return this.data.getLevelParam(this.level,1)+nt.DEFAULT_DURATION}};a(nt,"DEFAULT_SLOW_RATE",.1),a(nt,"DEFAULT_DURATION",0);let nl=nt;const Re=class Re extends W{constructor(t,e,l){super(t,e,l),this.index=1200,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3024,this.throughoutNum)}}get throughoutNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Re.DEFAULT_THROUGHOUT_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Re.DEFAULT_NEXT_EFFECT_RATE,Re.MAX_NEXT_EFFECT_RATE)}};a(Re,"DEFAULT_THROUGHOUT_NUM",.5),a(Re,"DEFAULT_NEXT_EFFECT_RATE",0),a(Re,"MAX_NEXT_EFFECT_RATE",1);let il=Re;const it=class it extends W{constructor(t,e,l){super(t,e,l),this.index=1210,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3025,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+it.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+it.DEFAULT_DURATION}};a(it,"DEFAULT_CHANCES",0),a(it,"DEFAULT_DURATION",0);let rl=it;const ae=class ae extends Bl{constructor(e,l,s,n=!1){super(e,l,n);a(this,"monster");a(this,"m_levelMax",0);this.monster=s,this.m_data.typeId=We.TYPE_MONSTER_SKILL}static getKindName(e){switch(e){case f.KIND_FLY:return _.getLanguageStr(2507);case f.KIND_AIRBORNE:return _.getLanguageStr(2510);case f.KIND_RESIST_FIRE:return _.getLanguageStr(2515,_.getLanguageStr(2710));case f.KIND_RESIST_FROST:return _.getLanguageStr(2515,_.getLanguageStr(2711));case f.KIND_RESIST_POISON:return _.getLanguageStr(2515,_.getLanguageStr(2712));case f.KIND_RESIST_SLOW:return _.getLanguageStr(2515,_.getLanguageStr(2719));case f.KIND_RESIST_BEAT:return _.getLanguageStr(2515,_.getLanguageStr(2717));case f.KIND_RESIST_SILENCE:return _.getLanguageStr(2515,_.getLanguageStr(2722));case f.KIND_RESIST_VERTIGO:return _.getLanguageStr(2515,_.getLanguageStr(2715));case f.KIND_RESIST_CRIT:return _.getLanguageStr(2515,_.getLanguageStr(2716));case f.KIND_RESIST_LIGHT:return _.getLanguageStr(2515,_.getLanguageStr(2714));case f.KIND_RESIST_INTIMIDATE:return _.getLanguageStr(2515,_.getLanguageStr(2718));case f.KIND_RESIST_STRSMOOTH:return _.getLanguageStr(2723);case f.KIND_SLOWF:return _.getLanguageStr(2725);case f.KIND_WEAK_FIRE:return _.getLanguageStr(2516,_.getLanguageStr(2710));case f.KIND_WEAK_FROST:return _.getLanguageStr(2516,_.getLanguageStr(2711));case f.KIND_WEAK_POISON:return _.getLanguageStr(2516,_.getLanguageStr(2712));case f.KIND_WEAK_SLOW:return _.getLanguageStr(2516,_.getLanguageStr(2719));case f.KIND_WEAK_BEAT:return _.getLanguageStr(2516,_.getLanguageStr(2717));case f.KIND_WEAK_SILENCE:return _.getLanguageStr(2516,_.getLanguageStr(2722));case f.KIND_WEAK_VERTIGO:return _.getLanguageStr(2516,_.getLanguageStr(2715));case f.KIND_WEAK_CRIT:return _.getLanguageStr(2516,_.getLanguageStr(2716));case f.KIND_WEAK_LIGHT:return _.getLanguageStr(2516,_.getLanguageStr(2714));case f.KIND_WEAK_INTIMIDATE:return _.getLanguageStr(2516,_.getLanguageStr(2718));case f.KIND_ISOLATION:return _.getLanguageStr(2517);case f.KIND_RUN:return _.getLanguageStr(2500);case f.KIND_MIRROR:return _.getLanguageStr(2501);case f.KIND_SUMMON:return _.getLanguageStr(2502);case f.KIND_CLOUD:return _.getLanguageStr(2503);case f.KIND_CURE:return _.getLanguageStr(2504);case f.KIND_BLINK:return _.getLanguageStr(2505);case f.KIND_HIDE:return _.getLanguageStr(2506);case f.KIND_RELIVE:return _.getLanguageStr(2508);case f.KIND_SUICIDE:return _.getLanguageStr(2509);case f.KIND_SHIELD:return _.getLanguageStr(2511);case f.KIND_SNEER:return _.getLanguageStr(2512);case f.KIND_REINCARNATE:return _.getLanguageStr(2514);case f.KIND_TRANSFORM:return _.getLanguageStr(2513);case f.KIND_LINKS:return _.getLanguageStr(2727);default:return""}}get name(){return this.canLevelUp(1)?_.getLanguageStr(2416,this.data.name,this.level):this.data.name}get isDebuff(){return this.grade.indexOf(ae.RES_FG_X)!=-1}get skillSign(){return this.isDebuff?$t(_.getLanguageStr(2422),0,!0,13):$t(_.getLanguageStr(2421),16711680,!0,13)}get isDowerSkill(){return!1}get isLearnSkill(){return!1}getConflictStr(){let e=null,l=0,s=0,n=N.$_conflict_skill_kind,o="";for(l=0;l<n.length;l++)if(e=n[l],e.indexOf(this.data.kindId)!=-1)for(s=0;s<e.length;s++)e[s]!=this.data.kindId&&(o+=ae.getKindName(e[s]),o+=_.getLanguageStr(2406));return o.length>0&&(o=o.slice(0,o.length-1)),o}canLevelUp(e=-1){return e<0&&(e=this.level),e<this.levelMax}get levelMax(){if(this.m_levelMax<=0){const e=N.$_skill_lvup_spend,l=this.grade;if(e[l])for(const s in e[l])this.m_levelMax=Math.max(this.m_levelMax,parseInt(s))+1;else this.m_levelMax=1}return this.m_levelMax}levelUpSpend(e=-1){e<0&&(e=this.level);let l=N.$_skill_lvup_spend,s=this.grade;return l[s]&&l[s][String(e)]?l[s][String(e)]:null}get skillScore(){let e=N.$_skill_grade_score,l=this.grade;return e[l]&&e[l][String(this.level)]?e[l][String(this.level)]:1}get grade(){let e=this.data.id,l=e.indexOf("_");return l==-1?ae.RES_FG_X:e.slice(l+1,e.length)}isEventSkill(){switch(this.data.kindId){case f.KIND_RUN:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case f.KIND_FLY:return new Ts(this.data.id,this.level,this.monster);case f.KIND_AIRBORNE:return new ol(this.data.id,this.level,this.monster);case f.KIND_RESIST_FIRE:case f.KIND_RESIST_FROST:case f.KIND_RESIST_POISON:case f.KIND_RESIST_SLOW:case f.KIND_RESIST_BEAT:case f.KIND_RESIST_SILENCE:case f.KIND_RESIST_VERTIGO:case f.KIND_RESIST_CRIT:case f.KIND_RESIST_LIGHT:case f.KIND_RESIST_INTIMIDATE:case f.KIND_RESIST_STRSMOOTH:case f.KIND_SLOWF:case f.KIND_WEAK_FIRE:case f.KIND_WEAK_FROST:case f.KIND_WEAK_POISON:case f.KIND_WEAK_SLOW:case f.KIND_WEAK_BEAT:case f.KIND_WEAK_SILENCE:case f.KIND_WEAK_VERTIGO:case f.KIND_WEAK_CRIT:case f.KIND_WEAK_LIGHT:case f.KIND_WEAK_INTIMIDATE:return new Se(this.data.id,this.level,this.monster);case f.KIND_ISOLATION:return new Ls(this.data.id,this.level,this.monster);case f.KIND_RUN:return new Ds(this.data.id,this.level,this.monster);case f.KIND_MIRROR:return new Xl(this.data.id,this.level,this.monster);case f.KIND_SUMMON:return new ql(this.data.id,this.level,this.monster);case f.KIND_CLOUD:return new Es(this.data.id,this.level,this.monster);case f.KIND_CURE:return new Is(this.data.id,this.level,this.monster);case f.KIND_BLINK:return new As(this.data.id,this.level,this.monster);case f.KIND_HIDE:return new ul(this.data.id,this.level,this.monster);case f.KIND_RELIVE:return new Yl(this.data.id,this.level,this.monster);case f.KIND_SUICIDE:return new dl(this.data.id,this.level,this.monster);case f.KIND_SHIELD:return new Ss(this.data.id,this.level,this.monster);case f.KIND_SNEER:return new bs(this.data.id,this.level,this.monster);case f.KIND_REINCARNATE:return new zl(this.data.id,this.level,this.monster);case f.KIND_TRANSFORM:return new xs(this.data.id,this.level,this.monster);case f.KIND_LINKS:return new vs(this.data.id,this.level,this.monster);default:return this}}};a(ae,"RES_SKILL","skill_"),a(ae,"RES_FG_A","A"),a(ae,"RES_FG_B","B"),a(ae,"RES_FG_C","C"),a(ae,"RES_FG_Z","Z"),a(ae,"RES_FG_X","X"),a(ae,"RES_FG_0","0"),a(ae,"RES_BG","bg"),a(ae,"PHOTO_WIDTH",34),a(ae,"PHOTO_HEIGHT",34),a(ae,"PHOTO_ROUND",8);let de=ae;class Ee extends de{constructor(t,e,l){super(t,e,l)}warmup(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cooldown(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}chances(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}eventType(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,3)}duration(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,4)}refreshTag(t=!1){this.skillTag1=this.getTagEventType(),this.nextLevelSkillTag1=this.getTagEventType(this.level+1),this.skillTag2=this.getTagCooldown(),this.nextLevelSkillTag2=this.getTagCooldown(this.level+1),t&&(this.skillTag3=this.getTagDuration(),this.nextLevelSkillTag3=this.getTagDuration(this.level+1))}getTagEventType(t=-1){let e=0;t<0&&(t=this.level);let l="",s=this.eventType(t);if(s.length!=4){for(e=0;e<s.length;e++)s[e]==f.EVENT_RED?l+=_.getLanguageStr(2402)+_.getLanguageStr(2406):s[e]==f.EVENT_YELLOW?l+=_.getLanguageStr(2403)+_.getLanguageStr(2406):s[e]==f.EVENT_GREEN?l+=_.getLanguageStr(2404)+_.getLanguageStr(2406):s[e]==f.EVENT_FULL&&(l+=_.getLanguageStr(2405)+_.getLanguageStr(2406));l=l.slice(0,l.length-1),l=_.getLanguageStr(2400,l)}return l}getTagCooldown(t=-1){return t<0&&(t=this.level),""+_.getLanguageStr(2401,this.cooldown(t))}getTagDuration(t=-1){return t<0&&(t=this.level),""+_.getLanguageStr(2407,this.duration(t))}}class ol extends de{constructor(t,e,l){super(t,e,l),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2201)}}heightSpeed(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}pathLengthMin(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}pathLengthMax(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}}a(ol,"BALLOON","balloon"),a(ol,"DEFAULT_HEIGHT",2e3);class As extends Ee{constructor(t,e,l){super(t,e,l),this.index=100,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2303,P.toGridStr(this.range())),this.m_nextLevelSkillInfo=_.getLanguageStr(2303,P.toGridStr(this.range(this.level+1))),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}}class Es extends Ee{constructor(t,e,l){super(t,e,l),this.index=110,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2302,this.cloudTime()),this.m_nextLevelSkillInfo=_.getLanguageStr(2302,this.cloudTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class Is extends Ee{constructor(t,e,l){super(t,e,l),this.index=140,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2300,P.toGridStr(this.cureRange()),P.toPercentage(this.cureRate())),this.m_nextLevelSkillInfo=_.getLanguageStr(2300,P.toGridStr(this.cureRange(this.level+1)),P.toPercentage(this.cureRate(this.level+1))),this.refreshTag()}}cureRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cureRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class Ts extends de{constructor(t,e,l){super(t,e,l),this.index=90,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2200),this.m_nextLevelSkillInfo=_.getLanguageStr(2200)}}get flyHeight(){return this.data.getLevelParam(this.level,0)}}class ul extends Ee{constructor(t,e,l){super(t,e,l),this.index=150,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2305,this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2305,this.duration(this.level+1)),this.refreshTag()}}}a(ul,"HIDE_TIME",1),a(ul,"HIDE_ALPHA",.1);class Ls extends de{constructor(t,e,l){super(t,e,l),this.index=500,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2202)}}}class vs extends Ee{constructor(t,e,l){super(t,e,l),this.index=116,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2728,P.toGridStr(this.range()),P.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2728,P.toGridStr(this.range(this.level+1)),P.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class Xl extends Ee{constructor(t,e,l){super(t,e,l),this.index=130,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2306,this.mirrorNum(),P.toPercentage(this.hpRate()),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2306,this.mirrorNum(this.level+1),P.toPercentage(this.hpRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}mirrorNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}a(Xl,"DEFAULT_DISTANCE",750);class zl extends de{constructor(t,e,l){super(t,e,l),this.index=85,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2215,this.monsterName()),this.m_nextLevelSkillInfo=_.getLanguageStr(2215,this.monsterName(this.level+1))}}monsterIdList(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}monsterName(t=-1){let e=0,l=this.monsterIdList(t),s="";for(e=0;e<l.length;e++)s+=ge.getOnlyExample().getData(l[e]).name,s+=_.getLanguageStr(2406);return s.slice(0,s.length-1),s}}a(zl,"REINCARNATE_TIME",5);class Yl extends de{constructor(t,e,l){super(t,e,l),this.index=170,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2213,this.reliveNum(),P.toPercentage(this.reliveHpRate())),this.m_nextLevelSkillInfo=_.getLanguageStr(2213,this.reliveNum(this.level+1),P.toPercentage(this.reliveHpRate(this.level+1)))}}reliveNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}reliveHpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}a(Yl,"RELIVE_TIME",8);class Se extends de{constructor(e,l,s){super(e,l,s);a(this,"maxHP",0);this.index=300,this.m_updateFunction=function(){this.m_skillInfo=this.resistInfo(),this.m_nextLevelSkillInfo=this.resistInfo(this.level+1)}}getResist(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}getRange(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}getMaxHP(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}resistInfo(e=-1){let l=this.getResist(e),s="",n=P.toPercentage(Math.abs(l));return l==0||(l>0?s=_.getLanguageStr(2409):s=_.getLanguageStr(2408),this.data.kindId==f.KIND_SLOWF&&(s=P.toGridStr(this.getRange())),s=_.getLanguageStr(this.resistInfoNumber,s,n),this.data.kindId==f.KIND_RESIST_STRSMOOTH&&this.getMaxHP(e)>0&&(s+=_.getLanguageStr(2730,this.getMaxHP(e)))),s}get resistInfoNumber(){switch(this.data.kindId){case f.KIND_RESIST_FIRE:case f.KIND_WEAK_FIRE:return 2203;case f.KIND_RESIST_FROST:case f.KIND_WEAK_FROST:return 2204;case f.KIND_RESIST_POISON:case f.KIND_WEAK_POISON:return 2205;case f.KIND_RESIST_SLOW:case f.KIND_WEAK_SLOW:return 2206;case f.KIND_RESIST_BEAT:case f.KIND_WEAK_BEAT:return 2207;case f.KIND_RESIST_SILENCE:case f.KIND_WEAK_SILENCE:return 2208;case f.KIND_RESIST_VERTIGO:case f.KIND_WEAK_VERTIGO:return 2209;case f.KIND_RESIST_CRIT:case f.KIND_WEAK_CRIT:return 2210;case f.KIND_RESIST_LIGHT:case f.KIND_WEAK_LIGHT:return 2211;case f.KIND_RESIST_INTIMIDATE:case f.KIND_WEAK_INTIMIDATE:return 2212;case f.KIND_RESIST_STRSMOOTH:return 2724;case f.KIND_SLOWF:return 2726;default:return 0}}}a(Se,"IMMUNITY",2701),a(Se,"RESIST_SUPER",2702),a(Se,"RESIST_HIGH",2703),a(Se,"RESIST",2704),a(Se,"FEAR",2705),a(Se,"FEAR_HIGH",2706),a(Se,"FEAR_SUPER",2707);class Ds extends Ee{constructor(t,e,l){super(t,e,l),this.index=160,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2304,P.toPercentage(this.speedRate()-1),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2304,P.toPercentage(this.speedRate(this.level+1)-1),this.duration(this.level+1)),this.refreshTag()}}speedRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)+1}}class Ss extends Ee{constructor(t,e,l){super(t,e,l),this.index=105,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2308,P.toPercentage(this.shieldRate()),this.shieldTime()),this.m_nextLevelSkillInfo=_.getLanguageStr(2308,P.toPercentage(this.shieldRate(this.level+1)),this.shieldTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}class bs extends Ee{constructor(t,e,l){super(t,e,l),this.index=106,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2309,P.toGridStr(this.range()),P.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2309,P.toGridStr(this.range(this.level+1)),P.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class dl extends de{constructor(t,e,l){super(t,e,l),this.index=185,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2214,P.toGridStr(this.cloudRange()),this.cloudTime()),this.m_nextLevelSkillInfo=_.getLanguageStr(2214,P.toGridStr(this.cloudRange(this.level+1)),this.cloudTime(this.level+1))}}cloudRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}a(dl,"isEveryTime",!0),a(dl,"SUICIDE_TIME",.5);class ql extends Ee{constructor(t,e,l){super(t,e,l),this.index=120,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2301,this.summonNum(),P.toPercentage(this.hpRate()),this.summonName()),this.m_nextLevelSkillInfo=_.getLanguageStr(2301,this.summonNum(this.level+1),P.toPercentage(this.hpRate(this.level+1)),this.summonName(this.level+1)),this.refreshTag(!0)}}summonId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}summonName(t=-1){return t<0&&(t=this.level),ge.getOnlyExample().getData(this.summonId(t)).name}summonNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}a(ql,"DEFAULT_DISTANCE",750);class xs extends Ee{constructor(t,e,l){super(t,e,l),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2307,this.transformName()),this.m_nextLevelSkillInfo=_.getLanguageStr(2307,this.transformName(this.level+1)),this.refreshTag(!0)}}transformId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}transformName(t=-1){return t<0&&(t=this.level),ge.getOnlyExample().getData(this.transformId(t)).name}}class Jl extends gt{constructor(e,l=1){super();a(this,"level");this.m_data=Gt.getOnlyExample().getData(e),this.level=l}get skillsPackageData(){return this.m_data}}class Zl{}a(Zl,"COLOR_LIST",[6316128,13631488,13668352,43520,28927,8913056,0]);const te=class te extends ve{constructor(e){super(e);a(this,"m_price");a(this,"priceCoin",0);a(this,"priceGold",0);a(this,"priceScore",0);a(this,"unlockMapId","");a(this,"index",0);this.m_price=e[te.DATA_PRICE],this.initPrice(),this.unlockMapId=e[te.DATA_UNLOCK_MAP_ID],this.index=e[te.DATA_INDEX]}get price(){return this instanceof pt&&Z.currentMap&&Z.currentMap.isDefendMap&&this.campPrice instanceof Array?this.campPrice:this.m_price}initPrice(){let e=this.price;if(e)if(e instanceof Array){const l=e;l[0]==te.DATA_COIN?this.priceCoin=l[1]:l[0]==te.DATA_GOLD?this.priceGold=l[1]:l[0]==te.DATA_SCORE&&(this.priceScore=l[1])}else this.priceCoin=e[te.DATA_COIN],this.priceGold=e[te.DATA_GOLD],this.priceScore=e[te.DATA_SCORE]}get isRare(){if(this.priceCoin>0){if(this.priceCoin>=N.$_rare_item_coin||this.index<0)return!0}else if(this.priceScore>0&&(this.priceScore>=N.$_rare_item_invite_score||this.index<0))return!0;return!1}};a(te,"DATA_PRICE","price"),a(te,"DATA_UNLOCK_MAP_ID","unlock_mid"),a(te,"DATA_COIN","coin"),a(te,"DATA_GOLD","gold"),a(te,"DATA_SCORE","invite_score"),a(te,"DATA_INDEX","index");let It=te;const se=class se extends It{constructor(e){super(e);a(this,"gemLevel");a(this,"towerSkillPackage");a(this,"nextLevelId");a(this,"colorIndex");this.typeId=ve.TYPE_GEM_ITEM,this.gemLevel=e[se.DATA_GEM_LEVEL],this.towerSkillPackage=e[se.DATA_TOWER_SKILL_PACKAGE],this.nextLevelId=e[se.DATA_NEXT_LEVEL_ID],this.colorIndex=e[se.DATA_COLOR_INDEX],this.res=this.resString}getSkillPackage(e){if(this.towerSkillPackage==null)return null;let l=/\D/gi;e=e.match(l).join("");let s=this.towerSkillPackage[e];return s==null?null:new Jl(s[se.SKILL_PACKAGE_ID],s[se.SKILL_PACKAGE_LEVEL])}get color(){return Zl.COLOR_LIST[this.colorIndex]}get resString(){return"hong"+this.gemLevel}};a(se,"TYPE_PURE","typePure"),a(se,"TYPE_MIX","typeMix"),a(se,"DATA_GEM_LEVEL","gamLevel"),a(se,"DATA_TOWER_SKILL_PACKAGE","sp"),a(se,"DATA_NEXT_LEVEL_ID","nextId"),a(se,"DATA_COLOR_INDEX","color"),a(se,"SKILL_PACKAGE_ID","id"),a(se,"SKILL_PACKAGE_LEVEL","lv");let cl=se;const Ce=class Ce extends Ze{constructor(){super(),Ce.onlyExample=this,this.loadData(N.$_global_properties[ve.TYPE_GEM_ITEM])}static getOnlyExample(){return Ce.onlyExample==null&&(Ce.onlyExample=new Ce),Ce.onlyExample}loadData(t){let e;for(e in t)this.m_manager[e]=new cl(t[e])}initData(){}getData(t){return this.getDataById(t)}};a(Ce,"onlyExample");let _l=Ce;const J=class J extends It{constructor(e){super(e);a(this,"skillPackageId");a(this,"skillPackageLevel");a(this,"skills");a(this,"xGrid");a(this,"yGrid");if(this.skillPackageId=e[J.DATA_SKILL_PACKAGE_ID],this.skillPackageLevel=e[J.DATA_SKILL_PACKAGE_LEVEL],e[J.DATA_SKILLS]instanceof Array)this.skills=e[J.DATA_SKILLS];else if(e[J.DATA_SKILLS]instanceof Object){this.skills=[];for(const l in e[J.DATA_SKILLS])this.skills.push({skid:l,lev:e[J.DATA_SKILLS][l]})}e[J.DATA_X_GRID]?this.xGrid=e[J.DATA_X_GRID]:this.xGrid=1,e[J.DATA_Y_GRID]?this.yGrid=e[J.DATA_Y_GRID]:this.yGrid=1}};a(J,"DATA_A","a"),a(J,"DATA_B","b"),a(J,"DATA_C","c"),a(J,"DATA_D","d"),a(J,"DATA_SKILL_PACKAGE_ID","skill"),a(J,"DATA_SKILL_PACKAGE_LEVEL","skillLv"),a(J,"DATA_SKILLS","skills"),a(J,"DATA_X_GRID","x_grid"),a(J,"DATA_Y_GRID","y_grid");let ee=J;const z=class z extends ee{constructor(e){super(e);a(this,"m_buildValueA",0);a(this,"m_buildValueB",0);a(this,"m_buildValueC",0);a(this,"m_campPrice",["",0]);a(this,"m_campBuildValueA",0);a(this,"m_campBuildValueB",0);a(this,"m_campBuildValueC",0);a(this,"range");a(this,"rate");a(this,"limitNum");e[z.DATA_BUILD_VALUE]?(this.m_buildValueA=e[z.DATA_BUILD_VALUE][ee.DATA_A],this.m_buildValueB=e[z.DATA_BUILD_VALUE][ee.DATA_B],this.m_buildValueC=e[z.DATA_BUILD_VALUE][ee.DATA_C]):e[z.DATA_EXP_VALUE]&&(this.m_buildValueA=e[z.DATA_EXP_VALUE][ee.DATA_A],this.m_buildValueB=e[z.DATA_EXP_VALUE][ee.DATA_B],this.m_buildValueC=e[z.DATA_EXP_VALUE][ee.DATA_C]),e[z.DATA_CAMP_PRICE]&&(this.m_campPrice=e[z.DATA_CAMP_PRICE]),e[z.DATA_CAMP_BUILD_VALUE]&&(this.m_campBuildValueA=e[z.DATA_CAMP_BUILD_VALUE][ee.DATA_A],this.m_campBuildValueB=e[z.DATA_CAMP_BUILD_VALUE][ee.DATA_B],this.m_campBuildValueC=e[z.DATA_CAMP_BUILD_VALUE][ee.DATA_C]),this.range=e[z.DATA_RANGE],this.rate=Math.round(e[z.DATA_RATE]*10),this.limitNum=e[z.DATA_LIMIT_NUM]}get buildValueA(){return Z.currentMap&&Z.currentMap.isDefendMap?this.m_campBuildValueA:this.m_buildValueA}get buildValueB(){return Z.currentMap&&Z.currentMap.isDefendMap?this.m_campBuildValueB:this.m_buildValueB}get buildValueC(){return Z.currentMap&&Z.currentMap.isDefendMap?this.m_campBuildValueC:this.m_buildValueC}get campPrice(){return this.m_campPrice}get buildCostPrice(){return this.price[0]}get buildCost(){return this.price[1]}get buildValueAConst(){return this.m_buildValueA}get buildValueBConst(){return this.m_buildValueB}get buildValueCConst(){return this.m_buildValueC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}};a(z,"DATA_BUILD_VALUE","build_val"),a(z,"DATA_EXP_VALUE","exp_val"),a(z,"DATA_CAMP_PRICE","camp_price"),a(z,"DATA_CAMP_BUILD_VALUE","camp_build_val"),a(z,"DATA_RANGE","range"),a(z,"DATA_RATE","rate"),a(z,"DATA_LIMIT_NUM","limit_num");let pt=z;const k=class k extends pt{constructor(e){super(e);a(this,"valueList");a(this,"effectType");a(this,"effectKind");a(this,"effectRange");a(this,"useNum");a(this,"colddown");a(this,"delay");a(this,"attackEffectId");this.typeId=ve.TYPE_TRAP_ITEM,this.valueList=e[k.DATA_VALUE_LIST],this.effectType=e[k.DATA_EFFECT_TYPE],this.effectKind=e[k.DATA_EFFECT_KIND],e[k.DATA_USE_NUM]?this.useNum=e[k.DATA_USE_NUM]:this.useNum=1,e[k.DATA_COLDDOWN]?this.colddown=e[k.DATA_COLDDOWN]:this.colddown=.1,e[k.DATA_DELAY]?this.delay=e[k.DATA_DELAY]:this.delay=0,e[k.DATA_EFFECT_RANGE]?this.effectRange=e[k.DATA_EFFECT_RANGE]:this.effectRange=this.range,this.attackEffectId=e[k.DATA_EFFECT]}};a(k,"KIND_BLAST","1"),a(k,"KIND_DAMAGE","2"),a(k,"KIND_VERTIGO","3"),a(k,"KIND_SLOW","4"),a(k,"KIND_BEAT_BACK","5"),a(k,"KIND_COLD_BULLET","50"),a(k,"KIND_BULLET","100"),a(k,"KIND_BULLET_RANDOM","101"),a(k,"EFFECT_TYPE_FLOOR","1"),a(k,"EFFECT_TYPE_AIR","2"),a(k,"EFFECT_TYPE_ALL","3"),a(k,"EFFECT_TYPE_LIGHTNING","4"),a(k,"EFFECT_KIND_SINGLE","1"),a(k,"EFFECT_KIND_MULTI","2"),a(k,"DATA_VALUE_LIST","value"),a(k,"DATA_EFFECT_TYPE","effectType"),a(k,"DATA_EFFECT_KIND","effectKind"),a(k,"DATA_EFFECT_RANGE","effectRange"),a(k,"DATA_USE_NUM","use_times"),a(k,"DATA_COLDDOWN","colddown"),a(k,"DATA_DELAY","delay"),a(k,"DATA_EFFECT","effect");let ml=k;class Dl extends pt{constructor(e){super(e);a(this,"m_buildCostA");a(this,"m_buildCostB");a(this,"m_buildCostC");a(this,"m_campBuildCostA");a(this,"m_campBuildCostB");a(this,"m_campBuildCostC");a(this,"damageA");a(this,"damageB");a(this,"damageC");a(this,"bulletId","");a(this,"buffEffect");a(this,"levelMax");this.m_buildCostA=e.build_cost.a,this.m_buildCostB=e.build_cost.b,this.m_buildCostC=e.build_cost.c,this.m_campBuildCostA=e.camp_build_cost.a,this.m_campBuildCostB=e.camp_build_cost.b,this.m_campBuildCostC=e.camp_build_cost.c,this.damageA=e.damage.a,this.damageB=e.damage.b,this.damageC=e.damage.c,this.buffEffect=e.buffEffect,this.levelMax=e.lev_max,this.bulletId=e.bId}get buildCostA(){var e;return(e=Z.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostA:this.m_buildCostA}get buildCostB(){var e;return(e=Z.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostB:this.m_buildCostB}get buildCostC(){var e;return(e=Z.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostC:this.m_buildCostC}get buildCostAConst(){return this.m_buildCostA}get buildCostBConst(){return this.m_buildCostB}get buildCostCConst(){return this.m_buildCostC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}get isMagicTower(){return this.id=="xiangqianta"}}const Oe=class Oe extends Ze{constructor(){super(),Oe.onlyExample=this,this.loadData(N.$_towerAtt_Obj)}static getOnlyExample(){return Oe.onlyExample==null&&(Oe.onlyExample=new Oe),Oe.onlyExample}loadData(t){for(const e in t){const l=t[e];l[ce.DATA_ID]=e,this.m_manager[e]=new Dl(t[e])}}getData(t){return this.getDataById(t)}};a(Oe,"onlyExample");let pl=Oe;const j=class j extends ee{constructor(e){super(e);a(this,"shapeMode");a(this,"damageMode");a(this,"radii");a(this,"shadow");a(this,"fallAccSpeed");a(this,"floorPathId");a(this,"hitEffectId");this.shapeMode=e[j.DATA_SHAPE_MODE],this.damageMode=e[j.DATA_DAMAGE_MODE],this.radii=e[j.DATA_RADII],e[j.DATA_SHADOW]?this.shadow=e[j.DATA_SHADOW]:this.shadow=1,this.fallAccSpeed=e[j.DATA_FALL_ACC_SPEED],this.floorPathId=e[j.DATA_FLOOR_PATH_ID],this.hitEffectId=e[j.DATA_HIT_EFFECT_ID]}};a(j,"SHAPE_COMMON",0),a(j,"SHAPE_DIRECTION",1),a(j,"SHAPE_ROLL",2),a(j,"DAMAGE_NULL",0),a(j,"DAMAGE_COMMON",1),a(j,"DAMAGE_PERFORATIVE",2),a(j,"DAMAGE_MAGICAL",3),a(j,"DAMAGE_SIEGE",4),a(j,"DAMAGE_MIXED",5),a(j,"FALL_ACC_SPEED_THRESHOLD",-7),a(j,"DATA_SHAPE_MODE","shapeMode"),a(j,"DATA_DAMAGE_MODE","damageMode"),a(j,"DATA_RADII","radii"),a(j,"DATA_SHADOW","shadow"),a(j,"DATA_FALL_ACC_SPEED","fallAcc"),a(j,"DATA_FLOOR_PATH_ID","path"),a(j,"DATA_HIT_EFFECT_ID","effect");let hl=j;const ye=class ye extends Ze{constructor(){super(),ye.onlyExample=this,this.loadData(N.$_bulletAtt_Obj)}static getOnlyExample(){return ye.onlyExample==null&&(ye.onlyExample=new ye),ye.onlyExample}loadData(t){for(const e in t){const l=t[e];l[ce.DATA_ID]=e,this.m_manager[e]=new hl(t[e])}}getData(t){return this.getDataById(t)}};a(ye,"onlyExample");let gl=ye;const y=class y extends ee{constructor(e){super(e);a(this,"hpMaxA");a(this,"hpMaxB");a(this,"hpMaxC");a(this,"expMaxA",0);a(this,"expMaxB",0);a(this,"expMaxC",0);a(this,"expMaxD",0);a(this,"speedBase");a(this,"charm");a(this,"height");a(this,"width");a(this,"speakList",[]);a(this,"population");e[y.DATA_HP_MAX]?(this.hpMaxA=e[y.DATA_HP_MAX][ee.DATA_A],this.hpMaxB=e[y.DATA_HP_MAX][ee.DATA_B],this.hpMaxC=e[y.DATA_HP_MAX][ee.DATA_C]):(this.hpMaxA=e[y.DATA_HP_MAX_A],this.hpMaxB=e[y.DATA_HP_MAX_B],this.hpMaxC=e[y.DATA_HP_MAX_C]),e[y.DATA_EXP_MAX]&&(this.expMaxA=e[y.DATA_EXP_MAX][ee.DATA_A],this.expMaxB=e[y.DATA_EXP_MAX][ee.DATA_B],this.expMaxC=e[y.DATA_EXP_MAX][ee.DATA_C],this.expMaxD=e[y.DATA_EXP_MAX][ee.DATA_D]),this.speedBase=e[y.DATA_SPEED_BASE],this.charm=e[y.DATA_CHARM],this.height=e[y.DATA_HEIGHT],this.width=e[y.DATA_WIDTH],e[y.DATA_SPEAK_LIST]instanceof Array&&(this.speakList=e[y.DATA_SPEAK_LIST]),this.population=e[y.DATA_POPULATION]}getSpeak(e=0){if(this.speakList instanceof Array&&this.speakList.length>e){if(this.speakList[e]instanceof String)return this.speakList[e];if(this.speakList[e]instanceof Array){const l=this.speakList[e];return l[Math.floor(Math.random()*l.length)]}}return""}getSpeakEnter(){return this.getSpeak(y.SPEAK_ENTER)}getSpeakIdle(){return this.getSpeak(y.SPEAK_IDLE)}getSpeakInjury(){return this.getSpeak(y.SPEAK_INJURY)}getSpeakDie(){return this.getSpeak(y.SPEAK_DIE)}getSpeakInvade(){return this.getSpeak(y.SPEAK_INVADE)}getSpeakCast(){return this.getSpeak(y.SPEAK_CAST)}get isBoss(){return this.population>=100}get isRandomBoss(){return this.population==99}getHpMax(e,l=1){return Math.floor((this.hpMaxA+e*(this.hpMaxB+e*this.hpMaxC))*l)}};a(y,"SPEAK_ENTER",0),a(y,"SPEAK_IDLE",1),a(y,"SPEAK_INJURY",2),a(y,"SPEAK_DIE",3),a(y,"SPEAK_INVADE",4),a(y,"SPEAK_CAST",5),a(y,"DEFENSE_NULL",0),a(y,"DEFENSE_LIGHT",1),a(y,"DEFENSE_COMMON",2),a(y,"DEFENSE_HEAVY",3),a(y,"DEFENSE_BUILDING",4),a(y,"DEFENSE_BOSS",5),a(y,"DEFENSE_HOLY",6),a(y,"DEFENSE_INVINCIBLE",7),a(y,"DATA_HP_MAX","hp_factor"),a(y,"DATA_EXP_MAX","explev"),a(y,"DATA_HP_MAX_A","ha"),a(y,"DATA_HP_MAX_B","hb"),a(y,"DATA_HP_MAX_C","hc"),a(y,"DATA_SPEED_BASE","speed"),a(y,"DATA_CHARM","charm"),a(y,"DATA_HEIGHT","height"),a(y,"DATA_WIDTH","width"),a(y,"DATA_SPEAK_LIST","speak"),a(y,"DATA_POPULATION","pop");let Tt=y;const Ke=class Ke extends Ze{constructor(){super(),Ke.onlyExample=this,this.loadData(N.$_wolfAtt_Obj)}static getOnlyExample(){return Ke.onlyExample==null&&(Ke.onlyExample=new Ke),Ke.onlyExample}loadData(t){for(const e in t){const l=t[e];l[ce.DATA_ID]=e,this.m_manager[e]=new Tt(l)}}getBossList(t){const e=[];if(!(t instanceof Array))return e;for(let l=0;l<t.length;l++){const s=this.getData(t[l]);s&&s.isBoss&&e.push(t[l])}return e}getRandomBossList(t){const e=[];if(!(t instanceof Array))return e;for(let l=0;l<t.length;l++){const s=this.getData(t[l]);s&&s.isRandomBoss&&e.push(t[l])}return e}getData(t){return this.getDataById(t)}};a(Ke,"onlyExample");let ge=Ke;function Ql(r,t){const e=N.$_wolfAtt_Obj[r].pop;return e<99?e:t??e}function Ns(r,t=1){return V.sumBy(r,e=>Ql(e,t))}function xl(r,t){return Math.round((2+1.07*t)*Math.pow(r/.39,2/3))}function ws(r,t){const e=N.dream_data.dm_opt_cfg.tower_sum_exp;return Math.round(t*Math.pow(r,e.power)*e.popu+e.p)}function Rs(r,t){const e=N.$_map_Obj[r],l=e.wolf_proportion;let s=e.pop_max;const n=l.map(T=>T[0]),o=l.map(T=>Ql(T[1]));let u=l.map(T=>T[1]),m=o.length;if(m==0)return[[],[]];let p=[],h=new Array(m).fill(0);if(t&&(p=t.flatMap((T,S)=>new Array(T).fill(u[S])),h=t,t.length=o.length,s-=V.chain(o).zip(t).sumBy(T=>T[0]*T[1]).value(),s<0))return null;for(;s>0;){for(;m>0&&s<o[m-1];)m--;if(m==0)break;let T;do{const S=Math.random()*n[m-1];T=V.findIndex(n,E=>S<E)}while(s<o[T]);s-=o[T],p.push(u[T]),h[T]++}return[t?V.shuffle(p):p,V.zip(u,h)]}function ea(r){const t=r.map(l=>l*1e3),e=Ka(...t);for(let l=t.length-1;l>=0;l--)t[l]=(t[l]-(l==0?0:t[l-1]))/e;return t}function ta(r){const t=[];for(const l of r)t.push(t.length==0?l:t.at(-1)+l);const e=t.at(-1);return t.map(l=>l/e)}function Cs(r){return qa(r)}function ot(r,t,e){return ya.hsl(Cs(r),t,e).string()}const la=B({__name:"WolfHpChart",props:{hpData:{},width:{default:600},height:{default:200}},setup(r){Ct([Ll,Ot,yt,Kt,Pt]);const t=r,e=F(()=>({color:["#00A2E8"],title:{text:"当前狼血量",left:"center",textStyle:{fontStyle:"normal",fontFamily:"sans-serif",fontSize:16}},tooltip:{},xAxis:{type:"value",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}}},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.hpData.map(l=>l.name)},grid:{left:100,top:30,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.hpData.map(l=>l.value),itemStyle:{color:function(l){return ot(l.name,80,45)}}}}));return(l,s)=>{const n=je("v-chart");return g(),K(n,{class:"chart",option:d(e),style:Ol({width:`${l.width}px`,height:`${l.height}px`}),autoresize:""},null,8,["option","style"])}}}),Os={class:"space-x-4"},ys=B({__name:"index",setup(r){const t=V.chain(N.dream_maps).toArray().sortBy("index").value(),e=le({mid:"m2A",score:1}),l=F(()=>N.dream_maps[e.mid]),s=x=>x%10===0?(x-10)%100+10:x%10,n=x=>{const R=s(x).toString(),C=N.dream_waves[e.mid];return x%10==0?C.boss[R]:C.wolf[R]},o=F(()=>n(e.score).map(x=>ge.getOnlyExample().getData(x))),u=(x,R)=>{const C=s(R).toString();return N.dream_waves[e.mid].popu[C]},m=F(()=>u(e.mid,e.score)),p=x=>ws(x,u(e.mid,x==0?1:x==9?10:s(x))),h=F(()=>p(e.score)),T=F(()=>Math.sqrt(l.value.hard_ness*e.score+l.value.yield_val)),S=F(()=>{for(const[x,R]of Object.entries(N.dream_data.dm_wolf_hard_ness)){const[C,O]=x.split("_");if(e.score>=Number.parseInt(C)&&e.score<=Number.parseInt(O))return R}return N.dream_data.dm_wolf_hard_ness.default}),E=F(()=>o.value.map(x=>({name:x.name,value:x.getHpMax(T.value,S.value)}))),b=F(()=>{let x=0,R=0;for(let C=1;C<=e.score;C++){let O=Math.sqrt(l.value.yield_val+l.value.hard_ness*C);x+=xl(O,u(e.mid,C)),R+=p(C)}return{gold:x,exp:R}});return(x,R)=>{const C=Ve,O=Ue,ne=Ye,U=De,Q=he,dt=je("vue-latex"),q=Me;return g(),K(q,{model:d(e),"label-width":"120px"},{default:c(()=>[i(U,{label:"地图"},{default:c(()=>[i(O,{modelValue:d(e).mid,"onUpdate:modelValue":R[0]||(R[0]=ie=>d(e).mid=ie)},{default:c(()=>[(g(!0),D(M,null,$(d(t),ie=>(g(),K(C,{key:ie.id,label:`${ie.id} ${ie.name}`,value:ie.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),i(ne,{effect:"light",class:"mx-1"},{default:c(()=>[w(" 难度系数："+L(d(l).hard_ness)+", "+L(d(l).yield_val),1)]),_:1})]),_:1}),i(U,{label:"进度"},{default:c(()=>[i(Q,{modelValue:d(e).score,"onUpdate:modelValue":R[1]||(R[1]=ie=>d(e).score=ie),min:0},null,8,["modelValue"]),i(ne,{effect:"light",class:"mx-1"},{default:c(()=>[w(" HpRate："+L(d(S)),1)]),_:1}),i(ne,{effect:"light",class:"mx-1"},{default:c(()=>[w(" Population："+L(d(m)),1)]),_:1})]),_:1}),i(U,null,{default:c(()=>[w(" 银币： "),i(dt,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${d(xl)(d(T),d(m))}`},null,8,["expression"])]),_:1}),i(U,null,{default:c(()=>[w(" 经验： "),i(dt,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${d(h)}`},null,8,["expression"])]),_:1}),i(U,null,{default:c(()=>[A("div",Os,[A("span",null,"总银币："+L(d(b).gold),1),A("span",null,"总经验："+L(d(b).exp),1)])]),_:1}),i(la,{"hp-data":d(E),height:300},null,8,["hp-data"])]),_:1},8,["model"])}}});const Ks=Object.freeze(Object.defineProperty({__proto__:null,default:ys},Symbol.toStringTag,{value:"Module"})),Ps={key:0,class:"space-y-1"},Ms={class:"space-x-0.5"},Vs=B({__name:"index",setup(r){const t=V.sortBy(Object.values(N.dream_maps),"name").map(e=>({...e,...N.dream_waves[e.id],waves:Object.assign({},N.dream_waves[e.id].wolf,N.dream_waves[e.id].boss)}));return(e,l)=>{const s=ze,n=Ye,o=Xe;return g(),D("div",null,[i(o,{data:d(t)},{default:c(()=>[i(s,{prop:"id",label:"id",sortable:"",align:"center"}),i(s,{prop:"name",label:"name",sortable:"",align:"center"}),i(s,{prop:"interval",label:"interval",sortable:"",align:"center"}),i(s,{prop:"interval_rule",label:"interval_rule",sortable:"",align:"center"}),i(s,{prop:"hard_ness",label:"hard_ness",sortable:"",align:"center"}),i(s,{prop:"yield_val",label:"yield_val",sortable:"",align:"center"}),i(s,{label:"waves",type:"expand",width:"80"},{default:c(u=>[u.row.waves?(g(),D("div",Ps,[A("table",null,[(g(!0),D(M,null,$(u.row.waves,(m,p)=>(g(),D("tr",{key:p},[A("td",null,[i(n,null,{default:c(()=>[w(L(p),1)]),_:2},1024)]),A("td",Ms,[(g(!0),D(M,null,$(m,h=>(g(),K(n,{key:h,style:Ol({color:d(ot)(h,40,40),"background-color":d(ot)(h,80,90),"border-color":d(ot)(h,50,80)})},{default:c(()=>[w(L(d(pe)(h)),1)]),_:2},1032,["style"]))),128))]),A("td",null,[i(n,null,{default:c(()=>[w(L(u.row.popu[p]),1)]),_:2},1024)])]))),128))]),(g(!0),D(M,null,$(u.row.waves,(m,p)=>(g(),D("div",{key:p,class:"space-x-1"}))),128))])):fe("",!0)]),_:1})]),_:1},8,["data"])])}}});const Us=Je(Vs,[["__scopeId","data-v-3255a3ed"]]),ks=Object.freeze(Object.defineProperty({__proto__:null,default:Us},Symbol.toStringTag,{value:"Module"})),Fs=B({__name:"DreamWaveEditor",props:_t({wolfList:{}},{modelValue:{},modelModifiers:{}}),emits:_t(["change"],["update:modelValue"]),setup(r,{emit:t}){const e=r,l=He(r,"modelValue"),s=t,n=X(""),o=X(!1),u=X(),m=X(e.wolfList.slice()),p=b=>{l.value.splice(l.value.indexOf(b),1),s("change")},h=()=>{o.value=!0,ha(()=>{u.value.focus()})},T=b=>{console.log(b),m.value=b?e.wolfList.filter(S(b)):e.wolfList},S=b=>x=>x.id.toLowerCase().includes(b.toLowerCase())||x.value.includes(b),E=b=>{l.value.push(b),l.value.sort((x,R)=>x.id.localeCompare(R.id)),o.value=!1,n.value="",s("change")};return(b,x)=>{const R=Ye,C=Ea,O=Ve,ne=qe;return g(),D("div",null,[A("div",null,[(g(!0),D(M,null,$(l.value,U=>(g(),K(R,{key:U.id,type:"info",effect:"plain",class:"m-0.5",closable:"","disable-transitions":!1,onClose:Q=>p(U)},{default:c(()=>[A("ruby",null,[w(L(U.value)+" ",1),A("rt",null,L(U.id),1)])]),_:2},1032,["onClose"]))),128)),d(o)?(g(),K(d(Ue),{key:0,ref_key:"InputRef",ref:u,modelValue:d(n),"onUpdate:modelValue":x[0]||(x[0]=U=>Ae(n)?n.value=U:null),filterable:"","filter-method":T,class:"inline-block m-0.5",placeholder:"Select",size:"small",onChange:E},{default:c(()=>[(g(!0),D(M,null,$(d(m),U=>(g(),K(O,{key:U.id,value:U},{default:c(()=>[w(L(U.value)+" ",1),i(C,{class:"mx-1",type:"primary"},{default:c(()=>[w("["+L(U.id)+"]",1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(g(),K(ne,{key:1,class:"button-new-tag m-0.5",type:"primary",plain:"",size:"small",onClick:h},{default:c(()=>[w(" + ")]),_:1}))])])}}}),$s={class:"dialog-footer"},Bs=B({__name:"index",setup(r){const{toClipboard:t}=Fl(),e=X(!1),l=X(""),s=X(!1),n=X({}),o=X(""),u=X(),m=Object.keys(N.$_wolfAtt_Obj).map(R=>({id:R,value:pe(R)})),p=[1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100],h=X(p.map(R=>({key:R,wolf:[],popu:0,popFixed:!1}))),T=(R,C=!1)=>{(!R.popFixed||C)&&(R.popFixed=!1,R.popu=Ns(R.wolf.map(O=>O.id)))},S=R=>{R.popu==0?(R.popFixed=!1,T(R)):R.popFixed=!0},E=()=>{const R=JSON.parse(l.value);h.value=p.map(C=>({key:C,wolf:(R.wolf[C]??R.boss[C]??[]).map(O=>({id:O,value:pe(O)})),popu:R.popu[C],popFixed:!0})),e.value=!1},b=()=>{s.value=!0;const R={wolf:{},boss:{},popu:{}};for(const C of h.value){const O=C.wolf.map(ne=>ne.id);R[C.key<10?"wolf":"boss"][C.key]=O,C.key<10?R.wolf[C.key]=O:R.boss[C.key]=O,R.popu[C.key]=C.popu}n.value=R,o.value=JSON.stringify(R)},x=()=>{t(o.value,u.value.$el),El.success("已复制到剪贴板")};return(R,C)=>{const O=qe,ne=ze,U=he,Q=Xe,dt=Ul;return g(),D("div",null,[i(O,{onClick:C[0]||(C[0]=q=>e.value=!0)},{default:c(()=>[w("导入")]),_:1}),i(O,{onClick:b},{default:c(()=>[w("导出")]),_:1}),i(Q,{data:d(h),style:{"max-width":"1200px"}},{default:c(()=>[i(ne,{prop:"key",label:"Key",width:80,align:"center"}),i(ne,{label:"Wolf"},{default:c(q=>[i(Fs,{"wolf-list":d(m),modelValue:q.row.wolf,"onUpdate:modelValue":ie=>q.row.wolf=ie,onChange:ie=>T(q.row)},null,8,["wolf-list","modelValue","onUpdate:modelValue","onChange"])]),_:1}),i(ne,{label:"Population",width:160,align:"center"},{default:c(q=>[i(U,{modelValue:q.row.popu,"onUpdate:modelValue":ie=>q.row.popu=ie,size:"small",min:0,onChange:ie=>S(q.row),style:{width:"90px"},class:ga({primary:q.row.popFixed})},null,8,["modelValue","onUpdate:modelValue","onChange","class"]),i(O,{icon:q.row.popFixed?d(ba):d(xa),circle:"",size:"small",class:"m-0.5",onClick:ie=>q.row.popFixed?T(q.row,!0):q.row.popFixed=!0},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),i(dt,{modelValue:d(e),"onUpdate:modelValue":C[3]||(C[3]=q=>Ae(e)?e.value=q:null),title:"导出数据"},{footer:c(()=>[A("span",$s,[i(O,{onClick:C[2]||(C[2]=q=>e.value=!1)},{default:c(()=>[w("取消")]),_:1}),i(O,{type:"primary",onClick:E},{default:c(()=>[w(" 确定 ")]),_:1})])]),default:c(()=>[i(d(wt),{type:"textarea",rows:10,modelValue:d(l),"onUpdate:modelValue":C[1]||(C[1]=q=>Ae(l)?l.value=q:null),spellcheck:!1},null,8,["modelValue"])]),_:1},8,["modelValue"]),i(dt,{modelValue:d(s),"onUpdate:modelValue":C[4]||(C[4]=q=>Ae(s)?s.value=q:null),title:"导出数据"},{default:c(()=>[i(d(Vl),{data:d(n),virtual:"",deep:2},null,8,["data"]),i(O,{onClick:x,ref_key:"someRef",ref:u},{default:c(()=>[w("复制到剪贴板")]),_:1},512)]),_:1},8,["modelValue"])])}}});const Hs=Object.freeze(Object.defineProperty({__proto__:null,default:Bs},Symbol.toStringTag,{value:"Module"})),Gs={class:"markdown-body"},Ws=fa("<h1>羊村设计大赛快来参加一下吧</h1><p>在苦工们的努力建设之下，新羊村的首个可公开版本不久就要上线了。</p><p>在我们有机会一睹真容前呢，先说个好消息。感谢耳阝鱼禾与技术的沟通，怀旧版可以开放四图啦！</p><p>不过呢，由于<strong>没有官方策划人手投入</strong>，要想玩到新关卡，还得靠我们自己来设计新图呢……</p><p>新的一年，举办羊村首届设计大赛，有兴趣的快来参加吧！</p><h2>时间</h2><p><strong>2024/1/6 18:00 ~ 2024/1/20 18:00（UTC+8）</strong></p><p>视参与情况可能会延长。</p><h2>赛道</h2><p><strong>比赛分为以下赛道</strong></p><h3>赛道 1：怀旧版新地图</h3><p>打造自己的羊村四图！需要提供如下内容（不必都有，但内容尽可能完善）：</p><ol><li><strong>地图资源</strong>。每个地图有一个 swf 文件，其中内嵌代码配置了地形数据（每个格子的类型，如可行走地面、传送阵、传送带）。可使用 ffdec 解包老羊村的地图资源，然后用 Adobe Animate 进行重新设计，导出成所需的 swf 格式。也可只提供概念风格设计，画出格子分布、前景和背景，给出特殊地块的位置。</li><li><strong>地图配置数据</strong>。小工具将会开放地图设计工具，导出所需的配置数据格式。主要内容为： <ul><li>地图名称</li><li>通关分数</li><li>难度系数</li><li>狼的种类和权重</li><li>出怪间隔</li><li>随机 boss 及奖励的分布</li><li>最终 boss 波出怪列表</li></ul></li></ol><p>考虑操作存在一定技术性，可以不提供具体的资源/配置文件，但需要有方案使得我们可以快速实现这些设想。</p><p>暂时不考虑怀旧的新狼、新建筑、新道具的设计。</p><p>新地图可以是老羊村已有地图的<strong>重新设计</strong>，如改变狼的配置，扩充格子，移动甚至拆除障碍，增加特殊地块等。发挥创造力的时刻到了！</p><p><strong>新地图越多越好！在通过内部测试后会向大众开放！</strong></p><h3>赛道 2：新羊村地图</h3><p>可设计内容包括：</p><ol><li><strong>章节</strong>。一个章节有大约 10 个关卡，可以设计这个章节的主题、剧情，描述各关卡风格差异。 <ul><li>目前考虑的主题有：工业遗迹、海洋、湖泊、洞穴等。可以在此基础上发挥，也可自创新的章节。</li></ul></li><li><strong>地图地形</strong>。地图均为六边形格子，行走方向为 0°、60°、120°。地图宽高不超过 13x11（出口入口除外）。 <ul><li>希望地块布局不限于方方正正。可以发挥想象，加入各种只能放塔、只能走狼、只能飞行经过的格子。</li><li>同时给出较为详细的地图美术风格设计，描述场景布置、美术表现。</li></ul></li><li><strong>地图特殊机制和障碍</strong><ul><li>原版内容包括： <ul><li>机制：传送阵、弹簧、传送带、箱子等。</li><li>障碍：火山、反应炉、核电厂等。</li><li>特殊地形：增强毒效果的格子。</li></ul></li><li>希望在新的章节里有富有主题特色的机制加入。</li><li>目前考虑的机制包括：狼可以行走但会减速的水面，狼狂奔加速、被击退距离增加的冰面等。</li></ul></li></ol><h3>赛道 3：新羊村角色</h3><p>提供<strong>美术设计方案</strong>。此处角色包括：</p><ol><li>进攻方（狼）。可以是原版狼的美术重置，也可以是新狼。其他种族也是可以的！</li><li>防守方（英雄角色，塔）。英雄可以同时作为攻防方。目前已有一大批英雄的设计方案，但暂未公开。可以考虑在给出形象设计后与合适的角色进行匹配。</li><li>其他想加入的角色。</li></ol><p>因为新羊村会全面采用 3D 美术，这里只需要给出 <strong>2D 概念设计图</strong>。</p><p><s>有不被采纳的风险，但奖励会照常发放。</s></p><h3>赛道 4：周边</h3><p>其实我也不知道周边有啥……玩偶？挂件？</p><p>反正设计出来就有奖。</p><h2>奖励</h2><p>公开投票，每个赛道独立排名，奖项宁缺毋滥。会考虑设计贡献度和工作量。</p><ul><li>Track 1 &amp; 2 <ul><li>1st：20R</li><li>2nd：10R</li><li>3rd：5R</li><li>创意奖：5R x 2</li></ul></li><li>Track 3 <ul><li>1st：15R</li><li>2nd：10R</li><li>3rd：5R</li></ul></li><li>Track 4 <ul><li>视质量，10R 起步</li></ul></li></ul><p>同一赛道不重复获奖。</p><p>解释权归 Stankle 所有，所有奖励由 Stankle 自掏腰包。</p>",33),js=[Ws],Xs={__name:"design-contest",setup(r,{expose:t}){return t({frontmatter:{}}),(l,s)=>(g(),D("div",Gs,js))}},zs=B({__name:"index",setup(r){return(t,e)=>{const l=Rt,s=Nt,n=xt;return g(),K(n,null,{default:c(()=>[i(s,{label:"设计大赛"},{default:c(()=>[i(l,null,{default:c(()=>[(g(),K(fl(d(Xs))))]),_:1})]),_:1})]),_:1})}}}),Ys=Object.freeze(Object.defineProperty({__proto__:null,default:zs},Symbol.toStringTag,{value:"Module"})),Le=class Le extends cs{constructor(){super();a(this,"id","");a(this,"skills",{});a(this,"tag");this.tag="BaseUnit"}init(){this.initSkills()}initSkills(){}get data(){return this.m_data}};a(Le,"SKILL_ID","skid"),a(Le,"SKILL_LEVEL","lev"),a(Le,"STATUS_RATE",200),a(Le,"STATUS_TIME",Le.STATUS_RATE/1e3),a(Le,"AOE_SILENCE_RANGE",1e3),a(Le,"AOE_SILENCE_TIME",2);let Ge=Le;class qs extends Ge{constructor(){super()}get buildingData(){return this.m_data}get range(){return this.buildingData.range}get skillInfo(){const t=Object.values(this.skills);t.sort((l,s)=>l.index-s.index);const e=t.map(l=>l.skillInfo).filter(l=>l!="").join(`
`);return e==""?this.buildingData.info:e}}class Js extends Ge{constructor(e){super();a(this,"damage",0);a(this,"range",0);a(this,"attackType");this.m_data=gl.getOnlyExample().getData(e),this.attackType=ml.EFFECT_TYPE_ALL}get bulletData(){return this.m_data}}const ct=class ct extends qs{constructor(e){super();a(this,"m_level",0);a(this,"gem",null);a(this,"m_attackType","");this.tag="Tower",e&&(this.m_data=pl.getOnlyExample().getData(e),this.initTower()),this.level=1}static fromData(e){const l=new ct(null);return l.m_data=e,l.initTower(),l}get towerData(){return this.m_data}initTower(){this.initSkills()}initSkills(){if(this.skills={},this.towerData.skillPackageId!=""){const e=new Jl(this.towerData.skillPackageId,this.towerData.skillPackageLevel);if(e!=null&&e.skillsPackageData!=null)for(const l of e.skillsPackageData.skillsList){const s=new W(l,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}}if(this.gem){const e=this.gem.gemData.getSkillPackage(this.data.id);if(e!=null&&e.skillsPackageData!=null)for(const l of e.skillsPackageData.skillsList){const s=new W(l,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}this.skills[v.KIND_SCATTER_ATTACK]&&delete this.skills[v.KIND_DIVIDED_ATTACK]}}get color(){return this.gem!=null?this.gem.gemData.color:6316128}get level(){return this.m_level}set level(e){this.m_level=e}get gemLevel(){return this.gem?this.gem.gemData.gemLevel:0}get ability(){const e=this.gemLevel;return this.towerData.isMagicTower?e==0?0:this.m_level*(.8+e/5)*2:this.m_level*(1+e/10)}get power(){const e=this.level,l=N.$_tower_worth_factor,s=this.gemLevel,n=this.valueCostConst(e);return Math.round((n+Math.pow(s,l[0])*l[1])*(l[2]+s/l[3]))}buildValue(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildValueA+this.towerData.buildValueB*e+this.towerData.buildValueC*e*e)}buildCost(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildCostA+this.towerData.buildCostB*e+this.towerData.buildCostC*e*e)}valueCost(e=-1){e==-1&&(e=this.level);const l=e*this.towerData.buildCostA+(e*e+e)/2*this.towerData.buildCostB+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostC+this.towerData.buildCost-this.towerData.buildCostA-this.towerData.buildCostB-this.towerData.buildCostC;return Math.round(l)}valueCostConst(e=-1){e==-1&&(e=this.level);const l=e*this.towerData.buildCostAConst+(e*e+e)/2*this.towerData.buildCostBConst+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostCConst+this.towerData.buildCostConst-this.towerData.buildCostAConst-this.towerData.buildCostBConst-this.towerData.buildCostCConst;return Math.round(l)}buffEffect(e=-1){return e==-1&&(e=this.level),this.towerData.buffEffect*e+1}damage(e=-1){let l=0;if(e==-1&&(e=this.level),this.skills[v.KIND_CHANGE_DAMAGE]instanceof Gl){let s=this.skills[v.KIND_CHANGE_DAMAGE];s.isChangeBase()?l=Math.round((s.damageA+s.damageB*e+s.damageC*e*e)*s.damageRate+s.damageAdd):l=Math.round((this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e)*s.damageRate+s.damageAdd)}else l=Math.round(this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e);return Math.max(l,0)}get range(){let e=0;if(this.skills[v.KIND_CHANGE_RANGE]instanceof Wl){let l=this.skills[v.KIND_CHANGE_RANGE];l.isChangeBase()?e=l.range*l.rangeRate+l.rangeAdd:e=this.towerData.range*l.rangeRate+l.rangeAdd}else e=this.towerData.range;return e}get rate(){let e=0;if(this.skills[v.KIND_CHANGE_RATE]instanceof jl){let l=this.skills[v.KIND_CHANGE_RATE];l.isChangeBase()?e=Math.round(l.rate*l.rateRate):e=Math.round(this.towerData.rate*l.rateRate)}else e=this.towerData.rate;return e}setGem(e){this.gem=e,this.initSkills()}newBullet(){return new Js(this.getBulletId())}getBulletId(){let e=null;return this.skills[v.KIND_CHANGE_BULLET]instanceof Hl?(e=this.skills[v.KIND_CHANGE_BULLET],e.bulletId):this.towerData.bulletId}getInfoHtml(){return $t(this.skillInfo,this.color,!1,"14px")}};a(ct,"TOWER","tower"),a(ct,"GEM","gem");let Lt=ct;const Zs={class:"space-x-2"},Qs=B({__name:"TowerDataForm",props:{tower:{}},setup(r){const t=r;le({});const e=X(N.$_towerAtt_Obj.shaota),l=s=>{t.tower.m_data=new Dl(s)};return(s,n)=>{const o=Ve,u=Ue,m=De,p=he,h=Me,T=Rt;return g(),K(T,null,{default:c(()=>[i(h,{"label-width":"100px"},{default:c(()=>[i(m,{label:"原型"},{default:c(()=>[i(u,{modelValue:d(e),"onUpdate:modelValue":n[0]||(n[0]=S=>Ae(e)?e.value=S:null),"value-key":"id",onChange:l},{default:c(()=>[(g(!0),D(M,null,$(d(N).$_towerAtt_Obj,(S,E)=>(g(),K(o,{key:E,label:S.name,value:S},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(m,{label:"等级"},{default:c(()=>[i(p,{modelValue:s.tower.m_level,"onUpdate:modelValue":n[1]||(n[1]=S=>s.tower.m_level=S)},null,8,["modelValue"])]),_:1}),i(m,{label:"damage"},{default:c(()=>[A("div",Zs,[A("span",null,[w(" a: "),i(p,{modelValue:s.tower.towerData.damageA,"onUpdate:modelValue":n[2]||(n[2]=S=>s.tower.towerData.damageA=S),"controls-position":"right",step:d(ke)(d(e).damage.a),style:{width:"100px"}},null,8,["modelValue","step"])]),A("span",null,[w(" b: "),i(p,{modelValue:s.tower.towerData.damageB,"onUpdate:modelValue":n[3]||(n[3]=S=>s.tower.towerData.damageB=S),"controls-position":"right",step:d(ke)(d(e).damage.b),style:{width:"100px"}},null,8,["modelValue","step"])]),A("span",null,[w(" c: "),i(p,{modelValue:s.tower.towerData.damageC,"onUpdate:modelValue":n[4]||(n[4]=S=>s.tower.towerData.damageC=S),"controls-position":"right",step:d(ke)(d(e).damage.c),style:{width:"100px"}},null,8,["modelValue","step"])])])]),_:1}),i(m,{label:"rate"},{default:c(()=>[i(p,{modelValue:s.tower.towerData.rate,"onUpdate:modelValue":n[5]||(n[5]=S=>s.tower.towerData.rate=S),step:d(ke)(d(e).rate)},null,8,["modelValue","step"])]),_:1}),i(m,{label:"range"},{default:c(()=>[i(p,{modelValue:s.tower.towerData.range,"onUpdate:modelValue":n[6]||(n[6]=S=>s.tower.towerData.range=S),step:d(ke)(d(e).range)},null,8,["modelValue","step"])]),_:1}),i(m,{label:"buffEffect"},{default:c(()=>[i(p,{modelValue:s.tower.towerData.buffEffect,"onUpdate:modelValue":n[7]||(n[7]=S=>s.tower.towerData.buffEffect=S),step:d(ke)(d(e).buffEffect)},null,8,["modelValue","step"])]),_:1})]),_:1})]),_:1})}}}),en=["innerHTML"],tn=B({__name:"TowerInfo",props:{tower:{}},setup(r){return(t,e)=>{const l=De,s=Me,n=Rt;return g(),K(n,null,{default:c(()=>[i(s,{"label-width":"80px"},{default:c(()=>[i(l,{label:"damage"},{default:c(()=>[w(L(t.tower.damage()),1)]),_:1}),i(l,{label:"rate"},{default:c(()=>[w(L(t.tower.rate),1)]),_:1}),i(l,{label:"range"},{default:c(()=>[w(L(t.tower.range),1)]),_:1}),i(l,{label:"简介"},{default:c(()=>[A("div",{innerHTML:t.tower.getInfoHtml(),style:{"line-height":"1.5em"}},null,8,en)]),_:1})]),_:1})]),_:1})}}}),Sl=V.sortBy(V.map(N.$_wolfAtt_Obj,(r,t)=>({id:t,name:r.name,label:`${pe(t)} [${t}]`})),"id"),aa=Sl.filter(r=>r.name.startsWith("camp_")),sa=Sl.filter(r=>r.id.startsWith("D_")),ln=V.difference(Sl,aa,sa),Nl=V.chain(Object.values(N.$_skillAtt_Obj.towerSkill)).groupBy(r=>r.kindId).mapValues(r=>({id:r[0].id,params:r[0].params})).value(),na=V.chain(N.$_map_Obj).map((r,t)=>V.extend(r,{id:t})).toArray().sortBy("index").value(),ia=na.map(r=>({label:`${r.id} ${r.name}`,value:r.id})),an=V.chain(N.$_wolfAtt_Obj).map(r=>({value:r.id,label:`${pe(r.id)} [${r.id}]`})).sortBy("id").value(),wl=V.chain(N.$_wolfAtt_Obj).filter(r=>r.pop<99).map(r=>({value:r.id,label:`${pe(r.id)} [${r.id}]`})).sortBy("id").value(),Rl=V.chain(N.$_wolfAtt_Obj).filter(r=>r.pop>=99).map(r=>({value:r.id,label:`${pe(r.id)} [${r.id}]`})).sortBy("id").value(),sn={key:0,class:"ml-2 space-x-2"},nn=B({__name:"TowerSkillItem",props:_t({tower:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:_t(["update:model-value"],["update:modelValue"]),setup(r,{emit:t}){const e=r,l=He(r,"modelValue"),s=X(),n=()=>{s.value=Nl[l.value.kindId],l.value.params=s.value.params.slice()};return Pe(()=>l.value.kindId,(o,u)=>{var m;if(u!=o){delete e.tower.skills[u];const p=new W(s.value.id,((m=e.tower.skills[o])==null?void 0:m.level)??50,e.tower).getSubClasses();p.m_data=new v(l.value),e.tower.skills[o]=p}}),Pe(l,(o,u)=>{e.tower.skills[o.kindId].m_data=new v(o)},{deep:!0}),Aa(()=>{l.value.kindId&&delete e.tower.skills[l.value.kindId]}),(o,u)=>{const m=Ve,p=Ue,h=wt,T=he;return g(),D("div",null,[i(p,{modelValue:l.value.kindId,"onUpdate:modelValue":[u[0]||(u[0]=S=>l.value.kindId=S),n]},{default:c(()=>[(g(!0),D(M,null,$(Object.keys(d(Nl)),S=>(g(),D(M,{key:S},[S in o.tower.skills?fe("",!0):(g(),K(m,{key:0,label:S,value:S},null,8,["label","value"]))],64))),128))]),_:1},8,["modelValue"]),d(s)?(g(),D("span",sn,[(g(!0),D(M,null,$(d(s).params,(S,E)=>(g(),D(M,null,[typeof S=="string"?(g(),K(h,{key:0,modelValue:l.value.params[E],"onUpdate:modelValue":b=>l.value.params[E]=b,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])):(g(),K(T,{key:1,modelValue:l.value.params[E],"onUpdate:modelValue":b=>l.value.params[E]=b,size:"small","controls-position":"right",step:d(ke)(S),style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue","step"]))],64))),256))])):fe("",!0)])}}}),rn=B({__name:"TowerSkillTable",props:{tower:{}},setup(r){const t=le([]),e=X(),l=()=>{t.push({data:{kindId:"",params:[]}})},s=(n,o)=>{t.splice(n,1)};return(n,o)=>{const u=ze,m=he,p=qe;return g(),D("div",null,[i(d(Xe),{ref_key:"skillTableRef",ref:e,data:d(t),stripe:"",border:"","table-layout":"auto",style:{"font-size":"small"}},{default:c(()=>[i(u,{label:"Skill","header-align":"center"},{default:c(h=>[i(nn,{tower:n.tower,modelValue:h.row.data,"onUpdate:modelValue":T=>h.row.data=T},null,8,["tower","modelValue","onUpdate:modelValue"])]),_:1}),i(u,{label:"Level","header-align":"center",width:130},{default:c(h=>[n.tower.skills[h.row.data.kindId]?(g(),K(m,{key:0,modelValue:n.tower.skills[h.row.data.kindId].level,"onUpdate:modelValue":T=>n.tower.skills[h.row.data.kindId].level=T,style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"])):fe("",!0)]),_:1}),i(u,{label:"Info","header-align":"center"},{default:c(h=>{var T;return[w(L((T=n.tower.skills[h.row.data.kindId])==null?void 0:T.skillInfo),1)]}),_:1}),i(u,{label:"操作",width:100,align:"center"},{default:c(h=>[i(p,{size:"small",type:"danger",onClick:T=>s(h.$index,h.row)},{default:c(()=>[w(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),i(p,{onClick:l},{default:c(()=>[w("新增")]),_:1})])}}}),on=B({__name:"index",setup(r){const t=le(new Lt(null));return t.m_data=new Dl(N.$_towerAtt_Obj.shaota),(e,l)=>{const s=Tl,n=Il;return g(),D(M,null,[i(n,{gutter:20},{default:c(()=>[i(s,{span:12},{default:c(()=>[i(Qs,{tower:d(t)},null,8,["tower"])]),_:1}),i(s,{span:12},{default:c(()=>[i(tn,{tower:d(t)},null,8,["tower"])]),_:1})]),_:1}),i(rn,{tower:d(t),class:"mt-2"},null,8,["tower"])],64)}}}),un=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"}));class dn extends gt{constructor(t){super(),this.m_data=_l.getOnlyExample().getData(t)}get gemData(){return this.m_data}}const cn=["innerHTML"],_n=A("p",null,"注：升级经验为塔下一级的 buildValue 值",-1),mn=B({__name:"index",setup(r){const t=le({isDefendMap:!1,towerId:"shaota",gemId:"",level:1,buildFrom:0,buildTo:1,buildPower:50}),e=V.map(N.$_towerAtt_Obj,(u,m)=>[u.name,m]),l=V.chain(N.$_global_properties.gem).toPairs().sortBy(u=>Number(Math.abs(u[1].index))).map(u=>[`${u[1].name} [${u[1].index}]`,u[0]]).value(),s=F(()=>{const u=new Lt(t.towerId);return u.level=t.level,t.gemId!==""&&u.setGem(new dn(t.gemId)),u}),n=()=>{Z.currentMap=new Z(t.isDefendMap?Z.DEFEND_MAP_1:Z.ENDLESS_MAP_1)},o=F(()=>{let u=0;if(t.buildFrom>t.buildTo)return NaN;for(let m=t.buildFrom+1;m<=t.buildTo;m++)u+=s.value.buildValue(m);return Math.round(u/t.buildPower)});return(u,m)=>{const p=Ia,h=De,T=Ve,S=Ue,E=Tl,b=Il,x=he,R=Me;return g(),K(R,{model:d(t),"label-width":"120px"},{default:c(()=>[i(h,{label:"是否为防线"},{default:c(()=>[i(p,{modelValue:d(t).isDefendMap,"onUpdate:modelValue":m[0]||(m[0]=C=>d(t).isDefendMap=C),onChange:n},null,8,["modelValue"])]),_:1}),i(b,null,{default:c(()=>[i(E,{span:12},{default:c(()=>[i(h,{label:"塔"},{default:c(()=>[i(S,{modelValue:d(t).towerId,"onUpdate:modelValue":m[1]||(m[1]=C=>d(t).towerId=C)},{default:c(()=>[(g(!0),D(M,null,$(d(e),([C,O])=>(g(),K(T,{key:O,label:C,value:O},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(E,{span:12},{default:c(()=>[i(h,{label:"宝石"},{default:c(()=>[i(S,{modelValue:d(t).gemId,"onUpdate:modelValue":m[2]||(m[2]=C=>d(t).gemId=C)},{default:c(()=>[i(T,{label:"无",value:""}),(g(!0),D(M,null,$(d(l),([C,O])=>(g(),K(T,{key:O,label:C,value:O},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(b,null,{default:c(()=>[i(E,{span:8},{default:c(()=>[i(h,{label:"等级"},{default:c(()=>[i(x,{modelValue:d(t).level,"onUpdate:modelValue":m[3]||(m[3]=C=>d(t).level=C),min:1},null,8,["modelValue"])]),_:1})]),_:1}),i(E,{span:8},{default:c(()=>[i(h,{label:"等级上限"},{default:c(()=>[A("label",null,L(d(s).towerData.levelMax),1)]),_:1})]),_:1}),i(E,{span:8},{default:c(()=>[i(h,{label:"升级经验"},{default:c(()=>[A("label",null,L(d(s).buildValue(d(s).level+1)),1)]),_:1})]),_:1})]),_:1}),i(b,null,{default:c(()=>[i(E,{span:8},{default:c(()=>[i(h,{label:"攻击力"},{default:c(()=>[A("label",null,L(d(s).damage()),1)]),_:1})]),_:1}),i(E,{span:8},{default:c(()=>[i(h,{label:"攻击频率"},{default:c(()=>[A("label",null,L(d(s).rate),1)]),_:1})]),_:1}),i(E,{span:8},{default:c(()=>[i(h,{label:"攻击范围"},{default:c(()=>[A("label",null,L(d(s).range),1)]),_:1})]),_:1})]),_:1}),i(h,{label:"简介"},{default:c(()=>[A("div",{innerHTML:d(s).getInfoHtml(),style:{"line-height":"1.5em"}},null,8,cn)]),_:1}),i(b,null,{default:c(()=>[i(E,{span:8},{default:c(()=>[i(h,{label:"ability"},{default:c(()=>[A("label",null,L(d(s).ability.toFixed(1)),1)]),_:1})]),_:1}),i(E,{span:8},{default:c(()=>[i(h,{label:"power"},{default:c(()=>[A("label",null,L(d(s).power),1)]),_:1})]),_:1}),i(E,{span:8},{default:c(()=>[i(h,{label:"buffEffect"},{default:c(()=>[A("label",null,L(d(s).buffEffect().toFixed(1)),1)]),_:1})]),_:1})]),_:1}),i(b,null,{default:c(()=>[i(E,{span:8},{default:c(()=>[i(h,{label:"buildValue"},{default:c(()=>[A("label",null,L(d(s).buildValue()),1)]),_:1})]),_:1}),i(E,{span:8},{default:c(()=>[i(h,{label:"buildCost"},{default:c(()=>[A("label",null,L(d(s).buildCost()),1)]),_:1})]),_:1}),i(E,{span:8},{default:c(()=>[i(h,{label:"valueCost"},{default:c(()=>[A("label",null,L(d(s).valueCost()),1)]),_:1})]),_:1})]),_:1}),A("div",null,[i(h,{label:"升级计算",style:{"margin-bottom":"0 !important"}},{default:c(()=>[w(" 从 "),i(x,{modelValue:d(t).buildFrom,"onUpdate:modelValue":m[4]||(m[4]=C=>d(t).buildFrom=C),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),w(" 级到 "),i(x,{modelValue:d(t).buildTo,"onUpdate:modelValue":m[5]||(m[5]=C=>d(t).buildTo=C),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),w(" 级， 苦工总力量 "),i(x,{modelValue:d(t).buildPower,"onUpdate:modelValue":m[6]||(m[6]=C=>d(t).buildPower=C),size:"small","controls-position":"right",style:{width:"8em",margin:"0.5em"}},null,8,["modelValue"])]),_:1}),i(h,{style:{"margin-bottom":"0 !important"}},{default:c(()=>[w(" 需要时间："),A("label",null,L(d(ms)(d(o))),1)]),_:1}),_n])]),_:1},8,["model"])}}}),pn=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),ra=B({__name:"DifficultySelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(r){const t=Object.entries(N.$_wave_hard_Obj).map(([l,s])=>({value:parseFloat(l),label:`${s.desc.split("^")[1]} (x${l}, +${s.add_score})`})),e=He(r,"modelValue");return(l,s)=>{const n=ut;return g(),K(n,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o),options:d(t)},null,8,["modelValue","options"])}}}),hn={class:"space-x-8"},gn={class:"space-x-4"},fn=A("span",null,"（假设每波+2且不引狼）",-1),oa=B({__name:"LevelPreview",props:_t({mapData:{},mapMonsterData:{}},{wid:{default:"dahuil"},widModifiers:{},score:{default:0},scoreModifiers:{},diff:{default:1},diffModifiers:{}}),emits:["update:wid","update:score","update:diff"],setup(r){const t=r,e=He(r,"wid"),l=He(r,"score"),s=He(r,"diff"),n=F(()=>ge.getOnlyExample().getData(e.value)),o=F(()=>t.mapData.getDifficultyLevel(l.value)),u=F(()=>n.value.getHpMax(o.value,s.value)),m=F(()=>t.mapMonsterData.map(p=>({name:p.name,value:p.getHpMax(o.value,s.value)})));return(p,h)=>{const T=ut,S=Ye,E=De,b=he,x=je("vue-latex");return g(),D(M,null,[i(E,{label:"狼"},{default:c(()=>[i(T,{modelValue:e.value,"onUpdate:modelValue":h[0]||(h[0]=R=>e.value=R),options:d(an)},null,8,["modelValue","options"]),i(S,{effect:"light"},{default:c(()=>[w(" 血量系数："+L(d(n).hpMaxA)+","+L(d(n).hpMaxB)+","+L(d(n).hpMaxC),1)]),_:1})]),_:1}),i(E,{label:"进度"},{default:c(()=>[i(b,{modelValue:l.value,"onUpdate:modelValue":h[1]||(h[1]=R=>l.value=R),min:0},null,8,["modelValue"]),i(S,{effect:"light",class:"tag-button",onClick:h[2]||(h[2]=R=>l.value=p.mapData.scoreMax)},{default:c(()=>[w(" 通关进度："+L(p.mapData.scoreMax),1)]),_:1})]),_:1}),i(E,{label:"难度"},{default:c(()=>[i(ra,{modelValue:s.value,"onUpdate:modelValue":h[3]||(h[3]=R=>s.value=R)},null,8,["modelValue"])]),_:1}),i(E,null,{default:c(()=>[A("div",hn,[A("span",null,[w(" 等级： "),i(x,{expression:`L(x)=\\sqrt{h_a + h_b x}=${d(o).toFixed(2)}`},null,8,["expression"])]),A("span",null,"最大血量："+L(d(u)),1)])]),_:1}),i(E,null,{default:c(()=>[w(" 银币： "),i(x,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${p.mapData.calcPKGold(d(o))}`},null,8,["expression"])]),_:1}),i(E,null,{default:c(()=>[w(" 经验： "),i(x,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${p.mapData.calcPKExp(d(o))}`},null,8,["expression"])]),_:1}),i(E,null,{default:c(()=>[A("div",gn,[A("span",null,"总银币："+L(p.mapData.calcAccumulative().gold),1),A("span",null,"总经验："+L(p.mapData.calcAccumulative().exp),1),fn])]),_:1}),i(la,{"hp-data":d(m),height:100*Math.sqrt(p.mapMonsterData.length)},null,8,["hp-data","height"])],64)}}}),An={class:"text-center markup-table"},En=A("thead",null,[A("th",null,"Boss"),A("th",null,"权重"),A("th",null,"概率"),A("th",null,"难度系数")],-1),In=B({__name:"UmapRandomBossTable",props:{mapData:{}},setup(r){const t=r,{mapData:e}=yl(t);let l=0;const s=()=>V.zip(e.value.randomBossList,ea(e.value.randomBossList.map(p=>p[0]))).map(p=>({index:l++,id:p[0][1],weight:p[1],diff:parseFloat(p[0][2])})),n=le(s()),o=X(null),u=F(()=>V.sumBy(n,"weight"));Pe(e,()=>n.splice(0,n.length,...s())),Pe(n,()=>{const p=ta(n.map(h=>h.weight));e.value.randomBossList=n.map((h,T)=>[p[T],h.id,h.diff.toFixed(1),{}])},{deep:!0});const m=p=>{n.push({index:l++,id:p,weight:1,diff:1}),o.value=null};return(p,h)=>{const T=ut,S=he;return g(),D("table",An,[En,A("tbody",null,[(g(!0),D(M,null,$(d(n),(E,b)=>(g(),D("tr",null,[A("td",null,[(g(),K(T,{key:E.index,modelValue:E.id,"onUpdate:modelValue":x=>E.id=x,options:d(Rl),clearable:"",onClear:x=>d(n).removeAt(b),size:"small"},null,8,["modelValue","onUpdate:modelValue","options","onClear"]))]),A("td",null,[i(S,{modelValue:E.weight,"onUpdate:modelValue":x=>E.weight=x,min:0,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),A("td",null,L((E.weight/d(u)).toFixed(3)),1),A("td",null,[i(ra,{modelValue:E.diff,"onUpdate:modelValue":x=>E.diff=x},null,8,["modelValue","onUpdate:modelValue"])])]))),256)),A("tr",null,[A("td",null,[i(T,{modelValue:d(o),"onUpdate:modelValue":h[0]||(h[0]=E=>Ae(o)?o.value=E:null),options:d(Rl),onChange:m,size:"small"},null,8,["modelValue","options"])])])])])}}}),Tn={class:"text-center markup-table"},Ln=A("thead",null,[A("th",null,"狼"),A("th",null,"权重"),A("th",null,"概率"),A("th",null,"pop")],-1),vn=B({__name:"UmapWolfTable",props:{mapData:{}},setup(r){const t=r,{mapData:e}=yl(t);let l=0;const s=()=>V.zip(e.value.monsterProportion,ea(e.value.monsterProportion.map(h=>h[0]))).map(h=>({index:l++,id:h[0][1],weight:h[1]})),n=le(s()),o=X(null),u=F(()=>n.map(h=>ge.getOnlyExample().getData(h.id))),m=F(()=>V.sumBy(n,"weight"));Pe(e,()=>n.splice(0,n.length,...s())),Pe(n,()=>{const h=ta(n.map(T=>T.weight));e.value.monsterList=n.map(T=>T.id),e.value.monsterProportion=n.map((T,S)=>[h[S],T.id])},{deep:!0});const p=h=>{n.push({index:l++,id:h,weight:1}),o.value=null};return(h,T)=>{const S=ut,E=he;return g(),D("table",Tn,[Ln,A("tbody",null,[(g(!0),D(M,null,$(d(n),(b,x)=>(g(),D("tr",null,[A("td",null,[(g(),K(S,{key:b.index,modelValue:b.id,"onUpdate:modelValue":R=>b.id=R,options:d(wl),clearable:"",onClear:R=>d(n).removeAt(x),size:"small"},null,8,["modelValue","onUpdate:modelValue","options","onClear"]))]),A("td",null,[i(E,{modelValue:b.weight,"onUpdate:modelValue":R=>b.weight=R,min:0,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),A("td",null,L((b.weight/d(m)).toFixed(3)),1),A("td",null,L(d(u)[x].population),1)]))),256)),A("tr",null,[A("td",null,[i(S,{modelValue:d(o),"onUpdate:modelValue":T[0]||(T[0]=b=>Ae(o)?o.value=b:null),options:d(wl),onChange:p,size:"small"},null,8,["modelValue","options"])])])])])}}}),Dn=A("span",null,"A",-1),Sn=A("span",null,"B",-1),bn=B({__name:"UmapDataForm",emits:["export"],setup(r){const t=X(N.$_map_Obj.m0B),e=X(new mt(t.value)),l=le({mid:"m0B",wid:"dahuil",score:0,diff:1});Al(()=>{t.value=N.$_map_Obj[l.mid],e.value=new mt(t.value)});const s=F(()=>e.value.monsterList.map(n=>ge.getOnlyExample().getData(n)));return(n,o)=>{const u=qe,m=ut,p=De,h=wt,T=he,S=kl,E=Me;return g(),D(M,null,[i(u,{onClick:o[0]||(o[0]=b=>n.$emit("export",d(e)))},{default:c(()=>[w("导出")]),_:1}),i(E,{model:d(l),"label-width":"120px"},{default:c(()=>[i(p,{label:"原型"},{default:c(()=>[i(m,{modelValue:d(l).mid,"onUpdate:modelValue":o[1]||(o[1]=b=>d(l).mid=b),options:d(ia)},null,8,["modelValue","options"])]),_:1}),i(p,{label:"名称"},{default:c(()=>[i(h,{modelValue:d(e).name,"onUpdate:modelValue":o[2]||(o[2]=b=>d(e).name=b),style:{width:"200px"}},null,8,["modelValue"])]),_:1}),i(p,{label:"通关进度"},{default:c(()=>[i(T,{modelValue:d(e).scoreMax,"onUpdate:modelValue":o[3]||(o[3]=b=>d(e).scoreMax=b)},null,8,["modelValue"])]),_:1}),i(p,{label:"Population"},{default:c(()=>[i(T,{modelValue:d(e).populationMax,"onUpdate:modelValue":o[4]||(o[4]=b=>d(e).populationMax=b)},null,8,["modelValue"])]),_:1}),i(p,{label:"难度系数"},{default:c(()=>[Dn,i(T,{modelValue:d(e).hardA,"onUpdate:modelValue":o[5]||(o[5]=b=>d(e).hardA=b),size:"small"},null,8,["modelValue"]),Sn,i(T,{modelValue:d(e).hardB,"onUpdate:modelValue":o[6]||(o[6]=b=>d(e).hardB=b),size:"small"},null,8,["modelValue"])]),_:1}),i(p,{label:"该地图的狼"},{default:c(()=>[i(vn,{mapData:d(e),style:{width:"100%"}},null,8,["mapData"])]),_:1}),i(p,{label:"随机 Boss"},{default:c(()=>[i(In,{mapData:d(e),style:{width:"100%"}},null,8,["mapData"])]),_:1}),i(S),i(oa,{mapData:d(e),mapMonsterData:d(s)},null,8,["mapData","mapMonsterData"])]),_:1},8,["model"])],64)}}}),xn=B({__name:"index",setup(r){const{toClipboard:t}=Fl(),e=X(!1),l=X({}),s=X(""),n=X(),o=m=>{e.value=!0;const p={name:m.name,pass_score:m.scoreMax,yield_val:m.hardA,hard_ness:m.hardB,pop_max:m.populationMax,wolf_proportion:m.monsterProportion,random_boss:m.randomBossList};l.value=p,s.value=JSON.stringify(p)},u=()=>{t(s.value,n.value.$el),El.success("已复制到剪贴板")};return(m,p)=>{const h=qe,T=Ul;return g(),D(M,null,[i(bn,{onExport:o}),i(T,{modelValue:d(e),"onUpdate:modelValue":p[0]||(p[0]=S=>Ae(e)?e.value=S:null),title:"导出数据"},{default:c(()=>[i(d(Vl),{data:d(l),virtual:"",deep:2},null,8,["data"]),i(h,{onClick:u,ref_key:"someRef",ref:n},{default:c(()=>[w("复制到剪贴板")]),_:1},512)]),_:1},8,["modelValue"])],64)}}}),Nn=Object.freeze(Object.defineProperty({__proto__:null,default:xn},Symbol.toStringTag,{value:"Module"})),wn=B({__name:"BossDistribChart",props:{mid:{}},setup(r){const t=r;Ct([Na,Ot,yt,wa,Kt,Pt]);const e=le({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:[{left:"5%",right:"4%",bottom:"52%",containLabel:!0},{left:"5%",right:"4%",top:"52%",containLabel:!0}],dataset:{source:[]},xAxis:[{gridIndex:0},{gridIndex:1}],yAxis:[{type:"category",gridIndex:0},{type:"category",gridIndex:1}],series:[]});return Al(()=>{const l=N.$_map_Obj[t.mid].random_boss;if(!l)return;const s=l.map((m,p)=>{var h;return[Object.keys(m[3].properties.card)[0],m[1],Math.round((m[0]-(((h=l[p-1])==null?void 0:h[0])??0))*1e3)/10]}),n=V.uniq(s.map(m=>m[0])).sort(),o=V.uniq(s.map(m=>m[1])).sort(),u=[["boss",...n]].concat(o.map(m=>[m].concat(new Array(n.length).fill(0))));for(const m of s)u[o.indexOf(m[1])+1][n.indexOf(m[0])+1]=m[2];for(let m=0;m<n.length;m++)u[0][m+1]=pe(n[m]);for(let m=0;m<o.length;m++)u[m+1][0]=pe(o[m]);e.dataset.source=u,e.series=[...new Array(n.length).fill({type:"bar",stack:`${t.mid}-totalA`,label:{show:!0},emphasis:{focus:"series"}}),...new Array(o.length).fill({type:"bar",stack:`${t.mid}-totalB`,seriesLayoutBy:"row",label:{show:!0},emphasis:{focus:"series"},xAxisIndex:1,yAxisIndex:1})]}),(l,s)=>(g(),D("div",null,[i(d(Ml),{option:d(e),autoresize:"","update-options":{notMerge:!0},style:{height:"600px"}},null,8,["option"])]))}}),Rn=B({__name:"WolfNumberChart",props:{data:{},max:{}},setup(r){Ct([yt,Ll,Ot,Kt,Pt]);const t=r,e=F(()=>({color:["#C00000"],xAxis:{type:"value",interval:1,axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},max:t.max},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.data.map(l=>l.name)},grid:{left:100,top:0,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.data.map(l=>l.num)}}));return(l,s)=>{const n=je("v-chart");return g(),K(n,{class:"chart",option:d(e)},null,8,["option"])}}});const Cn=Je(Rn,[["__scopeId","data-v-247bc23b"]]),ua=r=>(Kl("data-v-dabd02c1"),r=r(),Pl(),r),On=ua(()=>A("h3",null,"波工具",-1)),yn=ua(()=>A("label",null,"下表为预留量",-1)),Kn=B({__name:"WaveTool",props:{mid:{},mapMonsterData:{}},setup(r){const t=r,e=le({count:0,avgHp:"",reservation:[0,0,0,0,0,0,0],extra:"",result:"",resultRaw:""});let l=le([]);const s=()=>{e.reservation.fill(0)},n=()=>{let o=Rs(t.mid,[...e.reservation]);if(!o){El.error("预留量不合法，请重新输入！");return}let[u,m]=o;e.extra&&(u=V.shuffle(u.concat(e.extra.split(",").map(p=>p.trim())))),e.resultRaw=`[${u.map(p=>`"${p}"`).join(",")}]`,e.result=pe(u).join(","),l=m.map(p=>({name:pe(p[0]),num:p[1]})),e.count=V.sumBy(m,p=>p[1])};return(o,u)=>{const m=qe,p=he,h=wt,T=Rt;return g(),K(T,{id:"wave-tool"},{default:c(()=>[On,i(m,{onClick:n},{default:c(()=>[w("随机生成波")]),_:1}),A("span",null,[w(" 共 "),i(p,{modelValue:d(e).count,"onUpdate:modelValue":u[0]||(u[0]=S=>d(e).count=S)},null,8,["modelValue"]),w(" 只狼，平均血量 "),i(h,{modelValue:d(e).avgHp,"onUpdate:modelValue":u[1]||(u[1]=S=>d(e).avgHp=S),modelModifiers:{number:!0},style:{width:"100px"}},null,8,["modelValue"])]),i(m,null,{default:c(()=>[w("组成推算")]),_:1}),A("div",null,[A("p",null,[yn,i(m,{size:"small",onClick:s},{default:c(()=>[w("重置")]),_:1})]),A("table",null,[A("tbody",null,[A("tr",null,[(g(!0),D(M,null,$(o.mapMonsterData,S=>(g(),D("td",{key:S.id},L(S.name),1))),128))]),A("tr",null,[(g(!0),D(M,null,$(o.mapMonsterData,(S,E)=>(g(),D("td",{key:S.id},[i(p,{modelValue:d(e).reservation[E],"onUpdate:modelValue":b=>d(e).reservation[E]=b,size:"small","controls-position":"right",min:0},null,8,["modelValue","onUpdate:modelValue"])]))),128))])])]),A("p",null,[w(" 额外："),i(h,{modelValue:d(e).extra,"onUpdate:modelValue":u[2]||(u[2]=S=>d(e).extra=S),style:{width:"580px"},placeholder:"多个请用半角逗号分隔",spellcheck:"false"},null,8,["modelValue"])]),A("p",null,[w("波："),i(h,{modelValue:d(e).resultRaw,"onUpdate:modelValue":u[3]||(u[3]=S=>d(e).resultRaw=S),style:{width:"600px"},spellcheck:"false"},null,8,["modelValue"])]),A("p",null,[w("波："),i(h,{modelValue:d(e).result,"onUpdate:modelValue":u[4]||(u[4]=S=>d(e).result=S),style:{width:"600px"},spellcheck:"false"},null,8,["modelValue"])])]),i(Cn,{data:d(l),max:10},null,8,["data"])]),_:1})}}});const Pn=Je(Kn,[["__scopeId","data-v-dabd02c1"]]),Mn=B({__name:"UmapInfoForm",props:{mid:{},midModifiers:{}},emits:["update:mid"],setup(r){const t=He(r,"mid"),e=le({mid:"m1",mid2:"",wid:"dahuil",diff:1});Al(()=>{t.value=e.mid});const l=F(()=>N.$_map_Obj[e.mid]),s=F(()=>Z.getMapData(e.mid)),n=F(()=>e.mid2===""?s.value:Z.getMapData(e.mid2)),o=F(()=>s.value.monsterList.map(p=>ge.getOnlyExample().getData(p))),u=p=>p.map(h=>{let T=N.$_wolfAtt_Obj[h[1]];return{id:h[1],prob:h[0],name:T.name,pop:T.pop}}),m=p=>p?p.map(h=>{let T=N.$_wolfAtt_Obj[h[1]];return{id:h[1],prob:h[0],name:T.name,diff:parseFloat(h[2])}}):[];return(p,h)=>{const T=ut,S=Ye,E=De,b=Ve,x=Ue,R=kl,C=Me;return g(),D(M,null,[i(C,{model:d(e),"label-width":"120px"},{default:c(()=>[i(E,{label:"地图"},{default:c(()=>[i(T,{modelValue:d(e).mid,"onUpdate:modelValue":h[0]||(h[0]=O=>d(e).mid=O),options:d(ia)},null,8,["modelValue","options"]),i(S,{effect:"light"},{default:c(()=>[w(" 难度系数："+L(d(s).hardA)+","+L(d(s).hardB),1)]),_:1}),i(S,{effect:"light"},{default:c(()=>[w(" Population："+L(d(s).populationMax),1)]),_:1})]),_:1}),i(E,{label:"引狼到"},{default:c(()=>[i(x,{modelValue:d(e).mid2,"onUpdate:modelValue":h[1]||(h[1]=O=>d(e).mid2=O),clearable:""},{default:c(()=>[i(b,{label:"无",value:""}),(g(!0),D(M,null,$(d(na),O=>(g(),K(b,{key:O.id,label:`${O.id} ${O.name}`,value:O.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(E,{label:"该地图的狼"},{default:c(()=>[(g(!0),D(M,null,$(u(d(l).wolf_proportion),O=>(g(),K(S,{key:O.id,type:"success",class:"mx-1 tag-button",effect:"light",onClick:ne=>d(e).wid=O.id},{default:c(()=>[A("sub",null,L(O.prob),1),w(" "+L(O.name)+" ",1),A("sup",null,L(O.pop),1)]),_:2},1032,["onClick"]))),128))]),_:1}),"random_boss"in d(l)?(g(),K(E,{key:0,label:"随机 Boss"},{default:c(()=>[(g(!0),D(M,null,$(m(d(l).random_boss),O=>(g(),K(S,{key:O.id,type:"success",class:"mx-1 tag-button",effect:"light",onClick:ne=>{d(e).wid=O.id,d(e).diff=O.diff}},{default:c(()=>[A("sub",null,L(O.prob),1),w(" "+L(O.name)+" ",1),A("sub",null,L(O.diff),1)]),_:2},1032,["onClick"]))),128))]),_:1})):fe("",!0),i(R),i(oa,{mapData:d(n),mapMonsterData:d(o),wid:d(e).wid,"onUpdate:wid":h[2]||(h[2]=O=>d(e).wid=O),diff:d(e).diff,"onUpdate:diff":h[3]||(h[3]=O=>d(e).diff=O)},null,8,["mapData","mapMonsterData","wid","diff"])]),_:1},8,["model"]),i(Pn,{mid:d(e).mid,mapMonsterData:d(o)},null,8,["mid","mapMonsterData"])],64)}}});const Vn=Je(Mn,[["__scopeId","data-v-ea3fcd5d"]]),Un=A("h2",{style:{"text-align":"center"}},"狼出现频率（按数量，供参考）",-1),kn=B({__name:"WaveDistribChart",props:{mid:{},height:{default:600},width:{default:600}},setup(r){Ct([Ll,Ra,Ot,yt,Kt,Ca,Pt,Oa]);const t=r,e=F(()=>Va[t.mid]),l=F(()=>[N.$_map_Obj[t.mid].name,...N.$_map_Obj[t.mid].wolf_proportion.map(u=>pe(u[1]))]),s=F(()=>V.range(e.value.all.length)),n=F(()=>V.zip(l.value,[e.value.all,...e.value.each]).map((u,m)=>({title:u[0],pdf:u[1],cdf:[...Qa(u[1])]}))),o=F(()=>({color:n.value.flatMap(u=>[ot(u.title,70,50),ot(u.title,50,80)]),tooltip:{trigger:"axis",valueFormatter:u=>_s(u,6)},title:n.value.map((u,m)=>({text:u.title,left:"center",textVerticalAlign:"middle",top:t.height*((m+.5)/n.value.length)-5,z:-1,textStyle:{fontSize:t.height/n.value.length*.4,color:"#ccc"}})),xAxis:n.value.map((u,m)=>({gridIndex:m,type:"category",axisTick:{alignWithLabel:!0},data:s.value})),yAxis:n.value.flatMap((u,m)=>[{gridIndex:m,type:"value",alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}},{gridIndex:m,type:"value",position:"right",min:0,max:1,interval:.2,alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}}]),grid:n.value.map((u,m)=>({top:t.height*(m/n.value.length)+10,bottom:t.height*(1-(m+1)/n.value.length)+20})),series:n.value.flatMap((u,m)=>[{xAxisIndex:m,yAxisIndex:m*2,type:"bar",barWidth:"90%",data:u.pdf},{xAxisIndex:m,yAxisIndex:m*2+1,type:"line",smooth:!0,data:u.cdf}])}));return(u,m)=>{const p=je("v-chart");return g(),D("div",null,[Un,i(p,{option:d(o),autoresize:"",style:{height:"600px"}},null,8,["option"])])}}}),Fn=B({__name:"index",setup(r){const t=X("m1"),e=X("wolf");return(l,s)=>{const n=Tl,o=Nt,u=xt,m=Il;return g(),K(m,null,{default:c(()=>[i(n,{md:16},{default:c(()=>[i(Vn,{mid:d(t),"onUpdate:mid":s[0]||(s[0]=p=>Ae(t)?t.value=p:null)},null,8,["mid"])]),_:1}),i(n,{md:8,sm:16},{default:c(()=>[i(u,{modelValue:d(e),"onUpdate:modelValue":s[1]||(s[1]=p=>Ae(e)?e.value=p:null),class:"chart-area"},{default:c(()=>[i(o,{label:"狼分布",name:"wolf"},{default:c(()=>[i(kn,{mid:d(t)},null,8,["mid"])]),_:1}),i(o,{label:"Boss分布",name:"boss"},{default:c(()=>[i(wn,{mid:d(t)},null,8,["mid"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});const $n=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"})),Bn=A("p",null,"前排解释：",-1),Hn=A("p",null,"狼的等级随进度增加而增加。难度系数 hardA 影响初始狼等级，hardB 影响等级增长速率。",-1),Gn=A("p",null,"population 影响一波狼的容量。每只狼都会占用一定容量。",-1),Wn=A("p",null,"不同随机boss有出现权重。出现率、难度、奖励水平是相对应的，难的比较稀有，奖励也会比较好。",-1),jn=B({__name:"index",setup(r){const t=V.map(N.$_map_Obj,(s,n)=>V.extend(s,{id:n})),e=(s,n)=>{let o=s.need_lev||0,u=n.need_lev||0;return o-u},l=s=>s.map(n=>{const o=ge.getOnlyExample().getData(n[1]);return{prob:n[0],name:o.name,pop:o.population}});return(s,n)=>{const o=ze,u=Ye,m=Xe;return g(),D(M,null,[Bn,Hn,Gn,Wn,i(m,{data:d(t),"default-sort":{prop:"index",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},height:"600px",style:{width:"100%","font-size":"80%"},class:"testbox"},{default:c(()=>[i(o,{prop:"index",label:"index",sortable:"",align:"center",fixed:"",width:"70"}),i(o,{prop:"id",label:"id",sortable:"",align:"center",fixed:"",width:"80"}),i(o,{prop:"name",label:"name",sortable:"",align:"center",fixed:"",width:"80"}),i(o,{prop:"pass_score",label:"scoreMax",sortable:"",align:"center"}),i(o,{label:"hardnessFactor"},{default:c(()=>[i(o,{prop:"yield_val",label:"hardA",sortable:"",align:"center"}),i(o,{prop:"hard_ness",label:"hardB",sortable:"",align:"center"})]),_:1}),i(o,{prop:"pop_max",label:"populationMax",sortable:"",align:"center"}),i(o,{prop:"interval",label:"unkennelDelay",sortable:"",align:"center"}),i(o,{prop:"interval_rule",label:"unkennelRule",sortable:"",align:"center"}),i(o,{prop:"teleport_rule",label:"teleportRule",sortable:"",align:"center"}),i(o,{prop:"need_lev",label:"needLevel",sortable:"","sort-method":e,align:"center"}),i(o,{prop:"pass_by",label:"passBy",align:"center"},{default:c(p=>[w(L(p.row.pass_by.map(h=>d(N).$_map_Obj[h].name).join(", ")),1)]),_:1}),i(o,{prop:"wolf_proportion",label:"monsterList","cell-style":{"text-align":"left"}},{default:c(p=>[(g(!0),D(M,null,$(l(p.row.wolf_proportion),h=>(g(),K(u,{key:h.prob,class:"ml-2"},{default:c(()=>[A("sub",null,L(h.prob),1),w(" "+L(h.name)+" ",1),A("sup",null,L(h.pop),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["data"])],64)}}});const Xn=Object.freeze(Object.defineProperty({__proto__:null,default:jn},Symbol.toStringTag,{value:"Module"})),zn=B({__name:"index",setup(r){const t=le({level:1}),e=F(()=>((2*(t.level+1)+3)*(t.level+1)+4)*(t.level+1)+20),l=F(()=>Math.round((.015*t.level+.8)*t.level+2)),s=F(()=>Math.floor(t.level/4+1)),n=F(()=>(t.level+7)*l.value);return(o,u)=>{const m=he,p=De,h=Me;return g(),K(h,{model:d(t),"label-width":"120px"},{default:c(()=>[i(p,{label:"等级"},{default:c(()=>[i(m,{modelValue:d(t).level,"onUpdate:modelValue":u[0]||(u[0]=T=>d(t).level=T),min:1},null,8,["modelValue"])]),_:1}),i(p,{label:"升级经验"},{default:c(()=>[A("label",null,L(d(e)),1)]),_:1}),i(p,{label:"力量"},{default:c(()=>[A("label",null,L(d(l)),1)]),_:1}),i(p,{label:"连升等级"},{default:c(()=>[A("label",null,L(d(s)),1)]),_:1}),i(p,{label:"苦工价格"},{default:c(()=>[A("label",null,L(d(n)),1)]),_:1})]),_:1},8,["model"])}}}),Yn=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"})),rt=class rt extends Ge{constructor(e,l=1,s=1,n=0){super();a(this,"index",0);a(this,"m_level",0);a(this,"exp",0);a(this,"hp",0);a(this,"hpMax",0);a(this,"hpRate");a(this,"skillList",[]);this.tag="Monster",this.updateData(e),this.hpRate=s,this.updateLevelExp(l,n),this.index=rt.COUNT++}updateData(e){e==""&&(e="dahuil");let l=e.indexOf("|");l!=-1&&(e=e.slice(0,l)),this.m_data=ge.getOnlyExample().getData(e),this.m_data==null&&(this.m_data=ge.getOnlyExample().getData("dahuil"))}createSkills(e){return e.map(l=>new de(l[Ge.SKILL_ID],l[Ge.SKILL_LEVEL],this).getSubClasses())}initSkills(){this.skills={};const e=this.data.skills;if(e!=null){this.skillList=this.createSkills(e);for(const l of this.skillList)this.skills[l.data.kindId]=l}}conflictSkillList(e){const l=[];if(e==null)return[];const s=N.$_conflict_skill_kind,n=e.data.kindId;this.skills[n]&&l.push(de.getKindName(n));for(const o of s)if(o.indexOf(n)!=-1)for(let u=0;u<o.length;u++)n!=o[u]&&this.skills[o[u]]&&l.push(de.getKindName(o[u]));return l}getSkillById(e){let l,s=null;for(l in this.skills)if(s=this.skills[l],s.data.id==e)return s;return null}updateLevelExp(e=0,l=0){this.level=e,this.exp=l}get allSkillsScore(){let e=1;for(const l of this.skillList)l.enabled&&(e*=this.getSkillScore(l.data.id,l.level));return e}getSkillScore(e,l){let s=null,n=N.$_skill_grade_score,o=e.indexOf("_");return e.indexOf("_")==-1?1:(s=e.slice(o+1,e.length),n[s]&&n[s][String(l)]?n[s][String(l)]:1)}get levelMax(){return N.$_camp_wolf_lv_max}get expMax(){let e=this.m_level+1;return Math.round(this.monsterData.expMaxA+this.monsterData.expMaxB*e+this.monsterData.expMaxC*e*e+this.monsterData.expMaxD*e*e*e)}get level(){return this.m_level}set level(e){this.m_level=Math.max(Math.min(e,this.levelMax),0),Z.currentMap&&Z.currentMap&&(this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate)),this.hpMax<=1&&(this.hpMax=1)}refreshLevel(){this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate*1),this.hpMax<=1&&(this.hpMax=1)}get monsterData(){return this.m_data}get power(){let e=N.$_wolf_worth_factor,l=this.hpMax,s=this.monsterData.speedBase,n=this.allSkillsScore;return Math.round(l*s*n*e[2])}get skillInfo(){if(this.skills==null)return"";const e=Object.values(this.skills);return e.sort((l,s)=>l.index-s.index),e.map(l=>l.skillInfo).join("")}};a(rt,"MONSTER_SAY_ARRAY",[_.getLanguageStr(1250),_.getLanguageStr(1251),_.getLanguageStr(1252),_.getLanguageStr(1253),_.getLanguageStr(1254),_.getLanguageStr(1255),_.getLanguageStr(1256),_.getLanguageStr(1257),_.getLanguageStr(1258),_.getLanguageStr(1259)]),a(rt,"WEIGHTILY_SIZE",487500),a(rt,"COUNT",0);let ht=rt;const qn=B({__name:"WolfSelect",setup(r){return(t,e)=>{const l=Ve,s=Ta,n=Ue;return g(),K(n,null,{default:c(()=>[i(s,{label:"前线"},{default:c(()=>[(g(!0),D(M,null,$(d(ln),o=>(g(),K(l,{key:o.id,label:o.label,value:o.id},null,8,["label","value"]))),128))]),_:1}),i(s,{label:"防线"},{default:c(()=>[(g(!0),D(M,null,$(d(aa),o=>(g(),K(l,{key:o.id,label:o.label,value:o.id},null,8,["label","value"]))),128))]),_:1}),i(s,{label:"噩梦"},{default:c(()=>[(g(!0),D(M,null,$(d(sa),o=>(g(),K(l,{key:o.id,label:o.label,value:o.id},null,8,["label","value"]))),128))]),_:1})]),_:1})}}}),Jn={class:"text-xs"},Zn={class:"sk-tag text-xs"},Qn=B({__name:"WolfSkillTable",props:{wolf:{}},emits:["change"],setup(r,{emit:t}){const e=r,l=t,s=X(),n=V.groupBy(N.$_skillAtt_Obj.monsterSkill,E=>E.kindId);V.each(n,(E,b)=>n[b]=V.sortBy(E,"id"));const o=Object.keys(n).sort();let u=le([]);Pe(()=>e.wolf.data.id,()=>{var E,b;e.wolf.initSkills(),u.length=0,u.push(...e.wolf.skillList.map((x,R)=>m(x,R))),(E=s.value)==null||E.clearSelection(),(b=s.value)==null||b.toggleAllSelection()});const m=(E,b=0)=>le({index:b,kindId:E.data.kindId,id:E.data.id,name:E.data.name,level:E.level,levelMax:E.levelMax,score:E.skillScore,info:E.skillInfo,tags:E.skillTag1+E.skillTag2+E.skillTag3,skill:E});function p(E){E.id=n[E.kindId][0].id,E.level=1,h(E)}const h=E=>{const b=u.indexOf(E),x=new de(E.id,E.level,e.wolf).getSubClasses();e.wolf.skillList[b]=x,Object.assign(E,m(x,b)),l("change")},T=()=>{var b;const E=m(new de("WeakFire_X1",1,e.wolf).getSubClasses(),u.length);u.push(E),(b=s.value)==null||b.toggleRowSelection(E,!0),l("change")},S=E=>{e.wolf.skillList.forEach(b=>b.enabled=E.find(x=>x.skill==b)!==void 0)};return(E,b)=>{const x=ze,R=Ve,C=Ue,O=he,ne=qe;return g(),D("div",null,[i(d(Xe),{ref_key:"skillTableRef",ref:s,data:d(u),"row-key":"index",style:{"font-size":"small"},onSelectionChange:S},{default:c(()=>[i(x,{type:"selection","reverse-selection":"",width:30}),i(x,{label:"KindId",width:160,"header-align":"center"},{default:c(U=>[i(C,{modelValue:U.row.kindId,"onUpdate:modelValue":Q=>U.row.kindId=Q,onChange:Q=>p(U.row),style:{"font-size":"small"}},{default:c(()=>[(g(!0),D(M,null,$(d(o),Q=>(g(),K(R,{key:Q,label:Q,value:Q},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),i(x,{label:"Id",width:200,"header-align":"center"},{default:c(U=>[i(C,{modelValue:U.row.id,"onUpdate:modelValue":Q=>U.row.id=Q,onChange:Q=>h(U.row),style:{"font-size":"small"}},{default:c(()=>[(g(!0),D(M,null,$(d(n)[U.row.kindId],Q=>(g(),K(R,{key:Q.id,label:Q.id,value:Q.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),i(x,{prop:"name",label:"Name",width:120,"header-align":"center",align:"center"}),i(x,{prop:"level",label:"Level",width:120,"header-align":"center",align:"center"},{default:c(U=>[i(O,{modelValue:U.row.level,"onUpdate:modelValue":Q=>U.row.level=Q,min:1,max:U.row.levelMax,size:"small",style:{width:"80px"},onChange:Q=>h(U.row)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:1}),i(x,{prop:"levelMax",label:"Level Max",width:120,"header-align":"center",align:"center"}),i(x,{prop:"score",label:"Score",width:120,"header-align":"center",align:"center"}),i(x,{label:"Info"},{default:c(U=>[A("span",Jn,L(U.row.info),1),A("span",Zn,L(U.row.tags),1)]),_:1})]),_:1},8,["data"]),i(ne,{onClick:T},{default:c(()=>[w("增加一行")]),_:1})])}}});const ei=Je(Qn,[["__scopeId","data-v-7964810f"]]),ti={class:"ml-2"},li={class:"ml-8"},ai=A("p",null,"技能",-1),si=B({__name:"WolfCalcOne",props:{wolf:{}},setup(r){const t=le({wid:"al",level:1,expMax:0}),e=r;s();const l=n=>{e.wolf.updateData(n),s()};Pe(()=>e.wolf.level,s);function s(){e.wolf.refreshLevel(),t.expMax=e.wolf.expMax}return(n,o)=>{const u=De,m=he,p=Me;return g(),D(M,null,[i(p,{"label-width":80},{default:c(()=>[i(u,{label:"狼"},{default:c(()=>[i(qn,{modelValue:d(t).wid,"onUpdate:modelValue":o[0]||(o[0]=h=>d(t).wid=h),onChange:l},null,8,["modelValue"])]),_:1}),i(u,{label:"等级"},{default:c(()=>[i(m,{modelValue:n.wolf.m_level,"onUpdate:modelValue":o[1]||(o[1]=h=>n.wolf.m_level=h),min:1},null,8,["modelValue"]),A("span",ti,"最高等级："+L(n.wolf.levelMax),1)]),_:1}),i(u,{label:"速度"},{default:c(()=>[w(L(n.wolf.monsterData.speedBase),1)]),_:1}),i(u,{label:"升级经验"},{default:c(()=>[w(L(d(t).expMax),1)]),_:1}),i(u,{label:"血量"},{default:c(()=>[w(L(n.wolf.hpMax),1)]),_:1}),i(u,{label:"实力"},{default:c(()=>[w(L(n.wolf.power),1)]),_:1})]),_:1}),A("div",li,[ai,i(ei,{wolf:n.wolf},null,8,["wolf"])])],64)}}}),ni=A("h2",null,"狼相关计算",-1),ii=B({__name:"index",setup(r){const t=le([new ht("dahuil")]),e=X(t[0].index),l=F(()=>{const[n,o]=N.$_wolf_worth_factor;return Math.round(Math.pow(V.sumBy(t,u=>Math.pow(u.power,n)),o))}),s=(n,o)=>{if(o==="add"){const u=new ht("dahuil");t.push(u),e.value=u.index}else if(o==="remove"){const u=t;let m=e.value;m===n&&u.forEach((p,h)=>{if(p.index===n){const T=u[h+1]||u[h-1];T&&(m=T.index)}}),e.value=m,t.splice(t.findIndex(p=>p.index===n),1)}};return(n,o)=>{const u=Nt,m=xt;return g(),D("div",null,[ni,A("div",null,"总实力："+L(d(l)),1),i(m,{modelValue:d(e),"onUpdate:modelValue":o[0]||(o[0]=p=>Ae(e)?e.value=p:null),type:"border-card",editable:"",onEdit:s,class:"m-4"},{default:c(()=>[(g(!0),D(M,null,$(d(t),(p,h)=>(g(),K(u,{key:p.index,label:p.monsterData.name,name:p.index},{default:c(()=>[i(si,{wolf:p},null,8,["wolf"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])}}}),ri=Object.freeze(Object.defineProperty({__proto__:null,default:ii},Symbol.toStringTag,{value:"Module"})),ft=r=>(Kl("data-v-ca5efb48"),r=r(),Pl(),r),oi=ft(()=>A("h1",null,"狼数据",-1)),ui=ft(()=>A("p",null,"前排解释：",-1)),di=ft(()=>A("p",null,"pop 为狼在一波中占的容量，一般来说 pop 越大则出现机会越少。",-1)),ci=ft(()=>A("p",null,"charm 影响到寻路，charm 为负值越小则其他狼越会排斥它。",-1)),_i=ft(()=>A("p",null,"hp_factor 影响血量关于等级增长，是二次函数系数。",-1)),mi={class:"sk-list"},pi={key:0,class:"sk-debuff"},hi={key:1,class:"sk-buff"},gi={class:"sk-name"},fi={class:"sk-id"},Ai={class:"sk-info"},Ei={key:2,class:"sk-tag"},Ii={key:3,class:"sk-tag"},Ti={key:4,class:"sk-tag"},Li=B({__name:"index",setup(r){console.log("init wolfs");const t=V.map(N.$_wolfAtt_Obj,(e,l)=>l).sort().map(e=>{let l=new ht(e,0,0);l.initSkills();let s=l.monsterData;return{id:e,data:s,skills:Object.values(l.skills)}});return console.log(t),(e,l)=>{const s=ze,n=Xe;return g(),D(M,null,[oi,ui,di,ci,_i,i(n,{data:d(t),"default-sort":{prop:"id",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},"row-key":"id","max-height":"600",style:{width:"100%","max-width":"1200px"}},{default:c(()=>[i(s,{prop:"id",label:"id",sortable:"",width:150}),i(s,{prop:"data.name",label:"name",sortable:""}),i(s,{prop:"data.speedBase",label:"speedBase",sortable:""}),i(s,{prop:"data.population",label:"population",sortable:""}),i(s,{prop:"data.charm",label:"charm",sortable:"",width:100}),i(s,{label:"size"},{default:c(()=>[i(s,{prop:"data.width",label:"width",sortable:"",width:100}),i(s,{prop:"data.height",label:"height",sortable:"",width:100})]),_:1}),i(s,{label:"hpFactor"},{default:c(()=>[i(s,{prop:"data.hpMaxA",label:"a",sortable:"",width:100}),i(s,{prop:"data.hpMaxB",label:"b",sortable:"",width:100}),i(s,{prop:"data.hpMaxC",label:"c",sortable:"",width:100})]),_:1}),i(s,{label:"skills",type:"expand",width:"60"},{default:c(o=>[A("div",mi,[(g(!0),D(M,null,$(o.row.skills,u=>(g(),D("p",{key:u.data.id},[u.isDebuff?(g(),D("span",pi,"↓")):(g(),D("span",hi,"↑")),A("span",gi,L(u.name),1),A("span",fi,"["+L(u.data.id)+"]",1),A("span",Ai,L(u.skillInfo),1),u.skillTag1?(g(),D("span",Ei,L(u.skillTag1),1)):fe("",!0),u.skillTag2?(g(),D("span",Ii,L(u.skillTag2),1)):fe("",!0),u.skillTag3?(g(),D("span",Ti,L(u.skillTag3),1)):fe("",!0)]))),128))])]),_:1})]),_:1},8,["data"])],64)}}});const vi=Je(Li,[["__scopeId","data-v-ca5efb48"]]),Di=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"}));

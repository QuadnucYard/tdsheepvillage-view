var ra=Object.defineProperty;var oa=(u,t,e)=>t in u?ra(u,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[t]=e;var a=(u,t,e)=>(oa(u,typeof t!="symbol"?t+"":t,e),e);import{E as bt,a as Nt,b as Xe,c as Ye,d as ze,e as Me,f as Ve,g as ke,h as Ue,i as Ee,j as ua,k as qe,l as Kl,m as wt,n as Al,o as Rt,p as El,q as Il,r as da,s as Tl,t as ca}from"./element-plus-d1d10ab8.js";import{l as _a}from"./vatex-5c8f9151.js";import{ae as Fe,o as p,S as M,R as c,an as Pl,T as Ll,ao as ma,d as W,b as Z,i as ha,c as S,O as i,u as o,B as Ie,a as T,P as V,ag as B,V as b,W as L,X as fe,y as U,U as Ml,J as oe,ap as ft,aq as Ct,n as pa,L as ga,ar as fa,e as At,I as Aa,w as vl,as as Dl,at as Sl}from"./@vue-fd9eda8b.js";import{B as Vl}from"./vue-echarts-af19811e.js";import{c as Ea,a as Ia,u as Ta,b as La}from"./vue-router-fc0acb93.js";import{l as F}from"./lodash-es-f1aaab28.js";import{u as va,k as Da}from"./@element-plus-ed9a5cee.js";import{u as kl}from"./vue-clipboard3-9b4f599e.js";import{V as Ul}from"./vue-json-pretty-42d122c3.js";/* empty css                            */import{u as Ot,i as xl,a as yt,b as Kt,c as Pt,d as Mt,e as Sa,f as xa,g as ba,h as Na,j as wa}from"./echarts-d3dfb9e8.js";import{C as Ra}from"./color-b12075af.js";import{d as ue,l as Ca,a as Vt,b as Oa,w as ya}from"./assets-0d483344.js";import{X as Ka}from"./x2js-8ae16efe.js";import"./async-validator-dee29e8b.js";import"./@vueuse-2fb746c0.js";import"./@ctrl-f8748455.js";import"./@sxzz-c75af06c.js";import"./memoize-one-297ddbcb.js";import"./escape-html-099bfe2e.js";import"./@xmldom-8222efe8.js";import"./normalize-wheel-es-ed76fb12.js";import"./katex-32f78592.js";import"./resize-detector-a5205554.js";import"./clipboard-77e6e508.js";import"./vue-d1503af4.js";import"./tslib-54e39b60.js";import"./zrender-5b234405.js";import"./color-string-327061cf.js";import"./color-name-b7949e8c.js";import"./simple-swizzle-d8bc59f1.js";import"./is-arrayish-4445f582.js";import"./color-convert-01838e1d.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();(function(){String.prototype.isNullOrEmpty||(String.prototype.isNullOrEmpty=function(){return!this}),Array.prototype.firstOrDefault||(Array.prototype.firstOrDefault=function(u){for(let t=0;t<this.length;t++){const e=this[t];if(u(e))return e}return null}),Array.prototype.removeAt||(Array.prototype.removeAt=function(u){const t=this[u];return this.splice(u,1),t}),Array.prototype.removeOne||(Array.prototype.removeOne=function(u){const t=this.indexOf(u);return t>=0?(this.splice(t,1),!0):!1}),Array.prototype.removeRange||(Array.prototype.removeRange=function(u){for(let t=0;t<u.length;t++)this.removeOne(u[t])}),Array.prototype.addRange||(Array.prototype.addRange=function(u){for(let t=0;t<u.length;t++)this.push(u[t])}),Array.prototype.contains||(Array.prototype.contains=function(u){return this.indexOf(u)!=-1}),Array.prototype.empty||(Array.prototype.empty=function(){return this.length==0})})();const Je=(u,t)=>{const e=u.__vccOpts||u;for(const[l,s]of t)e[l]=s;return e},Pa={};function Ma(u,t){const e=Fe("router-view");return p(),M(e,null,{default:c(({Component:l})=>[(p(),M(Pl,null,[(p(),M(Ll(l)))],1024))]),_:1})}const Va=Je(Pa,[["render",Ma]]),ka="modulepreload",Ua=function(u,t){return new URL(u,t).href},Cl={},he=function(t,e,l){if(!e||e.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(e.map(n=>{if(n=Ua(n,l),n in Cl)return;Cl[n]=!0;const d=n.endsWith(".css"),r=d?'[rel="stylesheet"]':"";if(!!l)for(let g=s.length-1;g>=0;g--){const w=s[g];if(w.href===n&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${r}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ka,d||(h.as="script",h.crossOrigin=""),h.href=n,document.head.appendChild(h),d)return new Promise((g,w)=>{h.addEventListener("load",g),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t()).catch(n=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=n,window.dispatchEvent(d),!d.defaultPrevented)throw n})},Fa=(u,t)=>{const e=u[t];return e?typeof e=="function"?e():Promise.resolve(e):new Promise((l,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})},Fl=[{name:"notice",label:"Notice"},{name:"user",label:"User"},{name:"towers",label:"Towers"},{name:"wolfs",label:"Wolfs"},{name:"umaps",label:"Umaps"},{name:"umap-detail",label:"Umap Detail"},{name:"umap-design",label:"Umap Design"},{name:"dmaps",label:"Dream Maps"},{name:"dmap-detail",label:"Dream Map Detail"},{name:"wolf-calc",label:"Wolf Calculation"},{name:"baoxiang",label:"Baoxiang Properties"},{name:"dream-design",label:"Dream Design"},{name:"tower-design",label:"Tower Design"}],$a=[{path:"/",name:"index",component:()=>he(()=>Promise.resolve().then(()=>Wa),void 0,import.meta.url),children:Fl.map(u=>({path:"/"+u.name,name:u.name,meta:{keepAlive:!0},component:()=>Fa(Object.assign({"../views/sections/baoxiang/index.vue":()=>he(()=>Promise.resolve().then(()=>is),void 0,import.meta.url),"../views/sections/dmap-detail/index.vue":()=>he(()=>Promise.resolve().then(()=>Rs),void 0,import.meta.url),"../views/sections/dmaps/index.vue":()=>he(()=>Promise.resolve().then(()=>Ps),void 0,import.meta.url),"../views/sections/dream-design/index.vue":()=>he(()=>Promise.resolve().then(()=>Us),void 0,import.meta.url),"../views/sections/notice/index.vue":()=>he(()=>Promise.resolve().then(()=>Ws),void 0,import.meta.url),"../views/sections/tower-design/index.vue":()=>he(()=>Promise.resolve().then(()=>an),void 0,import.meta.url),"../views/sections/towers/index.vue":()=>he(()=>Promise.resolve().then(()=>un),void 0,import.meta.url),"../views/sections/umap-design/index.vue":()=>he(()=>Promise.resolve().then(()=>gn),void 0,import.meta.url),"../views/sections/umap-detail/index.vue":()=>he(()=>Promise.resolve().then(()=>yn),void 0,import.meta.url),"../views/sections/umaps/index.vue":()=>he(()=>Promise.resolve().then(()=>Un),void 0,import.meta.url),"../views/sections/user/index.vue":()=>he(()=>Promise.resolve().then(()=>$n),void 0,import.meta.url),"../views/sections/wolf-calc/index.vue":()=>he(()=>Promise.resolve().then(()=>Qn),void 0,import.meta.url),"../views/sections/wolfs/index.vue":()=>he(()=>Promise.resolve().then(()=>gi),void 0,import.meta.url)}),`../views/sections/${u.name}/index.vue`)})),redirect:"notice"}],Ba=Ea({history:Ia("/tdsheepvillage-view/"),routes:$a});const bl=ma(Va);bl.use(Ba).use(_a);bl.component("VChart",Vl);bl.mount("#app");const Ha={class:"content"},Ga=W({__name:"index",setup(u){const t=Ta(),e=La(),l=Z(""),s=(n,d)=>{t.push({name:n.paneName})};return ha(()=>{l.value=e.name}),(n,d)=>{const r=Nt,m=bt,h=Fe("router-view");return p(),S("main",null,[i(m,{modelValue:o(l),"onUpdate:modelValue":d[0]||(d[0]=g=>Ie(l)?l.value=g:null),type:"card",onTabClick:s},{default:c(()=>[(p(!0),S(V,null,B(o(Fl),g=>(p(),M(r,{key:g.name,label:g.label,name:g.name},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),T("div",Ha,[i(h,null,{default:c(({Component:g})=>[(p(),M(Pl,null,[(p(),M(Ll(g)))],1024))]),_:1})])])}}});const Wa=Object.freeze(Object.defineProperty({__proto__:null,default:Ga},Symbol.toStringTag,{value:"Module"}));function ja(u,t=!1){t||(u=u.toLowerCase());let e=1315423911;for(let l=u.length-1;l>=0;l--)e^=(e<<5)+u.charCodeAt(l)+(e>>2);return e&2147483647}const Xa=function(u){return/^[a-zA-Z]+$/.test(u)},Ya=function(u,t){return u<t?-1:u>t?1:0};function*za(u){let t=0;for(const e of u)t+=e,yield t}function $e(u){if(u===0)return 1;if(u=Math.abs(u),u%1===0)return Math.pow(10,Math.floor(Math.log10(u)));const t=u.toString();return Math.pow(10,t.indexOf(".")-t.length+1)}function kt(u){return F.mapValues(u,(t,e)=>Ut(t,e))}function Ut(u,t){return F.mapValues(u,(e,l)=>qa(e,t,l))}function qa(u,t,e){return{...u,type:t,id:e}}const N=function(){const u=new Ka;let t=ue.camp_system_simple;const e=r=>parseInt(new RegExp("(?<=m).+(?=[A-Z]*)").exec(Xa(r[r.length-1])?r:r+"A")[0],36),l=Object.keys(ue.umaps).sort((r,m)=>Ya(e(r),e(m))),s=kt(ue.building),n=kt(ue.skill),d={$_global_language_str:u.xml2dom(Ca),$_global_properties:kt(ue.properties),$_skillAtt_Obj:n,$_skillPackage_Obj:ue.skill_package,$_map_Obj:ue.umaps,$_towerAtt_Obj:s.tower,$_bulletAtt_Obj:ue.bullet,$_wolfAtt_Obj:Ut(ue.wolfs,"wolf"),$_wallAtt_Obj:s.wall,$_barrierAtt_Obj:ue.barrier,$_level_up_gift:ue.level_up_gift,$_pass_map_gift:ue.pass_map_gift,$_wave_hard_Obj:ue.wolf_hard_ness,$Maps:ue.version_ctrl.Maps,$_wolfs_unlock_lv:t.camp_wolf_lv_max_factor,$_wolfs_unlock_gold:t.camp_wolf_gold_max_factor,$_camp_hold_time:t.hold_time,$_camp_pk_cd_time:t.pk_cd_time,$_camp_pk_times_max:t.pk_times_max,$_camp_defend_times_max:t.defend_times_max,$_camp_pk_arena_times_max:t.pk_arena_times_max,$_camp_defend_arena_times_max:t.defend_arena_times_max,$_camp_mining_rate:t.mine_rate,$_camp_sell_building_dis:t.sell_building_dis,$_tower_worth_factor:t.tower_worth_factor,$_wolf_worth_factor:t.wolf_worth_factor,$_defend_map_snarp_max:t.defend_map_snarp_max,$_defend_succ_factor:t.defend_succ_factor,$_defend_failed_factor:t.defend_failed_factor,$_defend_arena_succ_factor:t.defend_arena_succ_factor,$_defend_arena_failed_factor:t.defend_arena_failed_factor,$_conflict_skill_kind:t.conflict_skill_kind,$_skill_lvup_spend:t.skill_lvup_spend,$_skill_grade_score:t.skill_grade_score,$_camp_use_exp_wolf_max:t.use_exp_wolf_max,$_camp_use_exp_tower_max:t.use_exp_tower_max,$_camp_wolf_lv_max:t.wolf_lv_max,$_camp_need_user_level:t.camp_need_user_level,$_camp_arena_need_user_level:t.arena_need_user_level,$_camp_create_mine_help_max:t.create_mine_help_max,$_camp_create_mine_help_friends_num:t.create_mine_help_friends_num,$_dream_wolf_hard_ness:Vt.dm_wolf_hard_ness,umapsById:l.map(r=>[r,ue.umaps[r]]),dream_data:Vt,dream_maps:Ut(Vt.dmaps,"dmaps"),dream_waves:Oa};return console.log("init",d.umapsById),d}(),gt=u=>F.mapValues(u,t=>{let e=t.name;return e.includes("^")?e.substring(e.indexOf("^")+1):e}),Ft=Object.assign({},gt(N.$_map_Obj),gt(N.$_wolfAtt_Obj),gt(N.$_towerAtt_Obj),...Object.values(N.$_global_properties).map(u=>gt(u)));console.log("dict",Ft);function Ae(u){return typeof u=="string"?Ft[u]:u.map(t=>Ft[t])}const Ja={key:0},Za={key:0},Qa={class:"ml-4"},es={key:1},ts={key:1},ls={key:0},as={key:1},ss={class:"ml-4"},ns=W({__name:"index",setup(u){const t=F.chain(N.$_global_properties.card).values().filter(e=>e.id.startsWith("baoxiang")).sortBy(e=>Math.abs(e.index)).value();return(e,l)=>{const s=Ye,n=ze,d=Xe;return p(),S("div",null,[i(d,{data:o(t),style:{"font-size":"small"}},{default:c(()=>[i(s,{label:"id",prop:"id",width:120}),i(s,{label:"name",prop:"name",width:160}),i(s,{label:"open_num",prop:"open_num",width:100}),i(s,{label:"info",prop:"info",width:400}),i(s,{label:"data"},{default:c(r=>[r.row.default_gift?(p(),S("ul",Ja,[(p(!0),S(V,null,B(r.row.default_gift,(m,h)=>(p(),S(V,{key:h},[String(h)=="properties"?(p(),S("li",Za,[i(n,{type:"warning"},{default:c(()=>[b(L(h),1)]),_:2},1024),T("ul",Qa,[(p(!0),S(V,null,B(m,(g,w)=>(p(),S("li",{key:w},[i(n,null,{default:c(()=>[b(L(w),1)]),_:2},1024),(p(!0),S(V,null,B(g,(x,A)=>(p(),M(n,{key:A,type:"info",title:A},{default:c(()=>[b(L(o(Ae)(String(A)))+": "+L(x),1)]),_:2},1032,["title"]))),128))]))),128))])])):(p(),S("li",es,[i(n,{type:"warning"},{default:c(()=>[b(L(h),1)]),_:2},1024),i(n,{type:"info"},{default:c(()=>[b(L(m),1)]),_:2},1024)]))],64))),128))])):fe("",!0),r.row.data?(p(),S("ul",ts,[(p(!0),S(V,null,B(r.row.data,m=>(p(),S(V,{key:m[0]},[m[1]=="invite_score"?(p(),S("li",ls,[i(n,{type:"success"},{default:c(()=>[b(L(m[0]),1)]),_:2},1024),i(n,{type:"warning"},{default:c(()=>[b(L(m[1]),1)]),_:2},1024),i(n,null,{default:c(()=>[b(L(m[2]),1)]),_:2},1024)])):fe("",!0),m[1]=="properties"?(p(),S("li",as,[i(n,{type:"success"},{default:c(()=>[b(L(m[0]),1)]),_:2},1024),i(n,{type:"warning"},{default:c(()=>[b(L(m[1]),1)]),_:2},1024),T("ul",ss,[(p(!0),S(V,null,B(m[2],h=>(p(),S("li",{key:h[0]},[i(n,{type:"success"},{default:c(()=>[b(L(h[0]),1)]),_:2},1024),i(n,{type:"warning"},{default:c(()=>[b(L(h[1]),1)]),_:2},1024),i(n,null,{default:c(()=>[(p(!0),S(V,null,B(h[2],g=>(p(),M(n,{title:g,type:"info",key:g},{default:c(()=>[b(L(o(Ae)(g)),1)]),_:2},1032,["title"]))),128))]),_:2},1024)]))),128))])])):fe("",!0)],64))),128))])):fe("",!0)]),_:1})]),_:1},8,["data"])])}}}),is=Object.freeze(Object.defineProperty({__proto__:null,default:ns},Symbol.toStringTag,{value:"Module"})),pe=class pe{static formatTime(t,e=!1){let l=t%60,s=Math.floor(t/60)%60,n=Math.floor(t/3600),d="";if(e){if(n>0)return d=n.toString()+_.getLanguageStr(21),d+(s.toString()+_.getLanguageStr(22));if(s>0)return d+=s.toString()+_.getLanguageStr(22),d+(l.toString()+_.getLanguageStr(23));l>=0&&(d+=l.toString()+_.getLanguageStr(23))}else n>=0&&(d=(n>9?n.toString():"0"+n.toString())+":"),s>=0&&(d+=(s>9?s.toString():"0"+s.toString())+":"),l>=0&&(d+=Math.floor(l)>9?Math.floor(l).toString():"0"+Math.floor(l).toString());return d}static formatTime_day(t){let e=Math.floor(t/3600),l=Math.floor(e/24),s=Math.ceil(t/60)%60,n=e%24,d="";return l>0&&(d=l.toString()+_.getLanguageStr(20)),n>0&&(d+=n.toString()+_.getLanguageStr(21)),s>0&&(d+=s.toString()+_.getLanguageStr(22)),d}static formatTime_M(t,e=!1){let l=Math.floor(t/60)%60,s=Math.floor(t/3600),n="";return e?s>0?(n=s.toString()+_.getLanguageStr(21),n+(l.toString()+_.getLanguageStr(22))):l>0?n+(l.toString()+_.getLanguageStr(22)):_.getLanguageStr(24):(s>=0&&(n=s.toString()+":"),l>=0&&(n+=l.toString()+":"),n)}static getElementNum(t){let e,l=0;for(e in t)l++;return l}static randomElement(t){let e,l=0,s=pe.getElementNum(t),n=Math.floor(Math.random()*s);for(e of t){if(l==n)return e;l++}return null}static formatHtmlText_normal(t,e=10,l=3355443,s=""){return pe.formatHtmlText(t,l,!1,14,s,e)}static getSimpleNumStr(t,e=!1){let l;return t>1e4?(l=e?_.getLanguageStr(116):_.getLanguageStr(108),Math.round(t/1e4)+l):String(t)}static getValueByIndex(t,e){for(const l in e)if(l!=pe.DEFAULT){const s=pe.getIDPos(l);if(t>=s.x&&t<=s.y)return e[l]}return e[pe.DEFAULT]??1}static getIDPos(t){var e=t.indexOf("_");return{x:parseInt(t.slice(0,e)),y:parseInt(t.slice(e+1,t.length))}}static fillSpace(t,e=10,l=!0){let s=0,n=0,d=0,r=0,m="";for(n=0;n<t.length;n++)d=t.charCodeAt(n),d>=32&&d<=126?s=1:s=2,r+=s;for(n=r;n<e;n++)m+=" ";return l?m+=t:m=t+m,m}static formatHtmlText(t,e=3355443,l=!1,s=14,n="",d=12,r=null){let m="",h="",g="#"+e.toString(16);return d<1e3?(m=t,h=pe.formatLine(m,`
`,d*2,r)):h=t,l?'<font color="'+g+'" size="'+s+'" face="'+n+'"><b>'+h+"</b></font>":'<font color="'+g+'" size="'+s+'" face="'+n+'">'+h+"</font>"}static getLine(t=40,e="=",l="",s=5){let n=0,d="";for(e==""&&(e="="),l==""&&(l="left"),n=0;n<t;n++)d+=e;return HtmlTextFormat.format(d,l,6316128,s)}static formatHtmlTextBr(t,e="left"){let l="";for(let s=0;s<t.length;s++)l+='<P ALIGN="'+e+'">'+t[s]+"</P>";return l}static formatLine(t,e=`
`,l=16,s=null){let n=0,d=0,r=0,m=null,h="",g=0;for(s==null&&(s=[]),l<=1&&(l=2),n=0;n<t.length;n++)r=t.charCodeAt(n),m=t.charAt(n),m==`
`?(g=0,h+=m):(s.indexOf(m)!=-1?d=0:r>=32&&r<=126?d=1:d=2,g+=d,g>l&&(h+=e,g=d),h+=m);return h}static clearLine(t){return t=t.replace(`
`,""),t=t.replace("<br>",""),t.replace("</br>","")}static isHtml(t){let e=t.indexOf("<"),l=t.indexOf(">");return e!=-1&&l!=-1&&e<l}static insertStr(t,e=`
`,l=4,s=1){let n="",d="",r=0;for(s<=0&&(s=int.MAX_VALUE),l<=0&&(l=1);r<s;)d=t.substr(r*l,l),r++,d.length!=l&&(n+=d),d+=e,n+=d;return n+t.substr(r*l)}static getGlobalAttValue_byID(t,e=0){return t["id_"+e]}static setObjAttributeValue(t,e,l){for(let s=0;s<e.length;s++)t[e[s][l]]=e[s];return t}static getObjAttributeValue(t,e){return t[e]==null&&t[e]==null?null:t[e]}static isNullAndUndefined(t){return t==null||t==null}static isNullForArray(t){return!(t!=null&&t.length>0)}static addObjectNewAtt(t,e){let l=null;if(!pe.isNullAndUndefined(e))for(l in e)t[l]=e[l];return t}static isSameDate(t,e){return!t||!e?!1:t.getUTCFullYear()==e.getUTCFullYear()&&t.getUTCMonth()==e.getUTCMonth()&&t.getUTCDate()==e.getUTCDate()}static getRandom(t,e){let l=0;return t==e?t:(t>e&&(l=t,t=e,e=l),l=e-t+1,Math.floor(t+Math.random()*l))}static replaceString(t,e,l){let s=new RegExp(e,"g");return t.replace(s,l)}static getDateSecond(t){return Math.floor(t.getTime()*.001)}static isNoChildrenInArr(t){let e=!1;return t!=null&&t.length>0?e=!1:e=!0,e}static isNoChildrenInObj(t){let e=0,l=null,s=!0;if(t){e=0;for(l in t)e++;e>0&&(s=!1)}return s}static toString(t,e=0,l=!1){let s=0,n=0,d=null,r="";if(e++,t==null)return"null";let m=typeof t,h=0;switch(m){case"number":return t.toString()+"";case"string":return'"'+t+'"';case"object":if(t instanceof Array){if(h=pe.getElementNum(t),h>1)for(e>1&&(r+=`
`),n=0;n<e-1;n++)r+="	";for(r+="[",s=0;s<t.length;s++){if(h>1)for(r+=`
`,n=0;n<e;n++)r+="	";r+=toString(t[s],e),r+=","}if(h>0&&(r=r.slice(0,r.length-1)),h>1)for(r+=`
`,n=0;n<e-1;n++)r+="	";r+="]"}else if(t instanceof Date)r="new Date("+t.getTime()+")";else{if(h=pe.getElementNum(t),h>1)for(e>1&&(r+=`
`),n=0;n<e-1;n++)r+="	";r+="{";for(d in t){if(h>1)for(r+=`
`,n=0;n<e;n++)r+="	";!isNaN(Number(d.slice(0,1)))||d.search(/[^a-zA-Z0-9_]/)!=-1?r+='"'+d+'":'+pe.toString(t[d],e):r+=d+":"+pe.toString(t[d],e),r+=","}if(h>0&&(r=r.slice(0,r.length-1)),h>1)for(r+=`
`,n=0;n<e-1;n++)r+="	";r+="}"}break;case"boolean":return t.toString()+""}return r}static getTodayEndUTCTime(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),23,59,59)}static replaceAllBySplit(t,e,l){return t==null?null:t.split(e).join(l)}static formatNumberToString(t){let e;return t>=1e3&&t<=9999?(t=Math.floor(t*.001),e=t.toString()+"千"):t>=1e4?(t=Math.floor(t*1e-4),e=t.toString()+"万"):e=t.toString(),e}};a(pe,"DEFAULT","default");let $t=pe;const Qe=class Qe{static getLanguageStr(t,...e){let l=null,s=null,n="";if(N.$_global_language_str!=null&&(N.$_global_language_str.getElementsByTagName("id"+t)[0]!=null?N.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str")=="CHILD2010"?n=N.$_global_language_str.getElementsByTagName("id"+t)[0].children().toString():n=N.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str"):n=null),n.length<=0)return"";let d=n.search("%%");for(;d!=-1;)s=n.slice(d,d+6),n=n.replace(s,Qe.getLanguageStr(parseInt(s.slice(2)))),d=n.search("%%");for(let r=0;r<e.length;r++)l="%"+r,n=$t.replaceString(n,l,e[r]);return n}static getDataProfileTxt(t){let e=null,l=!1,s=null,n=null,d=null,r=t;return t&&(e=String(t),l=e.indexOf(Qe.INTER_CONFIG_SPLIT_CHAR)>-1,s=null,n="",d="",l?(s=e.split(Qe.INTER_CONFIG_SPLIT_CHAR),n=s[0],d=s[1],N.$_global_dataProfile_txt!=null?(N.$_global_dataProfile_txt.getElementsByTagName(n)[0]!=null?r=N.$_global_dataProfile_txt.getElementsByTagName(n)[0].getAttribute("s").toString():r=d,r=r.replace(/\\n/g,`
`)):r=d):r=e,s=null,e="",n="",d=""),r}};a(Qe,"INTER_CONFIG_SPLIT_CHAR","^");let _=Qe;const de=class de{constructor(t){a(this,"typeId");a(this,"kindId");a(this,"id");a(this,"name");a(this,"info");a(this,"help");this.typeId=t[de.DATA_TYPE_ID],this.kindId=t[de.DATA_KIND_ID],this.id=t[de.DATA_ID],this.name=_.getDataProfileTxt(t[de.DATA_NAME]),this.info=_.getDataProfileTxt(t[de.DATA_INFO]),this.help=t[de.DATA_HELP]?_.getDataProfileTxt(t[de.DATA_HELP]):""}};a(de,"DATA_TYPE_ID","typeId"),a(de,"DATA_KIND_ID","kindId"),a(de,"DATA_ID","id"),a(de,"DATA_NAME","name"),a(de,"DATA_INFO","info"),a(de,"DATA_HELP","help");let me=de;const ee=class ee extends me{constructor(e){super(e);a(this,"res");a(this,"resColor");e[ee.DATA_RESOURCE_CLASS]==null?this.res=e[me.DATA_ID]:this.res=e[ee.DATA_RESOURCE_CLASS],this.resColor=e[ee.DATA_RESOURCE_COLOR_CLASS]}};a(ee,"TYPE_MONSTER","wolf"),a(ee,"TYPE_TOWER","tower"),a(ee,"TYPE_WALL","wall"),a(ee,"TYPE_BARRIER","barrier"),a(ee,"TYPE_ENTRANCE","typeEntrance"),a(ee,"TYPE_EXPORT","typeExport"),a(ee,"TYPE_BOX","box"),a(ee,"TYPE_GEM_ITEM","gem"),a(ee,"TYPE_TRAP_ITEM","snarp"),a(ee,"TYPE_CARD_ITEM","card"),a(ee,"TYPE_WOLF_CARD_ITEM","wc"),a(ee,"TYPE_TAME_ITEM","tame"),a(ee,"TYPE_FIX_ITEM","bomb"),a(ee,"ID_SPADE_ITEM","mc"),a(ee,"ID_GEM_HAMMER","gem_hammer"),a(ee,"ID_GEM_OPENER","gem_opener"),a(ee,"DATA_RESOURCE_CLASS","res"),a(ee,"DATA_RESOURCE_COLOR_CLASS","resColor");let Se=ee;class Ze{constructor(){a(this,"m_manager",{});this.clearData()}getDataById(t){return this.m_manager[t]}get manager(){return this.m_manager}clearData(){this.m_manager=new Object}}const H=class H extends Se{constructor(e){super(e);a(this,"scoreMax");a(this,"populationMax");a(this,"hardA");a(this,"hardB");a(this,"passBy");a(this,"unkennelDelay");a(this,"unkennelRule");a(this,"bossList");a(this,"monsterList");a(this,"teleportRule");this.scoreMax=e[H.DATA_SCORE_MAX]?e[H.DATA_SCORE_MAX]:H.DEFAULT_SCORE_MAX,this.populationMax=e[H.DATA_POPULATION_MAX]?e[H.DATA_POPULATION_MAX]:H.DEFAULT_POPULATION_MAX,this.hardA=e[H.DATA_HARD_A],this.hardB=e[H.DATA_HARD_B],this.passBy=e[H.DATA_PASS_BY],this.unkennelDelay=e[H.DATA_UNKENNEL_RATE],this.unkennelRule=e[H.DATA_UNKENNEL_RULE],this.bossList=e[H.DATA_BOSS_LIST],this.monsterList=e[H.DATA_MONSTER_LIST]?e[H.DATA_MONSTER_LIST].map(l=>l[1]):[],this.teleportRule=e[H.DATA_TELEPORT_RULE]}getDifficultyLevel(e){return Math.sqrt(this.hardA+this.hardB*e)}calcPKGold(e){const l=this.populationMax;return Math.round((2+1.07*l)*Math.pow(e/.39,2/3))}calcPKExp(e){const l=this.populationMax;return Math.round((3.5+.14*l)*Math.pow(e/.39,2/3))}calcAccumulative(){let e=0,l=0;for(let s=0;s<=mapData.value.scoreMax;s+=2){let n=Math.sqrt(mapData.value.hardA+mapData.value.hardB*s);e+=calcPKGold(n),l+=calcPKExp(n)}return{gold:e,exp:l}}};a(H,"DEFAULT_SCORE_MAX",100),a(H,"DEFAULT_POPULATION_MAX",10),a(H,"RULE_MULTICAST",1),a(H,"DATA_SCORE_MAX","pass_score"),a(H,"DATA_POPULATION_MAX","pop_max"),a(H,"DATA_HARD_A","yield_val"),a(H,"DATA_HARD_B","hard_ness"),a(H,"DATA_PASS_BY","passBy"),a(H,"DATA_UNKENNEL_RATE","interval"),a(H,"DATA_UNKENNEL_RULE","interval_rule"),a(H,"DATA_BOSS_LIST","boss"),a(H,"DATA_MONSTER_LIST","wolf_proportion"),a(H,"DATA_TELEPORT_RULE","teleport_rule"),a(H,"DATA_DEBUG","debug");let ct=H;const Le=class Le extends Ze{constructor(){super(),Le.onlyExample=this,this.loadData(N.$_map_Obj)}static getOnlyExample(){return Le.onlyExample==null&&(Le.onlyExample=new Le),Le.onlyExample}loadData(t){for(const e in t){const l=t[e];l[me.DATA_ID]=e,this.m_manager[e]=new ct(t[e])}}getData(t){return this.getDataById(t)}};a(Le,"DATA_COUNT",6),a(Le,"onlyExample");let Et=Le;class ht{constructor(){a(this,"m_data");this.m_data=new me({})}get baseData(){return this.m_data}}class rs extends ht{constructor(){super()}}class ae extends ht{constructor(e,l=!0){super();a(this,"score",0);a(this,"isDream",!1);this.m_data=Et.getOnlyExample().getData(e)}static getMapData(e){return Et.getOnlyExample().getData(e)}get gameMapData(){return this.m_data}get canUnkennelAdjust(){return!1}}a(ae,"DEFEND_MAP_1","mfx1"),a(ae,"ENDLESS_MAP_1","m11"),a(ae,"currentMap");function os(u,t){let e=u.toFixed(8),l=e.indexOf(".");return l==-1||e.length-l-1<=t?e:u.toFixed(t).replace(/\.?0+$/,"")}function Bt(u,t=0,e=!1,l="14",s=""){return`<span style="color:#${t.toString(16).padStart(6,"0")};${e?"font-weight:bold;":""}${l?`font-size:${l};`:""}${s?`font-family:${s};`:""}">${u.replaceAll(`
`,"<br>")}</span>`}function us(u){return Math.floor(u/3600)+":"+Math.floor(u/60%60).toString().padStart(2,"0")+":"+(u%60).toString().padStart(2,"0")}class $ extends Se{constructor(t){super(t)}}a($,"KIND_HIT","hit"),a($,"KIND_INVASION","invasion"),a($,"KIND_TELEPORT","teleport"),a($,"KIND_BUFF_TOP","buffTop"),a($,"KIND_BUFF_MID","buffMid"),a($,"KIND_BUFF_BOT","buffBot"),a($,"KIND_MAGIC","effectMagic"),a($,"KIND_PATH","effectPath"),a($,"KIND_CRIT","effectCrit"),a($,"KIND_SUMMON","effectSummon"),a($,"KIND_CLOUD","effectCloud"),a($,"KIND_MIRROR","effectMirror"),a($,"KIND_CURE","effectCure"),a($,"KIND_CURE_ONE","effectCureOne"),a($,"KIND_SNEER","effectSneer"),a($,"KIND_LINKS","effectLinks"),a($,"KIND_RELIVE","effectRelive"),a($,"KIND_SUICIDE","effectSuicide"),a($,"KIND_BLINK_IN","effectBlinkIn"),a($,"KIND_BLINK_OUT","effectBlinkOut"),a($,"KIND_LIGHTNING","lightning"),a($,"KIND_FIELD_ATTACK","allAttack"),a($,"KIND_FIELD_ATTACK_AOE","allAttackAOE"),a($,"KIND_CUSS","effectCuss"),a($,"KIND_CUSS_BREAK","effectCussBreak"),a($,"KIND_SIGN_SUMMON","signSummon"),a($,"KIND_SIGN_CURE","signCure"),a($,"KIND_SIGN_CLOUD","signCloud"),a($,"KIND_SIGN_SHIELD","signShield"),a($,"KIND_SIGN_TRANSFORM","signTransform"),a($,"KIND_BOSS","effectBoss");const be=class be extends Se{constructor(e){super(e);a(this,"parameter");a(this,"levels");this.parameter=e[be.DATA_PARAMETER],this.levels=e[be.DATA_LEVELS]}getLevelParam(e,l){return this.parameter!=null?this.parameter[l]:this.levels!=null?(e=Math.min(Math.max(0,e-1),this.levels.length-1),this.levels[e][l]):null}hasLevel(){return this.parameter==null}};a(be,"TYPE_TOWER_SKILL","typeTowerSkill"),a(be,"TYPE_MONSTER_SKILL","typeMonsterSkill"),a(be,"DATA_PARAMETER","params"),a(be,"DATA_LEVELS","levels");let je=be;class D extends je{constructor(t){super(t),t[me.DATA_TYPE_ID]=je.TYPE_TOWER_SKILL}}a(D,"KIND_AURA","Aura"),a(D,"KIND_CHANGE_BULLET","Bultype"),a(D,"KIND_CHANGE_DAMAGE","ChangeDam"),a(D,"KIND_CHANGE_RATE","ChangeRate"),a(D,"KIND_CHANGE_RANGE","ChangeRange"),a(D,"KIND_FIELD_ATTACK","ALLAP"),a(D,"KIND_DIVIDED_ATTACK","DivAP"),a(D,"KIND_SCATTER_ATTACK","ScaAP"),a(D,"KIND_COMBO_ATTACK","ComAP"),a(D,"KIND_GUIDED_BULLET","GuidedBul"),a(D,"KIND_ATTACK_RATE","AttackRate"),a(D,"KIND_AOE_ATTACK","AoeAP"),a(D,"KIND_THROUGHOUT_ATTACK","ThoAP"),a(D,"KIND_BOUNCE_ATTACK","BouAP"),a(D,"KIND_FLOAT_DAMAGE","FloatDam"),a(D,"KIND_CRIT","Crit"),a(D,"KIND_REDUCED_DEFENSE","RedDef"),a(D,"KIND_POISON","Poison"),a(D,"KIND_SLOW","Slow"),a(D,"KIND_BURN_COLD","BC"),a(D,"KIND_BEAT_BACK","Beat"),a(D,"KIND_SILENCE","Silence"),a(D,"KIND_VERTIGO","Vertigo"),a(D,"KIND_INTIMIDATE","Intimidate"),a(D,"KIND_CUSS","Cuss"),a(D,"KIND_BURN","Burn"),a(D,"KIND_COLD","Cold");const I=class I extends je{constructor(t){super(t),t[me.DATA_TYPE_ID]=je.TYPE_MONSTER_SKILL}static get allMonsterSkill(){return[I.KIND_FLY,I.KIND_AIRBORNE,I.KIND_ISOLATION,I.KIND_RELIVE,I.KIND_SUICIDE,I.KIND_REINCARNATE,I.KIND_RESIST_FIRE,I.KIND_RESIST_FROST,I.KIND_RESIST_POISON,I.KIND_RESIST_BEAT,I.KIND_RESIST_SILENCE,I.KIND_RESIST_VERTIGO,I.KIND_RESIST_CRIT,I.KIND_RESIST_LIGHT,I.KIND_RESIST_STRSMOOTH,I.KIND_SLOWF,I.KIND_WEAK_FIRE,I.KIND_WEAK_FROST,I.KIND_WEAK_POISON,I.KIND_WEAK_BEAT,I.KIND_WEAK_SILENCE,I.KIND_WEAK_VERTIGO,I.KIND_WEAK_CRIT,I.KIND_WEAK_LIGHT,I.KIND_RUN,I.KIND_MIRROR,I.KIND_SUMMON,I.KIND_CLOUD,I.KIND_CURE,I.KIND_BLINK,I.KIND_HIDE,I.KIND_SHIELD,I.KIND_SNEER,I.KIND_TRANSFORM,I.KIND_LINKS]}};a(I,"EVENT_RED",1),a(I,"EVENT_YELLOW",2),a(I,"EVENT_GREEN",3),a(I,"EVENT_FULL",4),a(I,"EVENT_INTIMIDATE",20),a(I,"EVENT_VERTIGO",21),a(I,"EVENT_SILENCE",22),a(I,"EVENT_SLOW",23),a(I,"EVENT_REDUCED_DEFENSE",24),a(I,"EVENT_POISON",25),a(I,"EVENT_BURN",26),a(I,"EVENT_COLD",27),a(I,"EVENT_HIT",40),a(I,"EVENT_CRIT",41),a(I,"EVENT_BEAT_BACK",42),a(I,"EVENT_FRIENT_DIE",43),a(I,"EVENT_DIE",44),a(I,"KIND_FLY","fly"),a(I,"KIND_AIRBORNE","airborne"),a(I,"KIND_ISOLATION","isolation"),a(I,"KIND_RELIVE","revive"),a(I,"KIND_SUICIDE","burst"),a(I,"KIND_REINCARNATE","reborn"),a(I,"KIND_SLOWF","slowf"),a(I,"KIND_RESIST_FIRE","resistFire"),a(I,"KIND_RESIST_FROST","resistFrost"),a(I,"KIND_RESIST_POISON","resistPoison"),a(I,"KIND_RESIST_SLOW","resistSlow"),a(I,"KIND_RESIST_BEAT","resistBeat"),a(I,"KIND_RESIST_SILENCE","resistSilence"),a(I,"KIND_RESIST_VERTIGO","resistVertigo"),a(I,"KIND_RESIST_CRIT","resistCrit"),a(I,"KIND_RESIST_LIGHT","resistLight"),a(I,"KIND_RESIST_INTIMIDATE","resistIntimidate"),a(I,"KIND_WEAK_FIRE","weakFire"),a(I,"KIND_WEAK_FROST","weakFrost"),a(I,"KIND_WEAK_POISON","weakPoison"),a(I,"KIND_WEAK_SLOW","weakSlow"),a(I,"KIND_WEAK_BEAT","weakBeat"),a(I,"KIND_WEAK_SILENCE","weakSilence"),a(I,"KIND_WEAK_VERTIGO","weakVertigo"),a(I,"KIND_WEAK_CRIT","weakCrit"),a(I,"KIND_WEAK_LIGHT","weakLight"),a(I,"KIND_WEAK_INTIMIDATE","weakIntimidate"),a(I,"KIND_RESIST_STRSMOOTH","strsmooth"),a(I,"KIND_RUN","sprint"),a(I,"KIND_MIRROR","divide"),a(I,"KIND_SUMMON","summon"),a(I,"KIND_CLOUD","cloud"),a(I,"KIND_CURE","massTreatment"),a(I,"KIND_BLINK","blink"),a(I,"KIND_HIDE","invisible"),a(I,"KIND_SHIELD","shield"),a(I,"KIND_SNEER","taunt"),a(I,"KIND_TRANSFORM","morph"),a(I,"KIND_LINKS","links");let f=I;const ce=class ce extends Ze{constructor(){super(),ce.onlyExample=this,this.loadData(N.$_skillAtt_Obj)}static getOnlyExample(){return ce.onlyExample==null&&(ce.onlyExample=new ce),ce.onlyExample}loadData(t){for(const e in t[ce.TOWER_SKILL]){const l=t[ce.TOWER_SKILL][e];l[me.DATA_ID]=e,this.m_manager[e]=new D(l)}for(const e in t[ce.MONSTER_SKILL]){const l=t[ce.MONSTER_SKILL][e];l[me.DATA_ID]=e,this.m_manager[e]=new f(l)}}getData(t){return this.getDataById(t)}};a(ce,"onlyExample"),a(ce,"TOWER_SKILL","towerSkill"),a(ce,"MONSTER_SKILL","monsterSkill"),a(ce,"TRAP_SKILL","trapSkill");let Ht=ce;const Be=class Be extends me{constructor(e){super(e);a(this,"skillsList");e[Be.DATA_SKILLS_LIST]instanceof Array?this.skillsList=e[Be.DATA_SKILLS_LIST]:e[Be.DATA_SKILLS_LIST]instanceof String&&(this.skillsList=[e[Be.DATA_SKILLS_LIST]])}};a(Be,"DATA_SKILLS_LIST","skills");let Gt=Be;const Ne=class Ne extends Ze{constructor(){super(),Ne.onlyExample=this,this.loadData(N.$_skillPackage_Obj)}static getOnlyExample(){return Ne.onlyExample==null&&(Ne.onlyExample=new Ne),Ne.onlyExample}loadData(t){for(const e in t){const l=t[e];l[me.DATA_ID]=e,this.m_manager[e]=new Gt(t[e])}}getData(t){return this.getDataById(t)}};a(Ne,"onlyExample");let Wt=Ne;class P{static toPercentage(t){return String(Math.round(t*100*100)/100)+"%"}static toGridStr(t){return String(Math.round(t/100)/10)}static getPosID(t,e){return t+"_"+e}}class $l extends ht{constructor(e,l,s=!1){super();a(this,"level",0);a(this,"index",0);a(this,"enabled",!0);a(this,"m_skillInfo","");a(this,"m_nextLevelSkillInfo","");a(this,"skillTag1","");a(this,"skillTag2","");a(this,"skillTag3","");a(this,"nextLevelSkillTag1","");a(this,"nextLevelSkillTag2","");a(this,"nextLevelSkillTag3","");a(this,"m_updateFunction",()=>{});if(s){this.m_data=new Tt({id:e+"_0",kindId:e});return}this.m_data=Ht.getOnlyExample().getData(e),this.level=l,this.enabled=!0}get data(){return this.m_data}get skillInfo(){return this.m_updateFunction!=null&&this.m_updateFunction(),this.m_skillInfo||(this.m_skillInfo=""),this.m_skillInfo}get nextLevelSkillInfo(){return this.m_nextLevelSkillInfo||(this.m_nextLevelSkillInfo=""),this.m_nextLevelSkillInfo}}class G extends $l{constructor(e,l,s){super(e,l);a(this,"tower");this.tower=s}static create(e,l,s){const n=new G("",l,s);return n.m_data=e,n}shouldTransferBullet(){switch(this.data.kindId){case D.KIND_GUIDED_BULLET:case D.KIND_ATTACK_RATE:case D.KIND_AOE_ATTACK:case D.KIND_THROUGHOUT_ATTACK:case D.KIND_BOUNCE_ATTACK:case D.KIND_FLOAT_DAMAGE:case D.KIND_CRIT:case D.KIND_REDUCED_DEFENSE:case D.KIND_POISON:case D.KIND_SLOW:case D.KIND_BURN_COLD:case D.KIND_BEAT_BACK:case D.KIND_SILENCE:case D.KIND_VERTIGO:case D.KIND_INTIMIDATE:case D.KIND_CUSS:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case D.KIND_AURA:return new Xt(this.data.id,this.level,this.tower);case D.KIND_CHANGE_BULLET:return new Bl(this.data.id,this.level,this.tower);case D.KIND_CHANGE_DAMAGE:return new Hl(this.data.id,this.level,this.tower);case D.KIND_CHANGE_RATE:return new Wl(this.data.id,this.level,this.tower);case D.KIND_CHANGE_RANGE:return new Gl(this.data.id,this.level,this.tower);case D.KIND_FIELD_ATTACK:return new tl(this.data.id,this.level,this.tower);case D.KIND_DIVIDED_ATTACK:return new Qt(this.data.id,this.level,this.tower);case D.KIND_SCATTER_ATTACK:return new sl(this.data.id,this.level,this.tower);case D.KIND_COMBO_ATTACK:return new qt(this.data.id,this.level,this.tower);case D.KIND_GUIDED_BULLET:return new ms(this.data.id,this.level,this.tower);case D.KIND_ATTACK_RATE:return new ds(this.data.id,this.level,this.tower);case D.KIND_AOE_ATTACK:return new jt(this.data.id,this.level,this.tower);case D.KIND_THROUGHOUT_ATTACK:return new rl(this.data.id,this.level,this.tower);case D.KIND_BOUNCE_ATTACK:return new zt(this.data.id,this.level,this.tower);case D.KIND_FLOAT_DAMAGE:return new _s(this.data.id,this.level,this.tower);case D.KIND_CRIT:return new Jt(this.data.id,this.level,this.tower);case D.KIND_REDUCED_DEFENSE:return new al(this.data.id,this.level,this.tower);case D.KIND_POISON:return new ll(this.data.id,this.level,this.tower);case D.KIND_SLOW:return new il(this.data.id,this.level,this.tower);case D.KIND_BURN_COLD:return new cs(this.data.id,this.level,this.tower);case D.KIND_BEAT_BACK:return new Yt(this.data.id,this.level,this.tower);case D.KIND_SILENCE:return new nl(this.data.id,this.level,this.tower);case D.KIND_VERTIGO:return new ol(this.data.id,this.level,this.tower);case D.KIND_INTIMIDATE:return new el(this.data.id,this.level,this.tower);case D.KIND_CUSS:return new Zt(this.data.id,this.level,this.tower);default:return this}}}const we=class we extends G{constructor(t,e,l){super(t,e,l),this.index=1050,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3001,this.radiiInfo,P.toPercentage(this.nextEffectRate))}}get radii(){return this.data.getLevelParam(this.level,0)+we.DEFAULT_RADII}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+we.DEFAULT_NEXT_EFFECT_RATE,we.MAX_NEXT_EFFECT_RATE)}get radiiInfo(){return this.radii.toString()}};a(we,"DEFAULT_RADII",0),a(we,"DEFAULT_NEXT_EFFECT_RATE",0),a(we,"MAX_NEXT_EFFECT_RATE",1);let jt=we;class ds extends G{constructor(t,e,l){super(t,e,l),this.index=1040,this.m_updateFunction=()=>{let s=this.floorRate,n=this.airRate;s<=0&&n>0?this.m_skillInfo=_.getLanguageStr(3029):n<=0&&s>0?this.m_skillInfo=_.getLanguageStr(3028):s!=1?this.m_skillInfo=_.getLanguageStr(3030,P.toPercentage(s)):n!=1&&(this.m_skillInfo=_.getLanguageStr(3031,P.toPercentage(n)))}}get floorRate(){return this.data.getLevelParam(this.level,0)}get airRate(){return this.data.getLevelParam(this.level,1)}}const vt=class vt extends G{constructor(t,e,l){super(t,e,l),this.index=1500,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3002)}}get spId(){return this.data.getLevelParam(this.level,0)}get spLevel(){return this.data.getLevelParam(this.level,1)}get radii(){return this.data.getLevelParam(this.level,2)*this.level+vt.DEFAULT_RADII}};a(vt,"DEFAULT_RADII",1e3);let Xt=vt;const He=class He extends G{constructor(t,e,l){super(t,e,l),this.index=1060,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3003,P.toPercentage(this.chances),this.distanceInfo)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+He.DEFAULT_CHANCES,1),0)}get beatBackDistance(){return this.data.getLevelParam(this.level,1)+He.DEFAULT_BEAT_BACK_DISTANCE}get distanceInfo(){return this.beatBackDistance.toString()}};a(He,"SHIFT_TIME",.2),a(He,"DEFAULT_CHANCES",0),a(He,"DEFAULT_BEAT_BACK_DISTANCE",0);let Yt=He;const ve=class ve extends G{constructor(t,e,l){super(t,e,l),this.index=1070,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3004,this.bounceNum,P.toPercentage(1-this.nextEffectRate),this.attackInfo)}}get bounceNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+ve.DEFAULT_BOUNCE_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)*this.level+ve.DEFAULT_NEXT_EFFECT_RATE,ve.MAX_NEXT_EFFECT_RATE)}get attackInfo(){var e;let t=null;return((e=this.tower)==null?void 0:e.newBullet().bulletData.hitEffectId)==$.KIND_LIGHTNING?t=_.getLanguageStr(3516):t=_.getLanguageStr(3515),t}};a(ve,"DEFAULT_BOUNCE_NUM",.5),a(ve,"DEFAULT_NEXT_EFFECT_RATE",.35),a(ve,"MAX_NEXT_EFFECT_RATE",1),a(ve,"MAX_DISTANCE",3e3);let zt=ve;class cs extends G{constructor(t,e,l){super(t,e,l),this.index=1080,this.m_updateFunction=()=>{this.burnColdValue>0?this.m_skillInfo=_.getLanguageStr(3005,this.burn):this.m_skillInfo=_.getLanguageStr(3006,P.toPercentage(this.cold))}}get burnColdValue(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return this.data.getLevelParam(this.level,0)<0&&(e=-e),Math.floor(e)}get burn(){return Math.floor(Math.sqrt(this.burnColdValue))}get cold(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return Math.pow(e,.25)*.03}}class Bl extends G{constructor(t,e,l){super(t,e,l)}get bulletId(){return this.data.getLevelParam(this.level,0)}}class Hl extends G{constructor(t,e,l){super(t,e,l),this.index=1e3,this.m_updateFunction=()=>{this.damageRate>1?this.m_skillInfo=_.getLanguageStr(3007,P.toPercentage(this.damageRate-1)):this.damageRate<1&&(this.m_skillInfo=_.getLanguageStr(3008,P.toPercentage(1-this.damageRate)))}}get damageAdd(){return this.data.getLevelParam(this.level,0)*this.level}get damageRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get damageA(){return this.data.getLevelParam(this.level,2)}get damageB(){return this.data.getLevelParam(this.level,3)}get damageC(){return this.data.getLevelParam(this.level,4)}isChangeBase(){return!(this.damageA==0&&this.damageB==0&&this.damageC==0)}}class Gl extends G{constructor(t,e,l){super(t,e,l),this.index=1010,this.m_updateFunction=()=>{this.rangeRate>1?this.m_skillInfo=_.getLanguageStr(3009,P.toPercentage(this.rangeRate-1)):this.m_skillInfo=_.getLanguageStr(3010,P.toPercentage(1-this.rangeRate)),this.rangeMin>0&&(this.m_skillInfo+=_.getLanguageStr(3027))}}get rangeAdd(){return this.data.getLevelParam(this.level,0)*this.level}get rangeRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get range(){return this.data.getLevelParam(this.level,2)}get rangeMin(){return this.data.getLevelParam(this.level,3)}isChangeBase(){return this.range!=0}}class Wl extends G{constructor(t,e,l){super(t,e,l),this.index=1020,this.m_updateFunction=()=>{this.rateRate>1?this.m_skillInfo=_.getLanguageStr(3011,P.toPercentage(this.rateRate-1)):this.m_skillInfo=_.getLanguageStr(3012,P.toPercentage(1-this.rateRate))}}get rateRate(){return this.data.getLevelParam(this.level,0)+this.data.getLevelParam(this.level,1)*this.level+1}get rate(){return this.data.getLevelParam(this.level,2)}isChangeBase(){return this.rate!=0}}const Ge=class Ge extends G{constructor(t,e,l){super(t,e,l),this.index=1090,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3013,P.toPercentage(this.chances),this.extraBullet+1)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)+Ge.DEFAULT_CHANCES,1),0)}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,1)*this.level+Ge.DEFAULT_EXTRA_BULLET)}};a(Ge,"DEFAULT_CHANCES",0),a(Ge,"DEFAULT_EXTRA_BULLET",.5),a(Ge,"DEFAULT_RATE",.08);let qt=Ge;const Re=class Re extends G{constructor(t,e,l){super(t,e,l),this.index=1100,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3014,P.toPercentage(this.chances),this.damageEffectRate.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Re.DEFAULT_CHANCES,1),0)}get damageEffectRate(){return this.data.getLevelParam(this.level,1)*this.level+Re.DEFAULT_DAMAGE_EFFECT_RATE+1}get buffEffectRate(){return this.data.getLevelParam(this.level,2)*this.level+Re.DEFAULT_BUFF_EFFECT_RATE+1}};a(Re,"DEFAULT_CHANCES",.1),a(Re,"DEFAULT_DAMAGE_EFFECT_RATE",.5),a(Re,"DEFAULT_BUFF_EFFECT_RATE",.1);let Jt=Re;const et=class et extends G{constructor(t,e,l){super(t,e,l),this.index=1110,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3026,Math.round(this.cussPower),this.duration.toFixed(0))}}get cussPower(){return this.data.getLevelParam(this.level,0)*this.level*this.tower.level+et.DEFAULT_CUSS_POWER}get duration(){return this.data.getLevelParam(this.level,1)+et.DEFAULT_DURATION}};a(et,"DEFAULT_CUSS_POWER",0),a(et,"DEFAULT_DURATION",0);let Zt=et;const Dt=class Dt extends G{constructor(t,e,l){super(t,e,l),this.index=1120,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3015,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Dt.DEFAULT_EXTRA_BULLET)}};a(Dt,"DEFAULT_EXTRA_BULLET",.5);let Qt=Dt;class _s extends G{constructor(t,e,l){super(t,e,l),this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3017)}}get floatDamageRate(){return this.data.getLevelParam(this.level,0)*this.level}}class ms extends G{constructor(t,e,l){super(t,e,l),this.m_skillInfo=""}get guideRatio(){return this.data.getLevelParam(this.level,0)}get bulletSpeedRate(){return this.data.getLevelParam(this.level,1)+1}get bulletAccSpeed(){return this.data.getLevelParam(this.level,2)}get guideInfo(){let t=null,e=this.guideRatio;return e<.1?t=_.getLanguageStr(3500):e<.2?t=_.getLanguageStr(3501):e<.3?t=_.getLanguageStr(3502):e<.4?t=_.getLanguageStr(3503):t=_.getLanguageStr(3504),t}}const tt=class tt extends G{constructor(t,e,l){super(t,e,l),this.index=1140,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3019,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+tt.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+tt.DEFAULT_DURATION}};a(tt,"DEFAULT_CHANCES",.05),a(tt,"DEFAULT_DURATION",0);let el=tt;const St=class St extends G{constructor(t,e,l){super(t,e,l),this.index=1130,this.m_skillInfo=_.getLanguageStr(3016)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+St.DEFAULT_CHANCES,1),0)}};a(St,"DEFAULT_CHANCES",.05);let tl=St;const lt=class lt extends G{constructor(e,l,s){super(e,l,s);a(this,"m_poisonRate",-1);this.index=1150,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3e3,Math.round(this.poisonRate*this.tower.damage()),this.duration.toFixed(0))}}get poisonRate(){return this.m_poisonRate<0?this.data.getLevelParam(this.level,0)*this.level+lt.DEFAULT_POISON_RATE:this.m_poisonRate}set poisonRate(e){this.m_poisonRate<0&&(this.m_poisonRate=e)}get duration(){return this.data.getLevelParam(this.level,1)+lt.DEFAULT_DURATION}};a(lt,"DEFAULT_POISON_RATE",0),a(lt,"DEFAULT_DURATION",0);let ll=lt;const at=class at extends G{constructor(t,e,l){super(t,e,l),this.index=1160,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3020,P.toPercentage(this.reducedDefenseRate),this.duration.toFixed(1))}}get reducedDefenseRate(){return this.data.getLevelParam(this.level,0)*this.level+at.DEFAULT_REDUCED_DEFENSE_RATE}get duration(){return this.data.getLevelParam(this.level,1)+at.DEFAULT_DURATION}};a(at,"DEFAULT_REDUCED_DEFENSE_RATE",.1),a(at,"DEFAULT_DURATION",0);let al=at;const xt=class xt extends G{constructor(t,e,l){super(t,e,l),this.index=1170,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3021,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+xt.DEFAULT_EXTRA_BULLET)}};a(xt,"DEFAULT_EXTRA_BULLET",.5);let sl=xt;const st=class st extends G{constructor(t,e,l){super(t,e,l),this.index=1180,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3022,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+st.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+st.DEFAULT_DURATION}};a(st,"DEFAULT_CHANCES",.05),a(st,"DEFAULT_DURATION",0);let nl=st;const nt=class nt extends G{constructor(t,e,l){super(t,e,l),this.index=1190,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3023,P.toPercentage(this.slowRate),this.duration.toFixed(1))}}get slowRate(){return this.data.getLevelParam(this.level,0)*this.level+nt.DEFAULT_SLOW_RATE}get duration(){return this.data.getLevelParam(this.level,1)+nt.DEFAULT_DURATION}};a(nt,"DEFAULT_SLOW_RATE",.1),a(nt,"DEFAULT_DURATION",0);let il=nt;const Ce=class Ce extends G{constructor(t,e,l){super(t,e,l),this.index=1200,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3024,this.throughoutNum)}}get throughoutNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Ce.DEFAULT_THROUGHOUT_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Ce.DEFAULT_NEXT_EFFECT_RATE,Ce.MAX_NEXT_EFFECT_RATE)}};a(Ce,"DEFAULT_THROUGHOUT_NUM",.5),a(Ce,"DEFAULT_NEXT_EFFECT_RATE",0),a(Ce,"MAX_NEXT_EFFECT_RATE",1);let rl=Ce;const it=class it extends G{constructor(t,e,l){super(t,e,l),this.index=1210,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3025,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+it.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+it.DEFAULT_DURATION}};a(it,"DEFAULT_CHANCES",0),a(it,"DEFAULT_DURATION",0);let ol=it;const ie=class ie extends $l{constructor(e,l,s,n=!1){super(e,l,n);a(this,"monster");a(this,"m_levelMax",0);this.monster=s,this.m_data.typeId=je.TYPE_MONSTER_SKILL}static getKindName(e){switch(e){case f.KIND_FLY:return _.getLanguageStr(2507);case f.KIND_AIRBORNE:return _.getLanguageStr(2510);case f.KIND_RESIST_FIRE:return _.getLanguageStr(2515,_.getLanguageStr(2710));case f.KIND_RESIST_FROST:return _.getLanguageStr(2515,_.getLanguageStr(2711));case f.KIND_RESIST_POISON:return _.getLanguageStr(2515,_.getLanguageStr(2712));case f.KIND_RESIST_SLOW:return _.getLanguageStr(2515,_.getLanguageStr(2719));case f.KIND_RESIST_BEAT:return _.getLanguageStr(2515,_.getLanguageStr(2717));case f.KIND_RESIST_SILENCE:return _.getLanguageStr(2515,_.getLanguageStr(2722));case f.KIND_RESIST_VERTIGO:return _.getLanguageStr(2515,_.getLanguageStr(2715));case f.KIND_RESIST_CRIT:return _.getLanguageStr(2515,_.getLanguageStr(2716));case f.KIND_RESIST_LIGHT:return _.getLanguageStr(2515,_.getLanguageStr(2714));case f.KIND_RESIST_INTIMIDATE:return _.getLanguageStr(2515,_.getLanguageStr(2718));case f.KIND_RESIST_STRSMOOTH:return _.getLanguageStr(2723);case f.KIND_SLOWF:return _.getLanguageStr(2725);case f.KIND_WEAK_FIRE:return _.getLanguageStr(2516,_.getLanguageStr(2710));case f.KIND_WEAK_FROST:return _.getLanguageStr(2516,_.getLanguageStr(2711));case f.KIND_WEAK_POISON:return _.getLanguageStr(2516,_.getLanguageStr(2712));case f.KIND_WEAK_SLOW:return _.getLanguageStr(2516,_.getLanguageStr(2719));case f.KIND_WEAK_BEAT:return _.getLanguageStr(2516,_.getLanguageStr(2717));case f.KIND_WEAK_SILENCE:return _.getLanguageStr(2516,_.getLanguageStr(2722));case f.KIND_WEAK_VERTIGO:return _.getLanguageStr(2516,_.getLanguageStr(2715));case f.KIND_WEAK_CRIT:return _.getLanguageStr(2516,_.getLanguageStr(2716));case f.KIND_WEAK_LIGHT:return _.getLanguageStr(2516,_.getLanguageStr(2714));case f.KIND_WEAK_INTIMIDATE:return _.getLanguageStr(2516,_.getLanguageStr(2718));case f.KIND_ISOLATION:return _.getLanguageStr(2517);case f.KIND_RUN:return _.getLanguageStr(2500);case f.KIND_MIRROR:return _.getLanguageStr(2501);case f.KIND_SUMMON:return _.getLanguageStr(2502);case f.KIND_CLOUD:return _.getLanguageStr(2503);case f.KIND_CURE:return _.getLanguageStr(2504);case f.KIND_BLINK:return _.getLanguageStr(2505);case f.KIND_HIDE:return _.getLanguageStr(2506);case f.KIND_RELIVE:return _.getLanguageStr(2508);case f.KIND_SUICIDE:return _.getLanguageStr(2509);case f.KIND_SHIELD:return _.getLanguageStr(2511);case f.KIND_SNEER:return _.getLanguageStr(2512);case f.KIND_REINCARNATE:return _.getLanguageStr(2514);case f.KIND_TRANSFORM:return _.getLanguageStr(2513);case f.KIND_LINKS:return _.getLanguageStr(2727);default:return""}}get name(){return this.canLevelUp(1)?_.getLanguageStr(2416,this.data.name,this.level):this.data.name}get isDebuff(){return this.grade.indexOf(ie.RES_FG_X)!=-1}get skillSign(){return this.isDebuff?Bt(_.getLanguageStr(2422),0,!0,13):Bt(_.getLanguageStr(2421),16711680,!0,13)}get isDowerSkill(){return!1}get isLearnSkill(){return!1}getConflictStr(){let e=null,l=0,s=0,n=N.$_conflict_skill_kind,d="";for(l=0;l<n.length;l++)if(e=n[l],e.indexOf(this.data.kindId)!=-1)for(s=0;s<e.length;s++)e[s]!=this.data.kindId&&(d+=ie.getKindName(e[s]),d+=_.getLanguageStr(2406));return d.length>0&&(d=d.slice(0,d.length-1)),d}canLevelUp(e=-1){return e<0&&(e=this.level),e<this.levelMax}get levelMax(){if(this.m_levelMax<=0){const e=N.$_skill_lvup_spend,l=this.grade;if(e[l])for(const s in e[l])this.m_levelMax=Math.max(this.m_levelMax,parseInt(s))+1;else this.m_levelMax=1}return this.m_levelMax}levelUpSpend(e=-1){e<0&&(e=this.level);let l=N.$_skill_lvup_spend,s=this.grade;return l[s]&&l[s][String(e)]?l[s][String(e)]:null}get skillScore(){let e=N.$_skill_grade_score,l=this.grade;return e[l]&&e[l][String(this.level)]?e[l][String(this.level)]:1}get grade(){let e=this.data.id,l=e.indexOf("_");return l==-1?ie.RES_FG_X:e.slice(l+1,e.length)}isEventSkill(){switch(this.data.kindId){case f.KIND_RUN:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case f.KIND_FLY:return new fs(this.data.id,this.level,this.monster);case f.KIND_AIRBORNE:return new ul(this.data.id,this.level,this.monster);case f.KIND_RESIST_FIRE:case f.KIND_RESIST_FROST:case f.KIND_RESIST_POISON:case f.KIND_RESIST_SLOW:case f.KIND_RESIST_BEAT:case f.KIND_RESIST_SILENCE:case f.KIND_RESIST_VERTIGO:case f.KIND_RESIST_CRIT:case f.KIND_RESIST_LIGHT:case f.KIND_RESIST_INTIMIDATE:case f.KIND_RESIST_STRSMOOTH:case f.KIND_SLOWF:case f.KIND_WEAK_FIRE:case f.KIND_WEAK_FROST:case f.KIND_WEAK_POISON:case f.KIND_WEAK_SLOW:case f.KIND_WEAK_BEAT:case f.KIND_WEAK_SILENCE:case f.KIND_WEAK_VERTIGO:case f.KIND_WEAK_CRIT:case f.KIND_WEAK_LIGHT:case f.KIND_WEAK_INTIMIDATE:return new xe(this.data.id,this.level,this.monster);case f.KIND_ISOLATION:return new As(this.data.id,this.level,this.monster);case f.KIND_RUN:return new Is(this.data.id,this.level,this.monster);case f.KIND_MIRROR:return new jl(this.data.id,this.level,this.monster);case f.KIND_SUMMON:return new zl(this.data.id,this.level,this.monster);case f.KIND_CLOUD:return new ps(this.data.id,this.level,this.monster);case f.KIND_CURE:return new gs(this.data.id,this.level,this.monster);case f.KIND_BLINK:return new hs(this.data.id,this.level,this.monster);case f.KIND_HIDE:return new dl(this.data.id,this.level,this.monster);case f.KIND_RELIVE:return new Yl(this.data.id,this.level,this.monster);case f.KIND_SUICIDE:return new cl(this.data.id,this.level,this.monster);case f.KIND_SHIELD:return new Ts(this.data.id,this.level,this.monster);case f.KIND_SNEER:return new Ls(this.data.id,this.level,this.monster);case f.KIND_REINCARNATE:return new Xl(this.data.id,this.level,this.monster);case f.KIND_TRANSFORM:return new vs(this.data.id,this.level,this.monster);case f.KIND_LINKS:return new Es(this.data.id,this.level,this.monster);default:return this}}};a(ie,"RES_SKILL","skill_"),a(ie,"RES_FG_A","A"),a(ie,"RES_FG_B","B"),a(ie,"RES_FG_C","C"),a(ie,"RES_FG_Z","Z"),a(ie,"RES_FG_X","X"),a(ie,"RES_FG_0","0"),a(ie,"RES_BG","bg"),a(ie,"PHOTO_WIDTH",34),a(ie,"PHOTO_HEIGHT",34),a(ie,"PHOTO_ROUND",8);let _e=ie;class Te extends _e{constructor(t,e,l){super(t,e,l)}warmup(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cooldown(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}chances(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}eventType(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,3)}duration(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,4)}refreshTag(t=!1){this.skillTag1=this.getTagEventType(),this.nextLevelSkillTag1=this.getTagEventType(this.level+1),this.skillTag2=this.getTagCooldown(),this.nextLevelSkillTag2=this.getTagCooldown(this.level+1),t&&(this.skillTag3=this.getTagDuration(),this.nextLevelSkillTag3=this.getTagDuration(this.level+1))}getTagEventType(t=-1){let e=0;t<0&&(t=this.level);let l="",s=this.eventType(t);if(s.length!=4){for(e=0;e<s.length;e++)s[e]==f.EVENT_RED?l+=_.getLanguageStr(2402)+_.getLanguageStr(2406):s[e]==f.EVENT_YELLOW?l+=_.getLanguageStr(2403)+_.getLanguageStr(2406):s[e]==f.EVENT_GREEN?l+=_.getLanguageStr(2404)+_.getLanguageStr(2406):s[e]==f.EVENT_FULL&&(l+=_.getLanguageStr(2405)+_.getLanguageStr(2406));l=l.slice(0,l.length-1),l=_.getLanguageStr(2400,l)}return l}getTagCooldown(t=-1){return t<0&&(t=this.level),""+_.getLanguageStr(2401,this.cooldown(t))}getTagDuration(t=-1){return t<0&&(t=this.level),""+_.getLanguageStr(2407,this.duration(t))}}class ul extends _e{constructor(t,e,l){super(t,e,l),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2201)}}heightSpeed(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}pathLengthMin(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}pathLengthMax(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}}a(ul,"BALLOON","balloon"),a(ul,"DEFAULT_HEIGHT",2e3);class hs extends Te{constructor(t,e,l){super(t,e,l),this.index=100,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2303,P.toGridStr(this.range())),this.m_nextLevelSkillInfo=_.getLanguageStr(2303,P.toGridStr(this.range(this.level+1))),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}}class ps extends Te{constructor(t,e,l){super(t,e,l),this.index=110,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2302,this.cloudTime()),this.m_nextLevelSkillInfo=_.getLanguageStr(2302,this.cloudTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class gs extends Te{constructor(t,e,l){super(t,e,l),this.index=140,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2300,P.toGridStr(this.cureRange()),P.toPercentage(this.cureRate())),this.m_nextLevelSkillInfo=_.getLanguageStr(2300,P.toGridStr(this.cureRange(this.level+1)),P.toPercentage(this.cureRate(this.level+1))),this.refreshTag()}}cureRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cureRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class fs extends _e{constructor(t,e,l){super(t,e,l),this.index=90,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2200),this.m_nextLevelSkillInfo=_.getLanguageStr(2200)}}get flyHeight(){return this.data.getLevelParam(this.level,0)}}class dl extends Te{constructor(t,e,l){super(t,e,l),this.index=150,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2305,this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2305,this.duration(this.level+1)),this.refreshTag()}}}a(dl,"HIDE_TIME",1),a(dl,"HIDE_ALPHA",.1);class As extends _e{constructor(t,e,l){super(t,e,l),this.index=500,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2202)}}}class Es extends Te{constructor(t,e,l){super(t,e,l),this.index=116,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2728,P.toGridStr(this.range()),P.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2728,P.toGridStr(this.range(this.level+1)),P.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class jl extends Te{constructor(t,e,l){super(t,e,l),this.index=130,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2306,this.mirrorNum(),P.toPercentage(this.hpRate()),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2306,this.mirrorNum(this.level+1),P.toPercentage(this.hpRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}mirrorNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}a(jl,"DEFAULT_DISTANCE",750);class Xl extends _e{constructor(t,e,l){super(t,e,l),this.index=85,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2215,this.monsterName()),this.m_nextLevelSkillInfo=_.getLanguageStr(2215,this.monsterName(this.level+1))}}monsterIdList(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}monsterName(t=-1){let e=0,l=this.monsterIdList(t),s="";for(e=0;e<l.length;e++)s+=ge.getOnlyExample().getData(l[e]).name,s+=_.getLanguageStr(2406);return s.slice(0,s.length-1),s}}a(Xl,"REINCARNATE_TIME",5);class Yl extends _e{constructor(t,e,l){super(t,e,l),this.index=170,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2213,this.reliveNum(),P.toPercentage(this.reliveHpRate())),this.m_nextLevelSkillInfo=_.getLanguageStr(2213,this.reliveNum(this.level+1),P.toPercentage(this.reliveHpRate(this.level+1)))}}reliveNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}reliveHpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}a(Yl,"RELIVE_TIME",8);class xe extends _e{constructor(e,l,s){super(e,l,s);a(this,"maxHP",0);this.index=300,this.m_updateFunction=function(){this.m_skillInfo=this.resistInfo(),this.m_nextLevelSkillInfo=this.resistInfo(this.level+1)}}getResist(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}getRange(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}getMaxHP(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}resistInfo(e=-1){let l=this.getResist(e),s="",n=P.toPercentage(Math.abs(l));return l==0||(l>0?s=_.getLanguageStr(2409):s=_.getLanguageStr(2408),this.data.kindId==f.KIND_SLOWF&&(s=P.toGridStr(this.getRange())),s=_.getLanguageStr(this.resistInfoNumber,s,n),this.data.kindId==f.KIND_RESIST_STRSMOOTH&&this.getMaxHP(e)>0&&(s+=_.getLanguageStr(2730,this.getMaxHP(e)))),s}get resistInfoNumber(){switch(this.data.kindId){case f.KIND_RESIST_FIRE:case f.KIND_WEAK_FIRE:return 2203;case f.KIND_RESIST_FROST:case f.KIND_WEAK_FROST:return 2204;case f.KIND_RESIST_POISON:case f.KIND_WEAK_POISON:return 2205;case f.KIND_RESIST_SLOW:case f.KIND_WEAK_SLOW:return 2206;case f.KIND_RESIST_BEAT:case f.KIND_WEAK_BEAT:return 2207;case f.KIND_RESIST_SILENCE:case f.KIND_WEAK_SILENCE:return 2208;case f.KIND_RESIST_VERTIGO:case f.KIND_WEAK_VERTIGO:return 2209;case f.KIND_RESIST_CRIT:case f.KIND_WEAK_CRIT:return 2210;case f.KIND_RESIST_LIGHT:case f.KIND_WEAK_LIGHT:return 2211;case f.KIND_RESIST_INTIMIDATE:case f.KIND_WEAK_INTIMIDATE:return 2212;case f.KIND_RESIST_STRSMOOTH:return 2724;case f.KIND_SLOWF:return 2726;default:return 0}}}a(xe,"IMMUNITY",2701),a(xe,"RESIST_SUPER",2702),a(xe,"RESIST_HIGH",2703),a(xe,"RESIST",2704),a(xe,"FEAR",2705),a(xe,"FEAR_HIGH",2706),a(xe,"FEAR_SUPER",2707);class Is extends Te{constructor(t,e,l){super(t,e,l),this.index=160,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2304,P.toPercentage(this.speedRate()-1),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2304,P.toPercentage(this.speedRate(this.level+1)-1),this.duration(this.level+1)),this.refreshTag()}}speedRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)+1}}class Ts extends Te{constructor(t,e,l){super(t,e,l),this.index=105,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2308,P.toPercentage(this.shieldRate()),this.shieldTime()),this.m_nextLevelSkillInfo=_.getLanguageStr(2308,P.toPercentage(this.shieldRate(this.level+1)),this.shieldTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}class Ls extends Te{constructor(t,e,l){super(t,e,l),this.index=106,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2309,P.toGridStr(this.range()),P.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2309,P.toGridStr(this.range(this.level+1)),P.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class cl extends _e{constructor(t,e,l){super(t,e,l),this.index=185,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2214,P.toGridStr(this.cloudRange()),this.cloudTime()),this.m_nextLevelSkillInfo=_.getLanguageStr(2214,P.toGridStr(this.cloudRange(this.level+1)),this.cloudTime(this.level+1))}}cloudRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}a(cl,"isEveryTime",!0),a(cl,"SUICIDE_TIME",.5);class zl extends Te{constructor(t,e,l){super(t,e,l),this.index=120,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2301,this.summonNum(),P.toPercentage(this.hpRate()),this.summonName()),this.m_nextLevelSkillInfo=_.getLanguageStr(2301,this.summonNum(this.level+1),P.toPercentage(this.hpRate(this.level+1)),this.summonName(this.level+1)),this.refreshTag(!0)}}summonId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}summonName(t=-1){return t<0&&(t=this.level),ge.getOnlyExample().getData(this.summonId(t)).name}summonNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}a(zl,"DEFAULT_DISTANCE",750);class vs extends Te{constructor(t,e,l){super(t,e,l),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2307,this.transformName()),this.m_nextLevelSkillInfo=_.getLanguageStr(2307,this.transformName(this.level+1)),this.refreshTag(!0)}}transformId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}transformName(t=-1){return t<0&&(t=this.level),ge.getOnlyExample().getData(this.transformId(t)).name}}class ql extends ht{constructor(e,l=1){super();a(this,"level");this.m_data=Wt.getOnlyExample().getData(e),this.level=l}get skillsPackageData(){return this.m_data}}class Jl{}a(Jl,"COLOR_LIST",[6316128,13631488,13668352,43520,28927,8913056,0]);const ne=class ne extends Se{constructor(e){super(e);a(this,"m_price");a(this,"priceCoin",0);a(this,"priceGold",0);a(this,"priceScore",0);a(this,"unlockMapId","");a(this,"index",0);this.m_price=e[ne.DATA_PRICE],this.initPrice(),this.unlockMapId=e[ne.DATA_UNLOCK_MAP_ID],this.index=e[ne.DATA_INDEX]}get price(){return this instanceof _t&&ae.currentMap&&ae.currentMap.isDefendMap&&this.campPrice instanceof Array?this.campPrice:this.m_price}initPrice(){let e=this.price;if(e)if(e instanceof Array){const l=e;l[0]==ne.DATA_COIN?this.priceCoin=l[1]:l[0]==ne.DATA_GOLD?this.priceGold=l[1]:l[0]==ne.DATA_SCORE&&(this.priceScore=l[1])}else this.priceCoin=e[ne.DATA_COIN],this.priceGold=e[ne.DATA_GOLD],this.priceScore=e[ne.DATA_SCORE]}get isRare(){if(this.priceCoin>0){if(this.priceCoin>=N.$_rare_item_coin||this.index<0)return!0}else if(this.priceScore>0&&(this.priceScore>=N.$_rare_item_invite_score||this.index<0))return!0;return!1}};a(ne,"DATA_PRICE","price"),a(ne,"DATA_UNLOCK_MAP_ID","unlock_mid"),a(ne,"DATA_COIN","coin"),a(ne,"DATA_GOLD","gold"),a(ne,"DATA_SCORE","invite_score"),a(ne,"DATA_INDEX","index");let It=ne;const re=class re extends It{constructor(e){super(e);a(this,"gemLevel");a(this,"towerSkillPackage");a(this,"nextLevelId");a(this,"colorIndex");this.typeId=Se.TYPE_GEM_ITEM,this.gemLevel=e[re.DATA_GEM_LEVEL],this.towerSkillPackage=e[re.DATA_TOWER_SKILL_PACKAGE],this.nextLevelId=e[re.DATA_NEXT_LEVEL_ID],this.colorIndex=e[re.DATA_COLOR_INDEX],this.res=this.resString}getSkillPackage(e){if(this.towerSkillPackage==null)return null;let l=/\D/gi;e=e.match(l).join("");let s=this.towerSkillPackage[e];return s==null?null:new ql(s[re.SKILL_PACKAGE_ID],s[re.SKILL_PACKAGE_LEVEL])}get color(){return Jl.COLOR_LIST[this.colorIndex]}get resString(){return"hong"+this.gemLevel}};a(re,"TYPE_PURE","typePure"),a(re,"TYPE_MIX","typeMix"),a(re,"DATA_GEM_LEVEL","gamLevel"),a(re,"DATA_TOWER_SKILL_PACKAGE","sp"),a(re,"DATA_NEXT_LEVEL_ID","nextId"),a(re,"DATA_COLOR_INDEX","color"),a(re,"SKILL_PACKAGE_ID","id"),a(re,"SKILL_PACKAGE_LEVEL","lv");let _l=re;const Oe=class Oe extends Ze{constructor(){super(),Oe.onlyExample=this,this.loadData(N.$_global_properties[Se.TYPE_GEM_ITEM])}static getOnlyExample(){return Oe.onlyExample==null&&(Oe.onlyExample=new Oe),Oe.onlyExample}loadData(t){let e;for(e in t)this.m_manager[e]=new _l(t[e])}initData(){}getData(t){return this.getDataById(t)}};a(Oe,"onlyExample");let ml=Oe;const le=class le extends It{constructor(e){super(e);a(this,"skillPackageId");a(this,"skillPackageLevel");a(this,"skills");a(this,"xGrid");a(this,"yGrid");if(this.skillPackageId=e[le.DATA_SKILL_PACKAGE_ID],this.skillPackageLevel=e[le.DATA_SKILL_PACKAGE_LEVEL],e[le.DATA_SKILLS]instanceof Array)this.skills=e[le.DATA_SKILLS];else if(e[le.DATA_SKILLS]instanceof Object){this.skills=[];for(const l in e[le.DATA_SKILLS])this.skills.push({skid:l,lev:e[le.DATA_SKILLS][l]})}e[le.DATA_X_GRID]?this.xGrid=e[le.DATA_X_GRID]:this.xGrid=1,e[le.DATA_Y_GRID]?this.yGrid=e[le.DATA_Y_GRID]:this.yGrid=1}};a(le,"DATA_A","a"),a(le,"DATA_B","b"),a(le,"DATA_C","c"),a(le,"DATA_D","d"),a(le,"DATA_SKILL_PACKAGE_ID","skill"),a(le,"DATA_SKILL_PACKAGE_LEVEL","skillLv"),a(le,"DATA_SKILLS","skills"),a(le,"DATA_X_GRID","x_grid"),a(le,"DATA_Y_GRID","y_grid");let se=le;const J=class J extends se{constructor(e){super(e);a(this,"m_buildValueA",0);a(this,"m_buildValueB",0);a(this,"m_buildValueC",0);a(this,"m_campPrice",["",0]);a(this,"m_campBuildValueA",0);a(this,"m_campBuildValueB",0);a(this,"m_campBuildValueC",0);a(this,"range");a(this,"rate");a(this,"limitNum");e[J.DATA_BUILD_VALUE]?(this.m_buildValueA=e[J.DATA_BUILD_VALUE][se.DATA_A],this.m_buildValueB=e[J.DATA_BUILD_VALUE][se.DATA_B],this.m_buildValueC=e[J.DATA_BUILD_VALUE][se.DATA_C]):e[J.DATA_EXP_VALUE]&&(this.m_buildValueA=e[J.DATA_EXP_VALUE][se.DATA_A],this.m_buildValueB=e[J.DATA_EXP_VALUE][se.DATA_B],this.m_buildValueC=e[J.DATA_EXP_VALUE][se.DATA_C]),e[J.DATA_CAMP_PRICE]&&(this.m_campPrice=e[J.DATA_CAMP_PRICE]),e[J.DATA_CAMP_BUILD_VALUE]&&(this.m_campBuildValueA=e[J.DATA_CAMP_BUILD_VALUE][se.DATA_A],this.m_campBuildValueB=e[J.DATA_CAMP_BUILD_VALUE][se.DATA_B],this.m_campBuildValueC=e[J.DATA_CAMP_BUILD_VALUE][se.DATA_C]),this.range=e[J.DATA_RANGE],this.rate=Math.round(e[J.DATA_RATE]*10),this.limitNum=e[J.DATA_LIMIT_NUM]}get buildValueA(){return ae.currentMap&&ae.currentMap.isDefendMap?this.m_campBuildValueA:this.m_buildValueA}get buildValueB(){return ae.currentMap&&ae.currentMap.isDefendMap?this.m_campBuildValueB:this.m_buildValueB}get buildValueC(){return ae.currentMap&&ae.currentMap.isDefendMap?this.m_campBuildValueC:this.m_buildValueC}get campPrice(){return this.m_campPrice}get buildCostPrice(){return this.price[0]}get buildCost(){return this.price[1]}get buildValueAConst(){return this.m_buildValueA}get buildValueBConst(){return this.m_buildValueB}get buildValueCConst(){return this.m_buildValueC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}};a(J,"DATA_BUILD_VALUE","build_val"),a(J,"DATA_EXP_VALUE","exp_val"),a(J,"DATA_CAMP_PRICE","camp_price"),a(J,"DATA_CAMP_BUILD_VALUE","camp_build_val"),a(J,"DATA_RANGE","range"),a(J,"DATA_RATE","rate"),a(J,"DATA_LIMIT_NUM","limit_num");let _t=J;const k=class k extends _t{constructor(e){super(e);a(this,"valueList");a(this,"effectType");a(this,"effectKind");a(this,"effectRange");a(this,"useNum");a(this,"colddown");a(this,"delay");a(this,"attackEffectId");this.typeId=Se.TYPE_TRAP_ITEM,this.valueList=e[k.DATA_VALUE_LIST],this.effectType=e[k.DATA_EFFECT_TYPE],this.effectKind=e[k.DATA_EFFECT_KIND],e[k.DATA_USE_NUM]?this.useNum=e[k.DATA_USE_NUM]:this.useNum=1,e[k.DATA_COLDDOWN]?this.colddown=e[k.DATA_COLDDOWN]:this.colddown=.1,e[k.DATA_DELAY]?this.delay=e[k.DATA_DELAY]:this.delay=0,e[k.DATA_EFFECT_RANGE]?this.effectRange=e[k.DATA_EFFECT_RANGE]:this.effectRange=this.range,this.attackEffectId=e[k.DATA_EFFECT]}};a(k,"KIND_BLAST","1"),a(k,"KIND_DAMAGE","2"),a(k,"KIND_VERTIGO","3"),a(k,"KIND_SLOW","4"),a(k,"KIND_BEAT_BACK","5"),a(k,"KIND_COLD_BULLET","50"),a(k,"KIND_BULLET","100"),a(k,"KIND_BULLET_RANDOM","101"),a(k,"EFFECT_TYPE_FLOOR","1"),a(k,"EFFECT_TYPE_AIR","2"),a(k,"EFFECT_TYPE_ALL","3"),a(k,"EFFECT_TYPE_LIGHTNING","4"),a(k,"EFFECT_KIND_SINGLE","1"),a(k,"EFFECT_KIND_MULTI","2"),a(k,"DATA_VALUE_LIST","value"),a(k,"DATA_EFFECT_TYPE","effectType"),a(k,"DATA_EFFECT_KIND","effectKind"),a(k,"DATA_EFFECT_RANGE","effectRange"),a(k,"DATA_USE_NUM","use_times"),a(k,"DATA_COLDDOWN","colddown"),a(k,"DATA_DELAY","delay"),a(k,"DATA_EFFECT","effect");let hl=k;class Nl extends _t{constructor(e){super(e);a(this,"m_buildCostA");a(this,"m_buildCostB");a(this,"m_buildCostC");a(this,"m_campBuildCostA");a(this,"m_campBuildCostB");a(this,"m_campBuildCostC");a(this,"damageA");a(this,"damageB");a(this,"damageC");a(this,"bulletId","");a(this,"buffEffect");a(this,"levelMax");this.m_buildCostA=e.build_cost.a,this.m_buildCostB=e.build_cost.b,this.m_buildCostC=e.build_cost.c,this.m_campBuildCostA=e.camp_build_cost.a,this.m_campBuildCostB=e.camp_build_cost.b,this.m_campBuildCostC=e.camp_build_cost.c,this.damageA=e.damage.a,this.damageB=e.damage.b,this.damageC=e.damage.c,this.buffEffect=e.buffEffect,this.levelMax=e.lev_max,this.bulletId=e.bId}get buildCostA(){var e;return(e=ae.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostA:this.m_buildCostA}get buildCostB(){var e;return(e=ae.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostB:this.m_buildCostB}get buildCostC(){var e;return(e=ae.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostC:this.m_buildCostC}get buildCostAConst(){return this.m_buildCostA}get buildCostBConst(){return this.m_buildCostB}get buildCostCConst(){return this.m_buildCostC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}get isMagicTower(){return this.id=="xiangqianta"}}const ye=class ye extends Ze{constructor(){super(),ye.onlyExample=this,this.loadData(N.$_towerAtt_Obj)}static getOnlyExample(){return ye.onlyExample==null&&(ye.onlyExample=new ye),ye.onlyExample}loadData(t){for(const e in t){const l=t[e];l[me.DATA_ID]=e,this.m_manager[e]=new Nl(t[e])}}getData(t){return this.getDataById(t)}};a(ye,"onlyExample");let pl=ye;const z=class z extends se{constructor(e){super(e);a(this,"shapeMode");a(this,"damageMode");a(this,"radii");a(this,"shadow");a(this,"fallAccSpeed");a(this,"floorPathId");a(this,"hitEffectId");this.shapeMode=e[z.DATA_SHAPE_MODE],this.damageMode=e[z.DATA_DAMAGE_MODE],this.radii=e[z.DATA_RADII],e[z.DATA_SHADOW]?this.shadow=e[z.DATA_SHADOW]:this.shadow=1,this.fallAccSpeed=e[z.DATA_FALL_ACC_SPEED],this.floorPathId=e[z.DATA_FLOOR_PATH_ID],this.hitEffectId=e[z.DATA_HIT_EFFECT_ID]}};a(z,"SHAPE_COMMON",0),a(z,"SHAPE_DIRECTION",1),a(z,"SHAPE_ROLL",2),a(z,"DAMAGE_NULL",0),a(z,"DAMAGE_COMMON",1),a(z,"DAMAGE_PERFORATIVE",2),a(z,"DAMAGE_MAGICAL",3),a(z,"DAMAGE_SIEGE",4),a(z,"DAMAGE_MIXED",5),a(z,"FALL_ACC_SPEED_THRESHOLD",-7),a(z,"DATA_SHAPE_MODE","shapeMode"),a(z,"DATA_DAMAGE_MODE","damageMode"),a(z,"DATA_RADII","radii"),a(z,"DATA_SHADOW","shadow"),a(z,"DATA_FALL_ACC_SPEED","fallAcc"),a(z,"DATA_FLOOR_PATH_ID","path"),a(z,"DATA_HIT_EFFECT_ID","effect");let gl=z;const Ke=class Ke extends Ze{constructor(){super(),Ke.onlyExample=this,this.loadData(N.$_bulletAtt_Obj)}static getOnlyExample(){return Ke.onlyExample==null&&(Ke.onlyExample=new Ke),Ke.onlyExample}loadData(t){for(const e in t){const l=t[e];l[me.DATA_ID]=e,this.m_manager[e]=new gl(t[e])}}getData(t){return this.getDataById(t)}};a(Ke,"onlyExample");let fl=Ke;const O=class O extends se{constructor(e){super(e);a(this,"hpMaxA");a(this,"hpMaxB");a(this,"hpMaxC");a(this,"expMaxA",0);a(this,"expMaxB",0);a(this,"expMaxC",0);a(this,"expMaxD",0);a(this,"speedBase");a(this,"charm");a(this,"height");a(this,"width");a(this,"speakList",[]);a(this,"population");e[O.DATA_HP_MAX]?(this.hpMaxA=e[O.DATA_HP_MAX][se.DATA_A],this.hpMaxB=e[O.DATA_HP_MAX][se.DATA_B],this.hpMaxC=e[O.DATA_HP_MAX][se.DATA_C]):(this.hpMaxA=e[O.DATA_HP_MAX_A],this.hpMaxB=e[O.DATA_HP_MAX_B],this.hpMaxC=e[O.DATA_HP_MAX_C]),e[O.DATA_EXP_MAX]&&(this.expMaxA=e[O.DATA_EXP_MAX][se.DATA_A],this.expMaxB=e[O.DATA_EXP_MAX][se.DATA_B],this.expMaxC=e[O.DATA_EXP_MAX][se.DATA_C],this.expMaxD=e[O.DATA_EXP_MAX][se.DATA_D]),this.speedBase=e[O.DATA_SPEED_BASE],this.charm=e[O.DATA_CHARM],this.height=e[O.DATA_HEIGHT],this.width=e[O.DATA_WIDTH],e[O.DATA_SPEAK_LIST]instanceof Array&&(this.speakList=e[O.DATA_SPEAK_LIST]),this.population=e[O.DATA_POPULATION]}getSpeak(e=0){if(this.speakList instanceof Array&&this.speakList.length>e){if(this.speakList[e]instanceof String)return this.speakList[e];if(this.speakList[e]instanceof Array){const l=this.speakList[e];return l[Math.floor(Math.random()*l.length)]}}return""}getSpeakEnter(){return this.getSpeak(O.SPEAK_ENTER)}getSpeakIdle(){return this.getSpeak(O.SPEAK_IDLE)}getSpeakInjury(){return this.getSpeak(O.SPEAK_INJURY)}getSpeakDie(){return this.getSpeak(O.SPEAK_DIE)}getSpeakInvade(){return this.getSpeak(O.SPEAK_INVADE)}getSpeakCast(){return this.getSpeak(O.SPEAK_CAST)}get isBoss(){return this.population>=100}get isRandomBoss(){return this.population==99}getHpMax(e,l=1){return Math.floor((this.hpMaxA+e*(this.hpMaxB+e*this.hpMaxC))*l)}};a(O,"SPEAK_ENTER",0),a(O,"SPEAK_IDLE",1),a(O,"SPEAK_INJURY",2),a(O,"SPEAK_DIE",3),a(O,"SPEAK_INVADE",4),a(O,"SPEAK_CAST",5),a(O,"DEFENSE_NULL",0),a(O,"DEFENSE_LIGHT",1),a(O,"DEFENSE_COMMON",2),a(O,"DEFENSE_HEAVY",3),a(O,"DEFENSE_BUILDING",4),a(O,"DEFENSE_BOSS",5),a(O,"DEFENSE_HOLY",6),a(O,"DEFENSE_INVINCIBLE",7),a(O,"DATA_HP_MAX","hp_factor"),a(O,"DATA_EXP_MAX","explev"),a(O,"DATA_HP_MAX_A","ha"),a(O,"DATA_HP_MAX_B","hb"),a(O,"DATA_HP_MAX_C","hc"),a(O,"DATA_SPEED_BASE","speed"),a(O,"DATA_CHARM","charm"),a(O,"DATA_HEIGHT","height"),a(O,"DATA_WIDTH","width"),a(O,"DATA_SPEAK_LIST","speak"),a(O,"DATA_POPULATION","pop");let Tt=O;const Pe=class Pe extends Ze{constructor(){super(),Pe.onlyExample=this,this.loadData(N.$_wolfAtt_Obj)}static getOnlyExample(){return Pe.onlyExample==null&&(Pe.onlyExample=new Pe),Pe.onlyExample}loadData(t){for(const e in t){const l=t[e];l[me.DATA_ID]=e,this.m_manager[e]=new Tt(l)}}getBossList(t){const e=[];if(!(t instanceof Array))return e;for(let l=0;l<t.length;l++){const s=this.getData(t[l]);s&&s.isBoss&&e.push(t[l])}return e}getRandomBossList(t){const e=[];if(!(t instanceof Array))return e;for(let l=0;l<t.length;l++){const s=this.getData(t[l]);s&&s.isRandomBoss&&e.push(t[l])}return e}getData(t){return this.getDataById(t)}};a(Pe,"onlyExample");let ge=Pe;function Zl(u,t){const e=N.$_wolfAtt_Obj[u].pop;return e<99?e:t??e}function Ds(u,t=1){return F.sumBy(u,e=>Zl(e,t))}function Ol(u,t){return Math.round((2+1.07*t)*Math.pow(u/.39,2/3))}function Ss(u,t){const e=N.dream_data.dm_opt_cfg.tower_sum_exp;return Math.round(t*Math.pow(u,e.power)*e.popu+e.p)}function xs(u,t){const e=N.$_map_Obj[u],l=e.wolf_proportion;let s=e.pop_max;const n=l.map(w=>w[0]),d=l.map(w=>Zl(w[1]));let r=l.map(w=>w[1]),m=d.length;if(m==0)return[[],[]];let h=[],g=new Array(m).fill(0);if(t&&(h=t.flatMap((w,x)=>new Array(w).fill(r[x])),g=t,t.length=d.length,s-=F.chain(d).zip(t).sumBy(w=>w[0]*w[1]).value(),s<0))return null;for(;s>0;){for(;m>0&&s<d[m-1];)m--;if(m==0)break;let w;do{const x=Math.random()*n[m-1];w=F.findIndex(n,A=>x<A)}while(s<d[w]);s-=d[w],h.push(r[w]),g[w]++}return[t?F.shuffle(h):h,F.zip(r,g)]}function bs(u){return ja(u)}function ot(u,t,e){return Ra.hsl(bs(u),t,e).string()}const wl=W({__name:"WolfHpChart",props:{hpData:{},width:{default:600},height:{default:200}},setup(u){Ot([xl,yt,Kt,Pt,Mt]);const t=u,e=U(()=>({color:["#00A2E8"],title:{text:"当前狼血量",left:"center",textStyle:{fontStyle:"normal",fontFamily:"sans-serif",fontSize:16}},tooltip:{},xAxis:{type:"value",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}}},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.hpData.map(l=>l.name)},grid:{left:100,top:30,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.hpData.map(l=>l.value),itemStyle:{color:function(l){return ot(l.name,80,45)}}}}));return(l,s)=>{const n=Fe("v-chart");return p(),M(n,{class:"chart",option:o(e),style:Ml({width:`${l.width}px`,height:`${l.height}px`})},null,8,["option","style"])}}}),Ns={class:"space-x-4"},ws=W({__name:"index",setup(u){const t=F.chain(N.dream_maps).toArray().sortBy("index").value(),e=oe({mid:"m2A",score:1}),l=U(()=>N.dream_maps[e.mid]),s=R=>R%10===0?(R-10)%100+10:R%10,n=R=>{const v=s(R).toString(),E=N.dream_waves[e.mid];return R%10==0?E.boss[v]:E.wolf[v]},d=U(()=>n(e.score).map(R=>ge.getOnlyExample().getData(R))),r=(R,v)=>{const E=s(v).toString();return N.dream_waves[e.mid].popu[E]},m=U(()=>r(e.mid,e.score)),h=R=>Ss(R,r(e.mid,R==0?1:R==9?10:s(R))),g=U(()=>h(e.score)),w=U(()=>Math.sqrt(l.value.hard_ness*e.score+l.value.yield_val)),x=U(()=>{for(const[R,v]of Object.entries(N.dream_data.dm_wolf_hard_ness)){const[E,K]=R.split("_");if(e.score>=Number.parseInt(E)&&e.score<=Number.parseInt(K))return v}return N.dream_data.dm_wolf_hard_ness.default}),A=U(()=>d.value.map(R=>({name:R.name,value:R.getHpMax(w.value,x.value)}))),y=U(()=>{let R=0,v=0;for(let E=1;E<=e.score;E++){let K=Math.sqrt(l.value.yield_val+l.value.hard_ness*E);R+=Ol(K,r(e.mid,E)),v+=h(E)}return{gold:R,exp:v}});return(R,v)=>{const E=Ve,K=ke,Q=ze,C=Ue,q=Ee,j=Fe("vue-latex"),X=Me;return p(),M(X,{model:o(e),"label-width":"120px"},{default:c(()=>[i(C,{label:"地图"},{default:c(()=>[i(K,{modelValue:o(e).mid,"onUpdate:modelValue":v[0]||(v[0]=te=>o(e).mid=te)},{default:c(()=>[(p(!0),S(V,null,B(o(t),te=>(p(),M(E,{key:te.id,label:`${te.id} ${te.name}`,value:te.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),i(Q,{effect:"light",class:"mx-1"},{default:c(()=>[b(" 难度系数："+L(o(l).hard_ness)+", "+L(o(l).yield_val),1)]),_:1})]),_:1}),i(C,{label:"进度"},{default:c(()=>[i(q,{modelValue:o(e).score,"onUpdate:modelValue":v[1]||(v[1]=te=>o(e).score=te),min:0},null,8,["modelValue"]),i(Q,{effect:"light",class:"mx-1"},{default:c(()=>[b(" HpRate："+L(o(x)),1)]),_:1}),i(Q,{effect:"light",class:"mx-1"},{default:c(()=>[b(" Population："+L(o(m)),1)]),_:1})]),_:1}),i(C,null,{default:c(()=>[b(" 银币： "),i(j,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${o(Ol)(o(w),o(m))}`},null,8,["expression"])]),_:1}),i(C,null,{default:c(()=>[b(" 经验： "),i(j,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${o(g)}`},null,8,["expression"])]),_:1}),i(C,null,{default:c(()=>[T("div",Ns,[T("span",null,"总银币："+L(o(y).gold),1),T("span",null,"总经验："+L(o(y).exp),1)])]),_:1}),i(wl,{"hp-data":o(A),height:300},null,8,["hp-data"])]),_:1},8,["model"])}}});const Rs=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"})),Cs={key:0,class:"space-y-1"},Os={class:"space-x-0.5"},ys=W({__name:"index",setup(u){const t=F.sortBy(Object.values(N.dream_maps),"name").map(e=>({...e,...N.dream_waves[e.id],waves:Object.assign({},N.dream_waves[e.id].wolf,N.dream_waves[e.id].boss)}));return(e,l)=>{const s=Ye,n=ze,d=Xe;return p(),S("div",null,[i(d,{data:o(t)},{default:c(()=>[i(s,{prop:"id",label:"id",sortable:"",align:"center"}),i(s,{prop:"name",label:"name",sortable:"",align:"center"}),i(s,{prop:"interval",label:"interval",sortable:"",align:"center"}),i(s,{prop:"interval_rule",label:"interval_rule",sortable:"",align:"center"}),i(s,{prop:"hard_ness",label:"hard_ness",sortable:"",align:"center"}),i(s,{prop:"yield_val",label:"yield_val",sortable:"",align:"center"}),i(s,{label:"waves",type:"expand",width:"80"},{default:c(r=>[r.row.waves?(p(),S("div",Cs,[T("table",null,[(p(!0),S(V,null,B(r.row.waves,(m,h)=>(p(),S("tr",{key:h},[T("td",null,[i(n,null,{default:c(()=>[b(L(h),1)]),_:2},1024)]),T("td",Os,[(p(!0),S(V,null,B(m,g=>(p(),M(n,{key:g,style:Ml({color:o(ot)(g,40,40),"background-color":o(ot)(g,80,90),"border-color":o(ot)(g,50,80)})},{default:c(()=>[b(L(o(Ae)(g)),1)]),_:2},1032,["style"]))),128))]),T("td",null,[i(n,null,{default:c(()=>[b(L(r.row.popu[h]),1)]),_:2},1024)])]))),128))]),(p(!0),S(V,null,B(r.row.waves,(m,h)=>(p(),S("div",{key:h,class:"space-x-1"}))),128))])):fe("",!0)]),_:1})]),_:1},8,["data"])])}}});const Ks=Je(ys,[["__scopeId","data-v-3255a3ed"]]),Ps=Object.freeze(Object.defineProperty({__proto__:null,default:Ks},Symbol.toStringTag,{value:"Module"})),Ms=W({__name:"DreamWaveEditor",props:ft({wolfList:{}},{modelValue:{},modelModifiers:{}}),emits:ft(["change"],["update:modelValue"]),setup(u,{emit:t}){const e=u,l=Ct(u,"modelValue"),s=t,n=Z(""),d=Z(!1),r=Z(),m=Z(e.wolfList.slice()),h=y=>{l.value.splice(l.value.indexOf(y),1),s("change")},g=()=>{d.value=!0,pa(()=>{r.value.focus()})},w=y=>{console.log(y),m.value=y?e.wolfList.filter(x(y)):e.wolfList},x=y=>R=>R.id.toLowerCase().includes(y.toLowerCase())||R.value.includes(y),A=y=>{l.value.push(y),l.value.sort((R,v)=>R.id.localeCompare(v.id)),d.value=!1,n.value="",s("change")};return(y,R)=>{const v=ze,E=ua,K=Ve,Q=qe;return p(),S("div",null,[T("div",null,[(p(!0),S(V,null,B(l.value,C=>(p(),M(v,{key:C.id,type:"info",effect:"plain",class:"m-0.5",closable:"","disable-transitions":!1,onClose:q=>h(C)},{default:c(()=>[T("ruby",null,[b(L(C.value)+" ",1),T("rt",null,L(C.id),1)])]),_:2},1032,["onClose"]))),128)),o(d)?(p(),M(o(ke),{key:0,ref_key:"InputRef",ref:r,modelValue:o(n),"onUpdate:modelValue":R[0]||(R[0]=C=>Ie(n)?n.value=C:null),filterable:"","filter-method":w,class:"inline-block m-0.5",placeholder:"Select",size:"small",onChange:A},{default:c(()=>[(p(!0),S(V,null,B(o(m),C=>(p(),M(K,{key:C.id,value:C},{default:c(()=>[b(L(C.value)+" ",1),i(E,{class:"mx-1",type:"primary"},{default:c(()=>[b("["+L(C.id)+"]",1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(p(),M(Q,{key:1,class:"button-new-tag m-0.5",type:"primary",plain:"",size:"small",onClick:g},{default:c(()=>[b(" + ")]),_:1}))])])}}}),Vs={class:"dialog-footer"},ks=W({__name:"index",setup(u){const{toClipboard:t}=kl(),e=Z(!1),l=Z(""),s=Z(!1),n=Z({}),d=Z(""),r=Z(),m=Object.keys(N.$_wolfAtt_Obj).map(v=>({id:v,value:Ae(v)})),h=[1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100],g=Z(h.map(v=>({key:v,wolf:[],popu:0,popFixed:!1}))),w=(v,E=!1)=>{(!v.popFixed||E)&&(v.popFixed=!1,v.popu=Ds(v.wolf.map(K=>K.id)))},x=v=>{v.popu==0?(v.popFixed=!1,w(v)):v.popFixed=!0},A=()=>{const v=JSON.parse(l.value);g.value=h.map(E=>({key:E,wolf:(v.wolf[E]??v.boss[E]??[]).map(K=>({id:K,value:Ae(K)})),popu:v.popu[E],popFixed:!0})),e.value=!1},y=()=>{s.value=!0;const v={wolf:{},boss:{},popu:{}};for(const E of g.value){const K=E.wolf.map(Q=>Q.id);v[E.key<10?"wolf":"boss"][E.key]=K,E.key<10?v.wolf[E.key]=K:v.boss[E.key]=K,v.popu[E.key]=E.popu}n.value=v,d.value=JSON.stringify(v)},R=()=>{t(d.value,r.value.$el),Al.success("已复制到剪贴板")};return(v,E)=>{const K=qe,Q=Ye,C=Ee,q=Xe,j=Kl;return p(),S("div",null,[i(K,{onClick:E[0]||(E[0]=X=>e.value=!0)},{default:c(()=>[b("导入")]),_:1}),i(K,{onClick:y},{default:c(()=>[b("导出")]),_:1}),i(q,{data:o(g),style:{"max-width":"1200px"}},{default:c(()=>[i(Q,{prop:"key",label:"Key",width:80,align:"center"}),i(Q,{label:"Wolf"},{default:c(X=>[i(Ms,{"wolf-list":o(m),modelValue:X.row.wolf,"onUpdate:modelValue":te=>X.row.wolf=te,onChange:te=>w(X.row)},null,8,["wolf-list","modelValue","onUpdate:modelValue","onChange"])]),_:1}),i(Q,{label:"Population",width:160,align:"center"},{default:c(X=>[i(C,{modelValue:X.row.popu,"onUpdate:modelValue":te=>X.row.popu=te,size:"small",min:0,onChange:te=>x(X.row),style:{width:"90px"},class:ga({primary:X.row.popFixed})},null,8,["modelValue","onUpdate:modelValue","onChange","class"]),i(K,{icon:X.row.popFixed?o(va):o(Da),circle:"",size:"small",class:"m-0.5",onClick:te=>X.row.popFixed?w(X.row,!0):X.row.popFixed=!0},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),i(j,{modelValue:o(e),"onUpdate:modelValue":E[3]||(E[3]=X=>Ie(e)?e.value=X:null),title:"导出数据"},{footer:c(()=>[T("span",Vs,[i(K,{onClick:E[2]||(E[2]=X=>e.value=!1)},{default:c(()=>[b("取消")]),_:1}),i(K,{type:"primary",onClick:A},{default:c(()=>[b(" 确定 ")]),_:1})])]),default:c(()=>[i(o(wt),{type:"textarea",rows:10,modelValue:o(l),"onUpdate:modelValue":E[1]||(E[1]=X=>Ie(l)?l.value=X:null),spellcheck:!1},null,8,["modelValue"])]),_:1},8,["modelValue"]),i(j,{modelValue:o(s),"onUpdate:modelValue":E[4]||(E[4]=X=>Ie(s)?s.value=X:null),title:"导出数据"},{default:c(()=>[i(o(Ul),{data:o(n),virtual:"",deep:2},null,8,["data"]),i(K,{onClick:R,ref_key:"someRef",ref:r},{default:c(()=>[b("复制到剪贴板")]),_:1},512)]),_:1},8,["modelValue"])])}}});const Us=Object.freeze(Object.defineProperty({__proto__:null,default:ks},Symbol.toStringTag,{value:"Module"})),Fs={class:"markdown-body"},$s=fa("<h1>羊村设计大赛快来参加一下吧</h1><p>在苦工们的努力建设之下，新羊村的首个可公开版本不久就要上线了。</p><p>在我们有机会一睹真容前呢，先说个好消息。感谢耳阝鱼禾与技术的沟通，怀旧版可以开放四图啦！</p><p>不过呢，由于<strong>没有官方策划人手投入</strong>，要想玩到新关卡，还得靠我们自己来设计新图呢……</p><p>新的一年，举办羊村首届设计大赛，有兴趣的快来参加吧！</p><h2>时间</h2><p><strong>2024/1/6 18:00 ~ 2024/1/20 18:00（UTC+8）</strong></p><p>视参与情况可能会延长。</p><h2>赛道</h2><p><strong>比赛分为以下赛道</strong></p><h3>赛道 1：怀旧版新地图</h3><p>打造自己的羊村四图！需要提供如下内容（不必都有，但内容尽可能完善）：</p><ol><li><strong>地图资源</strong>。每个地图有一个 swf 文件，其中内嵌代码配置了地形数据（每个格子的类型，如可行走地面、传送阵、传送带）。可使用 ffdec 解包老羊村的地图资源，然后用 Adobe Animate 进行重新设计，导出成所需的 swf 格式。也可只提供概念风格设计，画出格子分布、前景和背景，给出特殊地块的位置。</li><li><strong>地图配置数据</strong>。小工具将会开放地图设计工具，导出所需的配置数据格式。主要内容为： <ul><li>地图名称</li><li>通关分数</li><li>难度系数</li><li>狼的种类和权重</li><li>出怪间隔</li><li>随机 boss 及奖励的分布</li><li>最终 boss 波出怪列表</li></ul></li></ol><p>考虑操作存在一定技术性，可以不提供具体的资源/配置文件，但需要有方案使得我们可以快速实现这些设想。</p><p>暂时不考虑怀旧的新狼、新建筑、新道具的设计。</p><p>新地图可以是老羊村已有地图的<strong>重新设计</strong>，如改变狼的配置，扩充格子，移动甚至拆除障碍，增加特殊地块等。发挥创造力的时刻到了！</p><p><strong>新地图越多越好！在通过内部测试后会向大众开放！</strong></p><h3>赛道 2：新羊村地图</h3><p>可设计内容包括：</p><ol><li><strong>章节</strong>。一个章节有大约 10 个关卡，可以设计这个章节的主题、剧情，描述各关卡风格差异。 <ul><li>目前考虑的主题有：工业遗迹、海洋、湖泊、洞穴等。可以在此基础上发挥，也可自创新的章节。</li></ul></li><li><strong>地图地形</strong>。地图均为六边形格子，行走方向为 0°、60°、120°。地图宽高不超过 13x11（出口入口除外）。 <ul><li>希望地块布局不限于方方正正。可以发挥想象，加入各种只能放塔、只能走狼、只能飞行经过的格子。</li><li>同时给出较为详细的地图美术风格设计，描述场景布置、美术表现。</li></ul></li><li><strong>地图特殊机制和障碍</strong><ul><li>原版内容包括： <ul><li>机制：传送阵、弹簧、传送带、箱子等。</li><li>障碍：火山、反应炉、核电厂等。</li><li>特殊地形：增强毒效果的格子。</li></ul></li><li>希望在新的章节里有富有主题特色的机制加入。</li><li>目前考虑的机制包括：狼可以行走但会减速的水面，狼狂奔加速、被击退距离增加的冰面等。</li></ul></li></ol><h3>赛道 3：新羊村角色</h3><p>提供<strong>美术设计方案</strong>。此处角色包括：</p><ol><li>进攻方（狼）。可以是原版狼的美术重置，也可以是新狼。其他种族也是可以的！</li><li>防守方（英雄角色，塔）。英雄可以同时作为攻防方。目前已有一大批英雄的设计方案，但暂未公开。可以考虑在给出形象设计后与合适的角色进行匹配。</li><li>其他想加入的角色。</li></ol><p>因为新羊村会全面采用 3D 美术，这里只需要给出 <strong>2D 概念设计图</strong>。</p><p><s>有不被采纳的风险，但奖励会照常发放。</s></p><h3>赛道 4：周边</h3><p>其实我也不知道周边有啥……玩偶？挂件？</p><p>反正设计出来就有奖。</p><h2>奖励</h2><p>公开投票，每个赛道独立排名，奖项宁缺毋滥。会考虑设计贡献度和工作量。</p><ul><li>Track 1 &amp; 2 <ul><li>1st：20R</li><li>2nd：10R</li><li>3rd：5R</li><li>创意奖：5R x 2</li></ul></li><li>Track 3 <ul><li>1st：15R</li><li>2nd：10R</li><li>3rd：5R</li></ul></li><li>Track 4 <ul><li>视质量，10R 起步</li></ul></li></ul><p>同一赛道不重复获奖。</p><p>解释权归 Stankle 所有，所有奖励由 Stankle 自掏腰包。</p>",33),Bs=[$s],Hs={__name:"design-contest",setup(u,{expose:t}){return t({frontmatter:{}}),(l,s)=>(p(),S("div",Fs,Bs))}},Gs=W({__name:"index",setup(u){return(t,e)=>{const l=Rt,s=Nt,n=bt;return p(),M(n,null,{default:c(()=>[i(s,{label:"设计大赛"},{default:c(()=>[i(l,null,{default:c(()=>[(p(),M(Ll(o(Hs))))]),_:1})]),_:1})]),_:1})}}}),Ws=Object.freeze(Object.defineProperty({__proto__:null,default:Gs},Symbol.toStringTag,{value:"Module"})),De=class De extends rs{constructor(){super();a(this,"id","");a(this,"skills",{});a(this,"tag");this.tag="BaseUnit"}init(){this.initSkills()}initSkills(){}get data(){return this.m_data}};a(De,"SKILL_ID","skid"),a(De,"SKILL_LEVEL","lev"),a(De,"STATUS_RATE",200),a(De,"STATUS_TIME",De.STATUS_RATE/1e3),a(De,"AOE_SILENCE_RANGE",1e3),a(De,"AOE_SILENCE_TIME",2);let We=De;class js extends We{constructor(){super()}get buildingData(){return this.m_data}get range(){return this.buildingData.range}get skillInfo(){const t=Object.values(this.skills);t.sort((l,s)=>l.index-s.index);const e=t.map(l=>l.skillInfo).filter(l=>l!="").join(`
`);return e==""?this.buildingData.info:e}}class Xs extends We{constructor(e){super();a(this,"damage",0);a(this,"range",0);a(this,"attackType");this.m_data=fl.getOnlyExample().getData(e),this.attackType=hl.EFFECT_TYPE_ALL}get bulletData(){return this.m_data}}const dt=class dt extends js{constructor(e){super();a(this,"m_level",0);a(this,"gem",null);a(this,"m_attackType","");this.tag="Tower",e&&(this.m_data=pl.getOnlyExample().getData(e),this.initTower()),this.level=1}static fromData(e){const l=new dt(null);return l.m_data=e,l.initTower(),l}get towerData(){return this.m_data}initTower(){this.initSkills()}initSkills(){if(this.skills={},this.towerData.skillPackageId!=""){const e=new ql(this.towerData.skillPackageId,this.towerData.skillPackageLevel);if(e!=null&&e.skillsPackageData!=null)for(const l of e.skillsPackageData.skillsList){const s=new G(l,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}}if(this.gem){const e=this.gem.gemData.getSkillPackage(this.data.id);if(e!=null&&e.skillsPackageData!=null)for(const l of e.skillsPackageData.skillsList){const s=new G(l,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}this.skills[D.KIND_SCATTER_ATTACK]&&delete this.skills[D.KIND_DIVIDED_ATTACK]}}get color(){return this.gem!=null?this.gem.gemData.color:6316128}get level(){return this.m_level}set level(e){this.m_level=e}get gemLevel(){return this.gem?this.gem.gemData.gemLevel:0}get ability(){const e=this.gemLevel;return this.towerData.isMagicTower?e==0?0:this.m_level*(.8+e/5)*2:this.m_level*(1+e/10)}get power(){const e=this.level,l=N.$_tower_worth_factor,s=this.gemLevel,n=this.valueCostConst(e);return Math.round((n+Math.pow(s,l[0])*l[1])*(l[2]+s/l[3]))}buildValue(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildValueA+this.towerData.buildValueB*e+this.towerData.buildValueC*e*e)}buildCost(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildCostA+this.towerData.buildCostB*e+this.towerData.buildCostC*e*e)}valueCost(e=-1){e==-1&&(e=this.level);const l=e*this.towerData.buildCostA+(e*e+e)/2*this.towerData.buildCostB+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostC+this.towerData.buildCost-this.towerData.buildCostA-this.towerData.buildCostB-this.towerData.buildCostC;return Math.round(l)}valueCostConst(e=-1){e==-1&&(e=this.level);const l=e*this.towerData.buildCostAConst+(e*e+e)/2*this.towerData.buildCostBConst+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostCConst+this.towerData.buildCostConst-this.towerData.buildCostAConst-this.towerData.buildCostBConst-this.towerData.buildCostCConst;return Math.round(l)}buffEffect(e=-1){return e==-1&&(e=this.level),this.towerData.buffEffect*e+1}damage(e=-1){let l=0;if(e==-1&&(e=this.level),this.skills[D.KIND_CHANGE_DAMAGE]instanceof Hl){let s=this.skills[D.KIND_CHANGE_DAMAGE];s.isChangeBase()?l=Math.round((s.damageA+s.damageB*e+s.damageC*e*e)*s.damageRate+s.damageAdd):l=Math.round((this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e)*s.damageRate+s.damageAdd)}else l=Math.round(this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e);return Math.max(l,0)}get range(){let e=0;if(this.skills[D.KIND_CHANGE_RANGE]instanceof Gl){let l=this.skills[D.KIND_CHANGE_RANGE];l.isChangeBase()?e=l.range*l.rangeRate+l.rangeAdd:e=this.towerData.range*l.rangeRate+l.rangeAdd}else e=this.towerData.range;return e}get rate(){let e=0;if(this.skills[D.KIND_CHANGE_RATE]instanceof Wl){let l=this.skills[D.KIND_CHANGE_RATE];l.isChangeBase()?e=Math.round(l.rate*l.rateRate):e=Math.round(this.towerData.rate*l.rateRate)}else e=this.towerData.rate;return e}setGem(e){this.gem=e,this.initSkills()}newBullet(){return new Xs(this.getBulletId())}getBulletId(){let e=null;return this.skills[D.KIND_CHANGE_BULLET]instanceof Bl?(e=this.skills[D.KIND_CHANGE_BULLET],e.bulletId):this.towerData.bulletId}getInfoHtml(){return Bt(this.skillInfo,this.color,!1,"14px")}};a(dt,"TOWER","tower"),a(dt,"GEM","gem");let Lt=dt;const Ys={class:"space-x-2"},zs=W({__name:"TowerDataForm",props:{tower:{}},setup(u){const t=u;oe({});const e=Z(N.$_towerAtt_Obj.shaota),l=s=>{t.tower.m_data=new Nl(s)};return(s,n)=>{const d=Ve,r=ke,m=Ue,h=Ee,g=Me,w=Rt;return p(),M(w,null,{default:c(()=>[i(g,{"label-width":"100px"},{default:c(()=>[i(m,{label:"原型"},{default:c(()=>[i(r,{modelValue:o(e),"onUpdate:modelValue":n[0]||(n[0]=x=>Ie(e)?e.value=x:null),"value-key":"id",onChange:l},{default:c(()=>[(p(!0),S(V,null,B(o(N).$_towerAtt_Obj,(x,A)=>(p(),M(d,{key:A,label:x.name,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(m,{label:"等级"},{default:c(()=>[i(h,{modelValue:s.tower.m_level,"onUpdate:modelValue":n[1]||(n[1]=x=>s.tower.m_level=x)},null,8,["modelValue"])]),_:1}),i(m,{label:"damage"},{default:c(()=>[T("div",Ys,[T("span",null,[b(" a: "),i(h,{modelValue:s.tower.towerData.damageA,"onUpdate:modelValue":n[2]||(n[2]=x=>s.tower.towerData.damageA=x),"controls-position":"right",step:o($e)(o(e).damage.a),style:{width:"100px"}},null,8,["modelValue","step"])]),T("span",null,[b(" b: "),i(h,{modelValue:s.tower.towerData.damageB,"onUpdate:modelValue":n[3]||(n[3]=x=>s.tower.towerData.damageB=x),"controls-position":"right",step:o($e)(o(e).damage.b),style:{width:"100px"}},null,8,["modelValue","step"])]),T("span",null,[b(" c: "),i(h,{modelValue:s.tower.towerData.damageC,"onUpdate:modelValue":n[4]||(n[4]=x=>s.tower.towerData.damageC=x),"controls-position":"right",step:o($e)(o(e).damage.c),style:{width:"100px"}},null,8,["modelValue","step"])])])]),_:1}),i(m,{label:"rate"},{default:c(()=>[i(h,{modelValue:s.tower.towerData.rate,"onUpdate:modelValue":n[5]||(n[5]=x=>s.tower.towerData.rate=x),step:o($e)(o(e).rate)},null,8,["modelValue","step"])]),_:1}),i(m,{label:"range"},{default:c(()=>[i(h,{modelValue:s.tower.towerData.range,"onUpdate:modelValue":n[6]||(n[6]=x=>s.tower.towerData.range=x),step:o($e)(o(e).range)},null,8,["modelValue","step"])]),_:1}),i(m,{label:"buffEffect"},{default:c(()=>[i(h,{modelValue:s.tower.towerData.buffEffect,"onUpdate:modelValue":n[7]||(n[7]=x=>s.tower.towerData.buffEffect=x),step:o($e)(o(e).buffEffect)},null,8,["modelValue","step"])]),_:1})]),_:1})]),_:1})}}}),qs=["innerHTML"],Js=W({__name:"TowerInfo",props:{tower:{}},setup(u){return(t,e)=>{const l=Ue,s=Me,n=Rt;return p(),M(n,null,{default:c(()=>[i(s,{"label-width":"80px"},{default:c(()=>[i(l,{label:"damage"},{default:c(()=>[b(L(t.tower.damage()),1)]),_:1}),i(l,{label:"rate"},{default:c(()=>[b(L(t.tower.rate),1)]),_:1}),i(l,{label:"range"},{default:c(()=>[b(L(t.tower.range),1)]),_:1}),i(l,{label:"简介"},{default:c(()=>[T("div",{innerHTML:t.tower.getInfoHtml(),style:{"line-height":"1.5em"}},null,8,qs)]),_:1})]),_:1})]),_:1})}}}),Rl=F.sortBy(F.map(N.$_wolfAtt_Obj,(u,t)=>({id:t,name:u.name,label:`${Ae(t)} [${t}]`})),"id"),Ql=Rl.filter(u=>u.name.startsWith("camp_")),ea=Rl.filter(u=>u.id.startsWith("D_")),Zs=F.difference(Rl,Ql,ea),yl=F.chain(Object.values(N.$_skillAtt_Obj.towerSkill)).groupBy(u=>u.kindId).mapValues(u=>({id:u[0].id,params:u[0].params})).value(),ta=F.chain(N.$_map_Obj).map((u,t)=>F.extend(u,{id:t})).toArray().sortBy("index").value(),la=ta.map(u=>({label:`${u.id} ${u.name}`,value:u.id})),ut=F.chain(N.$_wolfAtt_Obj).map(u=>({value:u.id,label:`${Ae(u.id)} [${u.id}]`})).sortBy("id").value();ut.concat([{label:null,value:null}]);const Qs={key:0,class:"ml-2 space-x-2"},en=W({__name:"TowerSkillItem",props:ft({tower:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ft(["update:model-value"],["update:modelValue"]),setup(u,{emit:t}){const e=u,l=Ct(u,"modelValue"),s=Z(),n=()=>{s.value=yl[l.value.kindId],l.value.params=s.value.params.slice()};return At(()=>l.value.kindId,(d,r)=>{var m;if(r!=d){delete e.tower.skills[r];const h=new G(s.value.id,((m=e.tower.skills[d])==null?void 0:m.level)??50,e.tower).getSubClasses();h.m_data=new D(l.value),e.tower.skills[d]=h}}),At(l,(d,r)=>{e.tower.skills[d.kindId].m_data=new D(d)},{deep:!0}),Aa(()=>{l.value.kindId&&delete e.tower.skills[l.value.kindId]}),(d,r)=>{const m=Ve,h=ke,g=wt,w=Ee;return p(),S("div",null,[i(h,{modelValue:l.value.kindId,"onUpdate:modelValue":[r[0]||(r[0]=x=>l.value.kindId=x),n]},{default:c(()=>[(p(!0),S(V,null,B(Object.keys(o(yl)),x=>(p(),S(V,{key:x},[x in d.tower.skills?fe("",!0):(p(),M(m,{key:0,label:x,value:x},null,8,["label","value"]))],64))),128))]),_:1},8,["modelValue"]),o(s)?(p(),S("span",Qs,[(p(!0),S(V,null,B(o(s).params,(x,A)=>(p(),S(V,null,[typeof x=="string"?(p(),M(g,{key:0,modelValue:l.value.params[A],"onUpdate:modelValue":y=>l.value.params[A]=y,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])):(p(),M(w,{key:1,modelValue:l.value.params[A],"onUpdate:modelValue":y=>l.value.params[A]=y,size:"small","controls-position":"right",step:o($e)(x),style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue","step"]))],64))),256))])):fe("",!0)])}}}),tn=W({__name:"TowerSkillTable",props:{tower:{}},setup(u){const t=oe([]),e=Z(),l=()=>{t.push({data:{kindId:"",params:[]}})},s=(n,d)=>{t.splice(n,1)};return(n,d)=>{const r=Ye,m=Ee,h=qe;return p(),S("div",null,[i(o(Xe),{ref_key:"skillTableRef",ref:e,data:o(t),stripe:"",border:"","table-layout":"auto",style:{"font-size":"small"}},{default:c(()=>[i(r,{label:"Skill","header-align":"center"},{default:c(g=>[i(en,{tower:n.tower,modelValue:g.row.data,"onUpdate:modelValue":w=>g.row.data=w},null,8,["tower","modelValue","onUpdate:modelValue"])]),_:1}),i(r,{label:"Level","header-align":"center",width:130},{default:c(g=>[n.tower.skills[g.row.data.kindId]?(p(),M(m,{key:0,modelValue:n.tower.skills[g.row.data.kindId].level,"onUpdate:modelValue":w=>n.tower.skills[g.row.data.kindId].level=w,style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"])):fe("",!0)]),_:1}),i(r,{label:"Info","header-align":"center"},{default:c(g=>{var w;return[b(L((w=n.tower.skills[g.row.data.kindId])==null?void 0:w.skillInfo),1)]}),_:1}),i(r,{label:"操作",width:100,align:"center"},{default:c(g=>[i(h,{size:"small",type:"danger",onClick:w=>s(g.$index,g.row)},{default:c(()=>[b(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),i(h,{onClick:l},{default:c(()=>[b("新增")]),_:1})])}}}),ln=W({__name:"index",setup(u){const t=oe(new Lt(null));return t.m_data=new Nl(N.$_towerAtt_Obj.shaota),(e,l)=>{const s=Il,n=El;return p(),S(V,null,[i(n,{gutter:20},{default:c(()=>[i(s,{span:12},{default:c(()=>[i(zs,{tower:o(t)},null,8,["tower"])]),_:1}),i(s,{span:12},{default:c(()=>[i(Js,{tower:o(t)},null,8,["tower"])]),_:1})]),_:1}),i(tn,{tower:o(t),class:"mt-2"},null,8,["tower"])],64)}}}),an=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"}));class sn extends ht{constructor(t){super(),this.m_data=ml.getOnlyExample().getData(t)}get gemData(){return this.m_data}}const nn=["innerHTML"],rn=T("p",null,"注：升级经验为塔下一级的 buildValue 值",-1),on=W({__name:"index",setup(u){const t=oe({isDefendMap:!1,towerId:"shaota",gemId:"",level:1,buildFrom:0,buildTo:1,buildPower:50}),e=F.map(N.$_towerAtt_Obj,(r,m)=>[r.name,m]),l=F.chain(N.$_global_properties.gem).toPairs().sortBy(r=>Number(Math.abs(r[1].index))).map(r=>[`${r[1].name} [${r[1].index}]`,r[0]]).value(),s=U(()=>{const r=new Lt(t.towerId);return r.level=t.level,t.gemId!==""&&r.setGem(new sn(t.gemId)),r}),n=()=>{ae.currentMap=new ae(t.isDefendMap?ae.DEFEND_MAP_1:ae.ENDLESS_MAP_1)},d=U(()=>{let r=0;if(t.buildFrom>t.buildTo)return NaN;for(let m=t.buildFrom+1;m<=t.buildTo;m++)r+=s.value.buildValue(m);return Math.round(r/t.buildPower)});return(r,m)=>{const h=da,g=Ue,w=Ve,x=ke,A=Il,y=El,R=Ee,v=Me;return p(),M(v,{model:o(t),"label-width":"120px"},{default:c(()=>[i(g,{label:"是否为防线"},{default:c(()=>[i(h,{modelValue:o(t).isDefendMap,"onUpdate:modelValue":m[0]||(m[0]=E=>o(t).isDefendMap=E),onChange:n},null,8,["modelValue"])]),_:1}),i(y,null,{default:c(()=>[i(A,{span:12},{default:c(()=>[i(g,{label:"塔"},{default:c(()=>[i(x,{modelValue:o(t).towerId,"onUpdate:modelValue":m[1]||(m[1]=E=>o(t).towerId=E)},{default:c(()=>[(p(!0),S(V,null,B(o(e),([E,K])=>(p(),M(w,{key:K,label:E,value:K},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(A,{span:12},{default:c(()=>[i(g,{label:"宝石"},{default:c(()=>[i(x,{modelValue:o(t).gemId,"onUpdate:modelValue":m[2]||(m[2]=E=>o(t).gemId=E)},{default:c(()=>[i(w,{label:"无",value:""}),(p(!0),S(V,null,B(o(l),([E,K])=>(p(),M(w,{key:K,label:E,value:K},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(y,null,{default:c(()=>[i(A,{span:8},{default:c(()=>[i(g,{label:"等级"},{default:c(()=>[i(R,{modelValue:o(t).level,"onUpdate:modelValue":m[3]||(m[3]=E=>o(t).level=E),min:1},null,8,["modelValue"])]),_:1})]),_:1}),i(A,{span:8},{default:c(()=>[i(g,{label:"等级上限"},{default:c(()=>[T("label",null,L(o(s).towerData.levelMax),1)]),_:1})]),_:1}),i(A,{span:8},{default:c(()=>[i(g,{label:"升级经验"},{default:c(()=>[T("label",null,L(o(s).buildValue(o(s).level+1)),1)]),_:1})]),_:1})]),_:1}),i(y,null,{default:c(()=>[i(A,{span:8},{default:c(()=>[i(g,{label:"攻击力"},{default:c(()=>[T("label",null,L(o(s).damage()),1)]),_:1})]),_:1}),i(A,{span:8},{default:c(()=>[i(g,{label:"攻击频率"},{default:c(()=>[T("label",null,L(o(s).rate),1)]),_:1})]),_:1}),i(A,{span:8},{default:c(()=>[i(g,{label:"攻击范围"},{default:c(()=>[T("label",null,L(o(s).range),1)]),_:1})]),_:1})]),_:1}),i(g,{label:"简介"},{default:c(()=>[T("div",{innerHTML:o(s).getInfoHtml(),style:{"line-height":"1.5em"}},null,8,nn)]),_:1}),i(y,null,{default:c(()=>[i(A,{span:8},{default:c(()=>[i(g,{label:"ability"},{default:c(()=>[T("label",null,L(o(s).ability.toFixed(1)),1)]),_:1})]),_:1}),i(A,{span:8},{default:c(()=>[i(g,{label:"power"},{default:c(()=>[T("label",null,L(o(s).power),1)]),_:1})]),_:1}),i(A,{span:8},{default:c(()=>[i(g,{label:"buffEffect"},{default:c(()=>[T("label",null,L(o(s).buffEffect().toFixed(1)),1)]),_:1})]),_:1})]),_:1}),i(y,null,{default:c(()=>[i(A,{span:8},{default:c(()=>[i(g,{label:"buildValue"},{default:c(()=>[T("label",null,L(o(s).buildValue()),1)]),_:1})]),_:1}),i(A,{span:8},{default:c(()=>[i(g,{label:"buildCost"},{default:c(()=>[T("label",null,L(o(s).buildCost()),1)]),_:1})]),_:1}),i(A,{span:8},{default:c(()=>[i(g,{label:"valueCost"},{default:c(()=>[T("label",null,L(o(s).valueCost()),1)]),_:1})]),_:1})]),_:1}),T("div",null,[i(g,{label:"升级计算",style:{"margin-bottom":"0 !important"}},{default:c(()=>[b(" 从 "),i(R,{modelValue:o(t).buildFrom,"onUpdate:modelValue":m[4]||(m[4]=E=>o(t).buildFrom=E),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),b(" 级到 "),i(R,{modelValue:o(t).buildTo,"onUpdate:modelValue":m[5]||(m[5]=E=>o(t).buildTo=E),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),b(" 级， 苦工总力量 "),i(R,{modelValue:o(t).buildPower,"onUpdate:modelValue":m[6]||(m[6]=E=>o(t).buildPower=E),size:"small","controls-position":"right",style:{width:"8em",margin:"0.5em"}},null,8,["modelValue"])]),_:1}),i(g,{style:{"margin-bottom":"0 !important"}},{default:c(()=>[b(" 需要时间："),T("label",null,L(o(us)(o(d))),1)]),_:1}),rn])]),_:1},8,["model"])}}}),un=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"})),aa=W({__name:"DifficultySelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const t=Object.entries(N.$_wave_hard_Obj).map(([l,s])=>({value:parseFloat(l),label:`${s.desc.split("^")[1]} (x${l}, +${s.add_score})`})),e=Ct(u,"modelValue");return(l,s)=>{const n=Tl;return p(),M(n,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=d=>e.value=d),options:o(t)},null,8,["modelValue","options"])}}}),dn=T("span",null,"A",-1),cn=T("span",null,"B",-1),_n={class:"space-x-8"},mn=T("div",{class:"space-x-4"},[T("span",null,"（假设每波+2且不引狼）")],-1),hn=W({__name:"UmapDataForm",emits:["export"],setup(u){const t=Z(N.$_map_Obj.m0B),e=Z(new ct(t.value)),l=oe({mid:"m0B",wid:"dahuil",score:0,diff:1});vl(()=>{t.value=N.$_map_Obj[l.mid],e.value=new ct(t.value)});const s=U(()=>ge.getOnlyExample().getData(l.wid)),n=U(()=>e.value.getDifficultyLevel(l.score)),d=U(()=>s.value.getHpMax(n.value,l.diff)),r=oe([]),m=Z(null),h=U(()=>r.map(x=>ge.getOnlyExample().getData(x))),g=U(()=>h.value.map(x=>({name:x.name,value:x.getHpMax(n.value,l.diff)}))),w=x=>{r.push(x),m.value=null};return(x,A)=>{const y=qe,R=Tl,v=Ue,E=wt,K=Ee,Q=ze,C=Fe("vue-latex"),q=Me;return p(),S(V,null,[i(y,{onClick:A[0]||(A[0]=j=>x.$emit("export",o(e)))},{default:c(()=>[b("导出")]),_:1}),i(q,{model:o(l),"label-width":"120px"},{default:c(()=>[i(v,{label:"原型"},{default:c(()=>[i(R,{modelValue:o(l).mid,"onUpdate:modelValue":A[1]||(A[1]=j=>o(l).mid=j),options:o(la)},null,8,["modelValue","options"])]),_:1}),i(v,{label:"名称"},{default:c(()=>[i(E,{modelValue:o(e).name,"onUpdate:modelValue":A[2]||(A[2]=j=>o(e).name=j),style:{width:"200px"}},null,8,["modelValue"])]),_:1}),i(v,{label:"通关进度"},{default:c(()=>[i(K,{modelValue:o(e).scoreMax,"onUpdate:modelValue":A[3]||(A[3]=j=>o(e).scoreMax=j)},null,8,["modelValue"])]),_:1}),i(v,{label:"Population"},{default:c(()=>[i(K,{modelValue:o(e).populationMax,"onUpdate:modelValue":A[4]||(A[4]=j=>o(e).populationMax=j)},null,8,["modelValue"])]),_:1}),i(v,{label:"难度系数"},{default:c(()=>[dn,i(K,{modelValue:o(e).hardA,"onUpdate:modelValue":A[5]||(A[5]=j=>o(e).hardA=j),size:"small"},null,8,["modelValue"]),cn,i(K,{modelValue:o(e).hardB,"onUpdate:modelValue":A[6]||(A[6]=j=>o(e).hardB=j),size:"small"},null,8,["modelValue"])]),_:1}),i(v,{label:"该地图的狼"},{default:c(()=>[(p(!0),S(V,null,B(o(r),(j,X)=>(p(),M(R,{key:X,modelValue:o(r)[X],"onUpdate:modelValue":te=>o(r)[X]=te,options:o(ut),clearable:"",onClear:te=>o(r).removeAt(X),size:"small",style:{width:"25%"}},null,8,["modelValue","onUpdate:modelValue","options","onClear"]))),128)),i(R,{modelValue:o(m),"onUpdate:modelValue":A[7]||(A[7]=j=>Ie(m)?m.value=j:null),options:o(ut),onChange:w,size:"small",style:{width:"25%"}},null,8,["modelValue","options"])]),_:1}),i(v,{label:"狼"},{default:c(()=>[i(R,{modelValue:o(l).wid,"onUpdate:modelValue":A[8]||(A[8]=j=>o(l).wid=j),options:o(ut)},null,8,["modelValue","options"]),i(Q,{effect:"light"},{default:c(()=>[b(" 血量系数："+L(o(s).hpMaxA)+","+L(o(s).hpMaxB)+","+L(o(s).hpMaxC),1)]),_:1})]),_:1}),i(v,{label:"进度"},{default:c(()=>[i(K,{modelValue:o(l).score,"onUpdate:modelValue":A[9]||(A[9]=j=>o(l).score=j),min:0},null,8,["modelValue"])]),_:1}),i(v,{label:"难度"},{default:c(()=>[i(aa,{modelValue:o(l).diff,"onUpdate:modelValue":A[10]||(A[10]=j=>o(l).diff=j)},null,8,["modelValue"])]),_:1}),i(v,null,{default:c(()=>[T("div",_n,[T("span",null,[b(" 等级： "),i(C,{expression:`L(x)=\\sqrt{h_a + h_b x}=${o(n).toFixed(2)}`},null,8,["expression"])]),T("span",null,"最大血量："+L(o(d)),1)])]),_:1}),i(v,null,{default:c(()=>[b(" 银币： "),i(C,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${o(e).calcPKGold(o(n))}`},null,8,["expression"])]),_:1}),i(v,null,{default:c(()=>[b(" 经验： "),i(C,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${o(e).calcPKExp(o(n))}`},null,8,["expression"])]),_:1}),i(v,null,{default:c(()=>[mn]),_:1}),i(wl,{"hp-data":o(g),height:300},null,8,["hp-data"])]),_:1},8,["model"])],64)}}}),pn=W({__name:"index",setup(u){const{toClipboard:t}=kl(),e=Z(!1),l=Z({}),s=Z(""),n=Z(),d=m=>{e.value=!0;const h={name:m.name,pass_score:m.scoreMax,yield_val:m.hardA,hard_ness:m.hardB,pop_max:m.populationMax};l.value=h,s.value=JSON.stringify(h)},r=()=>{t(s.value,n.value.$el),Al.success("已复制到剪贴板")};return(m,h)=>{const g=qe,w=Kl;return p(),S(V,null,[i(hn,{onExport:d}),i(w,{modelValue:o(e),"onUpdate:modelValue":h[0]||(h[0]=x=>Ie(e)?e.value=x:null),title:"导出数据"},{default:c(()=>[i(o(Ul),{data:o(l),virtual:"",deep:2},null,8,["data"]),i(g,{onClick:r,ref_key:"someRef",ref:n},{default:c(()=>[b("复制到剪贴板")]),_:1},512)]),_:1},8,["modelValue"])],64)}}}),gn=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"})),fn=W({__name:"BossDistribChart",props:{mid:{}},setup(u){const t=u;Ot([Sa,yt,Kt,xa,Pt,Mt]);const e=oe({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:[{left:"5%",right:"4%",bottom:"52%",containLabel:!0},{left:"5%",right:"4%",top:"52%",containLabel:!0}],dataset:{source:[]},xAxis:[{gridIndex:0},{gridIndex:1}],yAxis:[{type:"category",gridIndex:0},{type:"category",gridIndex:1}],series:[]});return vl(()=>{const l=N.$_map_Obj[t.mid].random_boss;if(!l)return;const s=l.map((m,h)=>{var g;return[Object.keys(m[3].properties.card)[0],m[1],Math.round((m[0]-(((g=l[h-1])==null?void 0:g[0])??0))*1e3)/10]}),n=F.uniq(s.map(m=>m[0])).sort(),d=F.uniq(s.map(m=>m[1])).sort(),r=[["boss",...n]].concat(d.map(m=>[m].concat(new Array(n.length).fill(0))));for(const m of s)r[d.indexOf(m[1])+1][n.indexOf(m[0])+1]=m[2];for(let m=0;m<n.length;m++)r[0][m+1]=Ae(n[m]);for(let m=0;m<d.length;m++)r[m+1][0]=Ae(d[m]);e.dataset.source=r,e.series=[...new Array(n.length).fill({type:"bar",stack:`${t.mid}-totalA`,label:{show:!0},emphasis:{focus:"series"}}),...new Array(d.length).fill({type:"bar",stack:`${t.mid}-totalB`,seriesLayoutBy:"row",label:{show:!0},emphasis:{focus:"series"},xAxisIndex:1,yAxisIndex:1})]}),(l,s)=>(p(),S("div",null,[i(o(Vl),{option:o(e),autoresize:"","update-options":{notMerge:!0},style:{height:"600px"}},null,8,["option"])]))}}),An=W({__name:"WolfNumberChart",props:{data:{},max:{}},setup(u){Ot([Kt,xl,yt,Pt,Mt]);const t=u,e=U(()=>({color:["#C00000"],xAxis:{type:"value",interval:1,axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},max:t.max},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.data.map(l=>l.name)},grid:{left:100,top:0,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.data.map(l=>l.num)}}));return(l,s)=>{const n=Fe("v-chart");return p(),M(n,{class:"chart",option:o(e)},null,8,["option"])}}});const En=Je(An,[["__scopeId","data-v-247bc23b"]]),sa=u=>(Dl("data-v-dabd02c1"),u=u(),Sl(),u),In=sa(()=>T("h3",null,"波工具",-1)),Tn=sa(()=>T("label",null,"下表为预留量",-1)),Ln=W({__name:"WaveTool",props:{mid:{},mapMonsterData:{}},setup(u){const t=u,e=oe({count:0,avgHp:"",reservation:[0,0,0,0,0,0,0],extra:"",result:"",resultRaw:""});let l=oe([]);const s=()=>{e.reservation.fill(0)},n=()=>{let d=xs(t.mid,[...e.reservation]);if(!d){Al.error("预留量不合法，请重新输入！");return}let[r,m]=d;e.extra&&(r=F.shuffle(r.concat(e.extra.split(",").map(h=>h.trim())))),e.resultRaw=`[${r.map(h=>`"${h}"`).join(",")}]`,e.result=Ae(r).join(","),l=m.map(h=>({name:Ae(h[0]),num:h[1]})),e.count=F.sumBy(m,h=>h[1])};return(d,r)=>{const m=qe,h=Ee,g=wt,w=Rt;return p(),M(w,{id:"wave-tool"},{default:c(()=>[In,i(m,{onClick:n},{default:c(()=>[b("随机生成波")]),_:1}),T("span",null,[b(" 共 "),i(h,{modelValue:o(e).count,"onUpdate:modelValue":r[0]||(r[0]=x=>o(e).count=x)},null,8,["modelValue"]),b(" 只狼，平均血量 "),i(g,{modelValue:o(e).avgHp,"onUpdate:modelValue":r[1]||(r[1]=x=>o(e).avgHp=x),modelModifiers:{number:!0},style:{width:"100px"}},null,8,["modelValue"])]),i(m,null,{default:c(()=>[b("组成推算")]),_:1}),T("div",null,[T("p",null,[Tn,i(m,{size:"small",onClick:s},{default:c(()=>[b("重置")]),_:1})]),T("table",null,[T("tbody",null,[T("tr",null,[(p(!0),S(V,null,B(d.mapMonsterData,x=>(p(),S("td",{key:x.id},L(x.name),1))),128))]),T("tr",null,[(p(!0),S(V,null,B(d.mapMonsterData,(x,A)=>(p(),S("td",{key:x.id},[i(h,{modelValue:o(e).reservation[A],"onUpdate:modelValue":y=>o(e).reservation[A]=y,size:"small","controls-position":"right",min:0},null,8,["modelValue","onUpdate:modelValue"])]))),128))])])]),T("p",null,[b(" 额外："),i(g,{modelValue:o(e).extra,"onUpdate:modelValue":r[2]||(r[2]=x=>o(e).extra=x),style:{width:"580px"},placeholder:"多个请用半角逗号分隔",spellcheck:"false"},null,8,["modelValue"])]),T("p",null,[b("波："),i(g,{modelValue:o(e).resultRaw,"onUpdate:modelValue":r[3]||(r[3]=x=>o(e).resultRaw=x),style:{width:"600px"},spellcheck:"false"},null,8,["modelValue"])]),T("p",null,[b("波："),i(g,{modelValue:o(e).result,"onUpdate:modelValue":r[4]||(r[4]=x=>o(e).result=x),style:{width:"600px"},spellcheck:"false"},null,8,["modelValue"])])]),i(En,{data:o(l),max:10},null,8,["data"])]),_:1})}}});const vn=Je(Ln,[["__scopeId","data-v-dabd02c1"]]),Dn=u=>(Dl("data-v-f17b886e"),u=u(),Sl(),u),Sn={class:"space-x-8"},xn={class:"space-x-4"},bn=Dn(()=>T("span",null,"（假设每波+2且不引狼）",-1)),Nn=W({__name:"UmapInfoForm",props:{mid:{},midModifiers:{}},emits:["update:mid"],setup(u){const t=Ct(u,"mid"),e=oe({mid:"m1",mid2:"",wid:"dahuil",score:0,diff:1});vl(()=>{t.value=e.mid});const l=U(()=>N.$_map_Obj[e.mid]),s=U(()=>ae.getMapData(e.mid)),n=U(()=>e.mid2===""?s.value:ae.getMapData(e.mid2)),d=U(()=>s.value.monsterList.map(v=>ge.getOnlyExample().getData(v))),r=U(()=>ge.getOnlyExample().getData(e.wid)),m=v=>v.map(E=>{let K=N.$_wolfAtt_Obj[E[1]];return{id:E[1],prob:E[0],name:K.name,pop:K.pop}}),h=v=>v?v.map(E=>{let K=N.$_wolfAtt_Obj[E[1]];return{id:E[1],prob:E[0],name:K.name,diff:parseFloat(E[2])}}):[],g=U(()=>n.value.getDifficultyLevel(e.score)),w=U(()=>r.value.getHpMax(g.value,e.diff)),x=U(()=>d.value.map(v=>({name:v.name,value:v.getHpMax(g.value,e.diff)}))),A=v=>{const E=s.value.populationMax;return Math.round((2+1.07*E)*Math.pow(v/.39,2/3))},y=v=>{const E=s.value.populationMax;return Math.round((3.5+.14*E)*Math.pow(v/.39,2/3))},R=U(()=>{let v=0,E=0;for(let K=0;K<=s.value.scoreMax;K+=2){let Q=Math.sqrt(s.value.hardA+s.value.hardB*K);v+=A(Q),E+=y(Q)}return{gold:v,exp:E}});return(v,E)=>{const K=Tl,Q=ze,C=Ue,q=Ve,j=ke,X=Ee,te=Fe("vue-latex"),na=Me;return p(),S(V,null,[i(na,{model:o(e),"label-width":"120px"},{default:c(()=>[i(C,{label:"地图"},{default:c(()=>[i(K,{modelValue:o(e).mid,"onUpdate:modelValue":E[0]||(E[0]=Y=>o(e).mid=Y),options:o(la)},null,8,["modelValue","options"]),i(Q,{effect:"light"},{default:c(()=>[b(" 难度系数："+L(o(s).hardA)+","+L(o(s).hardB),1)]),_:1}),i(Q,{effect:"light"},{default:c(()=>[b(" Population："+L(o(s).populationMax),1)]),_:1})]),_:1}),i(C,{label:"引狼到"},{default:c(()=>[i(j,{modelValue:o(e).mid2,"onUpdate:modelValue":E[1]||(E[1]=Y=>o(e).mid2=Y),clearable:""},{default:c(()=>[i(q,{label:"无",value:""}),(p(!0),S(V,null,B(o(ta),Y=>(p(),M(q,{key:Y.id,label:`${Y.id} ${Y.name}`,value:Y.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(C,{label:"该地图的狼"},{default:c(()=>[(p(!0),S(V,null,B(m(o(l).wolf_proportion),Y=>(p(),M(Q,{key:Y.id,type:"success",class:"mx-1 tag-button",effect:"light",onClick:ia=>o(e).wid=Y.id},{default:c(()=>[T("sub",null,L(Y.prob),1),b(" "+L(Y.name)+" ",1),T("sup",null,L(Y.pop),1)]),_:2},1032,["onClick"]))),128))]),_:1}),"random_boss"in o(l)?(p(),M(C,{key:0,label:"随机 Boss"},{default:c(()=>[(p(!0),S(V,null,B(h(o(l).random_boss),Y=>(p(),M(Q,{key:Y.id,type:"success",class:"mx-1 tag-button",effect:"light",onClick:ia=>{o(e).wid=Y.id,o(e).diff=Y.diff}},{default:c(()=>[T("sub",null,L(Y.prob),1),b(" "+L(Y.name)+" ",1),T("sub",null,L(Y.diff),1)]),_:2},1032,["onClick"]))),128))]),_:1})):fe("",!0),i(C,{label:"狼"},{default:c(()=>[i(K,{modelValue:o(e).wid,"onUpdate:modelValue":E[2]||(E[2]=Y=>o(e).wid=Y),options:o(ut)},null,8,["modelValue","options"]),i(Q,{effect:"light"},{default:c(()=>[b(" 血量系数："+L(o(r).hpMaxA)+","+L(o(r).hpMaxB)+","+L(o(r).hpMaxC),1)]),_:1})]),_:1}),i(C,{label:"进度"},{default:c(()=>[i(X,{modelValue:o(e).score,"onUpdate:modelValue":E[3]||(E[3]=Y=>o(e).score=Y),min:0},null,8,["modelValue"]),i(Q,{effect:"light",class:"tag-button",onClick:E[4]||(E[4]=Y=>o(e).score=o(n).scoreMax)},{default:c(()=>[b(" 通关进度："+L(o(n).scoreMax),1)]),_:1})]),_:1}),i(C,{label:"难度"},{default:c(()=>[i(aa,{modelValue:o(e).diff,"onUpdate:modelValue":E[5]||(E[5]=Y=>o(e).diff=Y)},null,8,["modelValue"])]),_:1}),i(C,null,{default:c(()=>[T("div",Sn,[T("span",null,[b(" 等级： "),i(te,{expression:`L(x)=\\sqrt{h_a + h_b x}=${o(g).toFixed(2)}`},null,8,["expression"])]),T("span",null,"最大血量："+L(o(w)),1)])]),_:1}),i(C,null,{default:c(()=>[b(" 银币： "),i(te,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${A(o(g))}`},null,8,["expression"])]),_:1}),i(C,null,{default:c(()=>[b(" 经验： "),i(te,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${y(o(g))}`},null,8,["expression"])]),_:1}),i(C,null,{default:c(()=>[T("div",xn,[T("span",null,"总银币："+L(o(R).gold),1),T("span",null,"总经验："+L(o(R).exp),1),bn])]),_:1}),i(wl,{"hp-data":o(x)},null,8,["hp-data"])]),_:1},8,["model"]),i(vn,{mid:o(e).mid,mapMonsterData:o(d)},null,8,["mid","mapMonsterData"])],64)}}});const wn=Je(Nn,[["__scopeId","data-v-f17b886e"]]),Rn=T("h2",{style:{"text-align":"center"}},"狼出现频率（按数量，供参考）",-1),Cn=W({__name:"WaveDistribChart",props:{mid:{},height:{default:600},width:{default:600}},setup(u){Ot([xl,ba,yt,Kt,Pt,Na,Mt,wa]);const t=u,e=U(()=>ya[t.mid]),l=U(()=>[N.$_map_Obj[t.mid].name,...N.$_map_Obj[t.mid].wolf_proportion.map(r=>Ae(r[1]))]),s=U(()=>F.range(e.value.all.length)),n=U(()=>F.zip(l.value,[e.value.all,...e.value.each]).map((r,m)=>({title:r[0],pdf:r[1],cdf:[...za(r[1])]}))),d=U(()=>({color:n.value.flatMap(r=>[ot(r.title,70,50),ot(r.title,50,80)]),tooltip:{trigger:"axis",valueFormatter:r=>os(r,6)},title:n.value.map((r,m)=>({text:r.title,left:"center",textVerticalAlign:"middle",top:t.height*((m+.5)/n.value.length)-5,z:-1,textStyle:{fontSize:t.height/n.value.length*.4,color:"#ccc"}})),xAxis:n.value.map((r,m)=>({gridIndex:m,type:"category",axisTick:{alignWithLabel:!0},data:s.value})),yAxis:n.value.flatMap((r,m)=>[{gridIndex:m,type:"value",alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}},{gridIndex:m,type:"value",position:"right",min:0,max:1,interval:.2,alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}}]),grid:n.value.map((r,m)=>({top:t.height*(m/n.value.length)+10,bottom:t.height*(1-(m+1)/n.value.length)+20})),series:n.value.flatMap((r,m)=>[{xAxisIndex:m,yAxisIndex:m*2,type:"bar",barWidth:"90%",data:r.pdf},{xAxisIndex:m,yAxisIndex:m*2+1,type:"line",smooth:!0,data:r.cdf}])}));return(r,m)=>{const h=Fe("v-chart");return p(),S("div",null,[Rn,i(h,{option:o(d),autoresize:"",style:{height:"600px"}},null,8,["option"])])}}}),On=W({__name:"index",setup(u){const t=Z("m1"),e=Z("wolf");return(l,s)=>{const n=Il,d=Nt,r=bt,m=El;return p(),M(m,null,{default:c(()=>[i(n,{md:16},{default:c(()=>[i(wn,{mid:o(t),"onUpdate:mid":s[0]||(s[0]=h=>Ie(t)?t.value=h:null)},null,8,["mid"])]),_:1}),i(n,{md:8,sm:16},{default:c(()=>[i(r,{modelValue:o(e),"onUpdate:modelValue":s[1]||(s[1]=h=>Ie(e)?e.value=h:null),class:"chart-area"},{default:c(()=>[i(d,{label:"狼分布",name:"wolf"},{default:c(()=>[i(Cn,{mid:o(t)},null,8,["mid"])]),_:1}),i(d,{label:"Boss分布",name:"boss"},{default:c(()=>[i(fn,{mid:o(t)},null,8,["mid"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});const yn=Object.freeze(Object.defineProperty({__proto__:null,default:On},Symbol.toStringTag,{value:"Module"})),Kn=T("p",null,"前排解释：",-1),Pn=T("p",null,"狼的等级随进度增加而增加。难度系数 hardA 影响初始狼等级，hardB 影响等级增长速率。",-1),Mn=T("p",null,"population 影响一波狼的容量。每只狼都会占用一定容量。",-1),Vn=T("p",null,"不同随机boss有出现权重。出现率、难度、奖励水平是相对应的，难的比较稀有，奖励也会比较好。",-1),kn=W({__name:"index",setup(u){const t=F.map(N.$_map_Obj,(s,n)=>F.extend(s,{id:n})),e=(s,n)=>{let d=s.need_lev||0,r=n.need_lev||0;return d-r},l=s=>s.map(n=>{const d=ge.getOnlyExample().getData(n[1]);return{prob:n[0],name:d.name,pop:d.population}});return(s,n)=>{const d=Ye,r=ze,m=Xe;return p(),S(V,null,[Kn,Pn,Mn,Vn,i(m,{data:o(t),"default-sort":{prop:"index",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},height:"600px",style:{width:"100%","font-size":"80%"},class:"testbox"},{default:c(()=>[i(d,{prop:"index",label:"index",sortable:"",align:"center",fixed:"",width:"70"}),i(d,{prop:"id",label:"id",sortable:"",align:"center",fixed:"",width:"80"}),i(d,{prop:"name",label:"name",sortable:"",align:"center",fixed:"",width:"80"}),i(d,{prop:"pass_score",label:"scoreMax",sortable:"",align:"center"}),i(d,{label:"hardnessFactor"},{default:c(()=>[i(d,{prop:"yield_val",label:"hardA",sortable:"",align:"center"}),i(d,{prop:"hard_ness",label:"hardB",sortable:"",align:"center"})]),_:1}),i(d,{prop:"pop_max",label:"populationMax",sortable:"",align:"center"}),i(d,{prop:"interval",label:"unkennelDelay",sortable:"",align:"center"}),i(d,{prop:"interval_rule",label:"unkennelRule",sortable:"",align:"center"}),i(d,{prop:"teleport_rule",label:"teleportRule",sortable:"",align:"center"}),i(d,{prop:"need_lev",label:"needLevel",sortable:"","sort-method":e,align:"center"}),i(d,{prop:"pass_by",label:"passBy",align:"center"},{default:c(h=>[b(L(h.row.pass_by.map(g=>o(N).$_map_Obj[g].name).join(", ")),1)]),_:1}),i(d,{prop:"wolf_proportion",label:"monsterList","cell-style":{"text-align":"left"}},{default:c(h=>[(p(!0),S(V,null,B(l(h.row.wolf_proportion),g=>(p(),M(r,{key:g.prob,class:"ml-2"},{default:c(()=>[T("sub",null,L(g.prob),1),b(" "+L(g.name)+" ",1),T("sup",null,L(g.pop),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["data"])],64)}}});const Un=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"})),Fn=W({__name:"index",setup(u){const t=oe({level:1}),e=U(()=>((2*(t.level+1)+3)*(t.level+1)+4)*(t.level+1)+20),l=U(()=>Math.round((.015*t.level+.8)*t.level+2)),s=U(()=>Math.floor(t.level/4+1)),n=U(()=>(t.level+7)*l.value);return(d,r)=>{const m=Ee,h=Ue,g=Me;return p(),M(g,{model:o(t),"label-width":"120px"},{default:c(()=>[i(h,{label:"等级"},{default:c(()=>[i(m,{modelValue:o(t).level,"onUpdate:modelValue":r[0]||(r[0]=w=>o(t).level=w),min:1},null,8,["modelValue"])]),_:1}),i(h,{label:"升级经验"},{default:c(()=>[T("label",null,L(o(e)),1)]),_:1}),i(h,{label:"力量"},{default:c(()=>[T("label",null,L(o(l)),1)]),_:1}),i(h,{label:"连升等级"},{default:c(()=>[T("label",null,L(o(s)),1)]),_:1}),i(h,{label:"苦工价格"},{default:c(()=>[T("label",null,L(o(n)),1)]),_:1})]),_:1},8,["model"])}}}),$n=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"})),rt=class rt extends We{constructor(e,l=1,s=1,n=0){super();a(this,"index",0);a(this,"m_level",0);a(this,"exp",0);a(this,"hp",0);a(this,"hpMax",0);a(this,"hpRate");a(this,"skillList",[]);this.tag="Monster",this.updateData(e),this.hpRate=s,this.updateLevelExp(l,n),this.index=rt.COUNT++}updateData(e){e==""&&(e="dahuil");let l=e.indexOf("|");l!=-1&&(e=e.slice(0,l)),this.m_data=ge.getOnlyExample().getData(e),this.m_data==null&&(this.m_data=ge.getOnlyExample().getData("dahuil"))}createSkills(e){return e.map(l=>new _e(l[We.SKILL_ID],l[We.SKILL_LEVEL],this).getSubClasses())}initSkills(){this.skills={};const e=this.data.skills;if(e!=null){this.skillList=this.createSkills(e);for(const l of this.skillList)this.skills[l.data.kindId]=l}}conflictSkillList(e){const l=[];if(e==null)return[];const s=N.$_conflict_skill_kind,n=e.data.kindId;this.skills[n]&&l.push(_e.getKindName(n));for(const d of s)if(d.indexOf(n)!=-1)for(let r=0;r<d.length;r++)n!=d[r]&&this.skills[d[r]]&&l.push(_e.getKindName(d[r]));return l}getSkillById(e){let l,s=null;for(l in this.skills)if(s=this.skills[l],s.data.id==e)return s;return null}updateLevelExp(e=0,l=0){this.level=e,this.exp=l}get allSkillsScore(){let e=1;for(const l of this.skillList)l.enabled&&(e*=this.getSkillScore(l.data.id,l.level));return e}getSkillScore(e,l){let s=null,n=N.$_skill_grade_score,d=e.indexOf("_");return e.indexOf("_")==-1?1:(s=e.slice(d+1,e.length),n[s]&&n[s][String(l)]?n[s][String(l)]:1)}get levelMax(){return N.$_camp_wolf_lv_max}get expMax(){let e=this.m_level+1;return Math.round(this.monsterData.expMaxA+this.monsterData.expMaxB*e+this.monsterData.expMaxC*e*e+this.monsterData.expMaxD*e*e*e)}get level(){return this.m_level}set level(e){this.m_level=Math.max(Math.min(e,this.levelMax),0),ae.currentMap&&ae.currentMap&&(this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate)),this.hpMax<=1&&(this.hpMax=1)}refreshLevel(){this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate*1),this.hpMax<=1&&(this.hpMax=1)}get monsterData(){return this.m_data}get power(){let e=N.$_wolf_worth_factor,l=this.hpMax,s=this.monsterData.speedBase,n=this.allSkillsScore;return Math.round(l*s*n*e[2])}get skillInfo(){if(this.skills==null)return"";const e=Object.values(this.skills);return e.sort((l,s)=>l.index-s.index),e.map(l=>l.skillInfo).join("")}};a(rt,"MONSTER_SAY_ARRAY",[_.getLanguageStr(1250),_.getLanguageStr(1251),_.getLanguageStr(1252),_.getLanguageStr(1253),_.getLanguageStr(1254),_.getLanguageStr(1255),_.getLanguageStr(1256),_.getLanguageStr(1257),_.getLanguageStr(1258),_.getLanguageStr(1259)]),a(rt,"WEIGHTILY_SIZE",487500),a(rt,"COUNT",0);let mt=rt;const Bn=W({__name:"WolfSelect",setup(u){return(t,e)=>{const l=Ve,s=ca,n=ke;return p(),M(n,null,{default:c(()=>[i(s,{label:"前线"},{default:c(()=>[(p(!0),S(V,null,B(o(Zs),d=>(p(),M(l,{key:d.id,label:d.label,value:d.id},null,8,["label","value"]))),128))]),_:1}),i(s,{label:"防线"},{default:c(()=>[(p(!0),S(V,null,B(o(Ql),d=>(p(),M(l,{key:d.id,label:d.label,value:d.id},null,8,["label","value"]))),128))]),_:1}),i(s,{label:"噩梦"},{default:c(()=>[(p(!0),S(V,null,B(o(ea),d=>(p(),M(l,{key:d.id,label:d.label,value:d.id},null,8,["label","value"]))),128))]),_:1})]),_:1})}}}),Hn={class:"text-xs"},Gn={class:"sk-tag text-xs"},Wn=W({__name:"WolfSkillTable",props:{wolf:{}},emits:["change"],setup(u,{emit:t}){const e=u,l=t,s=Z(),n=F.groupBy(N.$_skillAtt_Obj.monsterSkill,A=>A.kindId);F.each(n,(A,y)=>n[y]=F.sortBy(A,"id"));const d=Object.keys(n).sort();let r=oe([]);At(()=>e.wolf.data.id,()=>{var A,y;e.wolf.initSkills(),r.length=0,r.push(...e.wolf.skillList.map((R,v)=>m(R,v))),(A=s.value)==null||A.clearSelection(),(y=s.value)==null||y.toggleAllSelection()});const m=(A,y=0)=>oe({index:y,kindId:A.data.kindId,id:A.data.id,name:A.data.name,level:A.level,levelMax:A.levelMax,score:A.skillScore,info:A.skillInfo,tags:A.skillTag1+A.skillTag2+A.skillTag3,skill:A});function h(A){A.id=n[A.kindId][0].id,A.level=1,g(A)}const g=A=>{const y=r.indexOf(A),R=new _e(A.id,A.level,e.wolf).getSubClasses();e.wolf.skillList[y]=R,Object.assign(A,m(R,y)),l("change")},w=()=>{var y;const A=m(new _e("WeakFire_X1",1,e.wolf).getSubClasses(),r.length);r.push(A),(y=s.value)==null||y.toggleRowSelection(A,!0),l("change")},x=A=>{e.wolf.skillList.forEach(y=>y.enabled=A.find(R=>R.skill==y)!==void 0)};return(A,y)=>{const R=Ye,v=Ve,E=ke,K=Ee,Q=qe;return p(),S("div",null,[i(o(Xe),{ref_key:"skillTableRef",ref:s,data:o(r),"row-key":"index",style:{"font-size":"small"},onSelectionChange:x},{default:c(()=>[i(R,{type:"selection","reverse-selection":"",width:30}),i(R,{label:"KindId",width:160,"header-align":"center"},{default:c(C=>[i(E,{modelValue:C.row.kindId,"onUpdate:modelValue":q=>C.row.kindId=q,onChange:q=>h(C.row),style:{"font-size":"small"}},{default:c(()=>[(p(!0),S(V,null,B(o(d),q=>(p(),M(v,{key:q,label:q,value:q},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),i(R,{label:"Id",width:200,"header-align":"center"},{default:c(C=>[i(E,{modelValue:C.row.id,"onUpdate:modelValue":q=>C.row.id=q,onChange:q=>g(C.row),style:{"font-size":"small"}},{default:c(()=>[(p(!0),S(V,null,B(o(n)[C.row.kindId],q=>(p(),M(v,{key:q.id,label:q.id,value:q.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),i(R,{prop:"name",label:"Name",width:120,"header-align":"center",align:"center"}),i(R,{prop:"level",label:"Level",width:120,"header-align":"center",align:"center"},{default:c(C=>[i(K,{modelValue:C.row.level,"onUpdate:modelValue":q=>C.row.level=q,min:1,max:C.row.levelMax,size:"small",style:{width:"80px"},onChange:q=>g(C.row)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:1}),i(R,{prop:"levelMax",label:"Level Max",width:120,"header-align":"center",align:"center"}),i(R,{prop:"score",label:"Score",width:120,"header-align":"center",align:"center"}),i(R,{label:"Info"},{default:c(C=>[T("span",Hn,L(C.row.info),1),T("span",Gn,L(C.row.tags),1)]),_:1})]),_:1},8,["data"]),i(Q,{onClick:w},{default:c(()=>[b("增加一行")]),_:1})])}}});const jn=Je(Wn,[["__scopeId","data-v-7964810f"]]),Xn={class:"ml-2"},Yn={class:"ml-8"},zn=T("p",null,"技能",-1),qn=W({__name:"WolfCalcOne",props:{wolf:{}},setup(u){const t=oe({wid:"al",level:1,expMax:0}),e=u;s();const l=n=>{e.wolf.updateData(n),s()};At(()=>e.wolf.level,s);function s(){e.wolf.refreshLevel(),t.expMax=e.wolf.expMax}return(n,d)=>{const r=Ue,m=Ee,h=Me;return p(),S(V,null,[i(h,{"label-width":80},{default:c(()=>[i(r,{label:"狼"},{default:c(()=>[i(Bn,{modelValue:o(t).wid,"onUpdate:modelValue":d[0]||(d[0]=g=>o(t).wid=g),onChange:l},null,8,["modelValue"])]),_:1}),i(r,{label:"等级"},{default:c(()=>[i(m,{modelValue:n.wolf.m_level,"onUpdate:modelValue":d[1]||(d[1]=g=>n.wolf.m_level=g),min:1},null,8,["modelValue"]),T("span",Xn,"最高等级："+L(n.wolf.levelMax),1)]),_:1}),i(r,{label:"速度"},{default:c(()=>[b(L(n.wolf.monsterData.speedBase),1)]),_:1}),i(r,{label:"升级经验"},{default:c(()=>[b(L(o(t).expMax),1)]),_:1}),i(r,{label:"血量"},{default:c(()=>[b(L(n.wolf.hpMax),1)]),_:1}),i(r,{label:"实力"},{default:c(()=>[b(L(n.wolf.power),1)]),_:1})]),_:1}),T("div",Yn,[zn,i(jn,{wolf:n.wolf},null,8,["wolf"])])],64)}}}),Jn=T("h2",null,"狼相关计算",-1),Zn=W({__name:"index",setup(u){const t=oe([new mt("dahuil")]),e=Z(t[0].index),l=U(()=>{const[n,d]=N.$_wolf_worth_factor;return Math.round(Math.pow(F.sumBy(t,r=>Math.pow(r.power,n)),d))}),s=(n,d)=>{if(d==="add"){const r=new mt("dahuil");t.push(r),e.value=r.index}else if(d==="remove"){const r=t;let m=e.value;m===n&&r.forEach((h,g)=>{if(h.index===n){const w=r[g+1]||r[g-1];w&&(m=w.index)}}),e.value=m,t.splice(t.findIndex(h=>h.index===n),1)}};return(n,d)=>{const r=Nt,m=bt;return p(),S("div",null,[Jn,T("div",null,"总实力："+L(o(l)),1),i(m,{modelValue:o(e),"onUpdate:modelValue":d[0]||(d[0]=h=>Ie(e)?e.value=h:null),type:"border-card",editable:"",onEdit:s,class:"m-4"},{default:c(()=>[(p(!0),S(V,null,B(o(t),(h,g)=>(p(),M(r,{key:h.index,label:h.monsterData.name,name:h.index},{default:c(()=>[i(qn,{wolf:h},null,8,["wolf"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])}}}),Qn=Object.freeze(Object.defineProperty({__proto__:null,default:Zn},Symbol.toStringTag,{value:"Module"})),pt=u=>(Dl("data-v-ca5efb48"),u=u(),Sl(),u),ei=pt(()=>T("h1",null,"狼数据",-1)),ti=pt(()=>T("p",null,"前排解释：",-1)),li=pt(()=>T("p",null,"pop 为狼在一波中占的容量，一般来说 pop 越大则出现机会越少。",-1)),ai=pt(()=>T("p",null,"charm 影响到寻路，charm 为负值越小则其他狼越会排斥它。",-1)),si=pt(()=>T("p",null,"hp_factor 影响血量关于等级增长，是二次函数系数。",-1)),ni={class:"sk-list"},ii={key:0,class:"sk-debuff"},ri={key:1,class:"sk-buff"},oi={class:"sk-name"},ui={class:"sk-id"},di={class:"sk-info"},ci={key:2,class:"sk-tag"},_i={key:3,class:"sk-tag"},mi={key:4,class:"sk-tag"},hi=W({__name:"index",setup(u){console.log("init wolfs");const t=F.map(N.$_wolfAtt_Obj,(e,l)=>l).sort().map(e=>{let l=new mt(e,0,0);l.initSkills();let s=l.monsterData;return{id:e,data:s,skills:Object.values(l.skills)}});return console.log(t),(e,l)=>{const s=Ye,n=Xe;return p(),S(V,null,[ei,ti,li,ai,si,i(n,{data:o(t),"default-sort":{prop:"id",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},"row-key":"id","max-height":"600",style:{width:"100%","max-width":"1200px"}},{default:c(()=>[i(s,{prop:"id",label:"id",sortable:"",width:150}),i(s,{prop:"data.name",label:"name",sortable:""}),i(s,{prop:"data.speedBase",label:"speedBase",sortable:""}),i(s,{prop:"data.population",label:"population",sortable:""}),i(s,{prop:"data.charm",label:"charm",sortable:"",width:100}),i(s,{label:"size"},{default:c(()=>[i(s,{prop:"data.width",label:"width",sortable:"",width:100}),i(s,{prop:"data.height",label:"height",sortable:"",width:100})]),_:1}),i(s,{label:"hpFactor"},{default:c(()=>[i(s,{prop:"data.hpMaxA",label:"a",sortable:"",width:100}),i(s,{prop:"data.hpMaxB",label:"b",sortable:"",width:100}),i(s,{prop:"data.hpMaxC",label:"c",sortable:"",width:100})]),_:1}),i(s,{label:"skills",type:"expand",width:"60"},{default:c(d=>[T("div",ni,[(p(!0),S(V,null,B(d.row.skills,r=>(p(),S("p",{key:r.data.id},[r.isDebuff?(p(),S("span",ii,"↓")):(p(),S("span",ri,"↑")),T("span",oi,L(r.name),1),T("span",ui,"["+L(r.data.id)+"]",1),T("span",di,L(r.skillInfo),1),r.skillTag1?(p(),S("span",ci,L(r.skillTag1),1)):fe("",!0),r.skillTag2?(p(),S("span",_i,L(r.skillTag2),1)):fe("",!0),r.skillTag3?(p(),S("span",mi,L(r.skillTag3),1)):fe("",!0)]))),128))])]),_:1})]),_:1},8,["data"])],64)}}});const pi=Je(hi,[["__scopeId","data-v-ca5efb48"]]),gi=Object.freeze(Object.defineProperty({__proto__:null,default:pi},Symbol.toStringTag,{value:"Module"}));

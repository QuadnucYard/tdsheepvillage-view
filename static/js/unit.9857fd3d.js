var ae=Object.defineProperty;var re=(I,e,t)=>e in I?ae(I,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):I[e]=t;var s=(I,e,t)=>(re(I,typeof e!="symbol"?e+"":e,t),t);import{G as h}from"./GlobalData.16032a2d.js";var v;let C=(v=class{static changeScaleByW$H(e,t){let i=NaN,a=NaN;(e.width>t||e.height>t)&&(e.width>e.height?(i=e.width,e.width=t,e.height=e.height*e.width/i):(a=e.height,e.height=t,e.width=e.width*e.height/a))}static check_A_has_B(e,t){return e!=null&&t!=null?!!e.contains(t):!1}static formatTime(e,t=!1){let i=e%60,a=Math.floor(e/60)%60,r=Math.floor(e/3600),u="";if(t){if(r>0)return u=r.toString()+GlobalDataGetValue.getLanguageStr(21),u+(a.toString()+GlobalDataGetValue.getLanguageStr(22));if(a>0)return u+=a.toString()+GlobalDataGetValue.getLanguageStr(22),u+(i.toString()+GlobalDataGetValue.getLanguageStr(23));i>=0&&(u+=i.toString()+GlobalDataGetValue.getLanguageStr(23))}else r>=0&&(u=(r>9?r.toString():"0"+r.toString())+":"),a>=0&&(u+=(a>9?a.toString():"0"+a.toString())+":"),i>=0&&(u+=Math.floor(i)>9?Math.floor(i).toString():"0"+Math.floor(i).toString());return u}static formatTime_day(e){let t=Math.floor(e/3600),i=Math.floor(t/24),a=Math.ceil(e/60)%60,r=t%24,u="";return i>0&&(u=i.toString()+GlobalDataGetValue.getLanguageStr(20)),r>0&&(u+=r.toString()+GlobalDataGetValue.getLanguageStr(21)),a>0&&(u+=a.toString()+GlobalDataGetValue.getLanguageStr(22)),u}static formatTime_M(e,t=!1){let i=Math.floor(e/60)%60,a=Math.floor(e/3600),r="";return t?a>0?(r=a.toString()+GlobalDataGetValue.getLanguageStr(21),r+(i.toString()+GlobalDataGetValue.getLanguageStr(22))):i>0?r+(i.toString()+GlobalDataGetValue.getLanguageStr(22)):GlobalDataGetValue.getLanguageStr(24):(a>=0&&(r=a.toString()+":"),i>=0&&(r+=i.toString()+":"),r)}static isAllEmbed(e){let t=0,i=null,a=GlobalData.EMBED;for(t=0;t<e.length;t++)if(i=e.charAt(t),a.indexOf(i)==-1)return!1;return!0}static getElementNum(e){let t,i=0;for(t in e)i++;return i}static randomElement(e){let t,i=0,a=v.getElementNum(e),r=Math.floor(Math.random()*a);for(t in e)if(i++,i==r)return t;return null}static formatHtmlText_normal(e,t=10,i=3355443,a=""){return v.formatHtmlText(e,i,!1,14,a,t)}static getSimpleNumStr(e,t=!1){let i=null;return e>1e4?(i=t?GlobalDataGetValue.getLanguageStr(116):GlobalDataGetValue.getLanguageStr(108),Math.round(e/1e4)+i):String(e)}static getValueByIndex(e,t){let i,a=null;for(i in t)if(i!=v.DEFAULT&&(a=v.getIDPos(i),e>=a.x&&e<=a.y))return t[i];return t[v.DEFAULT]!=null?t[v.DEFAULT]:1}static getIDPos(e){let t=e.indexOf("_"),i=new Point;return i.x=int(e.slice(0,t)),i.y=int(e.slice(t+1,e.length)),i}static fillSpace(e,t=10,i=!0){let a=0,r=0,u=0,g=0,E="";for(r=0;r<e.length;r++)u=e.charCodeAt(r),u>=32&&u<=126?a=1:a=2,g+=a;for(r=g;r<t;r++)E+=" ";return i?E+=e:E=e+E,E}static formatHtmlText(e,t=3355443,i=!1,a=14,r="",u=12,g=null){let E="",D="",F="#"+t.toString(16);return r==""&&(r="SimHei"),u<1e3?(E=e,D=v.formatLine(E,`
`,u*2,g)):D=e,i?'<font color="'+F+'" size="'+a+'" face="'+r+'"><b>'+D+"</b></font>":'<font color="'+F+'" size="'+a+'" face="'+r+'">'+D+"</font>"}static getLine(e=40,t="=",i="",a=5){let r=0,u="";for(t==""&&(t="="),i==""&&(i="left"),r=0;r<e;r++)u+=t;return HtmlTextFormat.format(u,i,6316128,a)}static formatHtmlTextBr(e,t="left"){let i="";for(let a=0;a<e.length;a++)i+='<P ALIGN="'+t+'">'+e[a]+"</P>";return i}static formatLine(e,t=`
`,i=16,a=null){let r=0,u=0,g=0,E=null,D="",F=0;for(a==null&&(a=[]),i<=1&&(i=2),r=0;r<e.length;r++)g=e.charCodeAt(r),E=e.charAt(r),E==`
`?(F=0,D+=E):(a.indexOf(E)!=-1?u=0:g>=32&&g<=126?u=1:u=2,F+=u,F>i&&(D+=t,F=u),D+=E);return D}static clearLine(e){return e=e.replace(`
`,""),e=e.replace("<br>",""),e.replace("</br>","")}static isHtml(e){let t=e.indexOf("<"),i=e.indexOf(">");return t!=-1&&i!=-1&&t<i}static insertStr(e,t=`
`,i=4,a=1){let r="",u="",g=0;for(a<=0&&(a=int.MAX_VALUE),i<=0&&(i=1);g<a;)u=e.substr(g*i,i),g++,u.length!=i&&(r+=u),u+=t,r+=u;return r+e.substr(g*i)}static getGlobalAttValue_byID(e,t=0){return e["id_"+t]}static imgLoadByHtmlTxt(e,t,i=50,a=50){try{t==""||t==null||t.length<9?v.imgLoadByHtmlTxt(e,GlobalData.$_urlMaterial+GlobalData.$_user_default_headurl):e.htmlText='<img src="'+t+'" hspace="0" vspace="0" width="'+i+'" height="'+a+'" />'}catch{trace("error have img url"),v.imgLoadByHtmlTxt(e,GlobalData.$_urlMaterial+GlobalData.$_user_default_headurl)}}static nameFormat(e){return e==null||e.length==0?GlobalDataGetValue.getDataProfileTxt(GlobalData.$_user_default_name):GlobalDataGetValue.getDataProfileTxt(e)}static addObjectNewAtt(e,t){let i=null;if(!this.Tools.isNullAndUndefined(t))for(i in t)e[i]=t[i];return e}static isSameDate(e,t){return!e||!t?!1:e.getUTCFullYear()==t.getUTCFullYear()&&e.getUTCMonth()==t.getUTCMonth()&&e.getUTCDate()==t.getUTCDate()}static getRandom(e,t){let i=0;return e==t?e:(e>t&&(i=e,e=t,t=i),i=t-e+1,Math.floor(e+Math.random()*i))}static clone(e){let t=new ByteArray;return t.writeObject(e),t.position=0,t.readObject()}static replaceString(e,t,i){let a=new RegExp(t,"g");return e.replace(a,i)}static getDateSecond(e){return Math.floor(e.getTime()*.001)}static drawRoundRectFun(e,t,i,a=16777215,r=1){let u=new Sprite;return u.graphics.beginFill(a,r),u.graphics.drawRoundRect(0,0,e,t,i,i),u.graphics.endFill(),u}static strIsNULL(e){return trace("*******Tools.strIsNULL******",e==null,e),e==""||e==null||e==null}static isTrueClass_self(e,t=""){let i=!1;return String(getQualifiedClassName(e)).split("::")[1]==t&&(i=!0),i}static copyObject(e){let t=new ByteArray;return t.writeObject(e),t.position=0,t.readObject()}static isNoChildrenInArr(e){let t=!1;return e!=null&&e.length>0?t=!1:t=!0,t}static isNoChildrenInObj(e){let t=0,i=null,a=!0;if(e){t=0;for(i in e)t++;t>0&&(a=!1)}return a}static strMaxLength(e,t=5){return GlobalData.$_snsId=="aima"?e.substr(0,15):e.substr(0,t)}static toString(e,t=0,i=!1){let a=0,r=0,u=null,g="";if(t++,e==null)return"null";let E=typeof e,D=0;switch(E){case"number":return e.toString()+"";case"string":return'"'+e+'"';case"object":if(e instanceof Array){if(D=this.Tools.getElementNum(e),D>1)for(t>1&&(g+=`
`),r=0;r<t-1;r++)g+="	";for(g+="[",a=0;a<e.length;a++){if(D>1)for(g+=`
`,r=0;r<t;r++)g+="	";g+=v.toString(e[a],t),g+=","}if(D>0&&(g=g.slice(0,g.length-1)),D>1)for(g+=`
`,r=0;r<t-1;r++)g+="	";g+="]"}else if(e instanceof Date)g="new Date("+e.getTime()+")";else{if(D=this.Tools.getElementNum(e),D>1)for(t>1&&(g+=`
`),r=0;r<t-1;r++)g+="	";g+="{";for(u in e){if(D>1)for(g+=`
`,r=0;r<t;r++)g+="	";!isNaN(Number(u.slice(0,1)))||u.search(/[^a-zA-Z0-9_]/)!=-1?g+='"'+u+'":'+v.toString(e[u],t):g+=u+":"+v.toString(e[u],t),g+=","}if(D>0&&(g=g.slice(0,g.length-1)),D>1)for(g+=`
`,r=0;r<t-1;r++)g+="	";g+="}"}break;case"boolean":return e.toString()+""}return g}static randomArray(e){return e.sort(function(){return Math.random()>.5?-1:1}),e}static getTodayEndUTCTime(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),23,59,59)}static idToOpenId(e,t=""){let i=0,a=0;if(t==""&&(t=GlobalString.SNS_ID_QQ),!isNaN(Number(e))&&t==GlobalString.SNS_ID_QQ)for(e=Number(e).toString(16),e=e.toUpperCase(),i=e.length,a=0;a<32-i;a++)e="0"+e;return e}static openIdToId(e,t=""){return t==""&&(t=GlobalString.SNS_ID_QQ),t==GlobalString.SNS_ID_QQ&&(e=parseInt(e,16).toString(10)),e}static replaceAllBySplit(e,t,i){return e==null?null:e.split(t).join(i)}static formatNumberToString(e){let t=null;return e>=1e3&&e<=9999?(e=Math.floor(e*.001),t=e.toString()+"千"):e>=1e4?(e=Math.floor(e*1e-4),t=e.toString()+"万"):t=e.toString(),t}static formatFriendList(e,t){let i=0;if(e==null)return[];let a=GlobalData.$_GAME_userData.uid;t==null&&(t=[]);let r=e.concat();for(let u=0;u<r.length;u++)a==r[u].uid&&r.splice(u,1);for(let u=0;u<t.length;u++)for(i=r.length-1;i>=0;i--)r[i].uid==t[u]&&r.splice(i,1);return r}static getFriendUID(e){if(e==null)return[];let t=[];for(let i=0;i<e.length;i++)t.push(e[i].uid);return t}static get_snsid_pf(){return GlobalData.$_snsId=="th"||GlobalData.$_snsId=="aima"||GlobalData.$_referer=="tapp"||GlobalData.$_snsId=="mbga"||GlobalData.$_referer=="3366"}},s(v,"DEFAULT","default"),v);var T;let l=(T=class{GlobalDataGetValue(){throw new Error("this.GlobalDataGetValue 无法实例化")}static getSystemMsg(e,t){return h.$_global_systemMsg[e][t]}static addObjAttribute_type_id(e){let t=null,i=null;for(t in e)for(i in e[t])e[t][i].type=t.toString(),e[t][i].id=i.toString();return e}static addObjAttribute_type_id_one(e,t){let i=null,a={};for(i in e)a[i]=e[i],a[i].type=t,a[i].id=i.toString();return a}static getLanguageStr(e,...t){let i=null,a=null,r="";if(h.$_global_language_str!=null&&(h.$_global_language_str.getElementsByTagName("id"+e)[0]!=null?h.$_global_language_str.getElementsByTagName("id"+e)[0].getAttribute("str")=="CHILD2010"?r=h.$_global_language_str.getElementsByTagName("id"+e)[0].children().toString():r=h.$_global_language_str.getElementsByTagName("id"+e)[0].getAttribute("str"):r=null),r.length<=0)return"";let u=r.search("%%");for(;u!=-1;)a=r.slice(u,u+6),r=r.replace(a,T.getLanguageStr(parseInt(a.slice(2)))),u=r.search("%%");for(let g=0;g<t.length;g++)i="%"+g,r=C.replaceString(r,i,t[g]);return r}static getLogMsgTemp(e,t){let i=null,a=null,r=null,u=null,g=null,E=null,D=null,F="";if(!C.isNullAndUndefined(t)&&(i=e.msg_type,a=e.hasOwnProperty("friend_id")?e.friend_id:"",r=e.friend_name?e.friend_name:T.getDataProfileTxt(h.$_user_default_name),r='<a href="event:'+a+'"><font color="#FF0000">'+r+"</font></a>",u=C.isNullAndUndefined(e.data)?{}:e.data,u.friend=r,g="",t.hasOwnProperty(e.msg_type))){F=T.getDataProfileTxt(t[i]),E="";for(D in u)E=D.toString(),E=="user_name"&&u[D]==null?g=this.GlobalDataGetValue.getDataProfileTxt(h.$_user_default_name):E=="p_str"?g=T.getDataProfileTxt_Gem(String(u[D])):g=T.getDataProfileTxt(String(u[D])),E=="user_name"?g="{"+g+"}":E=="number"?g="["+g+"]":(E=="properties"||E!="friend")&&(g="("+g+")"),E="${"+E+"}",F=C.replaceAllBySplit(F,_var,g)}return F}static setObjecInConfigStr_format(e){return e.hasOwnProperty(UserData.UName)&&(e[UserData.UName]=T.getDataProfileTxt(e[UserData.UName])),e.hasOwnProperty(UserData.INFO)&&(e[UserData.INFO]=T.getDataProfileTxt(e[UserData.INFO])),e.hasOwnProperty(UserData.TITLE)&&(e[UserData.TITLE]=T.getDataProfileTxt(e[UserData.TITLE])),e.hasOwnProperty(UserData.TITLEINFO)&&(e[UserData.TITLEINFO]=T.getDataProfileTxt(e[UserData.TITLEINFO])),e.hasOwnProperty(UserData.INFO1)&&(e[UserData.INFO1]=T.getDataProfileTxt(e[UserData.INFO1])),e.hasOwnProperty(UserData.DESC)&&(e[UserData.DESC]=T.getDataProfileTxt(e[UserData.DESC])),e.hasOwnProperty(UserData.SUMMARY)&&(e[UserData.SUMMARY]=T.getDataProfileTxt(e[UserData.SUMMARY])),e.hasOwnProperty(UserData.MSG)&&(e[UserData.MSG]=T.getDataProfileTxt(e[UserData.MSG])),e.hasOwnProperty(UserData.BUTTON)&&(e[UserData.BUTTON]=T.getDataProfileTxt(e[UserData.BUTTON])),e.hasOwnProperty(UserData.LINK)&&(e[UserData.LINK]=T.getDataProfileTxt(e[UserData.LINK])),e}static formatObjectOneClild(e){let t=null;for(t in e)e[t]=T.setObjecInConfigStr_format(e[t]);return e}static getDataProfileTxt(e){let t=null,i=!1,a=null,r=null,u=null,g=e;return e&&(t=String(e),i=t.indexOf(T.INTER_CONFIG_SPLIT_CHAR)>-1,a=null,r="",u="",i?(a=t.split(T.INTER_CONFIG_SPLIT_CHAR),r=a[0],u=a[1],h.$_global_dataProfile_txt!=null?(h.$_global_dataProfile_txt.getElementsByTagName(r)[0]!=null?g=h.$_global_dataProfile_txt.getElementsByTagName(r)[0].getAttribute("s").toString():g=u,g=g.replace(/\\n/g,`
`)):g=u):g=t,a=null,t="",r="",u=""),g}static getDataProfileTxt_Gem(e){let t=null,i=!1,a=null,r=null,u=0,g=null,E=e;if(e){if(t=String(e),i=t.indexOf(T.INTER_CONFIG_SPLIT_CHAR)>-1,a=null,r="",i){for(a=t.split(","),u=0;u<a.length;u++)a[u].indexOf(T.INTER_CONFIG_SPLIT_CHAR)>-1&&(g=[],g=a[u].split(T.INTER_CONFIG_SPLIT_CHAR),r+=g[1]+",");E=r}a=null,t="",r="",g=null}return E}static getLanguageStr_group(e){let t="";for(let i=0;i<e.length;i++)t+=T.getLanguageStr(e[i]);return t}static getLanguageStr_manual(e,...t){return T.getLanguageStr(e,t)+T.MANUAL_TAG_STR}static getGiftObjById(e,t="gold"){let i=null,a=null,r=null,u=null;if(t.indexOf("properties")>-1){if(i=t.split("_")[1],!C.isNullAndUndefined(e.properties)){for(a in e.properties)for(r in e.properties[a])if(String(r).indexOf(i)>-1){u={type:i,num:parseInt(e.properties[a][r])};break}}}else u={type:t,num:parseInt(e[t])};return u}static updataGiftPropertiesData_num(e,t=1){let i=null,a=null;for(i in e)for(a in e[i])T.updataToolsData_num(int(e[i][a])*t,i.toString(),a.toString())}static getPassMapGift(){return h.$_pass_map_gift[String(h.$_userLevelData.umid).split("_")[1]]}static getMapName(e,t){return String(e[t]).split("_")[1]}static isCurrMap(e,t){let i=!0;return(e==null||String(e.umid).split("_")[1]!=t.mid)&&(i=!1),i}static getGiftObjByType(e,t="properties"){return e[t]}static setPropertiesForGift(e){let t={};for(let i=0;i<e.length;i++)t[e[i].id]=e[i].num;return{properties:t}}static updataToolsData_num(e,t,i){e>0?C.isNullAndUndefined(h.$_global_properties_myDataNum[t])?(h.$_global_properties_myDataNum[t]={},h.$_global_properties_myDataNum[t][i]=Math.abs(e)):C.isNullAndUndefined(h.$_global_properties_myDataNum[t][i])?h.$_global_properties_myDataNum[t][i]=Math.abs(e):h.$_global_properties_myDataNum[t][i]+=Math.abs(e):C.isNullAndUndefined(h.$_global_properties_myDataNum[t])||C.isNullAndUndefined(h.$_global_properties_myDataNum[t][i])||(h.$_global_properties_myDataNum[t][i]-=Math.abs(e),h.$_global_properties_myDataNum[t][i]<=0&&delete h.$_global_properties_myDataNum[t][i])}static getToolsData_obj(e,t){let i=null;return h.$_global_properties[e]&&h.$_global_properties[e][t]&&(i=T.setObjecInConfigStr_format(h.$_global_properties[e][t])),i}static getToolsData_num(e,t){let i=0;return h.$_global_properties_myDataNum&&h.$_global_properties_myDataNum[e]&&h.$_global_properties_myDataNum[e][t]&&(i=h.$_global_properties_myDataNum[e][t]),i}static checkGlobalSlave(e){let t=null,i=0;for(t in h.$_global_slave_myData)i=(e-new Date(h.$_global_slave_myData[t][SlaveBaseData.CATCH_TIME]).getTime()*.001)/60,i>=h.$_slave_full_time&&delete h.$_global_slave_myData[t]}static checkMineSlaveCanWork(e,t,i){let a=!1,r=e+i*60,u=e+t*60*60;return r>u&&(a=!0),a}static checkSlaveIsWorking(e){let t=NaN,i=!1;return C.isNullAndUndefined(h.$_global_slave_myData[e])?i=!1:(t=new Date(h.$_global_slave_myData[e][SlaveBaseData.WORK_TIME]).getTime()*.001,t>=SendAndSelect.$systemTimer_nowSecond?i=!0:i=!1),i}static checkIsCoolingTime(e){let t=NaN,i=!1;return C.isNullAndUndefined(e[SlaveBaseData.COOLING_TIME])?i=!1:(t=new Date(e[SlaveBaseData.COOLING_TIME]).getTime()*.001,t>SendAndSelect.$systemTimer_nowSecond?i=!0:i=!1),i}static checkGlobalSlaveNum(){let e=null,t=0;for(e in h.$_global_slave_myData)t+=1;return t}static formatGlobalMySlave(e){let t=null;h.$_global_slave_myData={};let i=null;for(t in e)i=h.$_global_slave_const(),i=C.addObjectNewAtt(i,e[t]),i[SlaveBaseData.ID]=t,i[SlaveBaseData.ID_KEY]=i[SlaveBaseData.ID]+"_"+i[SlaveBaseData.TIME_KEY],i[SlaveBaseData.ISHAVE]=1,i[SlaveBaseData.ISLOCK]=0,h.$_global_slave_myData[t]=i}static getLevelUnlockTools(e,t=5){let i=null,a=h.$_global_properties.gem,r={properties:{gem:{}}};for(i in a)a[i].index>=0&&a[i].unlock_mid==e&&String(a[i].gamLevel)==t.toString()&&(r.properties.gem[i]=T.setObjecInConfigStr_format(a[i]));return r}static getSlave_max_invite_score(e){let t=h.$_slave_max_invite_score.a,i=h.$_slave_max_invite_score.b,a=h.$_slave_max_invite_score.c;return int(t+(e-i)*a)}static formateFriendData(e){let t=[];for(let i=0;i<e.length;i++)t.push(e[i]);return t}static getDalic_isUseing(e,t){let i=e-t;return i<0?i=Math.abs(i):i=0,i}static getDalic_powerValue(e,t){return e=0,t&&(e=Math.floor(e*t[0]+t[1])),e}static getDalic_dTime(e){let t=0;return e.deadline_properties&&e.deadline_properties.dalic&&e.deadline_properties.dalic&&(t=new Date(e.deadline_properties.dalic).getTime()*.001),t}static qqVIPformat(e){h.$_referer=="3366"&&(e.is_vip=e.is_blue_vip,e.is_year_vip=e.is_blue_year_vip,e.vip_level=e.blue_vip_level);let t=0,i=0,a=0;return e.is_vip==null?t=0:t=int(e.is_vip),e.is_year_vip==null?i=0:i=int(e.is_year_vip)>0?10:0,e.vip_level==null?(t=0,i=0,a=0):a=int(e.vip_level)>0?e.vip_level:0,t*(a+i)}static dreamIsOpenByTime(e,t){let i=!1,a=new Date(t.startTime).getTime()*.001,r=new Date(t.endTime).getTime()*.001;return e>=a&&e<r&&(i=!0),i}static changeCampTameWolfData(e,t=!1,i=!1){let a=null;if(t)h.$_global_camp_obj.wolfs=h.$_global_camp_wolfs=e;else for(a in h.$_global_camp_wolfs)if(e.wids==h.$_global_camp_wolfs[a].wids){i?delete h.$_global_camp_wolfs[a]:h.$_global_camp_wolfs[a]=e,h.$_global_camp_obj.wolfs=h.$_global_camp_wolfs;break}}static getCampManorsNum(e=null){let t=null,i=0,r=h.$_GAME_uid==h.$_GAME_fid?h.$_global_camp_obj:h.$_global_camp_obj_f;if(r=e??r,!C.isNoChildrenInObj(r.manors))for(t in r.manors)i++;return i}static getMining_rate_obj(e){let t=null,i=null;for(t in h.$_camp_mining_rate)if(i=h.$_camp_mining_rate[t],i.harvest_num==e)break;return i}static getTowerAddAllEXP(e){let t=null,i=0;for(t in e)i+=e[t];return i}static getCurrUserMapData(){return h.$_GAME_uid==h.$_GAME_fid?h.$_userLevelData:h.$_friendLevelData}static getGuideId(e){let t=h.$_user_guide;return t&&t[e]!=null?int(t[e]):-1}static getMyWolfsCanTameNum(){let e=h.$_global_camp_obj.wolf_max,t=h.$_global_camp_obj.expand_lv_wolf_max,i=h.$_global_camp_obj.expand_properties_wolf_max;return e+t+i}static getMyWolfsNum(){let e=null,t=0;for(e in h.$_global_camp_obj.wolfs)h.$_global_camp_obj.wolfs[e]&&t++;return t}static get_mine_help_friends_list(e){let t=null,i=null;return C.isNullAndUndefined(e.records)||(i=e.records,C.isNullAndUndefined(i.mine_help_friends_list)||(i.mine_help_friends_list instanceof Array||(i.mine_help_friends_list=[]),C.isNullForArray(i.mine_help_friends_list)||(t=i.mine_help_friends_list))),t}static get_mine_help(e){let t=null,i=null;return C.isNullAndUndefined(e.mine)||(i=e.mine,C.isNullAndUndefined(i.help)||C.isNullForArray(i.help)||(t=i.help)),t}static formatSecondToTxt(e,t){let i=NaN,a=NaN,r=NaN,u=NaN,g=t-e,E="";i=24,a=60,r=a*a;let D=r*i;return g<r?E=Math.ceil(g/a)+T.getLanguageStr(4024):g>=r&&g<D?(u=Math.floor(g/a/a)%i,u=u<1?1:Number(u),E=u+T.getLanguageStr(4546)):g>=D&&(E=Math.floor(g/D)+T.getLanguageStr(20)),E+T.getLanguageStr(4545)}static formatAdvertisingData(e){let t=null;if(e==null)return[];let i=[];for(let a=0;a<e.length;a++)t=e[a],C.isNullAndUndefined(t.open)||(h.$_referer=="3366"?String(t.open).indexOf("3366")>-1&&i.push(t):String(t.open).indexOf(h.$_lang)>-1&&i.push(t)),C.isNullAndUndefined(t.hrefList)||C.isNullAndUndefined(t.hrefList[h.$_lang])||(t.href=t.hrefList[h.$_lang]);return i}static formatFreeGift(e){let t=null,i=null,a=[];h.$_global_freeGiftObj={};for(i in e)t=e[i],t.itemId=String(i),t=T.setObjecInConfigStr_format(t),a.push(t),h.$_global_freeGiftObj[String(i)]=t;return a.sortOn("sort",Array.NUMERIC),a}},s(T,"MANUAL_TAG_STR","_@@A"),s(T,"INTER_CONFIG_SPLIT_CHAR","^"),T);const Z=class{constructor(e){s(this,"typeId");s(this,"kindId");s(this,"id");s(this,"name");s(this,"info");s(this,"help");e&&(this.typeId=e[Z.DATA_TYPE_ID],this.kindId=e[Z.DATA_KIND_ID],this.id=e[Z.DATA_ID],this.name=l.getDataProfileTxt(e[Z.DATA_NAME]),this.info=l.getDataProfileTxt(e[Z.DATA_INFO]),e[Z.DATA_HELP]?this.help=l.getDataProfileTxt(e[Z.DATA_HELP]):this.help="")}};let p=Z;s(p,"DATA_TYPE_ID","typeId"),s(p,"DATA_KIND_ID","kindId"),s(p,"DATA_ID","id"),s(p,"DATA_NAME","name"),s(p,"DATA_INFO","info"),s(p,"DATA_HELP","help");var S;let m=(S=class extends p{constructor(t){super(t);s(this,"res");s(this,"resColor");t[S.DATA_RESOURCE_CLASS]==null?this.res=t[p.DATA_ID]:this.res=t[S.DATA_RESOURCE_CLASS],this.resColor=t[S.DATA_RESOURCE_COLOR_CLASS]}},s(S,"TYPE_MONSTER","wolf"),s(S,"TYPE_TOWER","tower"),s(S,"TYPE_WALL","wall"),s(S,"TYPE_BARRIER","barrier"),s(S,"TYPE_ENTRANCE","typeEntrance"),s(S,"TYPE_EXPORT","typeExport"),s(S,"TYPE_BOX","box"),s(S,"TYPE_GEM_ITEM","gem"),s(S,"TYPE_TRAP_ITEM","snarp"),s(S,"TYPE_CARD_ITEM","card"),s(S,"TYPE_WOLF_CARD_ITEM","wc"),s(S,"TYPE_TAME_ITEM","tame"),s(S,"TYPE_FIX_ITEM","bomb"),s(S,"TYPE_MONSTER_SKILL","monsterSkill"),s(S,"ID_SPADE_ITEM","mc"),s(S,"ID_GEM_HAMMER","gem_hammer"),s(S,"ID_GEM_OPENER","gem_opener"),s(S,"DATA_RESOURCE_CLASS","res"),s(S,"DATA_RESOURCE_COLOR_CLASS","resColor"),S);class ${constructor(){s(this,"m_manager");this.clearData()}static getResourceObject(e,t){let i=$.getModule(e,t);return i==null?null:i.resourceObj}static getResourceIcon(e){let t=null,i=null,a=null,r=null,u=null;if(e=="coin"?t=ClassesFactory.getSWFClass("UI_icon_coin"):e=="gold"?t=ClassesFactory.getSWFClass("UI_icon_gold"):e=="invite_score"&&(t=ClassesFactory.getSWFClass("UI_icon_integral")),t)return t.width=t.height=50,i=new Matrix,i.scale(1.65,1.65),a=new BitmapData(t.width,t.height,!0,16777215),a.draw(t,i),r=new Bitmap(a),u=new Sprite,u.x=t.x,u.y=t.y,r.x=-r.width/2,r.y=-r.height/2,r.filters=[ColorFilter.filterGlowAlphaWhite],u.addChild(r),u;let g=$.getType(e);if(g=="")return null;let E=this.BaseManager.getModule(g,e),D=new Sprite,F=new Sprite;return g==m.TYPE_MONSTER&&E.resSwitchToIcon(),D.addChild(E.resourceObj),D.filters=[ColorFilter.filterGlowAlphaWhite],F.addChild(D),F}static getType(e){return TowerManager.getOnlyExample().getData(e)?m.TYPE_TOWER:WallManager.getOnlyExample().getData(e)?m.TYPE_WALL:BarrierManager.getOnlyExample().getData(e)?m.TYPE_BARRIER:BoxManager.getOnlyExample().getData(e)?m.TYPE_BOX:MonsterManager.getOnlyExample().getData(e)?m.TYPE_MONSTER:GemManager.getOnlyExample().getData(e)?m.TYPE_GEM_ITEM:TrapManager.getOnlyExample().getData(e)?m.TYPE_TRAP_ITEM:CardManager.getOnlyExample().getData(e)?m.TYPE_CARD_ITEM:WolfCardManager.getOnlyExample().getData(e)?m.TYPE_WOLF_CARD_ITEM:TameManager.getOnlyExample().getData(e)?m.TYPE_TAME_ITEM:""}static getModuleEasy(e){let t=$.getType(e);return t==""?null:this.BaseManager.getModule(t,e)}static getModule(e,t){switch(e){case m.TYPE_TOWER:return new Tower(t);case m.TYPE_WALL:return new Wall(t);case m.TYPE_BARRIER:return new Barrier(t);case m.TYPE_BOX:return new FallBox(e,t);case m.TYPE_MONSTER:return new Monster(t);case m.TYPE_GEM_ITEM:return new GemItem(t);case m.TYPE_TRAP_ITEM:return new Trap(t);case m.TYPE_CARD_ITEM:return new CardItem(t);case m.TYPE_WOLF_CARD_ITEM:return new WolfCardItem(t);case m.TYPE_TAME_ITEM:return new TameItem(t);case m.TYPE_MONSTER_SKILL:return new MonsterSkill(t,1,null);default:return null}}getDataById(e){return this.m_manager[e]}getRandomId(){return Tools.randomElement(this.m_manager)}get manager(){return this.m_manager}clearData(){this.m_manager=new Object}}class Vt{constructor(){s(this,"m_data");this.m_data=new p(new Object)}get baseData(){return this.m_data}}class Ke extends Vt{constructor(){super()}}const U=class extends m{constructor(t){super(t);s(this,"scoreMax");s(this,"populationMax");s(this,"hardA");s(this,"hardB");s(this,"passBy");s(this,"unkennelDelay");s(this,"unkennelRule");s(this,"bossList");s(this,"monsterList");s(this,"teleportRule");this.scoreMax=t[U.DATA_SCORE_MAX]?t[U.DATA_SCORE_MAX]:U.DEFAULT_SCORE_MAX,this.populationMax=t[U.DATA_POPULATION_MAX]?t[U.DATA_POPULATION_MAX]:U.DEFAULT_POPULATION_MAX,this.hardA=t[U.DATA_HARD_A],this.hardB=t[U.DATA_HARD_B],this.passBy=t[U.DATA_PASS_BY],this.unkennelDelay=t[U.DATA_UNKENNEL_RATE],this.unkennelRule=t[U.DATA_UNKENNEL_RULE],this.bossList=t[U.DATA_BOSS_LIST],this.monsterList=t[U.DATA_MONSTER_LIST]?t[U.DATA_MONSTER_LIST].map(i=>i[1]):[],this.teleportRule=t[U.DATA_TELEPORT_RULE]}getDifficultyLevel(t){return Math.sqrt(this.hardA+this.hardB*t)}};let M=U;s(M,"DEFAULT_SCORE_MAX",100),s(M,"DEFAULT_POPULATION_MAX",10),s(M,"RULE_MULTICAST",1),s(M,"DATA_SCORE_MAX","pass_score"),s(M,"DATA_POPULATION_MAX","pop_max"),s(M,"DATA_HARD_A","yield_val"),s(M,"DATA_HARD_B","hard_ness"),s(M,"DATA_PASS_BY","passBy"),s(M,"DATA_UNKENNEL_RATE","interval"),s(M,"DATA_UNKENNEL_RULE","interval_rule"),s(M,"DATA_BOSS_LIST","boss"),s(M,"DATA_MONSTER_LIST","wolf_proportion"),s(M,"DATA_TELEPORT_RULE","teleport_rule"),s(M,"DATA_DEBUG","debug");const it=class extends ${constructor(){super(),it.onlyExample=this,this.loadData(h.$_map_Obj)}static getOnlyExample(){return it.onlyExample==null&&(it.onlyExample=new it),it.onlyExample}loadData(e){let t,i;for(i in e)t=e[i],t[p.DATA_ID]=i,this.m_manager[i]=new M(e[i])}getData(e){return this.getDataById(e)}};let ct=it;s(ct,"DATA_COUNT",6),s(ct,"onlyExample",null);const xt=class extends Vt{constructor(t,i=!0){super();s(this,"score");this.m_data=ct.getOnlyExample().getData(t)}static getMapData(t){return ct.getOnlyExample().getData(t)}get gameMapData(){return this.m_data}get canUnkennelAdjust(){return!!(this.wave&&!this.isDefendMap&&!this.isDream&&!this.isRandomBoss&&!this.isBoss)}get unkennelDelayNum(){let t=1;return this.canUnkennelAdjust&&(t=this.wave.waveData.unkennelDensity),Math.round(this.gameMapData.unkennelDelay/t/MapTimer.mainRate)}get unkennelSoloDifficulty(){return this.isSolo?this.gameMapData.unkennelRule==WaveData.UNKENNEL_RULE_SAME_TIME?1:Math.pow(1/this.gameMapData.entranceList.length,WaveData.SOLO_DIFFICULTY):1}get isSolo(){return!!(this.canUnkennelAdjust&&this.wave.waveData.isSolo)}getBossList(){return MonsterManager.getOnlyExample().getBossList(this.gameMapData.bossList)}getBoss(){if(this.isEndlessMap)return null;let t=MonsterManager.getOnlyExample().getBossList(this.gameMapData.bossList);return t.length>0?new Monster(t[0]):null}set isDream(t){this.gameMapData.loadComplete&&(this.gameMapData.isDream=t),h.$_isDream=t}get isDream(){return h.$_isDream}set award(t){t<1?this.m_award=1:this.m_award=t,this.m_award>7&&(this.m_award=7)}get award(){return this.m_award}get scoreMax(){return this.isEndlessMap?this.gameMapData.scoreMax*this.award:this.gameMapData.scoreMax}get isEndlessMap(){return this.gameMapData.id==xt.ENDLESS_MAP_1}get isDefendMap(){return this.gameMapData.id==xt.DEFEND_MAP_1}get isPVE(){return h.$_currStageStatus==MainPanel.CURRSTAGESTATUS_MAIN}get isPVP(){return this.isDefendMap}get isPtameVPmap(){return this.isDefendMap&&!isMyMap&&!this.isArena}get isPmapVPtame(){return this.isDefendMap&&isMyMap&&!this.isArena}get isPtameVPmapArena(){return this.isDefendMap&&!isMyMap&&this.isArena}get isPmapVPtameArena(){return this.isDefendMap&&isMyMap&&this.isArena}get isArena(){return TameArenaPanelFun.$_currIsArenaStage}};let P=xt;s(P,"DEFEND_MAP_1","mfx1"),s(P,"ENDLESS_MAP_1","m11"),s(P,"REFRESH_RATE",40),s(P,"currentMap"),s(P,"m_waveInPVE"),s(P,"SIGN_SUCCESS","success"),s(P,"SIGN_FAILED","failed"),s(P,"SIGN_PASS","pass");const Mt=class extends m{constructor(t=null){super(t);s(this,"parameter");s(this,"levels");this.parameter=t[Mt.DATA_PARAMETER],this.levels=t[Mt.DATA_LEVELS]}getLevelParam(t,i){return this.parameter!=null?this.parameter[i]:this.levels!=null?(t=Math.min(Math.max(0,t-1),this.levels.length-1),this.levels[t][i]):null}hasLevel(){return this.parameter==null}};let H=Mt;s(H,"TYPE_TOWER_SKILL","typeTowerSkill"),s(H,"TYPE_MONSTER_SKILL","typeMonsterSkill"),s(H,"DATA_PARAMETER","params"),s(H,"DATA_LEVELS","levels");class o extends H{constructor(e){super(e),e[p.DATA_TYPE_ID]=H.TYPE_TOWER_SKILL}}s(o,"KIND_AURA","Aura"),s(o,"KIND_CHANGE_BULLET","Bultype"),s(o,"KIND_CHANGE_DAMAGE","ChangeDam"),s(o,"KIND_CHANGE_RATE","ChangeRate"),s(o,"KIND_CHANGE_RANGE","ChangeRange"),s(o,"KIND_FIELD_ATTACK","ALLAP"),s(o,"KIND_DIVIDED_ATTACK","DivAP"),s(o,"KIND_SCATTER_ATTACK","ScaAP"),s(o,"KIND_COMBO_ATTACK","ComAP"),s(o,"KIND_GUIDED_BULLET","GuidedBul"),s(o,"KIND_ATTACK_RATE","AttackRate"),s(o,"KIND_AOE_ATTACK","AoeAP"),s(o,"KIND_THROUGHOUT_ATTACK","ThoAP"),s(o,"KIND_BOUNCE_ATTACK","BouAP"),s(o,"KIND_FLOAT_DAMAGE","FloatDam"),s(o,"KIND_CRIT","Crit"),s(o,"KIND_REDUCED_DEFENSE","RedDef"),s(o,"KIND_POISON","Poison"),s(o,"KIND_SLOW","Slow"),s(o,"KIND_BURN_COLD","BC"),s(o,"KIND_BEAT_BACK","Beat"),s(o,"KIND_SILENCE","Silence"),s(o,"KIND_VERTIGO","Vertigo"),s(o,"KIND_INTIMIDATE","Intimidate"),s(o,"KIND_CUSS","Cuss"),s(o,"KIND_BURN","Burn"),s(o,"KIND_COLD","Cold");const f=class extends H{constructor(e){super(e),e[p.DATA_TYPE_ID]=H.TYPE_MONSTER_SKILL}static get allMonsterSkill(){return[f.KIND_FLY,f.KIND_AIRBORNE,f.KIND_ISOLATION,f.KIND_RELIVE,f.KIND_SUICIDE,f.KIND_REINCARNATE,f.KIND_RESIST_FIRE,f.KIND_RESIST_FROST,f.KIND_RESIST_POISON,f.KIND_RESIST_BEAT,f.KIND_RESIST_SILENCE,f.KIND_RESIST_VERTIGO,f.KIND_RESIST_CRIT,f.KIND_RESIST_LIGHT,f.KIND_RESIST_STRSMOOTH,f.KIND_SLOWF,f.KIND_WEAK_FIRE,f.KIND_WEAK_FROST,f.KIND_WEAK_POISON,f.KIND_WEAK_BEAT,f.KIND_WEAK_SILENCE,f.KIND_WEAK_VERTIGO,f.KIND_WEAK_CRIT,f.KIND_WEAK_LIGHT,f.KIND_RUN,f.KIND_MIRROR,f.KIND_SUMMON,f.KIND_CLOUD,f.KIND_CURE,f.KIND_BLINK,f.KIND_HIDE,f.KIND_SHIELD,f.KIND_SNEER,f.KIND_TRANSFORM,f.KIND_LINKS]}};let n=f;s(n,"EVENT_RED",1),s(n,"EVENT_YELLOW",2),s(n,"EVENT_GREEN",3),s(n,"EVENT_FULL",4),s(n,"EVENT_INTIMIDATE",20),s(n,"EVENT_VERTIGO",21),s(n,"EVENT_SILENCE",22),s(n,"EVENT_SLOW",23),s(n,"EVENT_REDUCED_DEFENSE",24),s(n,"EVENT_POISON",25),s(n,"EVENT_BURN",26),s(n,"EVENT_COLD",27),s(n,"EVENT_HIT",40),s(n,"EVENT_CRIT",41),s(n,"EVENT_BEAT_BACK",42),s(n,"EVENT_FRIENT_DIE",43),s(n,"EVENT_DIE",44),s(n,"KIND_FLY","fly"),s(n,"KIND_AIRBORNE","airborne"),s(n,"KIND_ISOLATION","isolation"),s(n,"KIND_RELIVE","revive"),s(n,"KIND_SUICIDE","burst"),s(n,"KIND_REINCARNATE","reborn"),s(n,"KIND_SLOWF","slowf"),s(n,"KIND_RESIST_FIRE","resistFire"),s(n,"KIND_RESIST_FROST","resistFrost"),s(n,"KIND_RESIST_POISON","resistPoison"),s(n,"KIND_RESIST_SLOW","resistSlow"),s(n,"KIND_RESIST_BEAT","resistBeat"),s(n,"KIND_RESIST_SILENCE","resistSilence"),s(n,"KIND_RESIST_VERTIGO","resistVertigo"),s(n,"KIND_RESIST_CRIT","resistCrit"),s(n,"KIND_RESIST_LIGHT","resistLight"),s(n,"KIND_RESIST_INTIMIDATE","resistIntimidate"),s(n,"KIND_WEAK_FIRE","weakFire"),s(n,"KIND_WEAK_FROST","weakFrost"),s(n,"KIND_WEAK_POISON","weakPoison"),s(n,"KIND_WEAK_SLOW","weakSlow"),s(n,"KIND_WEAK_BEAT","weakBeat"),s(n,"KIND_WEAK_SILENCE","weakSilence"),s(n,"KIND_WEAK_VERTIGO","weakVertigo"),s(n,"KIND_WEAK_CRIT","weakCrit"),s(n,"KIND_WEAK_LIGHT","weakLight"),s(n,"KIND_WEAK_INTIMIDATE","weakIntimidate"),s(n,"KIND_RESIST_STRSMOOTH","strsmooth"),s(n,"KIND_RUN","sprint"),s(n,"KIND_MIRROR","divide"),s(n,"KIND_SUMMON","summon"),s(n,"KIND_CLOUD","cloud"),s(n,"KIND_CURE","massTreatment"),s(n,"KIND_BLINK","blink"),s(n,"KIND_HIDE","invisible"),s(n,"KIND_SHIELD","shield"),s(n,"KIND_SNEER","taunt"),s(n,"KIND_TRANSFORM","morph"),s(n,"KIND_LINKS","links");const W=class extends ${constructor(){super(),W.onlyExample=this,this.loadData(h.$_skillAtt_Obj)}static getOnlyExample(){return W.onlyExample==null&&(W.onlyExample=new W),W.onlyExample}loadData(e){let t,i;for(i in e[W.TOWER_SKILL])t=e[W.TOWER_SKILL][i],t[p.DATA_ID]=i,this.m_manager[i]=new o(t);for(i in e[W.MONSTER_SKILL])t=e[W.MONSTER_SKILL][i],t[p.DATA_ID]=i,this.m_manager[i]=new n(t)}getData(e){return this.getDataById(e)}};let tt=W;s(tt,"onlyExample",null),s(tt,"TOWER_SKILL","towerSkill"),s(tt,"MONSTER_SKILL","monsterSkill"),s(tt,"TRAP_SKILL","trapSkill");const ot=class extends p{constructor(t){super(t);s(this,"skillsList");t[ot.DATA_SKILLS_LIST]instanceof Array?this.skillsList=t[ot.DATA_SKILLS_LIST]:t[ot.DATA_SKILLS_LIST]instanceof String&&(this.skillsList=[t[ot.DATA_SKILLS_LIST]])}};let Rt=ot;s(Rt,"DATA_SKILLS_LIST","skills");const st=class extends ${constructor(){super(),st.onlyExample=this,this.loadData(h.$_skillPackage_Obj)}static getOnlyExample(){return st.onlyExample==null&&(st.onlyExample=new st),st.onlyExample}loadData(e){let t,i;for(i in e)t=e[i],t[p.DATA_ID]=i,this.m_manager[i]=new Rt(e[i])}getData(e){return this.getDataById(e)}};let pt=st;s(pt,"onlyExample",null);const A=class{static gridToVector(e=0,t=0){return new Point(Math.atan2(t,e),new Point(e,t).length)}static vectorToGrid(e,t){return new Point(Math.cos(e)*t,Math.sin(e)*t)}static gridToPixel(e=0,t=0,i=1,a=1){let r=A.gridToSubGrid(new Point(e,t),i,a);return A.subGridToPixel(r.x,r.y)}static pixelToGrid(e=0,t=0,i=1,a=1){let r=A.pixelToSubGrid(e,t);return A.subGridToGrid(r,i,a)}static subGridToPixel(e=0,t=0,i=0){let a=new Point;return a.x=Math.round(e*A.SUB_X),a.y=Math.round(t*A.SUB_Y-i*A.SUB_Z),a}static pixelToSubGrid(e=0,t=0){let i=new Point;return i.x=Math.round(e/A.SUB_X),i.y=Math.round(t/A.SUB_Y),i}static gridToSubGrid(e,t=1,i=1){if(e==null)return null;let a=new Point;return a.x=A.gridToSubGridSolo(e.x,t),a.y=A.gridToSubGridSolo(e.y,i),a}static gridToSubGridSolo(e,t=1){return Math.floor((e+(t-1)/2)*A.SUB_GRID_AMOUNT)}static subGridToGrid(e,t=1,i=1){if(e==null)return null;let a=new Point;return a.x=A.subGridToGridSolo(e.x,t),a.y=A.subGridToGridSolo(e.y,i),a}static subGridToGridSolo(e,t=1){return Math.round(e/A.SUB_GRID_AMOUNT+(1-t)/2)}static getMapStartPoint(e=8,t=8,i=1){let a=new Point;return a.x=A.SCREEN_CENTER_POINT.x-e*A.LANDFORM_X/2*i,a.y=A.SCREEN_CENTER_POINT.y-t*A.LANDFORM_Y/2*i,a}static getWolfStartPoint(e,t,i=1){let a=new Point;return a.x=A.SCREEN_CENTER_POINT.x-e/A.SUB_GRID_AMOUNT*A.LANDFORM_X*i,a.y=A.SCREEN_CENTER_POINT.y-t/A.SUB_GRID_AMOUNT*A.LANDFORM_Y*i,a}static checkStep(e,t,i){let a=0,r=null,u=new Object;return Math.abs(t.x)<Math.abs(t.y)?Math.abs(t.x)>=i?t.x>0?(r=new Point(e.x+i,e.y),a=A.DIR_RIGHT):(r=new Point(e.x-i,e.y),a=A.DIR_LEFT):t.y>0?(r=new Point(e.x+t.x,e.y+(i-Math.abs(t.x))),a=A.DIR_DOWN):(r=new Point(e.x+t.x,e.y-(i-Math.abs(t.x))),a=A.DIR_UP):Math.abs(t.y)>=i?t.y>0?(r=new Point(e.x,e.y+i),a=A.DIR_DOWN):(r=new Point(e.x,e.y-i),a=A.DIR_UP):t.x>0?(r=new Point(e.x+(i-Math.abs(t.y)),e.y+t.y),a=A.DIR_RIGHT):(r=new Point(e.x-(i-Math.abs(t.y)),e.y+t.y),a=A.DIR_LEFT),u[A.DIR]=a,u[A.POINT]=r,u}static toPercentage(e){return Math.round(e*100*100)/100+"%"}static toGridStr(e){return String(Math.round(e/100)/10)}static getPosID(e,t){return e+"_"+t}static getIDPos(e){let t=e.indexOf("_"),i=new Point;return i.x=parseInt(e.slice(0,t)),i.y=parseInt(e.slice(t+1,e.length)),i}static getRandomPos(e,t){let i=new Point(e.x,e.y);return i.x=i.x+Math.random()*t*2-t,i.y=i.y+Math.random()*t*2-t,i}static getBetweenPosList(e,t){let i=0,a=0,r=null,u=[];if(e.x==t.x){if(a=e.y-t.y,Math.abs(a)<=1)return u;for(i=a>0?1:-1;e.y!=t.y+i;)r=new Point(t.x,t.y+i),i+=a>0?1:-1,r.y!=t.y&&u.unshift(r)}else{if(e.y!=t.y)return null;if(a=e.x-t.x,Math.abs(a)<=1)return u;for(i=a>0?1:-1;e.x!=t.x+i;)r=new Point(t.x+i,t.y),i+=a>0?1:-1,r.x!=t.x&&u.unshift(r)}return u}static getCrossPosList(e,t){let i=0,a=[e];for(i=e.x-t;i<=e.x+t;i++)i!=e.x&&a.push(new Point(i,e.y));for(i=e.y-t;i<=e.y+t;i++)i!=e.y&&a.push(new Point(e.x,i));return a}static getSquarePosList(e,t){let i=0,a=0,r=[];for(i=e.x-t;i<=e.x+t;i++)for(a=e.y-t;a<=e.y+t;a++)r.push(new Point(i,a));return r}static getDiamondPosList(e,t){let i=0,a=0,r=[];for(i=e.x-t;i<=e.x+t;i++)for(a=e.y-t;a<=e.y+t;a++)Math.abs(i-e.x)+Math.abs(a-e.y)<=t&&r.push(new Point(i,a));return r}static getCirclePosList(e,t){let i=0,a=0,r=null,u=[];for(i=e.x-t;i<=e.x+t;i++)for(a=e.y-t;a<=e.y+t;a++)r=new Point(i-e.x,a-e.y),r.length<=t&&u.push(new Point(i,a));return u}static getRingPosList(e,t,i){let a=0,r=0,u=null,g=[];for(a=e.x-i;a<=e.x+i;a++)for(r=e.y-i;r<=e.y+i;r++)u=new Point(a-e.x,r-e.y),u.length>=t&&u.length<=i&&g.push(new Point(a,r));return g}static getIntersectionPosList(e,t){let i=0,a=0,r=[];for(i=0;i<=e.length;i++)for(a=0;a<=t.length;a++)e[i].x==t[a].x&&e[i].y==t[a].y&&r.push(new Point(e[i].x,e[i].y));return r}static getDistance(e,t){return new Point(e.x-t.x,e.y-t.y).length}static getRadians(e,t){let i=null;return i=new Point(t.x-e.x,t.y-e.y),(Math.atan2(i.y,i.x)+Math.PI*2)%(Math.PI*2)}static sortPosList(e,t){let i=0,a=null,r=null,u=[],g=[],E=t.length;for(i=0;i<E;i++)a=A.gridToSubGrid(t[i]),r={},r.distance=new Point(e.x-a.x,e.y-a.y).length,r.pos=t[i],g[i]=r;for(g=g.sortOn("distance",Array.NUMERIC),i=0;i<E;i++)u[i]=g[i].pos;return u}static getNearestSubPosInPos(e,t,i=400){let a=new Point,r=A.subGridToGrid(e);return t.x<r.x?a.x=A.gridToSubGridSolo(t.x)+i:t.x>r.x?a.x=A.gridToSubGridSolo(t.x)-i:a.x=e.x,t.y<r.y?a.y=A.gridToSubGridSolo(t.y)+i:t.y>r.y?a.y=A.gridToSubGridSolo(t.y)-i:a.y=e.y,a}static getPosList(e,t,i){let a=0,r=0,u=[],g=e.x,E=e.y;for(a=0;a<t;a++)for(r=0;r<i;r++)u.push(new Point(g+a,E+r));return u}static getPosIdList(e,t,i){let a=0,r=0,u=[],g=e.x,E=e.y;for(a=0;a<t;a++)for(r=0;r<i;r++)u.push(this.Position.getPosID(g+a,E+r));return u}};let c=A;s(c,"LANDFORM_X",65),s(c,"LANDFORM_Y",50),s(c,"LANDFORM_Z",50),s(c,"FLOOR_SCALE",A.LANDFORM_X/A.LANDFORM_Y),s(c,"SUB_GRID_AMOUNT",1e3),s(c,"SUB_X",A.LANDFORM_X/A.SUB_GRID_AMOUNT),s(c,"SUB_Y",A.LANDFORM_Y/A.SUB_GRID_AMOUNT),s(c,"SUB_Z",A.LANDFORM_Z/A.SUB_GRID_AMOUNT),s(c,"ENTER_DISTANCE",200),s(c,"MAP_SCALE",.05),s(c,"MAP_X",A.LANDFORM_X*A.MAP_SCALE),s(c,"MAP_Y",A.LANDFORM_Y*A.MAP_SCALE),s(c,"MAP_SUB_X",A.MAP_X/A.SUB_GRID_AMOUNT),s(c,"MAP_SUB_Y",A.MAP_Y/A.SUB_GRID_AMOUNT),s(c,"MAP_DEFAULT_X",8),s(c,"MAP_DEFAULT_Y",8),s(c,"MAP_MAX_X",30),s(c,"MAP_MIN_X",1),s(c,"MAP_MAX_Y",30),s(c,"MAP_MIN_Y",1),s(c,"MAP_MAX_AREA",600),s(c,"MAP_MIN_AREA",4),s(c,"DIR_AMOUNT",4),s(c,"DIR_RIGHT",0),s(c,"DIR_DOWN",1),s(c,"DIR_LEFT",2),s(c,"DIR_UP",3),s(c,"DIR","dir"),s(c,"POINT","point");class d extends m{constructor(e){super(e)}}s(d,"KIND_HIT","hit"),s(d,"KIND_INVASION","invasion"),s(d,"KIND_TELEPORT","teleport"),s(d,"KIND_BUFF_TOP","buffTop"),s(d,"KIND_BUFF_MID","buffMid"),s(d,"KIND_BUFF_BOT","buffBot"),s(d,"KIND_MAGIC","effectMagic"),s(d,"KIND_PATH","effectPath"),s(d,"KIND_CRIT","effectCrit"),s(d,"KIND_SUMMON","effectSummon"),s(d,"KIND_CLOUD","effectCloud"),s(d,"KIND_MIRROR","effectMirror"),s(d,"KIND_CURE","effectCure"),s(d,"KIND_CURE_ONE","effectCureOne"),s(d,"KIND_SNEER","effectSneer"),s(d,"KIND_LINKS","effectLinks"),s(d,"KIND_RELIVE","effectRelive"),s(d,"KIND_SUICIDE","effectSuicide"),s(d,"KIND_BLINK_IN","effectBlinkIn"),s(d,"KIND_BLINK_OUT","effectBlinkOut"),s(d,"KIND_LIGHTNING","lightning"),s(d,"KIND_FIELD_ATTACK","allAttack"),s(d,"KIND_FIELD_ATTACK_AOE","allAttackAOE"),s(d,"KIND_CUSS","effectCuss"),s(d,"KIND_CUSS_BREAK","effectCussBreak"),s(d,"KIND_SIGN_SUMMON","signSummon"),s(d,"KIND_SIGN_CURE","signCure"),s(d,"KIND_SIGN_CLOUD","signCloud"),s(d,"KIND_SIGN_SHIELD","signShield"),s(d,"KIND_SIGN_TRANSFORM","signTransform"),s(d,"KIND_BOSS","effectBoss");class Jt extends Vt{constructor(t,i,a=!1){super();s(this,"level");s(this,"index");s(this,"m_skillInfo");s(this,"m_nextLevelSkillInfo");s(this,"skillTag1");s(this,"skillTag2");s(this,"skillTag3");s(this,"nextLevelSkillTag1");s(this,"nextLevelSkillTag2");s(this,"nextLevelSkillTag3");s(this,"m_updateFunction");if(a){this.m_data=new MonsterData({id:t+"_0",kindId:t});return}this.m_data=tt.getOnlyExample().getData(t),this.level=i}get data(){return this.m_data}get skillInfo(){return this.m_updateFunction!=null&&this.m_updateFunction(),this.m_skillInfo||(this.m_skillInfo=""),this.m_skillInfo}get nextLevelSkillInfo(){return this.m_nextLevelSkillInfo||(this.m_nextLevelSkillInfo=""),this.m_nextLevelSkillInfo}}class N extends Jt{constructor(t,i,a){super(t,i);s(this,"tower");this.tower=a,this.m_data[p.DATA_TYPE_ID]=H.TYPE_TOWER_SKILL}shouldTransferBullet(){switch(this.data.kindId){case o.KIND_GUIDED_BULLET:case o.KIND_ATTACK_RATE:case o.KIND_AOE_ATTACK:case o.KIND_THROUGHOUT_ATTACK:case o.KIND_BOUNCE_ATTACK:case o.KIND_FLOAT_DAMAGE:case o.KIND_CRIT:case o.KIND_REDUCED_DEFENSE:case o.KIND_POISON:case o.KIND_SLOW:case o.KIND_BURN_COLD:case o.KIND_BEAT_BACK:case o.KIND_SILENCE:case o.KIND_VERTIGO:case o.KIND_INTIMIDATE:case o.KIND_CUSS:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case o.KIND_AURA:return new Ct(this.data.id,this.level,this.tower);case o.KIND_CHANGE_BULLET:return new ue(this.data.id,this.level,this.tower);case o.KIND_CHANGE_DAMAGE:return new ge(this.data.id,this.level,this.tower);case o.KIND_CHANGE_RATE:return new ce(this.data.id,this.level,this.tower);case o.KIND_CHANGE_RANGE:return new he(this.data.id,this.level,this.tower);case o.KIND_FIELD_ATTACK:return new Ot(this.data.id,this.level,this.tower);case o.KIND_DIVIDED_ATTACK:return new Pt(this.data.id,this.level,this.tower);case o.KIND_SCATTER_ATTACK:return new Kt(this.data.id,this.level,this.tower);case o.KIND_COMBO_ATTACK:return new ut(this.data.id,this.level,this.tower);case o.KIND_GUIDED_BULLET:return new Ae(this.data.id,this.level,this.tower);case o.KIND_ATTACK_RATE:return new ne(this.data.id,this.level,this.tower);case o.KIND_AOE_ATTACK:return new nt(this.data.id,this.level,this.tower);case o.KIND_THROUGHOUT_ATTACK:return new ht(this.data.id,this.level,this.tower);case o.KIND_BOUNCE_ATTACK:return new et(this.data.id,this.level,this.tower);case o.KIND_FLOAT_DAMAGE:return new oe(this.data.id,this.level,this.tower);case o.KIND_CRIT:return new gt(this.data.id,this.level,this.tower);case o.KIND_REDUCED_DEFENSE:return new It(this.data.id,this.level,this.tower);case o.KIND_POISON:return new Et(this.data.id,this.level,this.tower);case o.KIND_SLOW:return new ft(this.data.id,this.level,this.tower);case o.KIND_BURN_COLD:return new le(this.data.id,this.level,this.tower);case o.KIND_BEAT_BACK:return new lt(this.data.id,this.level,this.tower);case o.KIND_SILENCE:return new Tt(this.data.id,this.level,this.tower);case o.KIND_VERTIGO:return new Dt(this.data.id,this.level,this.tower);case o.KIND_INTIMIDATE:return new _t(this.data.id,this.level,this.tower);case o.KIND_CUSS:return new At(this.data.id,this.level,this.tower);default:return this}}}const Lt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1050,this.m_skillInfo=l.getLanguageStr(3001,this.radiiInfo,c.toPercentage(this.nextEffectRate))}get radii(){return this.data.getLevelParam(this.level,0)+Lt.DEFAULT_RADII}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Lt.DEFAULT_NEXT_EFFECT_RATE,Lt.MAX_NEXT_EFFECT_RATE)}get radiiInfo(){return this.radii.toString()}};let nt=Lt;s(nt,"DEFAULT_RADII",0),s(nt,"DEFAULT_NEXT_EFFECT_RATE",0),s(nt,"MAX_NEXT_EFFECT_RATE",1);class ne extends N{constructor(e,t,i=null){super(e,t,i),this.index=1040;let a=this.floorRate,r=this.airRate;a<=0&&r>0?this.m_skillInfo=l.getLanguageStr(3029):r<=0&&a>0?this.m_skillInfo=l.getLanguageStr(3028):a!=1?this.m_skillInfo=l.getLanguageStr(3030,c.toPercentage(a)):r!=1&&(this.m_skillInfo=l.getLanguageStr(3031,c.toPercentage(r)))}get floorRate(){return this.data.getLevelParam(this.level,0)}get airRate(){return this.data.getLevelParam(this.level,1)}}const Qt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1500,this.m_skillInfo=l.getLanguageStr(3002)}get spId(){return this.data.getLevelParam(this.level,0)}get spLevel(){return this.data.getLevelParam(this.level,1)}get radii(){return this.data.getLevelParam(this.level,2)*this.level+Qt.DEFAULT_RADII}};let Ct=Qt;s(Ct,"DEFAULT_RADII",1e3);const Ut=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1060,this.m_skillInfo=l.getLanguageStr(3003,c.toPercentage(this.chances),this.distanceInfo)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Ut.DEFAULT_CHANCES,1),0)}get beatBackDistance(){return this.data.getLevelParam(this.level,1)+Ut.DEFAULT_BEAT_BACK_DISTANCE}get distanceInfo(){let e=null,t=this.beatBackDistance;return t<100?e=l.getLanguageStr(3505):t<250?e=l.getLanguageStr(3506):t<450?e=l.getLanguageStr(3507):t<700?e=l.getLanguageStr(3508):e=l.getLanguageStr(3509),e}};let lt=Ut;s(lt,"SHIFT_TIME",.2),s(lt,"DEFAULT_CHANCES",0),s(lt,"DEFAULT_BEAT_BACK_DISTANCE",0);const mt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1070,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(3004,this.bounceNum,c.toPercentage(1-this.nextEffectRate),this.attackInfo)}}get bounceNum(){return parseInt(this.data.getLevelParam(this.level,0)*this.level+mt.DEFAULT_BOUNCE_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)*this.level+mt.DEFAULT_NEXT_EFFECT_RATE,mt.MAX_NEXT_EFFECT_RATE)}get attackInfo(){let e=null;return this.tower.newBullet().bulletData.hitEffectId==d.KIND_LIGHTNING?e=l.getLanguageStr(3516):e=l.getLanguageStr(3515),e}};let et=mt;s(et,"DEFAULT_BOUNCE_NUM",.5),s(et,"DEFAULT_NEXT_EFFECT_RATE",.35),s(et,"MAX_NEXT_EFFECT_RATE",1),s(et,"MAX_DISTANCE",3e3);class le extends N{constructor(e,t,i=null){super(e,t,i),this.index=1080,this.m_updateFunction=function(){this.burnColdValue>0?this.m_skillInfo=l.getLanguageStr(3005,this.burn):this.m_skillInfo=l.getLanguageStr(3006,c.toPercentage(this.cold))}}get burnColdValue(){let e=1;this.tower&&(e=this.tower.buffEffect());let t=Math.pow(this.data.getLevelParam(this.level,0)*this.level*e,2);return this.data.getLevelParam(this.level,0)<0&&(t=-t),parseInt(t)}get burn(){return parseInt(Math.sqrt(this.burnColdValue))}get cold(){let e=1;this.tower&&(e=this.tower.buffEffect());let t=Math.pow(this.data.getLevelParam(this.level,0)*this.level*e,2);return Math.pow(t,.25)*.03}}class ue extends N{constructor(e,t,i=null){super(e,t,i)}get bulletId(){return this.data.getLevelParam(this.level,0)}}class ge extends N{constructor(e,t,i=null){super(e,t,i),this.index=1e3,this.damageRate>1?this.m_skillInfo=l.getLanguageStr(3007,c.toPercentage(this.damageRate-1)):this.damageRate<1&&(this.m_skillInfo=l.getLanguageStr(3008,c.toPercentage(1-this.damageRate)))}get damageAdd(){return this.data.getLevelParam(this.level,0)*this.level}get damageRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get damageA(){return this.data.getLevelParam(this.level,2)}get damageB(){return this.data.getLevelParam(this.level,3)}get damageC(){return this.data.getLevelParam(this.level,4)}isChangeBase(){return!(this.damageA==0&&this.damageB==0&&this.damageC==0)}}class he extends N{constructor(e,t,i=null){super(e,t,i),this.index=1010,this.rangeRate>1?this.m_skillInfo=l.getLanguageStr(3009,c.toPercentage(this.rangeRate-1)):this.m_skillInfo=l.getLanguageStr(3010,c.toPercentage(1-this.rangeRate)),this.rangeMin>0&&(this.m_skillInfo+=l.getLanguageStr(3027))}get rangeAdd(){return this.data.getLevelParam(this.level,0)*this.level}get rangeRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get range(){return this.data.getLevelParam(this.level,2)}get rangeMin(){return this.data.getLevelParam(this.level,3)}isChangeBase(){return this.range!=0}}class ce extends N{constructor(e,t,i=null){super(e,t,i),this.index=1020,this.rateRate>1?this.m_skillInfo=l.getLanguageStr(3011,c.toPercentage(this.rateRate-1)):this.m_skillInfo=l.getLanguageStr(3012,c.toPercentage(1-this.rateRate))}get rateRate(){return this.data.getLevelParam(this.level,0)+this.data.getLevelParam(this.level,1)*this.level+1}get rate(){return this.data.getLevelParam(this.level,2)}isChangeBase(){return this.rate!=0}}const vt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1090,this.m_skillInfo=l.getLanguageStr(3013,c.toPercentage(this.chances),this.extraBullet+1)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)+vt.DEFAULT_CHANCES,1),0)}get extraBullet(){return parseInt(this.data.getLevelParam(this.level,1)*this.level+vt.DEFAULT_EXTRA_BULLET)}};let ut=vt;s(ut,"DEFAULT_CHANCES",0),s(ut,"DEFAULT_EXTRA_BULLET",.5),s(ut,"DEFAULT_RATE",.08);const St=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1100,this.m_skillInfo=l.getLanguageStr(3014,c.toPercentage(this.chances),this.damageEffectRate.toFixed(1))}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+St.DEFAULT_CHANCES,1),0)}get damageEffectRate(){return this.data.getLevelParam(this.level,1)*this.level+St.DEFAULT_DAMAGE_EFFECT_RATE+1}get buffEffectRate(){return this.data.getLevelParam(this.level,2)*this.level+St.DEFAULT_BUFF_EFFECT_RATE+1}};let gt=St;s(gt,"DEFAULT_CHANCES",.1),s(gt,"DEFAULT_DAMAGE_EFFECT_RATE",.5),s(gt,"DEFAULT_BUFF_EFFECT_RATE",.1);const Ft=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1110,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(3026,Math.round(this.cussPower),this.duration.toFixed(0))}}get cussPower(){return this.data.getLevelParam(this.level,0)*this.level*this.tower.level+Ft.DEFAULT_CUSS_POWER}get duration(){return this.data.getLevelParam(this.level,1)+Ft.DEFAULT_DURATION}};let At=Ft;s(At,"DEFAULT_CUSS_POWER",0),s(At,"DEFAULT_DURATION",0);const jt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1120,this.m_skillInfo=l.getLanguageStr(3015,this.extraBullet+1)}get extraBullet(){return parseInt(this.data.getLevelParam(this.level,0)*this.level+jt.DEFAULT_EXTRA_BULLET)}};let Pt=jt;s(Pt,"DEFAULT_EXTRA_BULLET",.5);class oe extends N{constructor(e,t,i=null){super(e,t,i),this.m_skillInfo=l.getLanguageStr(3017)}get floatDamageRate(){return this.data.getLevelParam(this.level,0)*this.level}}class Ae extends N{constructor(e,t,i=null){super(e,t,i),this.m_skillInfo=""}get guideRatio(){return this.data.getLevelParam(this.level,0)}get bulletSpeedRate(){return this.data.getLevelParam(this.level,1)+1}get bulletAccSpeed(){return this.data.getLevelParam(this.level,2)}get guideInfo(){let e=null,t=this.guideRatio;return t<.1?e=l.getLanguageStr(3500):t<.2?e=l.getLanguageStr(3501):t<.3?e=l.getLanguageStr(3502):t<.4?e=l.getLanguageStr(3503):e=l.getLanguageStr(3504),e}}const yt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1140,this.m_skillInfo=l.getLanguageStr(3019,c.toPercentage(this.chances),this.duration.toFixed(1))}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+yt.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+yt.DEFAULT_DURATION}};let _t=yt;s(_t,"DEFAULT_CHANCES",.05),s(_t,"DEFAULT_DURATION",0);const Zt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1130,this.m_skillInfo=l.getLanguageStr(3016)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Zt.DEFAULT_CHANCES,1),0)}};let Ot=Zt;s(Ot,"DEFAULT_CHANCES",.05);const wt=class extends N{constructor(t,i,a=null){super(t,i,a);s(this,"m_poisonRate",-1);this.index=1150,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(3e3,Math.round(this.poisonRate*this.tower.damage()),this.duration.toFixed(0))}}get poisonRate(){return this.m_poisonRate<0?this.data.getLevelParam(this.level,0)*this.level+wt.DEFAULT_POISON_RATE:this.m_poisonRate}set poisonRate(t){this.m_poisonRate<0&&(this.m_poisonRate=t)}get duration(){return this.data.getLevelParam(this.level,1)+wt.DEFAULT_DURATION}};let Et=wt;s(Et,"DEFAULT_POISON_RATE",0),s(Et,"DEFAULT_DURATION",0);const bt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1160,this.m_skillInfo=l.getLanguageStr(3020,c.toPercentage(this.reducedDefenseRate),this.duration.toFixed(1))}get reducedDefenseRate(){return this.data.getLevelParam(this.level,0)*this.level+bt.DEFAULT_REDUCED_DEFENSE_RATE}get duration(){return this.data.getLevelParam(this.level,1)+bt.DEFAULT_DURATION}};let It=bt;s(It,"DEFAULT_REDUCED_DEFENSE_RATE",.1),s(It,"DEFAULT_DURATION",0);const qt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1170,this.m_skillInfo=l.getLanguageStr(3021,this.extraBullet+1)}get extraBullet(){return parseInt(this.data.getLevelParam(this.level,0)*this.level+qt.DEFAULT_EXTRA_BULLET)}};let Kt=qt;s(Kt,"DEFAULT_EXTRA_BULLET",.5);const Gt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1180,this.m_skillInfo=l.getLanguageStr(3022,c.toPercentage(this.chances),this.duration.toFixed(1))}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Gt.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+Gt.DEFAULT_DURATION}};let Tt=Gt;s(Tt,"DEFAULT_CHANCES",.05),s(Tt,"DEFAULT_DURATION",0);const Bt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1190,this.m_skillInfo=l.getLanguageStr(3023,c.toPercentage(this.slowRate),this.duration.toFixed(1))}get slowRate(){return this.data.getLevelParam(this.level,0)*this.level+Bt.DEFAULT_SLOW_RATE}get duration(){return this.data.getLevelParam(this.level,1)+Bt.DEFAULT_DURATION}};let ft=Bt;s(ft,"DEFAULT_SLOW_RATE",.1),s(ft,"DEFAULT_DURATION",0);const Nt=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1200,this.m_skillInfo=l.getLanguageStr(3024,this.throughoutNum)}get throughoutNum(){return parseInt(this.data.getLevelParam(this.level,0)*this.level+Nt.DEFAULT_THROUGHOUT_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Nt.DEFAULT_NEXT_EFFECT_RATE,Nt.MAX_NEXT_EFFECT_RATE)}};let ht=Nt;s(ht,"DEFAULT_THROUGHOUT_NUM",.5),s(ht,"DEFAULT_NEXT_EFFECT_RATE",0),s(ht,"MAX_NEXT_EFFECT_RATE",1);const Ht=class extends N{constructor(e,t,i=null){super(e,t,i),this.index=1210,this.m_skillInfo=l.getLanguageStr(3025,c.toPercentage(this.chances),this.duration.toFixed(1))}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Ht.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+Ht.DEFAULT_DURATION}};let Dt=Ht;s(Dt,"DEFAULT_CHANCES",0),s(Dt,"DEFAULT_DURATION",0);var x;let J=(x=class extends Jt{constructor(t,i,a,r=!1){super(t,i,r);s(this,"monster");s(this,"m_levelMax",0);this.monster=a,this.m_data[p.DATA_TYPE_ID]=H.TYPE_MONSTER_SKILL}static getKindName(t){switch(t){case n.KIND_FLY:return l.getLanguageStr(2507);case n.KIND_AIRBORNE:return l.getLanguageStr(2510);case n.KIND_RESIST_FIRE:return l.getLanguageStr(2515,l.getLanguageStr(2710));case n.KIND_RESIST_FROST:return l.getLanguageStr(2515,l.getLanguageStr(2711));case n.KIND_RESIST_POISON:return l.getLanguageStr(2515,l.getLanguageStr(2712));case n.KIND_RESIST_SLOW:return l.getLanguageStr(2515,l.getLanguageStr(2719));case n.KIND_RESIST_BEAT:return l.getLanguageStr(2515,l.getLanguageStr(2717));case n.KIND_RESIST_SILENCE:return l.getLanguageStr(2515,l.getLanguageStr(2722));case n.KIND_RESIST_VERTIGO:return l.getLanguageStr(2515,l.getLanguageStr(2715));case n.KIND_RESIST_CRIT:return l.getLanguageStr(2515,l.getLanguageStr(2716));case n.KIND_RESIST_LIGHT:return l.getLanguageStr(2515,l.getLanguageStr(2714));case n.KIND_RESIST_INTIMIDATE:return l.getLanguageStr(2515,l.getLanguageStr(2718));case n.KIND_RESIST_STRSMOOTH:return l.getLanguageStr(2723);case n.KIND_SLOWF:return l.getLanguageStr(2725);case n.KIND_WEAK_FIRE:return l.getLanguageStr(2516,l.getLanguageStr(2710));case n.KIND_WEAK_FROST:return l.getLanguageStr(2516,l.getLanguageStr(2711));case n.KIND_WEAK_POISON:return l.getLanguageStr(2516,l.getLanguageStr(2712));case n.KIND_WEAK_SLOW:return l.getLanguageStr(2516,l.getLanguageStr(2719));case n.KIND_WEAK_BEAT:return l.getLanguageStr(2516,l.getLanguageStr(2717));case n.KIND_WEAK_SILENCE:return l.getLanguageStr(2516,l.getLanguageStr(2722));case n.KIND_WEAK_VERTIGO:return l.getLanguageStr(2516,l.getLanguageStr(2715));case n.KIND_WEAK_CRIT:return l.getLanguageStr(2516,l.getLanguageStr(2716));case n.KIND_WEAK_LIGHT:return l.getLanguageStr(2516,l.getLanguageStr(2714));case n.KIND_WEAK_INTIMIDATE:return l.getLanguageStr(2516,l.getLanguageStr(2718));case n.KIND_ISOLATION:return l.getLanguageStr(2517);case n.KIND_RUN:return l.getLanguageStr(2500);case n.KIND_MIRROR:return l.getLanguageStr(2501);case n.KIND_SUMMON:return l.getLanguageStr(2502);case n.KIND_CLOUD:return l.getLanguageStr(2503);case n.KIND_CURE:return l.getLanguageStr(2504);case n.KIND_BLINK:return l.getLanguageStr(2505);case n.KIND_HIDE:return l.getLanguageStr(2506);case n.KIND_RELIVE:return l.getLanguageStr(2508);case n.KIND_SUICIDE:return l.getLanguageStr(2509);case n.KIND_SHIELD:return l.getLanguageStr(2511);case n.KIND_SNEER:return l.getLanguageStr(2512);case n.KIND_REINCARNATE:return l.getLanguageStr(2514);case n.KIND_TRANSFORM:return l.getLanguageStr(2513);case n.KIND_LINKS:return l.getLanguageStr(2727);default:return""}}get name(){return this.canLevelUp(1)?l.getLanguageStr(2416,this.data.name,this.level):this.data.name}get isDebuff(){return this.grade.indexOf(x.RES_FG_X)!=-1}get skillSign(){return this.isDebuff?formatHtml(l.getLanguageStr(2422),0,!0,13):formatHtml(l.getLanguageStr(2421),16711680,!0,13)}get isDowerSkill(){let t=0;if(this.monster==null)return!1;for(t=0;t<this.monster.dowerSkills.length;t++)if(this.monster.dowerSkills[t][TameData.DATA_SKILL_ID]==this.data.id)return!0;return this.monster.dowerSkills.indexOf(this)!=-1}get isLearnSkill(){let t=0;if(this.monster==null)return!1;for(t=0;t<this.monster.learnSkills.length;t++)if(this.monster.learnSkills[t][TameData.DATA_SKILL_ID]==this.data.id)return!0;return!1}getConflictStr(){let t=null,i=0,a=0,r=h.$_conflict_skill_kind,u="";for(i=0;i<r.length;i++)if(t=r[i],t.indexOf(this.data.kindId)!=-1)for(a=0;a<t.length;a++)t[a]!=this.data.kindId&&(u+=x.getKindName(t[a]),u+=l.getLanguageStr(2406));return u.length>0&&(u=u.slice(0,u.length-1)),u}canLevelUp(t=-1){return t<0&&(t=this.level),t<this.levelMax}get levelMax(){let t=null,i=null,a=0;if(this.m_levelMax<=0)if(t=h.$_skill_lvup_spend,i=this.grade,t[i]){for(a=1;a<100&&t[i][String(a)];a++);this.m_levelMax=a}else this.m_levelMax=1;return this.m_levelMax}levelUpSpend(t=-1){t<0&&(t=this.level);let i=h.$_skill_lvup_spend,a=this.grade;return i[a]&&i[a][String(t)]?i[a][String(t)]:null}get skillScore(){let t=h.$_skill_grade_score,i=this.grade;return t[i]&&t[i][String(this.level)]?t[i][String(this.level)]:1}get grade(){let t=this.data.id,i=t.indexOf("_");return i==-1?x.RES_FG_X:t.slice(i+1,t.length)}isEventSkill(){switch(this.data.kindId){case n.KIND_RUN:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case n.KIND_FLY:return new Te(this.data.id,this.level,this.monster);case n.KIND_AIRBORNE:return new Yt(this.data.id,this.level,this.monster);case n.KIND_RESIST_FIRE:case n.KIND_RESIST_FROST:case n.KIND_RESIST_POISON:case n.KIND_RESIST_SLOW:case n.KIND_RESIST_BEAT:case n.KIND_RESIST_SILENCE:case n.KIND_RESIST_VERTIGO:case n.KIND_RESIST_CRIT:case n.KIND_RESIST_LIGHT:case n.KIND_RESIST_INTIMIDATE:case n.KIND_RESIST_STRSMOOTH:case n.KIND_SLOWF:case n.KIND_WEAK_FIRE:case n.KIND_WEAK_FROST:case n.KIND_WEAK_POISON:case n.KIND_WEAK_SLOW:case n.KIND_WEAK_BEAT:case n.KIND_WEAK_SILENCE:case n.KIND_WEAK_VERTIGO:case n.KIND_WEAK_CRIT:case n.KIND_WEAK_LIGHT:case n.KIND_WEAK_INTIMIDATE:return new q(this.data.id,this.level,this.monster);case n.KIND_ISOLATION:return new fe(this.data.id,this.level,this.monster);case n.KIND_RUN:return new de(this.data.id,this.level,this.monster);case n.KIND_MIRROR:return new te(this.data.id,this.level,this.monster);case n.KIND_SUMMON:return new se(this.data.id,this.level,this.monster);case n.KIND_CLOUD:return new Ee(this.data.id,this.level,this.monster);case n.KIND_CURE:return new Ie(this.data.id,this.level,this.monster);case n.KIND_BLINK:return new _e(this.data.id,this.level,this.monster);case n.KIND_HIDE:return new Xt(this.data.id,this.level,this.monster);case n.KIND_RELIVE:return new ie(this.data.id,this.level,this.monster);case n.KIND_SUICIDE:return new kt(this.data.id,this.level,this.monster);case n.KIND_SHIELD:return new Le(this.data.id,this.level,this.monster);case n.KIND_SNEER:return new me(this.data.id,this.level,this.monster);case n.KIND_REINCARNATE:return new ee(this.data.id,this.level,this.monster);case n.KIND_TRANSFORM:return new Se(this.data.id,this.level,this.monster);case n.KIND_LINKS:return new De(this.data.id,this.level,this.monster);default:return this}}},s(x,"RES_SKILL","skill_"),s(x,"RES_FG_A","A"),s(x,"RES_FG_B","B"),s(x,"RES_FG_C","C"),s(x,"RES_FG_Z","Z"),s(x,"RES_FG_X","X"),s(x,"RES_FG_0","0"),s(x,"RES_BG","bg"),s(x,"PHOTO_WIDTH",34),s(x,"PHOTO_HEIGHT",34),s(x,"PHOTO_ROUND",8),x);class Y extends J{constructor(t,i,a){super(t,i,a);s(this,"m_warmupNum");s(this,"m_cooldownNum")}warmup(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cooldown(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}chances(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}eventType(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,3)}duration(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,4)}refreshTag(t=!1){this.skillTag1=this.getTagEventType(),this.nextLevelSkillTag1=this.getTagEventType(this.level+1),this.skillTag2=this.getTagCooldown(),this.nextLevelSkillTag2=this.getTagCooldown(this.level+1),t&&(this.skillTag3=this.getTagDuration(),this.nextLevelSkillTag3=this.getTagDuration(this.level+1))}getTagEventType(t=-1){let i=0;t<0&&(t=this.level);let a="",r=this.eventType(t);if(r.length!=4){for(i=0;i<r.length;i++)r[i]==n.EVENT_RED?a+=l.getLanguageStr(2402)+l.getLanguageStr(2406):r[i]==n.EVENT_YELLOW?a+=l.getLanguageStr(2403)+l.getLanguageStr(2406):r[i]==n.EVENT_GREEN?a+=l.getLanguageStr(2404)+l.getLanguageStr(2406):r[i]==n.EVENT_FULL&&(a+=l.getLanguageStr(2405)+l.getLanguageStr(2406));a=a.slice(0,a.length-1),a=l.getLanguageStr(2400,a)}return a}getTagCooldown(t=-1){return t<0&&(t=this.level),""+l.getLanguageStr(2401,this.cooldown(t))}getTagDuration(t=-1){return t<0&&(t=this.level),""+l.getLanguageStr(2407,this.duration(t))}}class Yt extends J{constructor(e,t,i){super(e,t,i),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2201)}}heightSpeed(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}pathLengthMin(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}pathLengthMax(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,2)}get pathLength(){return Tools.getRandom(this.pathLengthMin(),this.pathLengthMax())}}s(Yt,"BALLOON","balloon"),s(Yt,"DEFAULT_HEIGHT",2e3);class _e extends Y{constructor(e,t,i){super(e,t,i),this.index=100,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2303,c.toGridStr(this.range())),this.m_nextLevelSkillInfo=l.getLanguageStr(2303,c.toGridStr(this.range(this.level+1))),this.refreshTag()}}range(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}}class Ee extends Y{constructor(e,t,i){super(e,t,i),this.index=110,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2302,this.cloudTime()),this.m_nextLevelSkillInfo=l.getLanguageStr(2302,this.cloudTime(this.level+1)),this.refreshTag(!0)}}range(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}cloudTime(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}}class Ie extends Y{constructor(e,t,i){super(e,t,i),this.index=140,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2300,c.toGridStr(this.cureRange()),c.toPercentage(this.cureRate())),this.m_nextLevelSkillInfo=l.getLanguageStr(2300,c.toGridStr(this.cureRange(this.level+1)),c.toPercentage(this.cureRate(this.level+1))),this.refreshTag()}}cureRange(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}cureRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}}class Te extends J{constructor(e,t,i){super(e,t,i),this.index=90,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2200),this.m_nextLevelSkillInfo=l.getLanguageStr(2200)}}get flyHeight(){return this.data.getLevelParam(this.level,0)}}class Xt extends Y{constructor(e,t,i){super(e,t,i),this.index=150,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2305,this.duration()),this.m_nextLevelSkillInfo=l.getLanguageStr(2305,this.duration(this.level+1)),this.refreshTag()}}}s(Xt,"HIDE_TIME",1),s(Xt,"HIDE_ALPHA",.1);class fe extends J{constructor(e,t,i){super(e,t,i),this.index=500,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2202)}}}class De extends Y{constructor(e,t,i){super(e,t,i),this.index=116,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2728,c.toGridStr(this.range()),c.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=l.getLanguageStr(2728,c.toGridStr(this.range(this.level+1)),c.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}shieldRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}}class te extends Y{constructor(e,t,i){super(e,t,i),this.index=130,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2306,this.mirrorNum(),c.toPercentage(this.hpRate()),this.duration()),this.m_nextLevelSkillInfo=l.getLanguageStr(2306,this.mirrorNum(this.level+1),c.toPercentage(this.hpRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}mirrorNum(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}hpRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}}s(te,"DEFAULT_DISTANCE",750);class ee extends J{constructor(e,t,i){super(e,t,i),this.index=85,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2215,this.monsterName()),this.m_nextLevelSkillInfo=l.getLanguageStr(2215,this.monsterName(this.level+1))}}monsterIdList(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}monsterName(e=-1){let t=0,i=this.monsterIdList(e),a="";for(t=0;t<i.length;t++)a+=dt.getOnlyExample().getData(i[t]).name,a+=l.getLanguageStr(2406);return a.slice(0,a.length-1),a}}s(ee,"REINCARNATE_TIME",5);class ie extends J{constructor(e,t,i){super(e,t,i),this.index=170,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2213,this.reliveNum(),c.toPercentage(this.reliveHpRate())),this.m_nextLevelSkillInfo=l.getLanguageStr(2213,this.reliveNum(this.level+1),c.toPercentage(this.reliveHpRate(this.level+1)))}}reliveNum(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}reliveHpRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}}s(ie,"RELIVE_TIME",8);class q extends J{constructor(t,i,a){super(t,i,a);s(this,"maxHP",0);this.index=300,this.m_updateFunction=function(){this.m_skillInfo=this.resistInfo(),this.m_nextLevelSkillInfo=this.resistInfo(this.level+1)}}getResist(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}getRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}getMaxHP(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}resistInfo(t=-1){let i=this.getResist(t),a="",r=c.toPercentage(Math.abs(i));return i==0||(i>0?a=l.getLanguageStr(2409):a=l.getLanguageStr(2408),this.data.kindId==n.KIND_SLOWF&&(a=c.toGridStr(this.getRange())),a=l.getLanguageStr(this.resistInfoNumber,a,r),this.data.kindId==n.KIND_RESIST_STRSMOOTH&&this.getMaxHP(t)>0&&(a+=l.getLanguageStr(2730,this.getMaxHP(t)))),a}get resistInfoNumber(){switch(this.data.kindId){case n.KIND_RESIST_FIRE:case n.KIND_WEAK_FIRE:return 2203;case n.KIND_RESIST_FROST:case n.KIND_WEAK_FROST:return 2204;case n.KIND_RESIST_POISON:case n.KIND_WEAK_POISON:return 2205;case n.KIND_RESIST_SLOW:case n.KIND_WEAK_SLOW:return 2206;case n.KIND_RESIST_BEAT:case n.KIND_WEAK_BEAT:return 2207;case n.KIND_RESIST_SILENCE:case n.KIND_WEAK_SILENCE:return 2208;case n.KIND_RESIST_VERTIGO:case n.KIND_WEAK_VERTIGO:return 2209;case n.KIND_RESIST_CRIT:case n.KIND_WEAK_CRIT:return 2210;case n.KIND_RESIST_LIGHT:case n.KIND_WEAK_LIGHT:return 2211;case n.KIND_RESIST_INTIMIDATE:case n.KIND_WEAK_INTIMIDATE:return 2212;case n.KIND_RESIST_STRSMOOTH:return 2724;case n.KIND_SLOWF:return 2726;default:return 0}}}s(q,"IMMUNITY",2701),s(q,"RESIST_SUPER",2702),s(q,"RESIST_HIGH",2703),s(q,"RESIST",2704),s(q,"FEAR",2705),s(q,"FEAR_HIGH",2706),s(q,"FEAR_SUPER",2707);class de extends Y{constructor(e,t,i){super(e,t,i),this.index=160,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2304,c.toPercentage(this.speedRate()-1),this.duration()),this.m_nextLevelSkillInfo=l.getLanguageStr(2304,c.toPercentage(this.speedRate(this.level+1)-1),this.duration(this.level+1)),this.refreshTag()}}speedRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)+1}}class Le extends Y{constructor(e,t,i){super(e,t,i),this.index=105,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2308,c.toPercentage(this.shieldRate()),this.shieldTime()),this.m_nextLevelSkillInfo=l.getLanguageStr(2308,c.toPercentage(this.shieldRate(this.level+1)),this.shieldTime(this.level+1)),this.refreshTag(!0)}}range(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}shieldTime(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}shieldRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,7)}}class me extends Y{constructor(e,t,i){super(e,t,i),this.index=106,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2309,c.toGridStr(this.range()),c.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=l.getLanguageStr(2309,c.toGridStr(this.range(this.level+1)),c.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}shieldRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}}class kt extends J{constructor(e,t,i){super(e,t,i),this.index=185,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2214,c.toGridStr(this.cloudRange()),this.cloudTime()),this.m_nextLevelSkillInfo=l.getLanguageStr(2214,c.toGridStr(this.cloudRange(this.level+1)),this.cloudTime(this.level+1))}}cloudRange(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}cloudTime(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}}s(kt,"isEveryTime",!0),s(kt,"SUICIDE_TIME",.5);class se extends Y{constructor(e,t,i){super(e,t,i),this.index=120,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2301,this.summonNum(),c.toPercentage(this.hpRate()),this.summonName()),this.m_nextLevelSkillInfo=l.getLanguageStr(2301,this.summonNum(this.level+1),c.toPercentage(this.hpRate(this.level+1)),this.summonName(this.level+1)),this.refreshTag(!0)}}summonId(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}summonName(e=-1){return e<0&&(e=this.level),dt.getOnlyExample().getData(this.summonId(e)).name}loadRes(e=-1){dt.getOnlyExample().getData(this.summonId(e)).init()}isLoaded(e=-1){return DynamicLoad.loadedList[dt.getOnlyExample().getData(this.summonId(e)).res]!=null}summonNum(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,6)}hpRate(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,7)}}s(se,"DEFAULT_DISTANCE",750);class Se extends Y{constructor(e,t,i){super(e,t,i),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=l.getLanguageStr(2307,this.transformName()),this.m_nextLevelSkillInfo=l.getLanguageStr(2307,this.transformName(this.level+1)),this.refreshTag(!0)}}transformId(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,5)}transformName(e=-1){return e<0&&(e=this.level),dt.getOnlyExample().getData(this.transformId(e)).name}}class Ne extends Vt{constructor(t,i=1){super();s(this,"level");this.m_data=pt.getOnlyExample().getData(t),this.level=i}get skillsPackageData(){return this.m_data}}var $t;let Re=($t=class{},s($t,"COLOR_LIST",[6316128,13631488,13668352,43520,28927,8913056,0]),$t);const w=class extends m{constructor(t){super(t);s(this,"m_price");s(this,"priceCoin");s(this,"priceGold");s(this,"priceScore");s(this,"unlockMapId");s(this,"index");this.m_price=t[w.DATA_PRICE],this.initPrice(),this.unlockMapId=t[w.DATA_UNLOCK_MAP_ID],this.index=t[w.DATA_INDEX]}get price(){return this instanceof G&&P.currentMap&&P.currentMap.isDefendMap&&this.campPrice instanceof Array?this.campPrice:this.m_price}initPrice(){let t=null,i=this.price;i&&(i instanceof Array?(t=i,t[0]==w.DATA_COIN?this.priceCoin=t[1]:t[0]==w.DATA_GOLD?this.priceGold=t[1]:t[0]==w.DATA_SCORE&&(this.priceScore=t[1])):(this.priceCoin=i[w.DATA_COIN],this.priceGold=i[w.DATA_GOLD],this.priceScore=i[w.DATA_SCORE]))}get payPngURL(){return w.PAY_URL+id+w.PNG}get isRare(){if(this.priceCoin>0){if(this.priceCoin>=h.$_rare_item_coin||this.index<0)return!0}else if(this.priceScore>0&&(this.priceScore>=h.$_rare_item_invite_score||this.index<0))return!0;return!1}};let B=w;s(B,"PAY_URL","pay/"),s(B,"PNG",".png"),s(B,"DATA_PRICE","price"),s(B,"DATA_UNLOCK_MAP_ID","unlock_mid"),s(B,"DATA_COIN","coin"),s(B,"DATA_GOLD","gold"),s(B,"DATA_SCORE","invite_score"),s(B,"DATA_INDEX","index");const z=class extends B{constructor(t){super(t);s(this,"gemLevel");s(this,"towerSkillPackage");s(this,"nextLevelId");s(this,"colorIndex");this.typeId=m.TYPE_GEM_ITEM,this.gemLevel=t[z.DATA_GEM_LEVEL],this.towerSkillPackage=t[z.DATA_TOWER_SKILL_PACKAGE],this.nextLevelId=t[z.DATA_NEXT_LEVEL_ID],this.colorIndex=t[z.DATA_COLOR_INDEX],this.res=this.resString}getSkillPackage(t){if(this.towerSkillPackage==null)return null;let i=/\D/ig;t=t.match(i).join("");let a=this.towerSkillPackage[t];return a==null?null:new Ne(a[z.SKILL_PACKAGE_ID],a[z.SKILL_PACKAGE_LEVEL])}get color(){return Re.COLOR_LIST[this.colorIndex]}get resString(){return"hong"+this.gemLevel}};let V=z;s(V,"TYPE_PURE","typePure"),s(V,"TYPE_MIX","typeMix"),s(V,"DATA_GEM_LEVEL","gamLevel"),s(V,"DATA_TOWER_SKILL_PACKAGE","sp"),s(V,"DATA_NEXT_LEVEL_ID","nextId"),s(V,"DATA_COLOR_INDEX","color"),s(V,"SKILL_PACKAGE_ID","id"),s(V,"SKILL_PACKAGE_LEVEL","lv");var k;let Me=(k=class extends ${constructor(){super(),k.onlyExample=this,this.loadData(h.$_global_properties[m.TYPE_GEM_ITEM])}static getOnlyExample(){return k.onlyExample==null&&(k.onlyExample=new k),k.onlyExample}loadData(e){let t;for(t in e)this.m_manager[t]=new V(e[t])}initData(){}getData(e){return this.getDataById(e)}},s(k,"onlyExample",null),k);const b=class extends B{constructor(t){let i;super(t);s(this,"skillPackageId");s(this,"skillPackageLevel");s(this,"skills");s(this,"xGrid");s(this,"yGrid");if(this.skillPackageId=t[b.DATA_SKILL_PACKAGE_ID],this.skillPackageLevel=t[b.DATA_SKILL_PACKAGE_LEVEL],t[b.DATA_SKILLS]instanceof Array)this.skills=t[b.DATA_SKILLS];else if(t[b.DATA_SKILLS]instanceof Object){this.skills=[];for(i in t[b.DATA_SKILLS])this.skills.push({skid:i,lev:t[b.DATA_SKILLS][i]})}t[b.DATA_X_GRID]?this.xGrid=t[b.DATA_X_GRID]:this.xGrid=1,t[b.DATA_Y_GRID]?this.yGrid=t[b.DATA_Y_GRID]:this.yGrid=1}};let L=b;s(L,"DATA_A","a"),s(L,"DATA_B","b"),s(L,"DATA_C","c"),s(L,"DATA_D","d"),s(L,"DATA_SKILL_PACKAGE_ID","skill"),s(L,"DATA_SKILL_PACKAGE_LEVEL","skillLv"),s(L,"DATA_SKILLS","skills"),s(L,"DATA_X_GRID","x_grid"),s(L,"DATA_Y_GRID","y_grid");const K=class extends L{constructor(t=null){super(t);s(this,"m_buildValueA");s(this,"m_buildValueB");s(this,"m_buildValueC");s(this,"m_campPrice");s(this,"m_campBuildValueA");s(this,"m_campBuildValueB");s(this,"m_campBuildValueC");s(this,"range");s(this,"rate");s(this,"limitNum");t[K.DATA_BUILD_VALUE]?(this.m_buildValueA=t[K.DATA_BUILD_VALUE][L.DATA_A],this.m_buildValueB=t[K.DATA_BUILD_VALUE][L.DATA_B],this.m_buildValueC=t[K.DATA_BUILD_VALUE][L.DATA_C]):t[K.DATA_EXP_VALUE]&&(this.m_buildValueA=t[K.DATA_EXP_VALUE][L.DATA_A],this.m_buildValueB=t[K.DATA_EXP_VALUE][L.DATA_B],this.m_buildValueC=t[K.DATA_EXP_VALUE][L.DATA_C]),t[K.DATA_CAMP_PRICE]&&(this.m_campPrice=t[K.DATA_CAMP_PRICE]),t[K.DATA_CAMP_BUILD_VALUE]&&(this.m_campBuildValueA=t[K.DATA_CAMP_BUILD_VALUE][L.DATA_A],this.m_campBuildValueB=t[K.DATA_CAMP_BUILD_VALUE][L.DATA_B],this.m_campBuildValueC=t[K.DATA_CAMP_BUILD_VALUE][L.DATA_C]),this.range=t[K.DATA_RANGE],this.rate=Math.round(t[K.DATA_RATE]*10),this.limitNum=t[K.DATA_LIMIT_NUM]}get buildValueA(){return P.currentMap&&P.currentMap.isDefendMap?this.m_campBuildValueA:this.m_buildValueA}get buildValueB(){return P.currentMap&&P.currentMap.isDefendMap?this.m_campBuildValueB:this.m_buildValueB}get buildValueC(){return P.currentMap&&P.currentMap.isDefendMap?this.m_campBuildValueC:this.m_buildValueC}get campPrice(){return this.m_campPrice}get buildCostPrice(){return this.price[0]}get buildCost(){return this.price[1]}get buildValueAConst(){return this.m_buildValueA}get buildValueBConst(){return this.m_buildValueB}get buildValueCConst(){return this.m_buildValueC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}};let G=K;s(G,"DATA_BUILD_VALUE","build_val"),s(G,"DATA_EXP_VALUE","exp_val"),s(G,"DATA_CAMP_PRICE","camp_price"),s(G,"DATA_CAMP_BUILD_VALUE","camp_build_val"),s(G,"DATA_RANGE","range"),s(G,"DATA_RATE","rate"),s(G,"DATA_LIMIT_NUM","limit_num");const y=class extends G{constructor(t){super(t);s(this,"valueList");s(this,"effectType");s(this,"effectKind");s(this,"effectRange");s(this,"useNum");s(this,"colddown");s(this,"delay");s(this,"attackEffectId");typeId=BaseDisplayData.TYPE_TRAP_ITEM,this.valueList=t[y.DATA_VALUE_LIST],this.effectType=t[y.DATA_EFFECT_TYPE],this.effectKind=t[y.DATA_EFFECT_KIND],t[y.DATA_USE_NUM]?this.useNum=t[y.DATA_USE_NUM]:this.useNum=1,t[y.DATA_COLDDOWN]?this.colddown=t[y.DATA_COLDDOWN]:this.colddown=.1,t[y.DATA_DELAY]?this.delay=t[y.DATA_DELAY]:this.delay=0,t[y.DATA_EFFECT_RANGE]?this.effectRange=t[y.DATA_EFFECT_RANGE]:this.effectRange=range,this.attackEffectId=t[y.DATA_EFFECT]}};let R=y;s(R,"KIND_BLAST","1"),s(R,"KIND_DAMAGE","2"),s(R,"KIND_VERTIGO","3"),s(R,"KIND_SLOW","4"),s(R,"KIND_BEAT_BACK","5"),s(R,"KIND_COLD_BULLET","50"),s(R,"KIND_BULLET","100"),s(R,"KIND_BULLET_RANDOM","101"),s(R,"EFFECT_TYPE_FLOOR","1"),s(R,"EFFECT_TYPE_AIR","2"),s(R,"EFFECT_TYPE_ALL","3"),s(R,"EFFECT_TYPE_LIGHTNING","4"),s(R,"EFFECT_KIND_SINGLE","1"),s(R,"EFFECT_KIND_MULTI","2"),s(R,"DATA_VALUE_LIST","value"),s(R,"DATA_EFFECT_TYPE","effectType"),s(R,"DATA_EFFECT_KIND","effectKind"),s(R,"DATA_EFFECT_RANGE","effectRange"),s(R,"DATA_USE_NUM","use_times"),s(R,"DATA_COLDDOWN","colddown"),s(R,"DATA_DELAY","delay"),s(R,"DATA_EFFECT","effect");class pe extends G{constructor(t){super(t);s(this,"m_buildCostA");s(this,"m_buildCostB");s(this,"m_buildCostC");s(this,"m_campBuildCostA");s(this,"m_campBuildCostB");s(this,"m_campBuildCostC");s(this,"damageA");s(this,"damageB");s(this,"damageC");s(this,"buffEffect");s(this,"levelMax");this.m_buildCostA=t.build_cost.a,this.m_buildCostB=t.build_cost.b,this.m_buildCostC=t.build_cost.c,this.m_campBuildCostA=t.camp_build_cost.a,this.m_campBuildCostB=t.camp_build_cost.b,this.m_campBuildCostC=t.camp_build_cost.c,this.damageA=t.damage.a,this.damageB=t.damage.b,this.damageC=t.damage.c,this.buffEffect=t.buffEffect,this.levelMax=t.lev_max}get buildCostA(){var t;return(t=P.currentMap)!=null&&t.isDefendMap?this.m_campBuildCostA:this.m_buildCostA}get buildCostB(){var t;return(t=P.currentMap)!=null&&t.isDefendMap?this.m_campBuildCostB:this.m_buildCostB}get buildCostC(){var t;return(t=P.currentMap)!=null&&t.isDefendMap?this.m_campBuildCostC:this.m_buildCostC}get buildCostAConst(){return this.m_buildCostA}get buildCostBConst(){return this.m_buildCostB}get buildCostCConst(){return this.m_buildCostC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}get isMagicTower(){return this.id=="xiangqianta"}}var Q;let Ue=(Q=class extends ${constructor(){super(),Q.onlyExample=this,this.loadData(h.$_towerAtt_Obj)}static getOnlyExample(){return Q.onlyExample==null&&(Q.onlyExample=new Q),Q.onlyExample}loadData(e){let t,i;for(i in e)t=e[i],t[p.DATA_ID]=i,this.m_manager[i]=new pe(e[i])}getData(e){return this.getDataById(e)}},s(Q,"onlyExample",null),Q);const zt=class extends G{constructor(t=null){super(t);s(this,"valueList");this.typeId=BaseDisplayData.TYPE_WALL,this.valueList=t[zt.DATA_VALUE_LIST]}};let rt=zt;s(rt,"KIND_DAMAGE","damage"),s(rt,"KIND_RATE","rate"),s(rt,"KIND_RANGE","range"),s(rt,"DATA_VALUE_LIST","value");const X=class extends L{constructor(t=null){super(t);s(this,"shapeMode");s(this,"damageMode");s(this,"radii");s(this,"shadow");s(this,"fallAccSpeed");s(this,"floorPathId");s(this,"hitEffectId");this.shapeMode=t[X.DATA_SHAPE_MODE],this.damageMode=t[X.DATA_DAMAGE_MODE],this.radii=t[X.DATA_RADII],t[X.DATA_SHADOW]?this.shadow=t[X.DATA_SHADOW]:this.shadow=1,this.fallAccSpeed=t[X.DATA_FALL_ACC_SPEED],this.floorPathId=t[X.DATA_FLOOR_PATH_ID],this.hitEffectId=t[X.DATA_HIT_EFFECT_ID]}};let O=X;s(O,"SHAPE_COMMON",0),s(O,"SHAPE_DIRECTION",1),s(O,"SHAPE_ROLL",2),s(O,"DAMAGE_NULL",0),s(O,"DAMAGE_COMMON",1),s(O,"DAMAGE_PERFORATIVE",2),s(O,"DAMAGE_MAGICAL",3),s(O,"DAMAGE_SIEGE",4),s(O,"DAMAGE_MIXED",5),s(O,"FALL_ACC_SPEED_THRESHOLD",-7),s(O,"DATA_SHAPE_MODE","shapeMode"),s(O,"DATA_DAMAGE_MODE","damageMode"),s(O,"DATA_RADII","radii"),s(O,"DATA_SHADOW","shadow"),s(O,"DATA_FALL_ACC_SPEED","fallAcc"),s(O,"DATA_FLOOR_PATH_ID","path"),s(O,"DATA_HIT_EFFECT_ID","effect");const at=class extends ${constructor(){super(),at.onlyExample=this,this.loadData(h.$_bulletAtt_Obj)}static getOnlyExample(){return at.onlyExample==null&&(at.onlyExample=new at),at.onlyExample}loadData(e){let t,i;for(i in e)t=e[i],t[p.DATA_ID]=i,this.m_manager[i]=new O(e[i])}getData(e){return this.getDataById(e)}};let Wt=at;s(Wt,"onlyExample",null);var _;let Ce=(_=class extends L{constructor(t){super(t);s(this,"hpMaxA");s(this,"hpMaxB");s(this,"hpMaxC");s(this,"expMaxA");s(this,"expMaxB");s(this,"expMaxC");s(this,"expMaxD");s(this,"speedBase");s(this,"charm");s(this,"height");s(this,"width");s(this,"speakList");s(this,"population");t[_.DATA_HP_MAX]?(this.hpMaxA=t[_.DATA_HP_MAX][L.DATA_A],this.hpMaxB=t[_.DATA_HP_MAX][L.DATA_B],this.hpMaxC=t[_.DATA_HP_MAX][L.DATA_C]):(this.hpMaxA=t[_.DATA_HP_MAX_A],this.hpMaxB=t[_.DATA_HP_MAX_B],this.hpMaxC=t[_.DATA_HP_MAX_C]),t[_.DATA_EXP_MAX]&&(this.expMaxA=t[_.DATA_EXP_MAX][L.DATA_A],this.expMaxB=t[_.DATA_EXP_MAX][L.DATA_B],this.expMaxC=t[_.DATA_EXP_MAX][L.DATA_C],this.expMaxD=t[_.DATA_EXP_MAX][L.DATA_D]),this.speedBase=t[_.DATA_SPEED_BASE],this.charm=t[_.DATA_CHARM],this.height=t[_.DATA_HEIGHT],this.width=t[_.DATA_WIDTH],t[_.DATA_SPEAK_LIST]instanceof Array&&(this.speakList=t[_.DATA_SPEAK_LIST]),this.population=t[_.DATA_POPULATION]}getSpeak(t=0){let i=null;if(this.speakList instanceof Array&&this.speakList.length>t){if(this.speakList[t]instanceof String)return this.speakList[t];if(this.speakList[t]instanceof Array)return i=this.speakList[t],i[int(Math.random()*i.length)]}return""}getSpeakEnter(){return this.getSpeak(_.SPEAK_ENTER)}getSpeakIdle(){return this.getSpeak(_.SPEAK_IDLE)}getSpeakInjury(){return this.getSpeak(_.SPEAK_INJURY)}getSpeakDie(){return this.getSpeak(_.SPEAK_DIE)}getSpeakInvade(){return this.getSpeak(_.SPEAK_INVADE)}getSpeakCast(){return this.getSpeak(_.SPEAK_CAST)}get isBoss(){return this.population>=100}get isRandomBoss(){return this.population==99}getHpMax(t,i=1){return Math.floor((this.hpMaxA+t*(this.hpMaxB+t*this.hpMaxC))*i)}},s(_,"SPEAK_ENTER",0),s(_,"SPEAK_IDLE",1),s(_,"SPEAK_INJURY",2),s(_,"SPEAK_DIE",3),s(_,"SPEAK_INVADE",4),s(_,"SPEAK_CAST",5),s(_,"DEFENSE_NULL",0),s(_,"DEFENSE_LIGHT",1),s(_,"DEFENSE_COMMON",2),s(_,"DEFENSE_HEAVY",3),s(_,"DEFENSE_BUILDING",4),s(_,"DEFENSE_BOSS",5),s(_,"DEFENSE_HOLY",6),s(_,"DEFENSE_INVINCIBLE",7),s(_,"DATA_HP_MAX","hp_factor"),s(_,"DATA_EXP_MAX","explev"),s(_,"DATA_HP_MAX_A","ha"),s(_,"DATA_HP_MAX_B","hb"),s(_,"DATA_HP_MAX_C","hc"),s(_,"DATA_SPEED_BASE","speed"),s(_,"DATA_CHARM","charm"),s(_,"DATA_HEIGHT","height"),s(_,"DATA_WIDTH","width"),s(_,"DATA_SPEAK_LIST","speak"),s(_,"DATA_POPULATION","pop"),_);var j;let dt=(j=class extends ${constructor(){super(),j.onlyExample=this,this.loadData(h.$_wolfAtt_Obj)}static getOnlyExample(){return j.onlyExample==null&&(j.onlyExample=new j),j.onlyExample}loadData(e){let t,i;for(i in e)t=e[i],t[p.DATA_ID]=i,this.m_manager[i]=new Ce(t)}getBossList(e){let t=0,i=null,a=[];if(!(e instanceof Array))return a;for(t=0;t<e.length;t++)i=this.getData(e[t]),i&&i.isBoss&&a.push(e[t]);return a}getRandomBossList(e){let t=0,i=null,a=[];if(!(e instanceof Array))return a;for(t=0;t<e.length;t++)i=this.getData(e[t]),i&&i.isRandomBoss&&a.push(e[t]);return a}getData(e){return this.getDataById(e)}},s(j,"onlyExample",null),j);export{ne as A,Wt as B,ge as C,P as G,dt as M,Ne as S,R as T,rt as W,l as a,Ue as b,N as c,o as d,he as e,ce as f,ue as g,Vt as h,Me as i,Ke as j,J as k};

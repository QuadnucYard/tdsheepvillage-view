var ya=Object.defineProperty;var Oa=(o,t,e)=>t in o?ya(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var a=(o,t,e)=>Oa(o,typeof t!="symbol"?t+"":t,e);import{E as Ka,z as Pa,a as he,g as ka,b as ge,c as Va,d as Ma,e as Dl,f as Ua,h as Yl,i as Fa,j as $a,k as Ba,l as Ha,m as Ga,n as ja,o as Wa,p as Xa,q as za,r as Ya,s as qa,t as _t,u as Ct,v as Rt,w as yt,x as Me,y as Ue,A as Fe,B as Ee,C as me,D as be,F as Ja,G as $e,H as mt,I as Za,J as pt,K as Qa,L as es,M as Ot,N as Kt,O as ql}from"./element-plus-Bj5FdTGG.js";import{l as ts}from"./vatex-ql5v6cG4.js";import{d as P,U as R,T as c,u,af as Se,o as f,Q as n,at as xl,V as Pt,au as ls,c as b,a as E,b as j,m as S,F as te,i as Jl,R as k,a9 as B,X as x,j as M,H as as,L as _e,Y as ne,e as Ae,av as oe,W as bl,aw as Et,n as ss,O as ns,K as is,M as Zl,w as Sl}from"./@vue-Bwqm3E32.js";import{H as Ql,D as os}from"./vue-echarts-DZ2D3S0i.js";import{S as rs}from"./vue-json-pretty-mJi91SFe.js";import{c as us,a as ds,u as Nl,b as ea}from"./vue-router-DuqH2ZeL.js";import{C as cs,D as Vl,E as Ml,F as _s,G as ms}from"./@element-plus-Dyudn6_E.js";import{l as wl}from"./@vueuse-QyZbpego.js";import{c as ps}from"./vue-i18n-D6pdZRPn.js";import{n as ht,k as hs,r as ta,o as fe,q as ut,u as Cl,v as gs,w as Xe,x as fs,y as la,z as kt,A as As,B as It,C as Es,D as Is,j as vs,E as Ts,F as Ul}from"./lodash-es-BTGNOdJr.js";import{d as aa,l as Ls,a as Ht,b as Ds,_ as xs}from"./assets-B_DK62MM.js";import{u as sa}from"./vue-clipboard3-Bp0k3pzj.js";import{u as Vt,i as Rl,a as Mt,b as Ut,c as Ft,d as $t,e as bs,f as Ss,g as Ns,h as ws,j as Cs}from"./echarts-Dc0Wk187.js";import{C as Rs}from"./color-k-owuus4.js";import{g as ys}from"./mathjs-cY7ooqjL.js";import{X as Os}from"./x2js-BumLVJp2.js";import"./async-validator-DKvM95Vc.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./memoize-one-BdPwpGay.js";import"./katex-g1054RtI.js";import"./resize-detector-G6vbKCU7.js";import"./@intlify-AYDeHhOU.js";import"./clipboard-BXakCFFF.js";import"./@xmldom-DTLZYAj2.js";import"./tslib-BDyQ-Jie.js";import"./zrender-Cdl_14ea.js";import"./color-string-Ckj7g19G.js";import"./color-name-BQ5IbGbl.js";import"./simple-swizzle-BUB9Iq-C.js";import"./is-arrayish-BII_q15j.js";import"./color-convert-CkRI355n.js";import"./decimal.js-Dtyavigz.js";import"./@babel-CF3RwP-h.js";import"./typed-function-BLyDoq9U.js";import"./complex.js-BC_sEgxf.js";import"./fraction.js-DqatKmli.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();const Ks={page:{home:"Home",notice:"Notice",section:"Tools",wiki:"Wiki"},section:{baoxiang:"Baoxiang Properties",bullets:"Bullets",dmap_detail:"Dream Map Detail",dmaps:"Dream Maps",dream_design:"Dream Design",monster_calc:"Wolf Calculation",monster_skills:"Monster Skills",monsters:"Wolfs",tower_design:"Tower Design",towers:"Towers",umap_design:"Umap Design",umap_detail:"Umap Detail",umaps:"Umaps",user:"User"}},Ps={page:{home:"TDSheepView 保卫羊村小工具",notice:"公告",section:"小工具",wiki:"百科"},section:{baoxiang:"宝箱物品",bullets:"子弹",dmap_detail:"噩梦关卡详情",dmaps:"噩梦关卡",dream_design:"噩梦设计",monster_calc:"狼技能实力计算",monster_skills:"狼技能",monsters:"狼",tower_design:"塔设计",towers:"塔",umap_design:"前线设计",umap_detail:"前线关卡详情",umaps:"前线关卡",user:"用户"}},ks={"en-US":Ks,"zh-CN":Ps},na=ps({legacy:!1,locale:"en-US",fallbackLocale:"zh-CN",messages:ks});(function(){String.prototype.isNullOrEmpty||(String.prototype.isNullOrEmpty=function(){return!this}),Array.prototype.firstOrDefault||(Array.prototype.firstOrDefault=function(o){for(let t=0;t<this.length;t++){const e=this[t];if(o(e))return e}return null}),Array.prototype.removeAt||(Array.prototype.removeAt=function(o){const t=this[o];return this.splice(o,1),t}),Array.prototype.removeOne||(Array.prototype.removeOne=function(o){const t=this.indexOf(o);return t>=0?(this.splice(t,1),!0):!1}),Array.prototype.removeRange||(Array.prototype.removeRange=function(o){for(let t=0;t<o.length;t++)this.removeOne(o[t])}),Array.prototype.addRange||(Array.prototype.addRange=function(o){for(let t=0;t<o.length;t++)this.push(o[t])}),Array.prototype.contains||(Array.prototype.contains=function(o){return this.indexOf(o)!=-1}),Array.prototype.empty||(Array.prototype.empty=function(){return this.length==0})})();const Vs=P({__name:"App",setup(o){return(t,e)=>{const l=Se("router-view"),s=Ka;return f(),R(s,{locale:u(Pa)},{default:c(()=>[n(l,null,{default:c(({Component:i})=>[(f(),R(xl,null,[(f(),R(Pt(i)))],1024))]),_:1})]),_:1},8,["locale"])}}}),Ms="modulepreload",Us=function(o){return"/tdsheepvillage-view/"+o},Fl={},Q=function(t,e,l){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),_=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.allSettled(e.map(m=>{if(m=Us(m),m in Fl)return;Fl[m]=!0;const p=m.endsWith(".css"),d=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${d}`))return;const h=document.createElement("link");if(h.rel=p?"stylesheet":Ms,p||(h.as="script"),h.crossOrigin="",h.href=m,_&&h.setAttribute("nonce",_),document.head.appendChild(h),p)return new Promise((T,A)=>{h.addEventListener("load",T),h.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(r){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=r,window.dispatchEvent(_),!_.defaultPrevented)throw r}return s.then(r=>{for(const _ of r||[])_.status==="rejected"&&i(_.reason);return t().catch(i)})},Fs=(o,t,e)=>{const l=o[t];return l?typeof l=="function"?l():Promise.resolve(l):new Promise((s,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==e?". Note that variables only represent file names one level deep.":""))))})},$s=["home","notice","section","wiki"],jt=["user","towers","bullets","monsters","monster-skills","monster-calc","umaps","umap-detail","umap-design","dmaps","dmap-detail","baoxiang","dream-design","tower-design"],Bs=[{path:"/",name:"index",component:()=>Q(()=>Promise.resolve().then(()=>un),void 0),children:[{path:"home",name:"home",alias:"",component:()=>Q(()=>Promise.resolve().then(()=>mn),void 0)},{path:"notice",name:"notice",component:()=>Q(()=>Promise.resolve().then(()=>fn),void 0)},{path:"wiki",name:"wiki",component:()=>Q(()=>Promise.resolve().then(()=>En),void 0)},{path:"section",name:"section",redirect:{name:jt[0]},component:()=>Q(()=>Promise.resolve().then(()=>Nn),void 0),children:jt.map(o=>({path:o,name:o,meta:{keepAlive:!0},component:()=>Fs(Object.assign({"../views/sections/baoxiang/index.vue":()=>Q(()=>Promise.resolve().then(()=>Mn),void 0),"../views/sections/bullets/index.vue":()=>Q(()=>Promise.resolve().then(()=>$n),void 0),"../views/sections/dmap-detail/index.vue":()=>Q(()=>Promise.resolve().then(()=>ri),void 0),"../views/sections/dmaps/index.vue":()=>Q(()=>Promise.resolve().then(()=>mi),void 0),"../views/sections/dream-design/index.vue":()=>Q(()=>Promise.resolve().then(()=>fi),void 0),"../views/sections/monster-calc/index.vue":()=>Q(()=>Promise.resolve().then(()=>Hi),void 0),"../views/sections/monster-skills/index.vue":()=>Q(()=>Promise.resolve().then(()=>Wi),void 0),"../views/sections/monsters/index.vue":()=>Q(()=>Promise.resolve().then(()=>so),void 0),"../views/sections/tower-design/index.vue":()=>Q(()=>Promise.resolve().then(()=>go),void 0),"../views/sections/towers/index.vue":()=>Q(()=>Promise.resolve().then(()=>Eo),void 0),"../views/sections/umap-design/index.vue":()=>Q(()=>Promise.resolve().then(()=>So),void 0),"../views/sections/umap-detail/index.vue":()=>Q(()=>Promise.resolve().then(()=>ko),void 0),"../views/sections/umaps/index.vue":()=>Q(()=>Promise.resolve().then(()=>Uo),void 0),"../views/sections/user/index.vue":()=>Q(()=>Promise.resolve().then(()=>$o),void 0)}),`../views/sections/${o}/index.vue`,5)}))}]}],Hs=us({history:ds("/tdsheepvillage-view/"),routes:Bs}),yl=ls(Vs);yl.use(Hs).use(na).use(ts);yl.component("VChart",Ql);yl.mount("#app");const Gs={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},js=E("path",{fill:"currentColor",d:"m12.87 15.07l-2.54-2.51l.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35C8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5l3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7l1.62-4.33L19.12 17z"},null,-1),Ws=[js];function Xs(o,t){return f(),b("svg",Gs,[...Ws])}const zs={name:"mdi-translate",render:Xs};function Ys(o,t=!1){t||(o=o.toLowerCase());let e=1315423911;for(let l=o.length-1;l>=0;l--)e^=(e<<5)+o.charCodeAt(l)+(e>>2);return e&2147483647}const qs=function(o){return/^[a-zA-Z]+$/.test(o)},Js=function(o,t){return o<t?-1:o>t?1:0};function*Zs(o){let t=0;for(const e of o)t+=e,yield t}function Be(o){if(o===0)return 1;if(o=Math.abs(o),o%1===0)return Math.pow(10,Math.floor(Math.log10(o)));const t=o.toString();return Math.pow(10,t.indexOf(".")-t.length+1)}function $l(...o){if(o.length==1)return new Array(o[0]).fill(0);if(o.length==2)return Array.from({length:o[0]},()=>new Array(o[1]).fill(0))}function Gt(o){return ht(o,(t,e)=>Wt(t,e))}function Wt(o,t){return ht(o,(e,l)=>Qs(e,t,l))}function Qs(o,t,e){return{...o,type:t,id:e}}function ia(o){console.log("parse sys_config",o);const t=new Os,e=o.camp_system_simple,l=m=>parseInt(new RegExp("(?<=m).+(?=[A-Z]*)").exec(qs(m[m.length-1])?m:m+"A")[0],36),s=Object.keys(o.umaps).sort((m,p)=>Js(l(m),l(p))),i=Gt(o.building),r=Gt(o.skill);return{$_global_language_str:t.xml2dom(Ls),$_global_properties:Gt(o.properties),$_skillAtt_Obj:r,$_skillPackage_Obj:o.skill_package,$_map_Obj:o.umaps,$_towerAtt_Obj:i.tower,$_bulletAtt_Obj:o.bullet,$_wolfAtt_Obj:Wt(o.wolfs,"wolf"),$_wallAtt_Obj:i.wall,$_barrierAtt_Obj:o.barrier,$_level_up_gift:o.level_up_gift,$_pass_map_gift:o.pass_map_gift,$_wave_hard_Obj:o.wolf_hard_ness,$Maps:o.version_ctrl.Maps,$_wolfs_unlock_lv:e.camp_wolf_lv_max_factor,$_wolfs_unlock_gold:e.camp_wolf_gold_max_factor,$_camp_hold_time:e.hold_time,$_camp_pk_cd_time:e.pk_cd_time,$_camp_pk_times_max:e.pk_times_max,$_camp_defend_times_max:e.defend_times_max,$_camp_pk_arena_times_max:e.pk_arena_times_max,$_camp_defend_arena_times_max:e.defend_arena_times_max,$_camp_mining_rate:e.mine_rate,$_camp_sell_building_dis:e.sell_building_dis,$_tower_worth_factor:e.tower_worth_factor,$_wolf_worth_factor:e.wolf_worth_factor,$_defend_map_snarp_max:e.defend_map_snarp_max,$_defend_succ_factor:e.defend_succ_factor,$_defend_failed_factor:e.defend_failed_factor,$_defend_arena_succ_factor:e.defend_arena_succ_factor,$_defend_arena_failed_factor:e.defend_arena_failed_factor,$_conflict_skill_kind:e.conflict_skill_kind,$_skill_lvup_spend:e.skill_lvup_spend,$_skill_grade_score:e.skill_grade_score,$_camp_use_exp_wolf_max:e.use_exp_wolf_max,$_camp_use_exp_tower_max:e.use_exp_tower_max,$_camp_wolf_lv_max:e.wolf_lv_max,$_camp_need_user_level:e.camp_need_user_level,$_camp_arena_need_user_level:e.arena_need_user_level,$_camp_create_mine_help_max:e.create_mine_help_max,$_camp_create_mine_help_friends_num:e.create_mine_help_friends_num,$_dream_wolf_hard_ness:Ht.dm_wolf_hard_ness,umapsById:s.map(m=>[m,o.umaps[m]]),dream_data:Ht,dream_maps:Wt(Ht.dmaps,"dmaps"),dream_waves:Ds}}let w=ia(localStorage.getItem("sys_config")?JSON.parse(localStorage.getItem("sys_config")):aa);function oa(o){console.log("update data",o),w=ia(o),localStorage.setItem("sys_config",JSON.stringify(o))}function en(o){oa(hs(aa,o))}function tn(){console.log("clear data cache"),localStorage.removeItem("sys_config")}const ln={slot:"footer",class:"dialog-footer"},an=P({__name:"ConfigUploadDialog",setup(o,{expose:t}){const e=j(!1),l=j(),s=j([]),i=j(!0),r=T=>{const A=T.type==="application/json";return A||he.error("只能上传json文件"),A},_=T=>{l.value.clearFiles();const A=T[0];A.uid=ka(),l.value.handleStart(A)},m=()=>{if(s.value.length===0){he.error("请上传文件");return}p(s.value[0].raw),he.success("上传成功")},p=T=>{const A=new FileReader;A.onload=I=>{const L=I.target.result,K=JSON.parse(L);he.success("文件读取成功"),i.value?en(K):oa(K),he.success("数据更新成功"),e.value=!1,d()},A.onerror=()=>{he.error("文件读取失败")},A.readAsText(T)},d=()=>{l.value=void 0};return t({show:()=>{e.value=!0}}),(T,A)=>{const I=ge,L=Va,K=Ma,V=Dl;return f(),R(V,{title:"上传文件",modelValue:u(e),"onUpdate:modelValue":A[4]||(A[4]=C=>te(e)?e.value=C:null),width:"30%",onClose:d},{default:c(()=>[E("div",null,[n(I,{onClick:A[0]||(A[0]=C=>u(tn)())},{default:c(()=>A[5]||(A[5]=[S("清除缓存")])),_:1})]),n(L,{ref_key:"upload",ref:l,"file-list":u(s),"onUpdate:fileList":A[1]||(A[1]=C=>te(s)?s.value=C:null),drag:"",action:"#",limit:1,"before-upload":r,"on-exceed":_,"auto-upload":!1},{default:c(()=>A[6]||(A[6]=[E("i",{class:"el-icon-upload"},null,-1),E("div",{class:"el-upload__text"},"将文件拖到此处，或点击上传",-1),E("div",{class:"el-upload__tip"},"只能上传json文件",-1)])),_:1},8,["file-list"]),E("div",null,[n(K,{modelValue:u(i),"onUpdate:modelValue":A[2]||(A[2]=C=>te(i)?i.value=C:null),label:"合并数据",size:"large"},null,8,["modelValue"])]),E("div",ln,[n(I,{onClick:A[3]||(A[3]=C=>e.value=!1)},{default:c(()=>A[7]||(A[7]=[S("取消")])),_:1}),n(I,{type:"primary",onClick:m},{default:c(()=>A[8]||(A[8]=[S("确定")])),_:1})])]),_:1},8,["modelValue"])}}}),sn={class:"no-menu-item"},nn=P({__name:"AppHeader",setup(o){const t=Nl(),e=wl(),l=j("0"),s=$s;let i=j();Jl(()=>{l.value=s.indexOf(t.name).toString()});const r=_=>{na.global.locale.value=_};return(_,m)=>{const p=Ua,d=ge,h=Yl,T=zs,A=Fa,I=$a,L=Ba,K=Ha,V=Ga;return f(),b(k,null,[n(V,{router:"","default-active":u(l),mode:"horizontal","background-color":"#ff9900","text-color":"#fefefe","active-text-color":"#ffd9a1",ellipsis:!1},{default:c(()=>[(f(!0),b(k,null,B(u(s),(C,pe)=>(f(),R(p,{key:C,index:pe.toString(),route:{name:C}},{default:c(()=>[S(x(_.$t(`page.${C}`)),1)]),_:2},1032,["index","route"]))),128)),m[4]||(m[4]=E("div",{class:"flex-grow"},null,-1)),n(d,{circle:"",icon:u(cs),onClick:m[0]||(m[0]=C=>{var pe;return(pe=u(i))==null?void 0:pe.show()})},null,8,["icon"]),n(h,{modelValue:u(e),"onUpdate:modelValue":m[1]||(m[1]=C=>te(e)?e.value=C:null),"active-action-icon":u(Vl),"inactive-action-icon":u(Vl),class:"no-menu-item"},null,8,["modelValue","active-action-icon","inactive-action-icon"]),E("div",sn,[n(K,{class:"align-middle",onCommand:r},{dropdown:c(()=>[n(L,null,{default:c(()=>[n(I,{command:"zh-CN"},{default:c(()=>m[2]||(m[2]=[S("中文")])),_:1}),n(I,{command:"en-US"},{default:c(()=>m[3]||(m[3]=[S("English")])),_:1})]),_:1})]),default:c(()=>[n(A,{size:24},{default:c(()=>[n(T)]),_:1})]),_:1})])]),_:1},8,["default-active"]),n(an,{ref_key:"configUploadDialogRef",ref:i},null,512)],64)}}}),Ie=(o,t)=>{const e=o.__vccOpts||o;for(const[l,s]of t)e[l]=s;return e},on=Ie(nn,[["__scopeId","data-v-c1f52035"]]),rn=P({__name:"index",setup(o){const t=wl(),e=M(()=>t.value?"dark":"light");return as(os,e),(l,s)=>{const i=on,r=Wa,_=Se("router-view"),m=Xa,p=ja;return f(),R(p,null,{default:c(()=>[n(r,null,{default:c(()=>[n(i)]),_:1}),n(m,null,{default:c(()=>[n(_,null,{default:c(({Component:d})=>[(f(),R(xl,null,[(f(),R(Pt(d)))],1024))]),_:1})]),_:1})]),_:1})}}}),un=Object.freeze(Object.defineProperty({__proto__:null,default:rn},Symbol.toStringTag,{value:"Module"})),dn={class:"p-4"},cn={class:"absolute text-center mt-20 top-32 z-10 p-8 left-0 right-0 space-y-8 bg-black bg-opacity-50"},_n=P({__name:"home",setup(o){const t=ta(1,9).map(e=>`/tdsheepvillage-view/img/carousel/${e}.png`);return console.log(t),(e,l)=>{const s=Ya,i=qa,r=za,_=ge,m=Se("router-link");return f(),b("div",dn,[n(r,{interval:4e3,type:"card",height:"600px"},{default:c(()=>[(f(!0),b(k,null,B(u(t),p=>(f(),R(i,{key:p},{default:c(()=>[n(s,{fit:"cover",src:p,style:{width:"628px",height:"540px"}},null,8,["src"])]),_:2},1024))),128))]),_:1}),E("div",cn,[l[3]||(l[3]=E("div",{class:"text-4xl text-orange-200"},"欢迎来到保卫羊村小工具！",-1)),E("div",null,[n(m,{to:{name:"notice"}},{default:c(()=>[n(_,{type:"primary",size:"large",style:{width:"120px"}},{default:c(()=>l[0]||(l[0]=[S("🚀公告")])),_:1})]),_:1})]),E("div",null,[n(m,{to:{name:"section"}},{default:c(()=>[n(_,{type:"primary",size:"large",style:{width:"120px"}},{default:c(()=>l[1]||(l[1]=[S("🧰小工具")])),_:1})]),_:1})]),E("div",null,[n(m,{to:{name:"wiki"}},{default:c(()=>[n(_,{type:"primary",size:"large",style:{width:"120px"}},{default:c(()=>l[2]||(l[2]=[S("🌟百科")])),_:1})]),_:1})])])])}}}),mn=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"})),pn={};function hn(o,t){const e=_t;return f(),R(e)}const gn=Ie(pn,[["render",hn]]),fn=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"})),An=P({__name:"wiki",setup(o){const t=wl();return(e,l)=>{const s=Ct;return f(),R(s,null,{default:c(()=>[(f(),R(Pt(u(xs)),{"color-theme":u(t)?"dark":"light"},null,8,["color-theme"]))]),_:1})}}}),En=Object.freeze(Object.defineProperty({__proto__:null,default:An},Symbol.toStringTag,{value:"Module"})),qe=_e({visible:!1,data:"",resolve:void 0,reject:void 0}),Bl={open:()=>(qe.data="",qe.visible=!0,new Promise((o,t)=>{qe.resolve=o,qe.reject=t})),close:()=>{qe.visible=!1}},ra=()=>({state:qe,open:Bl.open,close:Bl.close}),Je=_e({visible:!1,data:null}),Hl={open:o=>(Je.data=o,Je.visible=!0,new Promise((t,e)=>{Je.resolve=t,Je.reject=e})),close:()=>{Je.visible=!1}},Ol=()=>({state:Je,open:Hl.open,close:Hl.close}),In={class:"dialog-footer"},vn=P({__name:"DialogExport",setup(o){const{toClipboard:t}=sa(),{state:e,close:l}=Ol(),s=j(),i=()=>{t(JSON.stringify(e.data),s.value.$el),he.success("已复制到剪贴板")},r=()=>{var _;(_=e.resolve)==null||_.call(e,e.data),e.data=null};return(_,m)=>{const p=ge,d=Dl;return f(),R(d,{modelValue:u(e).visible,"onUpdate:modelValue":m[0]||(m[0]=h=>u(e).visible=h),title:"导出数据",onClose:r},{footer:c(()=>[E("span",In,[n(p,{ref_key:"someRef",ref:s,onClick:i},{default:c(()=>m[1]||(m[1]=[S("复制到剪贴板")])),_:1},512),n(p,{type:"primary",onClick:u(l)},{default:c(()=>m[2]||(m[2]=[S(" 确定 ")])),_:1},8,["onClick"])])]),default:c(()=>[n(u(rs),{data:u(e).data,virtual:"",deep:2},null,8,["data"])]),_:1},8,["modelValue"])}}}),Tn=Ie(vn,[["__scopeId","data-v-37a7020e"]]),Ln={class:"dialog-footer"},Dn=P({__name:"DialogImport",setup(o){const{state:t,close:e}=ra(),l=()=>{var i;try{const r=JSON.parse(t.data);(i=t.resolve)==null||i.call(t,r),e()}catch{he.error("JSON格式不合法！")}},s=()=>{};return(i,r)=>{const _=Rt,m=ge,p=Dl;return f(),R(p,{modelValue:u(t).visible,"onUpdate:modelValue":r[1]||(r[1]=d=>u(t).visible=d),title:"导入数据",onClose:s},{footer:c(()=>[E("span",Ln,[n(m,{onClick:u(e)},{default:c(()=>r[2]||(r[2]=[S("取消")])),_:1},8,["onClick"]),n(m,{type:"primary",onClick:l},{default:c(()=>r[3]||(r[3]=[S(" 确定 ")])),_:1})])]),default:c(()=>[n(_,{modelValue:u(t).data,"onUpdate:modelValue":r[0]||(r[0]=d=>u(t).data=d),type:"textarea",rows:10,spellcheck:!1},null,8,["modelValue"])]),_:1},8,["modelValue"])}}}),xn=Ie(Dn,[["__scopeId","data-v-3fea53a5"]]),bn={class:"content sm:mx-8"},Sn=P({__name:"index",setup(o){const t=ea(),e=Nl(),l=j("");Jl(()=>{l.value=e.name});const s=i=>{t.push({name:i.paneName})};return(i,r)=>{const _=yt,m=_t,p=Se("router-view");return f(),b(k,null,[E("div",null,[n(m,{modelValue:u(l),"onUpdate:modelValue":r[0]||(r[0]=d=>te(l)?l.value=d:null),type:"card",onTabClick:s},{default:c(()=>[(f(!0),b(k,null,B(u(jt),d=>(f(),R(_,{key:d,label:i.$t(`section.${d.replaceAll("-","_")}`),name:d},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),E("div",bn,[n(p,null,{default:c(({Component:d})=>[(f(),R(xl,null,[(f(),R(Pt(d)))],1024))]),_:1})])]),n(Tn),n(xn)],64)}}}),Nn=Object.freeze(Object.defineProperty({__proto__:null,default:Sn},Symbol.toStringTag,{value:"Module"})),At=o=>ht(o,t=>{const e=t.name;return e.includes("^")?e.substring(e.indexOf("^")+1):e}),Xt=Object.assign({},At(w.$_map_Obj),At(w.$_wolfAtt_Obj),At(w.$_towerAtt_Obj),...Object.values(w.$_global_properties).map(o=>At(o)));console.log("dict",Xt);function ue(o){return typeof o=="string"?Xt[o]:o.map(t=>Xt[t])}const wn={key:0},Cn={key:0},Rn={class:"ml-4"},yn={key:1},On={key:1},Kn={key:0},Pn={key:1},kn={class:"ml-4"},Vn=P({__name:"index",setup(o){const t=fe(Object.values(w.$_global_properties.card).filter(e=>e.id.startsWith("baoxiang")),e=>Math.abs(e.index));return(e,l)=>{const s=Ue,i=Fe,r=Me;return f(),b("div",null,[n(r,{data:u(t),style:{"font-size":"small"}},{default:c(()=>[n(s,{label:"id",prop:"id",width:120}),n(s,{label:"name",prop:"name",width:160}),n(s,{label:"open_num",prop:"open_num",width:100}),n(s,{label:"info",prop:"info",width:400}),n(s,{label:"data"},{default:c(_=>[_.row.default_gift?(f(),b("ul",wn,[(f(!0),b(k,null,B(_.row.default_gift,(m,p)=>(f(),b(k,{key:p},[String(p)=="properties"?(f(),b("li",Cn,[n(i,{type:"warning"},{default:c(()=>[S(x(p),1)]),_:2},1024),E("ul",Rn,[(f(!0),b(k,null,B(m,(d,h)=>(f(),b("li",{key:h},[n(i,null,{default:c(()=>[S(x(h),1)]),_:2},1024),(f(!0),b(k,null,B(d,(T,A)=>(f(),R(i,{key:A,type:"info",title:A},{default:c(()=>[S(x(u(ue)(String(A)))+": "+x(T),1)]),_:2},1032,["title"]))),128))]))),128))])])):(f(),b("li",yn,[n(i,{type:"warning"},{default:c(()=>[S(x(p),1)]),_:2},1024),n(i,{type:"info"},{default:c(()=>[S(x(m),1)]),_:2},1024)]))],64))),128))])):ne("",!0),_.row.data?(f(),b("ul",On,[(f(!0),b(k,null,B(_.row.data,m=>(f(),b(k,{key:m[0]},[m[1]=="invite_score"?(f(),b("li",Kn,[n(i,{type:"success"},{default:c(()=>[S(x(m[0]),1)]),_:2},1024),n(i,{type:"warning"},{default:c(()=>[S(x(m[1]),1)]),_:2},1024),n(i,null,{default:c(()=>[S(x(m[2]),1)]),_:2},1024)])):ne("",!0),m[1]=="properties"?(f(),b("li",Pn,[n(i,{type:"success"},{default:c(()=>[S(x(m[0]),1)]),_:2},1024),n(i,{type:"warning"},{default:c(()=>[S(x(m[1]),1)]),_:2},1024),E("ul",kn,[(f(!0),b(k,null,B(m[2],p=>(f(),b("li",{key:p[0]},[n(i,{type:"success"},{default:c(()=>[S(x(p[0]),1)]),_:2},1024),n(i,{type:"warning"},{default:c(()=>[S(x(p[1]),1)]),_:2},1024),n(i,null,{default:c(()=>[(f(!0),b(k,null,B(p[2],d=>(f(),R(i,{key:d,title:d,type:"info"},{default:c(()=>[S(x(u(ue)(d)),1)]),_:2},1032,["title"]))),128))]),_:2},1024)]))),128))])])):ne("",!0)],64))),128))])):ne("",!0)]),_:1})]),_:1},8,["data"])])}}}),Mn=Object.freeze(Object.defineProperty({__proto__:null,default:Vn},Symbol.toStringTag,{value:"Module"})),Un=P({__name:"BulletTable",setup(o){const t=ut(w.$_bulletAtt_Obj,(e,l)=>Cl(e,{id:l}));return(e,l)=>{const s=Ue,i=Me;return f(),R(i,{data:u(t),"default-sort":{prop:"id",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},style:{width:"100%","font-size":"80%"}},{default:c(()=>[n(s,{prop:"id",label:"id",sortable:"",align:"center",fixed:"",width:"80"}),n(s,{prop:"shapeMode",label:"shapeMode",sortable:"",align:"center"}),n(s,{prop:"damageMode",label:"damageMode",sortable:"",align:"center"}),n(s,{prop:"radii",label:"radii",sortable:"",align:"center"}),n(s,{prop:"fallAcc",label:"fallAccSpeed",sortable:"",align:"center"}),n(s,{prop:"shadow",label:"shadow",sortable:"",align:"center"}),n(s,{prop:"effect",label:"hitEffectId",sortable:"",align:"center"}),n(s,{prop:"path",label:"floorPathId",sortable:"",align:"center"})]),_:1},8,["data"])}}}),Fn=P({__name:"index",setup(o){return(t,e)=>(f(),b("div",null,[n(Un)]))}}),$n=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"})),Bt=o=>{const t=ea(),e=Nl(),l=e.query,s=_e(ht(o,(i,r)=>r in l?typeof i=="number"?Number(l[r]):typeof i=="boolean"?l[r]==="true":l[r]:i));return Ae(s,()=>t.replace({path:e.path,query:gs(s,(i,r)=>i!=o[r])})),s},Ze=class Ze{static getLanguageStr(t,...e){let l=null,s=null,i=null;if(w.$_global_language_str!=null&&(w.$_global_language_str.getElementsByTagName("id"+t)[0]!=null?w.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str")=="CHILD2010"?i=w.$_global_language_str.getElementsByTagName("id"+t)[0].children().toString():i=w.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str"):i=null),!(i!=null&&i.length))return"";let r=i.search("%%");for(;r!=-1;)s=i.slice(r,r+6),i=i.replace(s,Ze.getLanguageStr(parseInt(s.slice(2)))),r=i.search("%%");for(let _=0;_<e.length;_++)l="%"+_,i=i==null?void 0:i.replaceAll(l,e[_]);return i}static getDataProfileTxt(t){let e=null,l=!1,s=null,i=null,r=null,_=t;return t&&(e=String(t),l=e.indexOf(Ze.INTER_CONFIG_SPLIT_CHAR)>-1,s=null,i="",r="",l?(s=e.split(Ze.INTER_CONFIG_SPLIT_CHAR),i=s[0],r=s[1],w.$_global_dataProfile_txt!=null?(w.$_global_dataProfile_txt.getElementsByTagName(i)[0]!=null?_=w.$_global_dataProfile_txt.getElementsByTagName(i)[0].getAttribute("s").toString():_=r,_=_.replace(/\\n/g,`
`)):_=r):_=e,s=null,e="",i="",r=""),_}};a(Ze,"INTER_CONFIG_SPLIT_CHAR","^");let g=Ze;const le=class le{constructor(t){a(this,"typeId");a(this,"kindId");a(this,"id");a(this,"name");a(this,"info");a(this,"help");a(this,"rawName");this.typeId=t[le.DATA_TYPE_ID],this.kindId=t[le.DATA_KIND_ID],this.id=t[le.DATA_ID],this.rawName=t[le.DATA_NAME],this.name=g.getDataProfileTxt(t[le.DATA_NAME]),this.info=g.getDataProfileTxt(t[le.DATA_INFO]),this.help=t[le.DATA_HELP]?g.getDataProfileTxt(t[le.DATA_HELP]):""}};a(le,"DATA_TYPE_ID","typeId"),a(le,"DATA_KIND_ID","kindId"),a(le,"DATA_ID","id"),a(le,"DATA_NAME","name"),a(le,"DATA_INFO","info"),a(le,"DATA_HELP","help");let de=le;const z=class z extends de{constructor(e){super(e);a(this,"res");a(this,"resColor");e[z.DATA_RESOURCE_CLASS]==null?this.res=e[de.DATA_ID]:this.res=e[z.DATA_RESOURCE_CLASS],this.resColor=e[z.DATA_RESOURCE_COLOR_CLASS]}};a(z,"TYPE_MONSTER","wolf"),a(z,"TYPE_TOWER","tower"),a(z,"TYPE_WALL","wall"),a(z,"TYPE_BARRIER","barrier"),a(z,"TYPE_ENTRANCE","typeEntrance"),a(z,"TYPE_EXPORT","typeExport"),a(z,"TYPE_BOX","box"),a(z,"TYPE_GEM_ITEM","gem"),a(z,"TYPE_TRAP_ITEM","snarp"),a(z,"TYPE_CARD_ITEM","card"),a(z,"TYPE_WOLF_CARD_ITEM","wc"),a(z,"TYPE_TAME_ITEM","tame"),a(z,"TYPE_FIX_ITEM","bomb"),a(z,"ID_SPADE_ITEM","mc"),a(z,"ID_GEM_HAMMER","gem_hammer"),a(z,"ID_GEM_OPENER","gem_opener"),a(z,"DATA_RESOURCE_CLASS","res"),a(z,"DATA_RESOURCE_COLOR_CLASS","resColor");let xe=z;class Ye{constructor(){a(this,"m_manager",{});this.clearData()}getDataById(t){return this.m_manager[t]}get manager(){return this.m_manager}clearData(){this.m_manager=new Object}}const $=class $ extends xe{constructor(e){super(e);a(this,"scoreMax");a(this,"populationMax");a(this,"hardA");a(this,"hardB");a(this,"passBy");a(this,"unkennelDelay");a(this,"unkennelRule");a(this,"bossList");a(this,"monsterList");a(this,"monsterProportion");a(this,"teleportRule");a(this,"randomBossList");this.scoreMax=e[$.DATA_SCORE_MAX]?e[$.DATA_SCORE_MAX]:$.DEFAULT_SCORE_MAX,this.populationMax=e[$.DATA_POPULATION_MAX]?e[$.DATA_POPULATION_MAX]:$.DEFAULT_POPULATION_MAX,this.hardA=e[$.DATA_HARD_A],this.hardB=e[$.DATA_HARD_B],this.passBy=e[$.DATA_PASS_BY],this.unkennelDelay=e[$.DATA_UNKENNEL_RATE],this.unkennelRule=e[$.DATA_UNKENNEL_RULE],this.bossList=e[$.DATA_BOSS_LIST],this.monsterList=e[$.DATA_MONSTER_LIST]?e[$.DATA_MONSTER_LIST].map(l=>l[1]):[],this.monsterProportion=e[$.DATA_MONSTER_LIST],this.teleportRule=e[$.DATA_TELEPORT_RULE],this.randomBossList=e.random_boss??[]}getDifficultyLevel(e){return Math.sqrt(this.hardA+this.hardB*e)}calcPKGold(e){const l=this.populationMax;return Math.round((2+1.07*l)*Math.pow(e/.39,2/3))}calcPKExp(e){const l=this.populationMax;return Math.round((3.5+.14*l)*Math.pow(e/.39,2/3))}calcAccumulative(e=this.scoreMax){let l=0,s=0;for(let i=0;i<e;i++){const r=this.getDifficultyLevel(i);l+=this.calcPKGold(r),s+=this.calcPKExp(r)}return l=Math.floor(l/2),s=Math.floor(s/2),{gold:l,exp:s}}};a($,"DEFAULT_SCORE_MAX",100),a($,"DEFAULT_POPULATION_MAX",10),a($,"RULE_MULTICAST",1),a($,"DATA_SCORE_MAX","pass_score"),a($,"DATA_POPULATION_MAX","pop_max"),a($,"DATA_HARD_A","yield_val"),a($,"DATA_HARD_B","hard_ness"),a($,"DATA_PASS_BY","passBy"),a($,"DATA_UNKENNEL_RATE","interval"),a($,"DATA_UNKENNEL_RULE","interval_rule"),a($,"DATA_BOSS_LIST","boss"),a($,"DATA_MONSTER_LIST","wolf_proportion"),a($,"DATA_TELEPORT_RULE","teleport_rule"),a($,"DATA_DEBUG","debug");let rt=$;const Te=class Te extends Ye{constructor(){super(),Te.onlyExample=this,this.loadData(w.$_map_Obj)}static getOnlyExample(){return Te.onlyExample==null&&(Te.onlyExample=new Te),Te.onlyExample}loadData(t){for(const e in t){const l=t[e];l[de.DATA_ID]=e,this.m_manager[e]=new rt(t[e])}}getData(t){return this.getDataById(t)}};a(Te,"DATA_COUNT",6),a(Te,"onlyExample");let vt=Te;class gt{constructor(){a(this,"m_data");this.m_data=new de({})}get baseData(){return this.m_data}}class Bn extends gt{constructor(){super()}}class q extends gt{constructor(e){super();a(this,"score",0);a(this,"isDream",!1);a(this,"isDefendMap",!1);this.m_data=vt.getOnlyExample().getData(e)}static getMapData(e){return vt.getOnlyExample().getData(e)}get gameMapData(){return this.m_data}get canUnkennelAdjust(){return!1}}a(q,"DEFEND_MAP_1","mfx1"),a(q,"ENDLESS_MAP_1","m11"),a(q,"currentMap");const He=class He extends de{constructor(e){super(e);a(this,"skillsList");e[He.DATA_SKILLS_LIST]instanceof Array?this.skillsList=e[He.DATA_SKILLS_LIST]:e[He.DATA_SKILLS_LIST]instanceof String&&(this.skillsList=[e[He.DATA_SKILLS_LIST]])}};a(He,"DATA_SKILLS_LIST","skills");let zt=He;const we=class we extends Ye{constructor(){super(),we.onlyExample=this,this.loadData(w.$_skillPackage_Obj)}static getOnlyExample(){return we.onlyExample==null&&(we.onlyExample=new we),we.onlyExample}loadData(t){for(const e in t){const l=t[e];l[de.DATA_ID]=e,this.m_manager[e]=new zt(t[e])}}getData(t){return this.getDataById(t)}};a(we,"onlyExample");let Yt=we;class ua extends gt{constructor(e,l=1){super();a(this,"level");this.m_data=Yt.getOnlyExample().getData(e),this.level=l}get skillsPackageData(){return this.m_data}}class da{}a(da,"COLOR_LIST",[6316128,13631488,13668352,43520,28927,8913056,0]);const ee=class ee extends xe{constructor(e){super(e);a(this,"m_price");a(this,"priceCoin",0);a(this,"priceGold",0);a(this,"priceScore",0);a(this,"unlockMapId","");a(this,"index",0);this.m_price=e[ee.DATA_PRICE],this.initPrice(),this.unlockMapId=e[ee.DATA_UNLOCK_MAP_ID],this.index=e[ee.DATA_INDEX]}get price(){return this.m_price}initPrice(){const e=this.price;if(e)if(e instanceof Array){const l=e;l[0]==ee.DATA_COIN?this.priceCoin=l[1]:l[0]==ee.DATA_GOLD?this.priceGold=l[1]:l[0]==ee.DATA_SCORE&&(this.priceScore=l[1])}else this.priceCoin=e[ee.DATA_COIN],this.priceGold=e[ee.DATA_GOLD],this.priceScore=e[ee.DATA_SCORE]}get isRare(){if(this.priceCoin>0){if(this.priceCoin>=w.$_rare_item_coin||this.index<0)return!0}else if(this.priceScore>0&&(this.priceScore>=w.$_rare_item_invite_score||this.index<0))return!0;return!1}};a(ee,"DATA_PRICE","price"),a(ee,"DATA_UNLOCK_MAP_ID","unlock_mid"),a(ee,"DATA_COIN","coin"),a(ee,"DATA_GOLD","gold"),a(ee,"DATA_SCORE","invite_score"),a(ee,"DATA_INDEX","index");let Tt=ee;const ae=class ae extends Tt{constructor(e){super(e);a(this,"gemLevel");a(this,"towerSkillPackage");a(this,"nextLevelId");a(this,"colorIndex");this.typeId=xe.TYPE_GEM_ITEM,this.gemLevel=e[ae.DATA_GEM_LEVEL],this.towerSkillPackage=e[ae.DATA_TOWER_SKILL_PACKAGE],this.nextLevelId=e[ae.DATA_NEXT_LEVEL_ID],this.colorIndex=e[ae.DATA_COLOR_INDEX],this.res=this.resString}getSkillPackage(e){if(this.towerSkillPackage==null)return null;const l=/\D/gi;e=e.match(l).join("");const s=this.towerSkillPackage[e];return s==null?null:new ua(s[ae.SKILL_PACKAGE_ID],s[ae.SKILL_PACKAGE_LEVEL])}get color(){return da.COLOR_LIST[this.colorIndex]}get resString(){return"hong"+this.gemLevel}};a(ae,"TYPE_PURE","typePure"),a(ae,"TYPE_MIX","typeMix"),a(ae,"DATA_GEM_LEVEL","gamLevel"),a(ae,"DATA_TOWER_SKILL_PACKAGE","sp"),a(ae,"DATA_NEXT_LEVEL_ID","nextId"),a(ae,"DATA_COLOR_INDEX","color"),a(ae,"SKILL_PACKAGE_ID","id"),a(ae,"SKILL_PACKAGE_LEVEL","lv");let qt=ae;const Ce=class Ce extends Ye{constructor(){super(),Ce.onlyExample=this,this.loadData(w.$_global_properties[xe.TYPE_GEM_ITEM])}static getOnlyExample(){return Ce.onlyExample==null&&(Ce.onlyExample=new Ce),Ce.onlyExample}loadData(t){let e;for(e in t)this.m_manager[e]=new qt(t[e])}initData(){}getData(t){return this.getDataById(t)}};a(Ce,"onlyExample");let Jt=Ce;const Y=class Y extends Tt{constructor(e){super(e);a(this,"skillPackageId");a(this,"skillPackageLevel");a(this,"skills");a(this,"xGrid");a(this,"yGrid");if(this.skillPackageId=e[Y.DATA_SKILL_PACKAGE_ID],this.skillPackageLevel=e[Y.DATA_SKILL_PACKAGE_LEVEL],e[Y.DATA_SKILLS]instanceof Array)this.skills=e[Y.DATA_SKILLS];else if(e[Y.DATA_SKILLS]instanceof Object){this.skills=[];for(const l in e[Y.DATA_SKILLS])this.skills.push({skid:l,lev:e[Y.DATA_SKILLS][l]})}e[Y.DATA_X_GRID]?this.xGrid=e[Y.DATA_X_GRID]:this.xGrid=1,e[Y.DATA_Y_GRID]?this.yGrid=e[Y.DATA_Y_GRID]:this.yGrid=1}};a(Y,"DATA_A","a"),a(Y,"DATA_B","b"),a(Y,"DATA_C","c"),a(Y,"DATA_D","d"),a(Y,"DATA_SKILL_PACKAGE_ID","skill"),a(Y,"DATA_SKILL_PACKAGE_LEVEL","skillLv"),a(Y,"DATA_SKILLS","skills"),a(Y,"DATA_X_GRID","x_grid"),a(Y,"DATA_Y_GRID","y_grid");let J=Y;const X=class X extends J{constructor(e){super(e);a(this,"m_buildValueA",0);a(this,"m_buildValueB",0);a(this,"m_buildValueC",0);a(this,"m_campPrice",["",0]);a(this,"m_campBuildValueA",0);a(this,"m_campBuildValueB",0);a(this,"m_campBuildValueC",0);a(this,"range");a(this,"rate");a(this,"limitNum");e[X.DATA_BUILD_VALUE]?(this.m_buildValueA=e[X.DATA_BUILD_VALUE][J.DATA_A],this.m_buildValueB=e[X.DATA_BUILD_VALUE][J.DATA_B],this.m_buildValueC=e[X.DATA_BUILD_VALUE][J.DATA_C]):e[X.DATA_EXP_VALUE]&&(this.m_buildValueA=e[X.DATA_EXP_VALUE][J.DATA_A],this.m_buildValueB=e[X.DATA_EXP_VALUE][J.DATA_B],this.m_buildValueC=e[X.DATA_EXP_VALUE][J.DATA_C]),e[X.DATA_CAMP_PRICE]&&(this.m_campPrice=e[X.DATA_CAMP_PRICE]),e[X.DATA_CAMP_BUILD_VALUE]&&(this.m_campBuildValueA=e[X.DATA_CAMP_BUILD_VALUE][J.DATA_A],this.m_campBuildValueB=e[X.DATA_CAMP_BUILD_VALUE][J.DATA_B],this.m_campBuildValueC=e[X.DATA_CAMP_BUILD_VALUE][J.DATA_C]),this.range=e[X.DATA_RANGE],this.rate=Math.round(e[X.DATA_RATE]*10),this.limitNum=e[X.DATA_LIMIT_NUM]}get buildValueA(){return q.currentMap&&q.currentMap.isDefendMap?this.m_campBuildValueA:this.m_buildValueA}get buildValueB(){return q.currentMap&&q.currentMap.isDefendMap?this.m_campBuildValueB:this.m_buildValueB}get buildValueC(){return q.currentMap&&q.currentMap.isDefendMap?this.m_campBuildValueC:this.m_buildValueC}get price(){var e;return(e=q.currentMap)!=null&&e.isDefendMap&&this.campPrice instanceof Array?this.campPrice:this.m_price}get campPrice(){return this.m_campPrice}get buildCostPrice(){return this.price[0]}get buildCost(){return this.price[1]}get buildValueAConst(){return this.m_buildValueA}get buildValueBConst(){return this.m_buildValueB}get buildValueCConst(){return this.m_buildValueC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}};a(X,"DATA_BUILD_VALUE","build_val"),a(X,"DATA_EXP_VALUE","exp_val"),a(X,"DATA_CAMP_PRICE","camp_price"),a(X,"DATA_CAMP_BUILD_VALUE","camp_build_val"),a(X,"DATA_RANGE","range"),a(X,"DATA_RATE","rate"),a(X,"DATA_LIMIT_NUM","limit_num");let Lt=X;const U=class U extends Lt{constructor(e){super(e);a(this,"valueList");a(this,"effectType");a(this,"effectKind");a(this,"effectRange");a(this,"useNum");a(this,"colddown");a(this,"delay");a(this,"attackEffectId");this.typeId=xe.TYPE_TRAP_ITEM,this.valueList=e[U.DATA_VALUE_LIST],this.effectType=e[U.DATA_EFFECT_TYPE],this.effectKind=e[U.DATA_EFFECT_KIND],e[U.DATA_USE_NUM]?this.useNum=e[U.DATA_USE_NUM]:this.useNum=1,e[U.DATA_COLDDOWN]?this.colddown=e[U.DATA_COLDDOWN]:this.colddown=.1,e[U.DATA_DELAY]?this.delay=e[U.DATA_DELAY]:this.delay=0,e[U.DATA_EFFECT_RANGE]?this.effectRange=e[U.DATA_EFFECT_RANGE]:this.effectRange=this.range,this.attackEffectId=e[U.DATA_EFFECT]}};a(U,"KIND_BLAST","1"),a(U,"KIND_DAMAGE","2"),a(U,"KIND_VERTIGO","3"),a(U,"KIND_SLOW","4"),a(U,"KIND_BEAT_BACK","5"),a(U,"KIND_COLD_BULLET","50"),a(U,"KIND_BULLET","100"),a(U,"KIND_BULLET_RANDOM","101"),a(U,"EFFECT_TYPE_FLOOR","1"),a(U,"EFFECT_TYPE_AIR","2"),a(U,"EFFECT_TYPE_ALL","3"),a(U,"EFFECT_TYPE_LIGHTNING","4"),a(U,"EFFECT_KIND_SINGLE","1"),a(U,"EFFECT_KIND_MULTI","2"),a(U,"DATA_VALUE_LIST","value"),a(U,"DATA_EFFECT_TYPE","effectType"),a(U,"DATA_EFFECT_KIND","effectKind"),a(U,"DATA_EFFECT_RANGE","effectRange"),a(U,"DATA_USE_NUM","use_times"),a(U,"DATA_COLDDOWN","colddown"),a(U,"DATA_DELAY","delay"),a(U,"DATA_EFFECT","effect");let Zt=U;class Kl extends Lt{constructor(e){super(e);a(this,"m_buildCostA");a(this,"m_buildCostB");a(this,"m_buildCostC");a(this,"m_campBuildCostA");a(this,"m_campBuildCostB");a(this,"m_campBuildCostC");a(this,"damageA");a(this,"damageB");a(this,"damageC");a(this,"bulletId","");a(this,"buffEffect");a(this,"levelMax");this.m_buildCostA=e.build_cost.a,this.m_buildCostB=e.build_cost.b,this.m_buildCostC=e.build_cost.c,this.m_campBuildCostA=e.camp_build_cost.a,this.m_campBuildCostB=e.camp_build_cost.b,this.m_campBuildCostC=e.camp_build_cost.c,this.damageA=e.damage.a,this.damageB=e.damage.b,this.damageC=e.damage.c,this.buffEffect=e.buffEffect,this.levelMax=e.lev_max,this.bulletId=e.bId}get buildCostA(){var e;return(e=q.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostA:this.m_buildCostA}get buildCostB(){var e;return(e=q.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostB:this.m_buildCostB}get buildCostC(){var e;return(e=q.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostC:this.m_buildCostC}get buildCostAConst(){return this.m_buildCostA}get buildCostBConst(){return this.m_buildCostB}get buildCostCConst(){return this.m_buildCostC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}get isMagicTower(){return this.id=="xiangqianta"}}const Re=class Re extends Ye{constructor(){super(),Re.onlyExample=this,this.loadData(w.$_towerAtt_Obj)}static getOnlyExample(){return Re.onlyExample==null&&(Re.onlyExample=new Re),Re.onlyExample}loadData(t){for(const e in t){const l=t[e];l[de.DATA_ID]=e,this.m_manager[e]=new Kl(t[e])}}getData(t){return this.getDataById(t)}};a(Re,"onlyExample");let Qt=Re;const W=class W extends J{constructor(e){super(e);a(this,"shapeMode");a(this,"damageMode");a(this,"radii");a(this,"shadow");a(this,"fallAccSpeed");a(this,"floorPathId");a(this,"hitEffectId");this.shapeMode=e[W.DATA_SHAPE_MODE],this.damageMode=e[W.DATA_DAMAGE_MODE],this.radii=e[W.DATA_RADII],e[W.DATA_SHADOW]?this.shadow=e[W.DATA_SHADOW]:this.shadow=1,this.fallAccSpeed=e[W.DATA_FALL_ACC_SPEED],this.floorPathId=e[W.DATA_FLOOR_PATH_ID],this.hitEffectId=e[W.DATA_HIT_EFFECT_ID]}};a(W,"SHAPE_COMMON",0),a(W,"SHAPE_DIRECTION",1),a(W,"SHAPE_ROLL",2),a(W,"DAMAGE_NULL",0),a(W,"DAMAGE_COMMON",1),a(W,"DAMAGE_PERFORATIVE",2),a(W,"DAMAGE_MAGICAL",3),a(W,"DAMAGE_SIEGE",4),a(W,"DAMAGE_MIXED",5),a(W,"FALL_ACC_SPEED_THRESHOLD",-7),a(W,"DATA_SHAPE_MODE","shapeMode"),a(W,"DATA_DAMAGE_MODE","damageMode"),a(W,"DATA_RADII","radii"),a(W,"DATA_SHADOW","shadow"),a(W,"DATA_FALL_ACC_SPEED","fallAcc"),a(W,"DATA_FLOOR_PATH_ID","path"),a(W,"DATA_HIT_EFFECT_ID","effect");let el=W;const ye=class ye extends Ye{constructor(){super(),ye.onlyExample=this,this.loadData(w.$_bulletAtt_Obj)}static getOnlyExample(){return ye.onlyExample==null&&(ye.onlyExample=new ye),ye.onlyExample}loadData(t){for(const e in t){const l=t[e];l[de.DATA_ID]=e,this.m_manager[e]=new el(t[e])}}getData(t){return this.getDataById(t)}};a(ye,"onlyExample");let tl=ye;const y=class y extends J{constructor(e){super(e);a(this,"hpMaxA");a(this,"hpMaxB");a(this,"hpMaxC");a(this,"expMaxA",0);a(this,"expMaxB",0);a(this,"expMaxC",0);a(this,"expMaxD",0);a(this,"speedBase");a(this,"charm");a(this,"height");a(this,"width");a(this,"speakList",[]);a(this,"population");e[y.DATA_HP_MAX]?(this.hpMaxA=e[y.DATA_HP_MAX][J.DATA_A],this.hpMaxB=e[y.DATA_HP_MAX][J.DATA_B],this.hpMaxC=e[y.DATA_HP_MAX][J.DATA_C]):(this.hpMaxA=e[y.DATA_HP_MAX_A],this.hpMaxB=e[y.DATA_HP_MAX_B],this.hpMaxC=e[y.DATA_HP_MAX_C]),e[y.DATA_EXP_MAX]&&(this.expMaxA=e[y.DATA_EXP_MAX][J.DATA_A],this.expMaxB=e[y.DATA_EXP_MAX][J.DATA_B],this.expMaxC=e[y.DATA_EXP_MAX][J.DATA_C],this.expMaxD=e[y.DATA_EXP_MAX][J.DATA_D]),this.speedBase=e[y.DATA_SPEED_BASE],this.charm=e[y.DATA_CHARM],this.height=e[y.DATA_HEIGHT],this.width=e[y.DATA_WIDTH],e[y.DATA_SPEAK_LIST]instanceof Array&&(this.speakList=e[y.DATA_SPEAK_LIST]),this.population=e[y.DATA_POPULATION]}getSpeak(e=0){if(this.speakList instanceof Array&&this.speakList.length>e){if(this.speakList[e]instanceof String)return this.speakList[e];if(this.speakList[e]instanceof Array){const l=this.speakList[e];return l[Math.floor(Math.random()*l.length)]}}return""}getSpeakEnter(){return this.getSpeak(y.SPEAK_ENTER)}getSpeakIdle(){return this.getSpeak(y.SPEAK_IDLE)}getSpeakInjury(){return this.getSpeak(y.SPEAK_INJURY)}getSpeakDie(){return this.getSpeak(y.SPEAK_DIE)}getSpeakInvade(){return this.getSpeak(y.SPEAK_INVADE)}getSpeakCast(){return this.getSpeak(y.SPEAK_CAST)}get isBoss(){return this.population>=100}get isRandomBoss(){return this.population==99}getHpMax(e,l=1){return Math.floor((this.hpMaxA+e*(this.hpMaxB+e*this.hpMaxC))*l)}};a(y,"SPEAK_ENTER",0),a(y,"SPEAK_IDLE",1),a(y,"SPEAK_INJURY",2),a(y,"SPEAK_DIE",3),a(y,"SPEAK_INVADE",4),a(y,"SPEAK_CAST",5),a(y,"DEFENSE_NULL",0),a(y,"DEFENSE_LIGHT",1),a(y,"DEFENSE_COMMON",2),a(y,"DEFENSE_HEAVY",3),a(y,"DEFENSE_BUILDING",4),a(y,"DEFENSE_BOSS",5),a(y,"DEFENSE_HOLY",6),a(y,"DEFENSE_INVINCIBLE",7),a(y,"DATA_HP_MAX","hp_factor"),a(y,"DATA_EXP_MAX","explev"),a(y,"DATA_HP_MAX_A","ha"),a(y,"DATA_HP_MAX_B","hb"),a(y,"DATA_HP_MAX_C","hc"),a(y,"DATA_SPEED_BASE","speed"),a(y,"DATA_CHARM","charm"),a(y,"DATA_HEIGHT","height"),a(y,"DATA_WIDTH","width"),a(y,"DATA_SPEAK_LIST","speak"),a(y,"DATA_POPULATION","pop");let Dt=y;const Oe=class Oe extends Ye{constructor(){super(),Oe.onlyExample=this,this.loadData(w.$_wolfAtt_Obj)}static getOnlyExample(){return Oe.onlyExample==null&&(Oe.onlyExample=new Oe),Oe.onlyExample}loadData(t){for(const e in t){const l=t[e];l[de.DATA_ID]=e,this.m_manager[e]=new Dt(l)}}getBossList(t){const e=[];if(!(t instanceof Array))return e;for(let l=0;l<t.length;l++){const s=this.getData(t[l]);s&&s.isBoss&&e.push(t[l])}return e}getRandomBossList(t){const e=[];if(!(t instanceof Array))return e;for(let l=0;l<t.length;l++){const s=this.getData(t[l]);s&&s.isRandomBoss&&e.push(t[l])}return e}getData(t){return this.getDataById(t)}static get(t){return this.getOnlyExample().getData(t)}};a(Oe,"onlyExample");let ce=Oe;function ca(o,t){const e=w.$_wolfAtt_Obj[o].pop;return e<99?e:t??e}function Hn(o,t=1){return Xe(o,e=>ca(e,t))}function Gl(o,t){return Math.round((2+1.07*t)*Math.pow(o/.39,2/3))}function Gn(o,t){const e=w.dream_data.dm_opt_cfg.tower_sum_exp;return Math.round(t*Math.pow(o,e.power)*e.popu+e.p)}function jn(o,t){const e=o.monsterProportion.map(_=>({prop:_[0],data:ce.get(_[1])}));let l=e.length;if(l==0)return{mlist:[],clist:[]};const s=t.slice(0,l),i=s.flatMap((_,m)=>new Array(_).fill(e[m].data));let r=o.populationMax-Xe(i,_=>_.population);if(r<0)return null;for(;r>0;){for(;l>0&&r<e[l-1].data.population;)l--;if(l==0)break;const _=Math.random()*e[l-1].prop,m=fs(e,p=>_<p.prop);r-=e[m].data.population,i.push(e[m].data),s[m]++}return{mlist:la(i),clist:kt(e,s).map(_=>({data:_[0].data,num:_[1]}))}}function _a(o){if(o.length==0)return[];const t=o.map(l=>l*1e3),e=ys(...t);for(let l=t.length-1;l>=0;l--)t[l]=(t[l]-(l==0?0:t[l-1]))/e;return t}function ma(o){const t=[];for(const l of o)t.push(t.length==0?l:t.at(-1)+l);const e=t.at(-1);return t.map(l=>l/e)}function Wn(o){const t=o.monsterProportion.length,e=o.monsterProportion.map((d,h)=>d[0]-(h==0?0:o.monsterProportion[h-1][0])),l=o.monsterList.map(d=>ca(d)),s=o.populationMax,i=$l(s+1);for(let d=0;d<=s;d++)for(let h=0;h<t;h++)l[h]<=d&&(i[d]+=e[h]);const r=$l(s+1,s+1);r[0][0]=1;for(let d=1;d<=s;d++)for(let h=1;h<=s;h++)for(let T=0;T<t;T++)d>=l[T]&&(r[d][h]+=r[d-l[T]][h-1]*(e[T]/i[d]));const _=r[s].findLastIndex(d=>d>1e-6),m=[...r[s].slice(0,_+1)],p=[];for(let d=0;d<t;d++){const h=Math.min(_,Math.floor(s/l[d]));for(let T=0;T<=s;T++)r[T].fill(0);r[0][0]=1;for(let T=1;T<=s;T++)for(let A=0;A<=h;A++)for(let I=0;I<t;I++)T<l[I]||(I!=d?r[T][A]+=r[T-l[I]][A]*(e[I]/i[T]):A>0&&(r[T][A]+=r[T-l[I]][A-1]*(e[I]/i[T])));p.push([...r[s].slice(0,h+1)])}return{all:m,each:p}}const Pl=fe(ut(w.$_wolfAtt_Obj,(o,t)=>({id:t,name:o.name,label:`${ue(t)} [${t}]`})),"id"),pa=Pl.filter(o=>o.name.startsWith("camp_")),ha=Pl.filter(o=>o.id.startsWith("D_")),Xn=As(Pl,pa,ha),jl=ht(It(Object.values(w.$_skillAtt_Obj.towerSkill),o=>o.kindId),o=>({id:o[0].id,params:o[0].params})),Wl=[1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100],ga=fe(Es(ut(w.$_map_Obj,(o,t)=>Cl(o,{id:t}))),"index"),zn=fe(Object.values(w.dream_maps),"index"),fa=ga.map(o=>({label:`${o.id} ${o.name}`,value:o.id})),Yn=zn.map(o=>({label:`${o.id} ${o.name}`,value:o.id})),Aa=fe(w.$_towerAtt_Obj,o=>Math.abs(o.index)).map(o=>({label:o.name,value:o.id})),qn=fe(w.$_wolfAtt_Obj,"id").map(o=>({value:o.id,label:`${ue(o.id)} [${o.id}]`})),Xl=fe(w.$_wolfAtt_Obj,"id").filter(o=>o.pop<99).map(o=>({value:o.id,label:`${ue(o.id)} [${o.id}]`})),zl=fe(w.$_wolfAtt_Obj,"id").filter(o=>o.pop>=99).map(o=>({value:o.id,label:`${ue(o.id)} [${o.id}]`})),Ea=P({__name:"DifficultySelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const t=Object.entries(w.$_wave_hard_Obj).map(([l,s])=>({value:parseFloat(l),label:`${s.desc.split("^")[1]} (x${l}, +${s.add_score})`})),e=oe(o,"modelValue");return(l,s)=>{const i=Ee;return f(),R(i,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=r=>e.value=r),options:u(t)},null,8,["modelValue","options"])}}});function Jn(o){return Ys(o)}function ot(o,t,e){return Rs.hsl(Jn(o),t,e).string()}function Zn(o){return"#"+o.toString(16).padStart(6,"0")}const Ia=P({__name:"WolfHpChart",props:{hpData:{},width:{default:600},height:{default:200}},setup(o){Vt([Rl,Mt,Ut,Ft,$t]);const t=o,e=M(()=>({color:["#00A2E8"],title:{text:"当前狼血量",left:"center",textStyle:{fontStyle:"normal",fontFamily:"sans-serif",fontSize:16}},tooltip:{},xAxis:{type:"value",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}}},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.hpData.map(l=>l.name)},grid:{left:100,top:30,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.hpData.map(l=>l.value),itemStyle:{color:function(l){return ot(l.name,80,45)}}}}));return(l,s)=>{const i=Se("v-chart");return f(),b("div",null,[n(i,{class:"chart",option:u(e),style:bl({width:`${l.width}px`,height:`${l.height}px`}),autoresize:""},null,8,["option","style"])])}}}),Qn=P({__name:"WolfNumberChart",props:{data:{},max:{}},setup(o){Vt([Ut,Rl,Mt,Ft,$t]);const t=o,e=M(()=>({color:["#C00000"],xAxis:{type:"value",interval:1,axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},max:t.max},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.data.map(l=>l.name)},grid:{left:100,top:0,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.data.map(l=>l.num)}}));return(l,s)=>{const i=Se("v-chart");return f(),b("div",null,[n(i,{class:"chart",option:u(e),autoresize:""},null,8,["option"])])}}}),ei=Ie(Qn,[["__scopeId","data-v-2f4c44da"]]),ti={class:"space-y-2"},li={class:"text-center markup-table"},ai=P({__name:"WaveTool",props:{mapData:{},mapMonsterData:{},level:{},diff:{}},setup(o){const{toClipboard:t}=sa(),e=async p=>{p&&(await t(p),he.success("已复制到剪贴板"))},l=o,s=_e({count:0,avgHp:0,reservation:new Array(20).fill(0),extra:"",result:"",resultRaw:""}),i=j([]);Ae(()=>l.mapData,()=>{Object.assign(s,{count:0,avgHp:0,resetReservation:l.mapData.monsterProportion.map(()=>0),extra:"",result:"",resultRaw:""}),i.value=[]});const _=()=>{s.reservation.fill(0)},m=()=>{let p=jn(l.mapData,s.reservation);if(!p){he.error("预留量不合法，请重新输入！");return}let{mlist:d,clist:h}=p;s.extra&&(d=la(d.concat(s.extra.split(",").map(T=>ce.get(T.trim()))))),s.resultRaw=JSON.stringify(d.map(T=>T.id)),s.result=d.map(T=>ue(T.id)).join(", "),i.value=h.map(T=>({name:ue(T.data.id),num:T.num})),s.count=Xe(h,T=>T.num),s.avgHp=Math.round(Xe(d,T=>T.getHpMax(l.level,l.diff))/d.length)};return(p,d)=>{const h=ge,T=me,A=Rt,I=Ct;return f(),R(I,{class:"wave-tool"},{default:c(()=>[d[15]||(d[15]=E("h3",null,"波工具",-1)),E("div",ti,[E("div",null,[n(h,{onClick:m},{default:c(()=>d[7]||(d[7]=[S("随机生成波")])),_:1}),E("span",null,[d[8]||(d[8]=S(" 共 ")),n(T,{modelValue:u(s).count,"onUpdate:modelValue":d[0]||(d[0]=L=>u(s).count=L),size:"small",style:{width:"100px"}},null,8,["modelValue"]),d[9]||(d[9]=S(" 只狼，平均血量 ")),n(A,{modelValue:u(s).avgHp,"onUpdate:modelValue":d[1]||(d[1]=L=>u(s).avgHp=L),modelModifiers:{number:!0},style:{width:"100px"}},null,8,["modelValue"])])]),E("div",null,[d[11]||(d[11]=E("label",null,"下表为预留量",-1)),n(h,{size:"small",onClick:_},{default:c(()=>d[10]||(d[10]=[S("重置")])),_:1})]),E("table",li,[E("tbody",null,[E("tr",null,[(f(!0),b(k,null,B(p.mapMonsterData,L=>(f(),b("td",{key:L.id},x(L.name),1))),128))]),E("tr",null,[(f(!0),b(k,null,B(p.mapMonsterData,(L,K)=>(f(),b("td",{key:L.id},[n(T,{modelValue:u(s).reservation[K],"onUpdate:modelValue":V=>u(s).reservation[K]=V,size:"small",min:0,style:{width:"80px"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))])])]),E("div",null,[d[12]||(d[12]=S(" 额外：")),n(A,{modelValue:u(s).extra,"onUpdate:modelValue":d[2]||(d[2]=L=>u(s).extra=L),placeholder:"多个请用半角逗号分隔",spellcheck:!1,style:{width:"calc(100% - 60px)"}},null,8,["modelValue"])]),E("div",null,[d[13]||(d[13]=S(" 波： ")),n(A,{modelValue:u(s).resultRaw,"onUpdate:modelValue":d[3]||(d[3]=L=>u(s).resultRaw=L),style:{width:"calc(100% - 75px)"},spellcheck:!1},null,8,["modelValue"]),n(h,{icon:u(Ml),onClick:d[4]||(d[4]=L=>e(u(s).resultRaw))},null,8,["icon"])]),E("div",null,[d[14]||(d[14]=S(" 波： ")),n(A,{modelValue:u(s).result,"onUpdate:modelValue":d[5]||(d[5]=L=>u(s).result=L),style:{width:"calc(100% - 75px)"},spellcheck:!1},null,8,["modelValue"]),n(h,{icon:u(Ml),onClick:d[6]||(d[6]=L=>e(u(s).result))},null,8,["icon"])]),n(ei,{data:u(i),max:10},null,8,["data"])])]),_:1})}}}),si=Ie(ai,[["__scopeId","data-v-60197392"]]),ni={class:"space-x-8"},kl=P({__name:"LevelPreview",props:Et({mapData:{},mapMonsterData:{}},{wid:{default:"dahuil"},widModifiers:{},score:{default:0},scoreModifiers:{},diff:{default:1},diffModifiers:{}}),emits:["update:wid","update:score","update:diff"],setup(o){const t=o,e=oe(o,"wid"),l=oe(o,"score"),s=oe(o,"diff"),i=M(()=>ce.getOnlyExample().getData(e.value)),r=M(()=>t.mapData.getDifficultyLevel(l.value)),_=M(()=>i.value.getHpMax(r.value,s.value)),m=M(()=>({gold:t.mapData.calcAccumulative(l.value).gold,goldMax:t.mapData.calcAccumulative().gold,exp:t.mapData.calcAccumulative(l.value).exp,expMax:t.mapData.calcAccumulative().exp})),p=M(()=>t.mapMonsterData.map(d=>({name:d.name,value:d.getHpMax(r.value,s.value)})));return(d,h)=>{const T=Ee,A=Fe,I=be,L=me,K=Ja,V=Se("vue-latex");return f(),b(k,null,[n(I,{label:"狼"},{default:c(()=>[n(T,{modelValue:e.value,"onUpdate:modelValue":h[0]||(h[0]=C=>e.value=C),options:u(qn),filterable:"",style:{"max-width":"200px"}},null,8,["modelValue","options"]),n(A,{effect:"light",class:"mx-2"},{default:c(()=>[S(" 血量系数："+x(u(i).hpMaxA)+","+x(u(i).hpMaxB)+","+x(u(i).hpMaxC),1)]),_:1})]),_:1}),n(I,{label:"进度"},{default:c(()=>[n(L,{modelValue:l.value,"onUpdate:modelValue":h[1]||(h[1]=C=>l.value=C),min:0},null,8,["modelValue"]),n(A,{effect:"light",class:"tag-button mx-2",onClick:h[2]||(h[2]=C=>l.value=d.mapData.scoreMax)},{default:c(()=>[S(" 通关进度："+x(d.mapData.scoreMax),1)]),_:1}),n(K,{"text-inside":"","stroke-width":24,percentage:l.value/d.mapData.scoreMax*100,format:C=>C.toFixed(0)+"%",style:{width:"100px"}},null,8,["percentage","format"])]),_:1}),n(I,{label:"难度"},{default:c(()=>[n(Ea,{modelValue:s.value,"onUpdate:modelValue":h[3]||(h[3]=C=>s.value=C),style:{"max-width":"200px"}},null,8,["modelValue"])]),_:1}),n(I,null,{default:c(()=>[E("div",ni,[E("span",null,[h[4]||(h[4]=S(" 等级： ")),n(V,{expression:`L(x)=\\sqrt{h_a + h_b x}=${u(r).toFixed(2)}`},null,8,["expression"])]),E("span",null,"最大血量："+x(u(_)),1)])]),_:1}),n(I,null,{default:c(()=>[h[5]||(h[5]=S(" 银币： ")),n(V,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${d.mapData.calcPKGold(u(r))}`},null,8,["expression"])]),_:1}),n(I,null,{default:c(()=>[h[6]||(h[6]=S(" 经验： ")),n(V,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${d.mapData.calcPKExp(u(r))}`},null,8,["expression"])]),_:1}),n(I,null,{default:c(()=>[E("div",null,[E("div",null,[h[7]||(h[7]=S(" 总银币： ")),n(K,{percentage:u(m).gold/u(m).goldMax*100,"show-text":!1,"stroke-width":10,style:{display:"inline-flex",width:"100px"}},null,8,["percentage"]),S(" "+x(u(m).gold)+" / "+x(u(m).goldMax),1)]),E("div",null,[h[8]||(h[8]=S(" 总经验： ")),n(K,{percentage:u(m).exp/u(m).expMax*100,"show-text":!1,"stroke-width":10,style:{display:"inline-flex",width:"100px"}},null,8,["percentage"]),S(" "+x(u(m).exp)+" / "+x(u(m).expMax),1)]),h[9]||(h[9]=E("div",null,"（假设每波+2且不引狼）",-1))])]),_:1}),n(Ia,{"hp-data":u(p),height:100*Math.sqrt(d.mapMonsterData.length)},null,8,["hp-data","height"]),n(si,{"map-data":d.mapData,"map-monster-data":d.mapMonsterData,level:u(r),diff:s.value},null,8,["map-data","map-monster-data","level","diff"])],64)}}}),ii={class:"space-x-4"},oi=P({__name:"index",setup(o){const t=Bt({mid:"m2A",score:1}),e=M(()=>new rt(w.dream_maps[t.mid])),l=I=>I%10===0?(I-10)%100+10:I%10,s=I=>{const L=l(I).toString(),K=w.dream_waves[t.mid];return I%10==0?K.boss[L]:K.wolf[L]},i=M(()=>s(t.score).map(I=>ce.getOnlyExample().getData(I))),r=(I,L)=>{const K=l(L).toString();return w.dream_waves[I].popu[K]},_=M(()=>r(t.mid,t.score)),m=I=>Gn(I,r(t.mid,I==0?1:I==9?10:l(I))),p=M(()=>m(t.score)),d=M(()=>Math.sqrt(e.value.hardA*t.score+e.value.hardB)),h=M(()=>{for(const[I,L]of Object.entries(w.dream_data.dm_wolf_hard_ness)){const[K,V]=I.split("_");if(t.score>=Number.parseInt(K)&&t.score<=Number.parseInt(V))return L}return w.dream_data.dm_wolf_hard_ness.default}),T=M(()=>i.value.map(I=>({name:I.name,value:I.getHpMax(d.value,h.value)}))),A=M(()=>{let I=0,L=0;for(let K=1;K<=t.score;K++){let V=Math.sqrt(e.value.hardA+e.value.hardB*K);I+=Gl(V,r(t.mid,K)),L+=m(K)}return{gold:I,exp:L}});return(I,L)=>{const K=Ee,V=Fe,C=be,pe=me,H=Se("vue-latex"),Z=$e;return f(),b(k,null,[n(Z,{model:u(t),"label-width":"120px"},{default:c(()=>[n(C,{label:"地图"},{default:c(()=>[n(K,{modelValue:u(t).mid,"onUpdate:modelValue":L[0]||(L[0]=ft=>u(t).mid=ft),options:u(Yn),style:{"max-width":"250px"}},null,8,["modelValue","options"]),n(V,{effect:"light",class:"mx-1"},{default:c(()=>[S(" 难度系数："+x(u(e).hardA)+", "+x(u(e).hardB),1)]),_:1})]),_:1}),n(C,{label:"进度"},{default:c(()=>[n(pe,{modelValue:u(t).score,"onUpdate:modelValue":L[1]||(L[1]=ft=>u(t).score=ft),min:0},null,8,["modelValue"]),n(V,{effect:"light",class:"mx-1"},{default:c(()=>[S(" HpRate："+x(u(h)),1)]),_:1}),n(V,{effect:"light",class:"mx-1"},{default:c(()=>[S(" Population："+x(u(_)),1)]),_:1})]),_:1}),n(C,null,{default:c(()=>[L[2]||(L[2]=S(" 银币： ")),n(H,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${u(Gl)(u(d),u(_))}`},null,8,["expression"])]),_:1}),n(C,null,{default:c(()=>[L[3]||(L[3]=S(" 经验： ")),n(H,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${u(p)}`},null,8,["expression"])]),_:1}),n(C,null,{default:c(()=>[E("div",ii,[E("span",null,"总银币："+x(u(A).gold),1),E("span",null,"总经验："+x(u(A).exp),1)])]),_:1}),n(Ia,{"hp-data":u(T),height:300},null,8,["hp-data"])]),_:1},8,["model"]),n(kl,{"map-data":u(e),"map-monster-data":u(i)},null,8,["map-data","map-monster-data"])],64)}}}),ri=Object.freeze(Object.defineProperty({__proto__:null,default:oi},Symbol.toStringTag,{value:"Module"})),ui={key:0,class:"space-y-1"},di={class:"space-x-0.5"},ci=P({__name:"index",setup(o){const t=fe(Object.values(w.dream_maps),"name").map(e=>({...e,...w.dream_waves[e.id],waves:Object.assign({},w.dream_waves[e.id].wolf,w.dream_waves[e.id].boss)}));return(e,l)=>{const s=Ue,i=Fe,r=Me;return f(),b("div",null,[n(r,{data:u(t)},{default:c(()=>[n(s,{prop:"id",label:"id",sortable:"",align:"center"}),n(s,{prop:"name",label:"name",sortable:"",align:"center"}),n(s,{prop:"interval",label:"interval",sortable:"",align:"center"}),n(s,{prop:"interval_rule",label:"interval_rule",sortable:"",align:"center"}),n(s,{prop:"hard_ness",label:"hard_ness",sortable:"",align:"center"}),n(s,{prop:"yield_val",label:"yield_val",sortable:"",align:"center"}),n(s,{label:"waves",type:"expand",width:"80"},{default:c(_=>[_.row.waves?(f(),b("div",ui,[E("table",null,[(f(!0),b(k,null,B(_.row.waves,(m,p)=>(f(),b("tr",{key:p},[E("td",null,[n(i,null,{default:c(()=>[S(x(p),1)]),_:2},1024)]),E("td",di,[(f(!0),b(k,null,B(m,(d,h)=>(f(),R(i,{key:h,style:bl({color:u(ot)(d,40,40),"background-color":u(ot)(d,80,90),"border-color":u(ot)(d,50,80)})},{default:c(()=>[S(x(u(ue)(d)),1)]),_:2},1032,["style"]))),128))]),E("td",null,[n(i,null,{default:c(()=>[S(x(_.row.popu[p]),1)]),_:2},1024)])]))),128))]),(f(!0),b(k,null,B(_.row.waves,(m,p)=>(f(),b("div",{key:p,class:"space-x-1"}))),128))])):ne("",!0)]),_:1})]),_:1},8,["data"])])}}}),_i=Ie(ci,[["__scopeId","data-v-093077de"]]),mi=Object.freeze(Object.defineProperty({__proto__:null,default:_i},Symbol.toStringTag,{value:"Module"})),pi=P({__name:"DreamWaveEditor",props:Et({wolfList:{}},{modelValue:{},modelModifiers:{}}),emits:Et(["change"],["update:modelValue"]),setup(o,{emit:t}){const e=o,l=oe(o,"modelValue"),s=t,i=j(""),r=j(!1),_=j(),m=j(e.wolfList.slice()),p=I=>{l.value.splice(l.value.indexOf(I),1),s("change")},d=()=>{r.value=!0,ss(()=>{_.value.focus()})},h=I=>{console.log(I),m.value=I?e.wolfList.filter(T(I)):e.wolfList},T=I=>L=>L.id.toLowerCase().includes(I.toLowerCase())||L.value.includes(I),A=I=>{l.value.push(I),l.value.sort((L,K)=>L.id.localeCompare(K.id)),r.value=!1,i.value="",s("change")};return(I,L)=>{const K=Fe,V=Za,C=pt,pe=ge;return f(),b("div",null,[E("div",null,[(f(!0),b(k,null,B(l.value,(H,Z)=>(f(),R(K,{key:Z,type:"info",effect:"plain",class:"m-0.5",closable:"","disable-transitions":!1,onClose:ft=>p(H)},{default:c(()=>[E("ruby",null,[S(x(H.value)+" ",1),E("rt",null,x(H.id),1)])]),_:2},1032,["onClose"]))),128)),u(r)?(f(),R(u(mt),{key:0,ref_key:"InputRef",ref:_,modelValue:u(i),"onUpdate:modelValue":L[0]||(L[0]=H=>te(i)?i.value=H:null),filterable:"","filter-method":h,class:"inline-block m-0.5",placeholder:"Select",size:"small",style:{"max-width":"160px"},onChange:A},{default:c(()=>[(f(!0),b(k,null,B(u(m),H=>(f(),R(C,{key:H.id,value:H},{default:c(()=>[S(x(H.value)+" ",1),n(V,{class:"mx-1",type:"primary"},{default:c(()=>[S("["+x(H.id)+"]",1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(f(),R(pe,{key:1,class:"button-new-tag m-0.5",type:"primary",plain:"",size:"small",onClick:d},{default:c(()=>L[1]||(L[1]=[S(" + ")])),_:1}))])])}}}),hi=P({__name:"DreamWaveTable",props:{modelValue:{default:Wl.map(o=>({key:o,wolf:[],popu:0,popFixed:!1}))},modelModifiers:{}},emits:["update:modelValue"],setup(o,{expose:t}){const e=Object.keys(w.$_wolfAtt_Obj).map(m=>({id:m,value:ue(m)})),l=oe(o,"modelValue"),s=(m,p=!1)=>{(!m.popFixed||p)&&(m.popFixed=!1,m.popu=Hn(m.wolf.map(d=>d.id)))},i=m=>{m.popu==0?(m.popFixed=!1,s(m)):m.popFixed=!0};return t({importData:m=>{l.value=Wl.map(p=>({key:p,wolf:(m.wolf[p]??m.boss[p]??[]).map(d=>({id:d,value:ue(d)})),popu:m.popu[p],popFixed:!0}))},toExportData:()=>{const m={wolf:{},boss:{},popu:{}};for(const p of l.value){const d=p.wolf.map(h=>h.id);m[p.key<10?"wolf":"boss"][p.key]=d,m.popu[p.key]=p.popu}return m}}),(m,p)=>{const d=Ue,h=me,T=ge,A=Me;return f(),R(A,{data:l.value,style:{"max-width":"1200px"}},{default:c(()=>[n(d,{prop:"key",label:"Key",width:80,align:"center"}),n(d,{label:"Wolf"},{default:c(I=>[n(pi,{modelValue:I.row.wolf,"onUpdate:modelValue":L=>I.row.wolf=L,"wolf-list":u(e),onChange:L=>s(I.row)},null,8,["modelValue","onUpdate:modelValue","wolf-list","onChange"])]),_:1}),n(d,{label:"Population",width:160,align:"center"},{default:c(I=>[n(h,{modelValue:I.row.popu,"onUpdate:modelValue":L=>I.row.popu=L,size:"small",min:0,style:{width:"90px"},class:ns({primary:I.row.popFixed}),onChange:L=>i(I.row)},null,8,["modelValue","onUpdate:modelValue","class","onChange"]),n(T,{icon:I.row.popFixed?u(_s):u(ms),circle:"",size:"small",class:"m-0.5",onClick:L=>I.row.popFixed?s(I.row,!0):I.row.popFixed=!0},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])}}}),gi=P({__name:"index",setup(o){const t=ra(),e=Ol(),l=j(),s=Object.values(w.dream_maps).map(p=>({label:p.name,value:p.id})),i=j(),r=()=>{var p;i.value&&((p=l.value)==null||p.importData(w.dream_waves[i.value]))},_=async()=>{var p;try{const d=await t.open();(p=l.value)==null||p.importData(d),he.success("成功导入数据")}catch{he.error("导入格式错误！")}},m=()=>{var p;e.open((p=l.value)==null?void 0:p.toExportData())};return(p,d)=>{const h=Ee,T=ge;return f(),b("div",null,[n(h,{modelValue:u(i),"onUpdate:modelValue":d[0]||(d[0]=A=>te(i)?i.value=A:null),options:u(s),placeholder:"原型",style:{"max-width":"250px"},onChange:r},null,8,["modelValue","options"]),n(T,{onClick:_},{default:c(()=>d[1]||(d[1]=[S("导入")])),_:1}),n(T,{onClick:m},{default:c(()=>d[2]||(d[2]=[S("导出")])),_:1}),n(hi,{ref_key:"tableRef",ref:l},null,512)])}}}),fi=Object.freeze(Object.defineProperty({__proto__:null,default:gi},Symbol.toStringTag,{value:"Module"}));function Ai(o,t){const e=o.toFixed(8),l=e.indexOf(".");return l==-1||e.length-l-1<=t?e:o.toFixed(t).replace(/\.?0+$/,"")}function ll(o,t=0,e=!1,l="14",s=""){return`<span style="color:#${t.toString(16).padStart(6,"0")};${e?"font-weight:bold;":""}${l?`font-size:${l};`:""}${s?`font-family:${s};`:""}">${o.replaceAll(`
`,"<br>")}</span>`}function Ei(o){return Math.floor(o/3600)+":"+Math.floor(o/60%60).toString().padStart(2,"0")+":"+(o%60).toString().padStart(2,"0")}class F extends xe{constructor(t){super(t)}}a(F,"KIND_HIT","hit"),a(F,"KIND_INVASION","invasion"),a(F,"KIND_TELEPORT","teleport"),a(F,"KIND_BUFF_TOP","buffTop"),a(F,"KIND_BUFF_MID","buffMid"),a(F,"KIND_BUFF_BOT","buffBot"),a(F,"KIND_MAGIC","effectMagic"),a(F,"KIND_PATH","effectPath"),a(F,"KIND_CRIT","effectCrit"),a(F,"KIND_SUMMON","effectSummon"),a(F,"KIND_CLOUD","effectCloud"),a(F,"KIND_MIRROR","effectMirror"),a(F,"KIND_CURE","effectCure"),a(F,"KIND_CURE_ONE","effectCureOne"),a(F,"KIND_SNEER","effectSneer"),a(F,"KIND_LINKS","effectLinks"),a(F,"KIND_RELIVE","effectRelive"),a(F,"KIND_SUICIDE","effectSuicide"),a(F,"KIND_BLINK_IN","effectBlinkIn"),a(F,"KIND_BLINK_OUT","effectBlinkOut"),a(F,"KIND_LIGHTNING","lightning"),a(F,"KIND_FIELD_ATTACK","allAttack"),a(F,"KIND_FIELD_ATTACK_AOE","allAttackAOE"),a(F,"KIND_CUSS","effectCuss"),a(F,"KIND_CUSS_BREAK","effectCussBreak"),a(F,"KIND_SIGN_SUMMON","signSummon"),a(F,"KIND_SIGN_CURE","signCure"),a(F,"KIND_SIGN_CLOUD","signCloud"),a(F,"KIND_SIGN_SHIELD","signShield"),a(F,"KIND_SIGN_TRANSFORM","signTransform"),a(F,"KIND_BOSS","effectBoss");const Ke=class Ke extends xe{constructor(e){super(e);a(this,"parameter");a(this,"levels");this.parameter=e[Ke.DATA_PARAMETER],this.levels=e[Ke.DATA_LEVELS]}getLevelParam(e,l){return this.parameter!=null?this.parameter[l]:this.levels!=null?(e=Math.min(Math.max(0,e-1),this.levels.length-1),this.levels[e][l]):null}hasLevel(){return this.parameter==null}};a(Ke,"TYPE_TOWER_SKILL","typeTowerSkill"),a(Ke,"TYPE_MONSTER_SKILL","typeMonsterSkill"),a(Ke,"DATA_PARAMETER","params"),a(Ke,"DATA_LEVELS","levels");let ze=Ke;class N extends ze{constructor(t){super(t),t[de.DATA_TYPE_ID]=ze.TYPE_TOWER_SKILL}}a(N,"KIND_AURA","Aura"),a(N,"KIND_CHANGE_BULLET","Bultype"),a(N,"KIND_CHANGE_DAMAGE","ChangeDam"),a(N,"KIND_CHANGE_RATE","ChangeRate"),a(N,"KIND_CHANGE_RANGE","ChangeRange"),a(N,"KIND_FIELD_ATTACK","ALLAP"),a(N,"KIND_DIVIDED_ATTACK","DivAP"),a(N,"KIND_SCATTER_ATTACK","ScaAP"),a(N,"KIND_COMBO_ATTACK","ComAP"),a(N,"KIND_GUIDED_BULLET","GuidedBul"),a(N,"KIND_ATTACK_RATE","AttackRate"),a(N,"KIND_AOE_ATTACK","AoeAP"),a(N,"KIND_THROUGHOUT_ATTACK","ThoAP"),a(N,"KIND_BOUNCE_ATTACK","BouAP"),a(N,"KIND_FLOAT_DAMAGE","FloatDam"),a(N,"KIND_CRIT","Crit"),a(N,"KIND_REDUCED_DEFENSE","RedDef"),a(N,"KIND_POISON","Poison"),a(N,"KIND_SLOW","Slow"),a(N,"KIND_BURN_COLD","BC"),a(N,"KIND_BEAT_BACK","Beat"),a(N,"KIND_SILENCE","Silence"),a(N,"KIND_VERTIGO","Vertigo"),a(N,"KIND_INTIMIDATE","Intimidate"),a(N,"KIND_CUSS","Cuss"),a(N,"KIND_BURN","Burn"),a(N,"KIND_COLD","Cold");const D=class D extends ze{constructor(t){super(t),t[de.DATA_TYPE_ID]=ze.TYPE_MONSTER_SKILL}static get allMonsterSkill(){return[D.KIND_FLY,D.KIND_AIRBORNE,D.KIND_ISOLATION,D.KIND_RELIVE,D.KIND_SUICIDE,D.KIND_REINCARNATE,D.KIND_RESIST_FIRE,D.KIND_RESIST_FROST,D.KIND_RESIST_POISON,D.KIND_RESIST_BEAT,D.KIND_RESIST_SILENCE,D.KIND_RESIST_VERTIGO,D.KIND_RESIST_CRIT,D.KIND_RESIST_LIGHT,D.KIND_RESIST_STRSMOOTH,D.KIND_SLOWF,D.KIND_WEAK_FIRE,D.KIND_WEAK_FROST,D.KIND_WEAK_POISON,D.KIND_WEAK_BEAT,D.KIND_WEAK_SILENCE,D.KIND_WEAK_VERTIGO,D.KIND_WEAK_CRIT,D.KIND_WEAK_LIGHT,D.KIND_RUN,D.KIND_MIRROR,D.KIND_SUMMON,D.KIND_CLOUD,D.KIND_CURE,D.KIND_BLINK,D.KIND_HIDE,D.KIND_SHIELD,D.KIND_SNEER,D.KIND_TRANSFORM,D.KIND_LINKS]}};a(D,"EVENT_RED",1),a(D,"EVENT_YELLOW",2),a(D,"EVENT_GREEN",3),a(D,"EVENT_FULL",4),a(D,"EVENT_INTIMIDATE",20),a(D,"EVENT_VERTIGO",21),a(D,"EVENT_SILENCE",22),a(D,"EVENT_SLOW",23),a(D,"EVENT_REDUCED_DEFENSE",24),a(D,"EVENT_POISON",25),a(D,"EVENT_BURN",26),a(D,"EVENT_COLD",27),a(D,"EVENT_HIT",40),a(D,"EVENT_CRIT",41),a(D,"EVENT_BEAT_BACK",42),a(D,"EVENT_FRIENT_DIE",43),a(D,"EVENT_DIE",44),a(D,"KIND_FLY","fly"),a(D,"KIND_AIRBORNE","airborne"),a(D,"KIND_ISOLATION","isolation"),a(D,"KIND_RELIVE","revive"),a(D,"KIND_SUICIDE","burst"),a(D,"KIND_REINCARNATE","reborn"),a(D,"KIND_SLOWF","slowf"),a(D,"KIND_RESIST_FIRE","resistFire"),a(D,"KIND_RESIST_FROST","resistFrost"),a(D,"KIND_RESIST_POISON","resistPoison"),a(D,"KIND_RESIST_SLOW","resistSlow"),a(D,"KIND_RESIST_BEAT","resistBeat"),a(D,"KIND_RESIST_SILENCE","resistSilence"),a(D,"KIND_RESIST_VERTIGO","resistVertigo"),a(D,"KIND_RESIST_CRIT","resistCrit"),a(D,"KIND_RESIST_LIGHT","resistLight"),a(D,"KIND_RESIST_INTIMIDATE","resistIntimidate"),a(D,"KIND_WEAK_FIRE","weakFire"),a(D,"KIND_WEAK_FROST","weakFrost"),a(D,"KIND_WEAK_POISON","weakPoison"),a(D,"KIND_WEAK_SLOW","weakSlow"),a(D,"KIND_WEAK_BEAT","weakBeat"),a(D,"KIND_WEAK_SILENCE","weakSilence"),a(D,"KIND_WEAK_VERTIGO","weakVertigo"),a(D,"KIND_WEAK_CRIT","weakCrit"),a(D,"KIND_WEAK_LIGHT","weakLight"),a(D,"KIND_WEAK_INTIMIDATE","weakIntimidate"),a(D,"KIND_RESIST_STRSMOOTH","strsmooth"),a(D,"KIND_RUN","sprint"),a(D,"KIND_MIRROR","divide"),a(D,"KIND_SUMMON","summon"),a(D,"KIND_CLOUD","cloud"),a(D,"KIND_CURE","massTreatment"),a(D,"KIND_BLINK","blink"),a(D,"KIND_HIDE","invisible"),a(D,"KIND_SHIELD","shield"),a(D,"KIND_SNEER","taunt"),a(D,"KIND_TRANSFORM","morph"),a(D,"KIND_LINKS","links");let v=D;const ie=class ie extends Ye{constructor(){super(),ie.onlyExample=this,this.loadData(w.$_skillAtt_Obj)}static getOnlyExample(){return ie.onlyExample==null&&(ie.onlyExample=new ie),ie.onlyExample}loadData(t){for(const e in t[ie.TOWER_SKILL]){const l=t[ie.TOWER_SKILL][e];l[de.DATA_ID]=e,this.m_manager[e]=new N(l)}for(const e in t[ie.MONSTER_SKILL]){const l=t[ie.MONSTER_SKILL][e];l[de.DATA_ID]=e,this.m_manager[e]=new v(l)}}getData(t){return this.getDataById(t)}};a(ie,"onlyExample"),a(ie,"TOWER_SKILL","towerSkill"),a(ie,"MONSTER_SKILL","monsterSkill"),a(ie,"TRAP_SKILL","trapSkill");let al=ie;class O{static toPercentage(t){return String(Math.round(t*100*100)/100)+"%"}static toGridStr(t){return String(Math.round(t/100)/10)}static getPosID(t,e){return t+"_"+e}}class va extends gt{constructor(e,l,s=!1){super();a(this,"level",0);a(this,"index",0);a(this,"enabled",!0);a(this,"m_skillInfo","");a(this,"m_nextLevelSkillInfo","");a(this,"skillTag1","");a(this,"skillTag2","");a(this,"skillTag3","");a(this,"nextLevelSkillTag1","");a(this,"nextLevelSkillTag2","");a(this,"nextLevelSkillTag3","");a(this,"m_updateFunction",()=>{});if(s){this.m_data=new Dt({id:e+"_0",kindId:e});return}this.m_data=al.getOnlyExample().getData(e),this.level=l,this.enabled=!0}get data(){return this.m_data}get skillInfo(){return this.m_updateFunction!=null&&this.m_updateFunction(),this.m_skillInfo||(this.m_skillInfo=""),this.m_skillInfo}get nextLevelSkillInfo(){return this.m_nextLevelSkillInfo||(this.m_nextLevelSkillInfo=""),this.m_nextLevelSkillInfo}}class G extends va{constructor(e,l,s){super(e,l);a(this,"tower");this.tower=s}static create(e,l,s){const i=new G("",l,s);return i.m_data=e,i}shouldTransferBullet(){switch(this.data.kindId){case N.KIND_GUIDED_BULLET:case N.KIND_ATTACK_RATE:case N.KIND_AOE_ATTACK:case N.KIND_THROUGHOUT_ATTACK:case N.KIND_BOUNCE_ATTACK:case N.KIND_FLOAT_DAMAGE:case N.KIND_CRIT:case N.KIND_REDUCED_DEFENSE:case N.KIND_POISON:case N.KIND_SLOW:case N.KIND_BURN_COLD:case N.KIND_BEAT_BACK:case N.KIND_SILENCE:case N.KIND_VERTIGO:case N.KIND_INTIMIDATE:case N.KIND_CUSS:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case N.KIND_AURA:return new nl(this.data.id,this.level,this.tower);case N.KIND_CHANGE_BULLET:return new Ta(this.data.id,this.level,this.tower);case N.KIND_CHANGE_DAMAGE:return new La(this.data.id,this.level,this.tower);case N.KIND_CHANGE_RATE:return new xa(this.data.id,this.level,this.tower);case N.KIND_CHANGE_RANGE:return new Da(this.data.id,this.level,this.tower);case N.KIND_FIELD_ATTACK:return new ml(this.data.id,this.level,this.tower);case N.KIND_DIVIDED_ATTACK:return new cl(this.data.id,this.level,this.tower);case N.KIND_SCATTER_ATTACK:return new gl(this.data.id,this.level,this.tower);case N.KIND_COMBO_ATTACK:return new rl(this.data.id,this.level,this.tower);case N.KIND_GUIDED_BULLET:return new Li(this.data.id,this.level,this.tower);case N.KIND_ATTACK_RATE:return new Ii(this.data.id,this.level,this.tower);case N.KIND_AOE_ATTACK:return new sl(this.data.id,this.level,this.tower);case N.KIND_THROUGHOUT_ATTACK:return new El(this.data.id,this.level,this.tower);case N.KIND_BOUNCE_ATTACK:return new ol(this.data.id,this.level,this.tower);case N.KIND_FLOAT_DAMAGE:return new Ti(this.data.id,this.level,this.tower);case N.KIND_CRIT:return new ul(this.data.id,this.level,this.tower);case N.KIND_REDUCED_DEFENSE:return new hl(this.data.id,this.level,this.tower);case N.KIND_POISON:return new pl(this.data.id,this.level,this.tower);case N.KIND_SLOW:return new Al(this.data.id,this.level,this.tower);case N.KIND_BURN_COLD:return new vi(this.data.id,this.level,this.tower);case N.KIND_BEAT_BACK:return new il(this.data.id,this.level,this.tower);case N.KIND_SILENCE:return new fl(this.data.id,this.level,this.tower);case N.KIND_VERTIGO:return new Il(this.data.id,this.level,this.tower);case N.KIND_INTIMIDATE:return new _l(this.data.id,this.level,this.tower);case N.KIND_CUSS:return new dl(this.data.id,this.level,this.tower);default:return this}}}const Pe=class Pe extends G{constructor(t,e,l){super(t,e,l),this.index=1050,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3001,this.radiiInfo,O.toPercentage(this.nextEffectRate))}}get radii(){return this.data.getLevelParam(this.level,0)+Pe.DEFAULT_RADII}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Pe.DEFAULT_NEXT_EFFECT_RATE,Pe.MAX_NEXT_EFFECT_RATE)}get radiiInfo(){return this.radii.toString()}};a(Pe,"DEFAULT_RADII",0),a(Pe,"DEFAULT_NEXT_EFFECT_RATE",0),a(Pe,"MAX_NEXT_EFFECT_RATE",1);let sl=Pe;class Ii extends G{constructor(t,e,l){super(t,e,l),this.index=1040,this.m_updateFunction=()=>{const s=this.floorRate,i=this.airRate;s<=0&&i>0?this.m_skillInfo=g.getLanguageStr(3029):i<=0&&s>0?this.m_skillInfo=g.getLanguageStr(3028):s!=1?this.m_skillInfo=g.getLanguageStr(3030,O.toPercentage(s)):i!=1&&(this.m_skillInfo=g.getLanguageStr(3031,O.toPercentage(i)))}}get floorRate(){return this.data.getLevelParam(this.level,0)}get airRate(){return this.data.getLevelParam(this.level,1)}}const bt=class bt extends G{constructor(t,e,l){super(t,e,l),this.index=1500,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3002)}}get spId(){return this.data.getLevelParam(this.level,0)}get spLevel(){return this.data.getLevelParam(this.level,1)}get radii(){return this.data.getLevelParam(this.level,2)*this.level+bt.DEFAULT_RADII}};a(bt,"DEFAULT_RADII",1e3);let nl=bt;const Ge=class Ge extends G{constructor(t,e,l){super(t,e,l),this.index=1060,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3003,O.toPercentage(this.chances),this.distanceInfo)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Ge.DEFAULT_CHANCES,1),0)}get beatBackDistance(){return this.data.getLevelParam(this.level,1)+Ge.DEFAULT_BEAT_BACK_DISTANCE}get distanceInfo(){return this.beatBackDistance.toString()}};a(Ge,"SHIFT_TIME",.2),a(Ge,"DEFAULT_CHANCES",0),a(Ge,"DEFAULT_BEAT_BACK_DISTANCE",0);let il=Ge;const Le=class Le extends G{constructor(t,e,l){super(t,e,l),this.index=1070,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3004,this.bounceNum,O.toPercentage(1-this.nextEffectRate),this.attackInfo)}}get bounceNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Le.DEFAULT_BOUNCE_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)*this.level+Le.DEFAULT_NEXT_EFFECT_RATE,Le.MAX_NEXT_EFFECT_RATE)}get attackInfo(){var e;let t=null;return((e=this.tower)==null?void 0:e.newBullet().bulletData.hitEffectId)==F.KIND_LIGHTNING?t=g.getLanguageStr(3516):t=g.getLanguageStr(3515),t}};a(Le,"DEFAULT_BOUNCE_NUM",.5),a(Le,"DEFAULT_NEXT_EFFECT_RATE",.35),a(Le,"MAX_NEXT_EFFECT_RATE",1),a(Le,"MAX_DISTANCE",3e3);let ol=Le;class vi extends G{constructor(t,e,l){super(t,e,l),this.index=1080,this.m_updateFunction=()=>{this.burnColdValue>0?this.m_skillInfo=g.getLanguageStr(3005,this.burn):this.m_skillInfo=g.getLanguageStr(3006,O.toPercentage(this.cold))}}get burnColdValue(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return this.data.getLevelParam(this.level,0)<0&&(e=-e),Math.floor(e)}get burn(){return Math.floor(Math.sqrt(this.burnColdValue))}get cold(){let t=1;this.tower&&(t=this.tower.buffEffect());const e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return Math.pow(e,.25)*.03}}class Ta extends G{constructor(t,e,l){super(t,e,l)}get bulletId(){return this.data.getLevelParam(this.level,0)}}class La extends G{constructor(t,e,l){super(t,e,l),this.index=1e3,this.m_updateFunction=()=>{this.damageRate>1?this.m_skillInfo=g.getLanguageStr(3007,O.toPercentage(this.damageRate-1)):this.damageRate<1&&(this.m_skillInfo=g.getLanguageStr(3008,O.toPercentage(1-this.damageRate)))}}get damageAdd(){return this.data.getLevelParam(this.level,0)*this.level}get damageRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get damageA(){return this.data.getLevelParam(this.level,2)}get damageB(){return this.data.getLevelParam(this.level,3)}get damageC(){return this.data.getLevelParam(this.level,4)}isChangeBase(){return!(this.damageA==0&&this.damageB==0&&this.damageC==0)}}class Da extends G{constructor(t,e,l){super(t,e,l),this.index=1010,this.m_updateFunction=()=>{this.rangeRate>1?this.m_skillInfo=g.getLanguageStr(3009,O.toPercentage(this.rangeRate-1)):this.m_skillInfo=g.getLanguageStr(3010,O.toPercentage(1-this.rangeRate)),this.rangeMin>0&&(this.m_skillInfo+=g.getLanguageStr(3027))}}get rangeAdd(){return this.data.getLevelParam(this.level,0)*this.level}get rangeRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get range(){return this.data.getLevelParam(this.level,2)}get rangeMin(){return this.data.getLevelParam(this.level,3)}isChangeBase(){return this.range!=0}}class xa extends G{constructor(t,e,l){super(t,e,l),this.index=1020,this.m_updateFunction=()=>{this.rateRate>1?this.m_skillInfo=g.getLanguageStr(3011,O.toPercentage(this.rateRate-1)):this.m_skillInfo=g.getLanguageStr(3012,O.toPercentage(1-this.rateRate))}}get rateRate(){return this.data.getLevelParam(this.level,0)+this.data.getLevelParam(this.level,1)*this.level+1}get rate(){return this.data.getLevelParam(this.level,2)}isChangeBase(){return this.rate!=0}}const je=class je extends G{constructor(t,e,l){super(t,e,l),this.index=1090,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3013,O.toPercentage(this.chances),this.extraBullet+1)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)+je.DEFAULT_CHANCES,1),0)}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,1)*this.level+je.DEFAULT_EXTRA_BULLET)}};a(je,"DEFAULT_CHANCES",0),a(je,"DEFAULT_EXTRA_BULLET",.5),a(je,"DEFAULT_RATE",.08);let rl=je;const ke=class ke extends G{constructor(t,e,l){super(t,e,l),this.index=1100,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3014,O.toPercentage(this.chances),this.damageEffectRate.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+ke.DEFAULT_CHANCES,1),0)}get damageEffectRate(){return this.data.getLevelParam(this.level,1)*this.level+ke.DEFAULT_DAMAGE_EFFECT_RATE+1}get buffEffectRate(){return this.data.getLevelParam(this.level,2)*this.level+ke.DEFAULT_BUFF_EFFECT_RATE+1}};a(ke,"DEFAULT_CHANCES",.1),a(ke,"DEFAULT_DAMAGE_EFFECT_RATE",.5),a(ke,"DEFAULT_BUFF_EFFECT_RATE",.1);let ul=ke;const Qe=class Qe extends G{constructor(t,e,l){super(t,e,l),this.index=1110,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3026,Math.round(this.cussPower),this.duration.toFixed(0))}}get cussPower(){return this.data.getLevelParam(this.level,0)*this.level*this.tower.level+Qe.DEFAULT_CUSS_POWER}get duration(){return this.data.getLevelParam(this.level,1)+Qe.DEFAULT_DURATION}};a(Qe,"DEFAULT_CUSS_POWER",0),a(Qe,"DEFAULT_DURATION",0);let dl=Qe;const St=class St extends G{constructor(t,e,l){super(t,e,l),this.index=1120,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3015,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+St.DEFAULT_EXTRA_BULLET)}};a(St,"DEFAULT_EXTRA_BULLET",.5);let cl=St;class Ti extends G{constructor(t,e,l){super(t,e,l),this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3017)}}get floatDamageRate(){return this.data.getLevelParam(this.level,0)*this.level}}class Li extends G{constructor(t,e,l){super(t,e,l),this.m_skillInfo=""}get guideRatio(){return this.data.getLevelParam(this.level,0)}get bulletSpeedRate(){return this.data.getLevelParam(this.level,1)+1}get bulletAccSpeed(){return this.data.getLevelParam(this.level,2)}get guideInfo(){let t=null;const e=this.guideRatio;return e<.1?t=g.getLanguageStr(3500):e<.2?t=g.getLanguageStr(3501):e<.3?t=g.getLanguageStr(3502):e<.4?t=g.getLanguageStr(3503):t=g.getLanguageStr(3504),t}}const et=class et extends G{constructor(t,e,l){super(t,e,l),this.index=1140,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3019,O.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+et.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+et.DEFAULT_DURATION}};a(et,"DEFAULT_CHANCES",.05),a(et,"DEFAULT_DURATION",0);let _l=et;const Nt=class Nt extends G{constructor(t,e,l){super(t,e,l),this.index=1130,this.m_skillInfo=g.getLanguageStr(3016)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Nt.DEFAULT_CHANCES,1),0)}};a(Nt,"DEFAULT_CHANCES",.05);let ml=Nt;const tt=class tt extends G{constructor(e,l,s){super(e,l,s);a(this,"m_poisonRate",-1);this.index=1150,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3e3,Math.round(this.poisonRate*this.tower.damage()),this.duration.toFixed(0))}}get poisonRate(){return this.m_poisonRate<0?this.data.getLevelParam(this.level,0)*this.level+tt.DEFAULT_POISON_RATE:this.m_poisonRate}set poisonRate(e){this.m_poisonRate<0&&(this.m_poisonRate=e)}get duration(){return this.data.getLevelParam(this.level,1)+tt.DEFAULT_DURATION}};a(tt,"DEFAULT_POISON_RATE",0),a(tt,"DEFAULT_DURATION",0);let pl=tt;const lt=class lt extends G{constructor(t,e,l){super(t,e,l),this.index=1160,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3020,O.toPercentage(this.reducedDefenseRate),this.duration.toFixed(1))}}get reducedDefenseRate(){return this.data.getLevelParam(this.level,0)*this.level+lt.DEFAULT_REDUCED_DEFENSE_RATE}get duration(){return this.data.getLevelParam(this.level,1)+lt.DEFAULT_DURATION}};a(lt,"DEFAULT_REDUCED_DEFENSE_RATE",.1),a(lt,"DEFAULT_DURATION",0);let hl=lt;const wt=class wt extends G{constructor(t,e,l){super(t,e,l),this.index=1170,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3021,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+wt.DEFAULT_EXTRA_BULLET)}};a(wt,"DEFAULT_EXTRA_BULLET",.5);let gl=wt;const at=class at extends G{constructor(t,e,l){super(t,e,l),this.index=1180,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3022,O.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+at.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+at.DEFAULT_DURATION}};a(at,"DEFAULT_CHANCES",.05),a(at,"DEFAULT_DURATION",0);let fl=at;const st=class st extends G{constructor(t,e,l){super(t,e,l),this.index=1190,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3023,O.toPercentage(this.slowRate),this.duration.toFixed(1))}}get slowRate(){return this.data.getLevelParam(this.level,0)*this.level+st.DEFAULT_SLOW_RATE}get duration(){return this.data.getLevelParam(this.level,1)+st.DEFAULT_DURATION}};a(st,"DEFAULT_SLOW_RATE",.1),a(st,"DEFAULT_DURATION",0);let Al=st;const Ve=class Ve extends G{constructor(t,e,l){super(t,e,l),this.index=1200,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3024,this.throughoutNum)}}get throughoutNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Ve.DEFAULT_THROUGHOUT_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Ve.DEFAULT_NEXT_EFFECT_RATE,Ve.MAX_NEXT_EFFECT_RATE)}};a(Ve,"DEFAULT_THROUGHOUT_NUM",.5),a(Ve,"DEFAULT_NEXT_EFFECT_RATE",0),a(Ve,"MAX_NEXT_EFFECT_RATE",1);let El=Ve;const nt=class nt extends G{constructor(t,e,l){super(t,e,l),this.index=1210,this.m_updateFunction=()=>{this.m_skillInfo=g.getLanguageStr(3025,O.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+nt.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+nt.DEFAULT_DURATION}};a(nt,"DEFAULT_CHANCES",0),a(nt,"DEFAULT_DURATION",0);let Il=nt;const se=class se extends va{constructor(e,l,s,i=!1){super(e,l,i);a(this,"monster");a(this,"m_levelMax",0);this.monster=s,this.m_data.typeId=ze.TYPE_MONSTER_SKILL}static getKindName(e){switch(e){case v.KIND_FLY:return g.getLanguageStr(2507);case v.KIND_AIRBORNE:return g.getLanguageStr(2510);case v.KIND_RESIST_FIRE:return g.getLanguageStr(2515,g.getLanguageStr(2710));case v.KIND_RESIST_FROST:return g.getLanguageStr(2515,g.getLanguageStr(2711));case v.KIND_RESIST_POISON:return g.getLanguageStr(2515,g.getLanguageStr(2712));case v.KIND_RESIST_SLOW:return g.getLanguageStr(2515,g.getLanguageStr(2719));case v.KIND_RESIST_BEAT:return g.getLanguageStr(2515,g.getLanguageStr(2717));case v.KIND_RESIST_SILENCE:return g.getLanguageStr(2515,g.getLanguageStr(2722));case v.KIND_RESIST_VERTIGO:return g.getLanguageStr(2515,g.getLanguageStr(2715));case v.KIND_RESIST_CRIT:return g.getLanguageStr(2515,g.getLanguageStr(2716));case v.KIND_RESIST_LIGHT:return g.getLanguageStr(2515,g.getLanguageStr(2714));case v.KIND_RESIST_INTIMIDATE:return g.getLanguageStr(2515,g.getLanguageStr(2718));case v.KIND_RESIST_STRSMOOTH:return g.getLanguageStr(2723);case v.KIND_SLOWF:return g.getLanguageStr(2725);case v.KIND_WEAK_FIRE:return g.getLanguageStr(2516,g.getLanguageStr(2710));case v.KIND_WEAK_FROST:return g.getLanguageStr(2516,g.getLanguageStr(2711));case v.KIND_WEAK_POISON:return g.getLanguageStr(2516,g.getLanguageStr(2712));case v.KIND_WEAK_SLOW:return g.getLanguageStr(2516,g.getLanguageStr(2719));case v.KIND_WEAK_BEAT:return g.getLanguageStr(2516,g.getLanguageStr(2717));case v.KIND_WEAK_SILENCE:return g.getLanguageStr(2516,g.getLanguageStr(2722));case v.KIND_WEAK_VERTIGO:return g.getLanguageStr(2516,g.getLanguageStr(2715));case v.KIND_WEAK_CRIT:return g.getLanguageStr(2516,g.getLanguageStr(2716));case v.KIND_WEAK_LIGHT:return g.getLanguageStr(2516,g.getLanguageStr(2714));case v.KIND_WEAK_INTIMIDATE:return g.getLanguageStr(2516,g.getLanguageStr(2718));case v.KIND_ISOLATION:return g.getLanguageStr(2517);case v.KIND_RUN:return g.getLanguageStr(2500);case v.KIND_MIRROR:return g.getLanguageStr(2501);case v.KIND_SUMMON:return g.getLanguageStr(2502);case v.KIND_CLOUD:return g.getLanguageStr(2503);case v.KIND_CURE:return g.getLanguageStr(2504);case v.KIND_BLINK:return g.getLanguageStr(2505);case v.KIND_HIDE:return g.getLanguageStr(2506);case v.KIND_RELIVE:return g.getLanguageStr(2508);case v.KIND_SUICIDE:return g.getLanguageStr(2509);case v.KIND_SHIELD:return g.getLanguageStr(2511);case v.KIND_SNEER:return g.getLanguageStr(2512);case v.KIND_REINCARNATE:return g.getLanguageStr(2514);case v.KIND_TRANSFORM:return g.getLanguageStr(2513);case v.KIND_LINKS:return g.getLanguageStr(2727);default:return""}}get name(){return this.canLevelUp(1)?g.getLanguageStr(2416,this.data.name,this.level):this.data.name}get isDebuff(){return this.grade.indexOf(se.RES_FG_X)!=-1}get skillSign(){return this.isDebuff?ll(g.getLanguageStr(2422),0,!0,13):ll(g.getLanguageStr(2421),16711680,!0,13)}get isDowerSkill(){return!1}get isLearnSkill(){return!1}getConflictStr(){let e=null,l=0,s=0;const i=w.$_conflict_skill_kind;let r="";for(l=0;l<i.length;l++)if(e=i[l],e.indexOf(this.data.kindId)!=-1)for(s=0;s<e.length;s++)e[s]!=this.data.kindId&&(r+=se.getKindName(e[s]),r+=g.getLanguageStr(2406));return r.length>0&&(r=r.slice(0,r.length-1)),r}canLevelUp(e=-1){return e<0&&(e=this.level),e<this.levelMax}get levelMax(){if(this.m_levelMax<=0){const e=w.$_skill_lvup_spend,l=this.grade;if(e[l])for(const s in e[l])this.m_levelMax=Math.max(this.m_levelMax,parseInt(s))+1;else this.m_levelMax=1}return this.m_levelMax}levelUpSpend(e=-1){e<0&&(e=this.level);const l=w.$_skill_lvup_spend,s=this.grade;return l[s]&&l[s][String(e)]?l[s][String(e)]:null}get skillScore(){const e=w.$_skill_grade_score,l=this.grade;return e[l]&&e[l][String(this.level)]?e[l][String(this.level)]:1}get grade(){const e=this.data.id,l=e.indexOf("_");return l==-1?se.RES_FG_X:e.slice(l+1,e.length)}isEventSkill(){switch(this.data.kindId){case v.KIND_RUN:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case v.KIND_FLY:return new Si(this.data.id,this.level,this.monster);case v.KIND_AIRBORNE:return new vl(this.data.id,this.level,this.monster);case v.KIND_RESIST_FIRE:case v.KIND_RESIST_FROST:case v.KIND_RESIST_POISON:case v.KIND_RESIST_SLOW:case v.KIND_RESIST_BEAT:case v.KIND_RESIST_SILENCE:case v.KIND_RESIST_VERTIGO:case v.KIND_RESIST_CRIT:case v.KIND_RESIST_LIGHT:case v.KIND_RESIST_INTIMIDATE:case v.KIND_RESIST_STRSMOOTH:case v.KIND_SLOWF:case v.KIND_WEAK_FIRE:case v.KIND_WEAK_FROST:case v.KIND_WEAK_POISON:case v.KIND_WEAK_SLOW:case v.KIND_WEAK_BEAT:case v.KIND_WEAK_SILENCE:case v.KIND_WEAK_VERTIGO:case v.KIND_WEAK_CRIT:case v.KIND_WEAK_LIGHT:case v.KIND_WEAK_INTIMIDATE:return new Ne(this.data.id,this.level,this.monster);case v.KIND_ISOLATION:return new Ni(this.data.id,this.level,this.monster);case v.KIND_RUN:return new Ci(this.data.id,this.level,this.monster);case v.KIND_MIRROR:return new ba(this.data.id,this.level,this.monster);case v.KIND_SUMMON:return new wa(this.data.id,this.level,this.monster);case v.KIND_CLOUD:return new xi(this.data.id,this.level,this.monster);case v.KIND_CURE:return new bi(this.data.id,this.level,this.monster);case v.KIND_BLINK:return new Di(this.data.id,this.level,this.monster);case v.KIND_HIDE:return new Tl(this.data.id,this.level,this.monster);case v.KIND_RELIVE:return new Na(this.data.id,this.level,this.monster);case v.KIND_SUICIDE:return new Ll(this.data.id,this.level,this.monster);case v.KIND_SHIELD:return new Ri(this.data.id,this.level,this.monster);case v.KIND_SNEER:return new yi(this.data.id,this.level,this.monster);case v.KIND_REINCARNATE:return new Sa(this.data.id,this.level,this.monster);case v.KIND_TRANSFORM:return new Oi(this.data.id,this.level,this.monster);case v.KIND_LINKS:return new wi(this.data.id,this.level,this.monster);default:return this}}};a(se,"RES_SKILL","skill_"),a(se,"RES_FG_A","A"),a(se,"RES_FG_B","B"),a(se,"RES_FG_C","C"),a(se,"RES_FG_Z","Z"),a(se,"RES_FG_X","X"),a(se,"RES_FG_0","0"),a(se,"RES_BG","bg"),a(se,"PHOTO_WIDTH",34),a(se,"PHOTO_HEIGHT",34),a(se,"PHOTO_ROUND",8);let re=se;class ve extends re{constructor(t,e,l){super(t,e,l)}warmup(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cooldown(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}chances(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}eventType(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,3)}duration(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,4)}refreshTag(t=!1){this.skillTag1=this.getTagEventType(),this.nextLevelSkillTag1=this.getTagEventType(this.level+1),this.skillTag2=this.getTagCooldown(),this.nextLevelSkillTag2=this.getTagCooldown(this.level+1),t&&(this.skillTag3=this.getTagDuration(),this.nextLevelSkillTag3=this.getTagDuration(this.level+1))}getTagEventType(t=-1){let e=0;t<0&&(t=this.level);let l="";const s=this.eventType(t);if(s.length!=4){for(e=0;e<s.length;e++)s[e]==v.EVENT_RED?l+=g.getLanguageStr(2402)+g.getLanguageStr(2406):s[e]==v.EVENT_YELLOW?l+=g.getLanguageStr(2403)+g.getLanguageStr(2406):s[e]==v.EVENT_GREEN?l+=g.getLanguageStr(2404)+g.getLanguageStr(2406):s[e]==v.EVENT_FULL&&(l+=g.getLanguageStr(2405)+g.getLanguageStr(2406));l=l.slice(0,l.length-1),l=g.getLanguageStr(2400,l)}return l}getTagCooldown(t=-1){return t<0&&(t=this.level),""+g.getLanguageStr(2401,this.cooldown(t))}getTagDuration(t=-1){return t<0&&(t=this.level),""+g.getLanguageStr(2407,this.duration(t))}}class vl extends re{constructor(t,e,l){super(t,e,l),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2201)}}heightSpeed(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}pathLengthMin(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}pathLengthMax(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}}a(vl,"BALLOON","balloon"),a(vl,"DEFAULT_HEIGHT",2e3);class Di extends ve{constructor(t,e,l){super(t,e,l),this.index=100,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2303,O.toGridStr(this.range())),this.m_nextLevelSkillInfo=g.getLanguageStr(2303,O.toGridStr(this.range(this.level+1))),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}}class xi extends ve{constructor(t,e,l){super(t,e,l),this.index=110,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2302,this.cloudTime()),this.m_nextLevelSkillInfo=g.getLanguageStr(2302,this.cloudTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class bi extends ve{constructor(t,e,l){super(t,e,l),this.index=140,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2300,O.toGridStr(this.cureRange()),O.toPercentage(this.cureRate())),this.m_nextLevelSkillInfo=g.getLanguageStr(2300,O.toGridStr(this.cureRange(this.level+1)),O.toPercentage(this.cureRate(this.level+1))),this.refreshTag()}}cureRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cureRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class Si extends re{constructor(t,e,l){super(t,e,l),this.index=90,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2200),this.m_nextLevelSkillInfo=g.getLanguageStr(2200)}}get flyHeight(){return this.data.getLevelParam(this.level,0)}}class Tl extends ve{constructor(t,e,l){super(t,e,l),this.index=150,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2305,this.duration()),this.m_nextLevelSkillInfo=g.getLanguageStr(2305,this.duration(this.level+1)),this.refreshTag()}}}a(Tl,"HIDE_TIME",1),a(Tl,"HIDE_ALPHA",.1);class Ni extends re{constructor(t,e,l){super(t,e,l),this.index=500,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2202)}}}class wi extends ve{constructor(t,e,l){super(t,e,l),this.index=116,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2728,O.toGridStr(this.range()),O.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=g.getLanguageStr(2728,O.toGridStr(this.range(this.level+1)),O.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class ba extends ve{constructor(t,e,l){super(t,e,l),this.index=130,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2306,this.mirrorNum(),O.toPercentage(this.hpRate()),this.duration()),this.m_nextLevelSkillInfo=g.getLanguageStr(2306,this.mirrorNum(this.level+1),O.toPercentage(this.hpRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}mirrorNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}a(ba,"DEFAULT_DISTANCE",750);class Sa extends re{constructor(t,e,l){super(t,e,l),this.index=85,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2215,this.monsterName()),this.m_nextLevelSkillInfo=g.getLanguageStr(2215,this.monsterName(this.level+1))}}monsterIdList(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}monsterName(t=-1){let e=0;const l=this.monsterIdList(t);let s="";for(e=0;e<l.length;e++)s+=ce.getOnlyExample().getData(l[e]).name,s+=g.getLanguageStr(2406);return s.slice(0,s.length-1),s}}a(Sa,"REINCARNATE_TIME",5);class Na extends re{constructor(t,e,l){super(t,e,l),this.index=170,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2213,this.reliveNum(),O.toPercentage(this.reliveHpRate())),this.m_nextLevelSkillInfo=g.getLanguageStr(2213,this.reliveNum(this.level+1),O.toPercentage(this.reliveHpRate(this.level+1)))}}reliveNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}reliveHpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}a(Na,"RELIVE_TIME",8);class Ne extends re{constructor(e,l,s){super(e,l,s);a(this,"maxHP",0);this.index=300,this.m_updateFunction=function(){this.m_skillInfo=this.resistInfo(),this.m_nextLevelSkillInfo=this.resistInfo(this.level+1)}}getResist(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}getRange(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}getMaxHP(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}resistInfo(e=-1){const l=this.getResist(e);let s="";const i=O.toPercentage(Math.abs(l));return l==0||(l>0?s=g.getLanguageStr(2409):s=g.getLanguageStr(2408),this.data.kindId==v.KIND_SLOWF&&(s=O.toGridStr(this.getRange())),s=g.getLanguageStr(this.resistInfoNumber,s,i),this.data.kindId==v.KIND_RESIST_STRSMOOTH&&this.getMaxHP(e)>0&&(s+=g.getLanguageStr(2730,this.getMaxHP(e)))),s}get resistInfoNumber(){switch(this.data.kindId){case v.KIND_RESIST_FIRE:case v.KIND_WEAK_FIRE:return 2203;case v.KIND_RESIST_FROST:case v.KIND_WEAK_FROST:return 2204;case v.KIND_RESIST_POISON:case v.KIND_WEAK_POISON:return 2205;case v.KIND_RESIST_SLOW:case v.KIND_WEAK_SLOW:return 2206;case v.KIND_RESIST_BEAT:case v.KIND_WEAK_BEAT:return 2207;case v.KIND_RESIST_SILENCE:case v.KIND_WEAK_SILENCE:return 2208;case v.KIND_RESIST_VERTIGO:case v.KIND_WEAK_VERTIGO:return 2209;case v.KIND_RESIST_CRIT:case v.KIND_WEAK_CRIT:return 2210;case v.KIND_RESIST_LIGHT:case v.KIND_WEAK_LIGHT:return 2211;case v.KIND_RESIST_INTIMIDATE:case v.KIND_WEAK_INTIMIDATE:return 2212;case v.KIND_RESIST_STRSMOOTH:return 2724;case v.KIND_SLOWF:return 2726;default:return 0}}}a(Ne,"IMMUNITY",2701),a(Ne,"RESIST_SUPER",2702),a(Ne,"RESIST_HIGH",2703),a(Ne,"RESIST",2704),a(Ne,"FEAR",2705),a(Ne,"FEAR_HIGH",2706),a(Ne,"FEAR_SUPER",2707);class Ci extends ve{constructor(t,e,l){super(t,e,l),this.index=160,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2304,O.toPercentage(this.speedRate()-1),this.duration()),this.m_nextLevelSkillInfo=g.getLanguageStr(2304,O.toPercentage(this.speedRate(this.level+1)-1),this.duration(this.level+1)),this.refreshTag()}}speedRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)+1}}class Ri extends ve{constructor(t,e,l){super(t,e,l),this.index=105,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2308,O.toPercentage(this.shieldRate()),this.shieldTime()),this.m_nextLevelSkillInfo=g.getLanguageStr(2308,O.toPercentage(this.shieldRate(this.level+1)),this.shieldTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}class yi extends ve{constructor(t,e,l){super(t,e,l),this.index=106,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2309,O.toGridStr(this.range()),O.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=g.getLanguageStr(2309,O.toGridStr(this.range(this.level+1)),O.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class Ll extends re{constructor(t,e,l){super(t,e,l),this.index=185,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2214,O.toGridStr(this.cloudRange()),this.cloudTime()),this.m_nextLevelSkillInfo=g.getLanguageStr(2214,O.toGridStr(this.cloudRange(this.level+1)),this.cloudTime(this.level+1))}}cloudRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}a(Ll,"isEveryTime",!0),a(Ll,"SUICIDE_TIME",.5);class wa extends ve{constructor(t,e,l){super(t,e,l),this.index=120,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2301,this.summonNum(),O.toPercentage(this.hpRate()),this.summonName()),this.m_nextLevelSkillInfo=g.getLanguageStr(2301,this.summonNum(this.level+1),O.toPercentage(this.hpRate(this.level+1)),this.summonName(this.level+1)),this.refreshTag(!0)}}summonId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}summonName(t=-1){return t<0&&(t=this.level),ce.getOnlyExample().getData(this.summonId(t)).name}summonNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}a(wa,"DEFAULT_DISTANCE",750);class Oi extends ve{constructor(t,e,l){super(t,e,l),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=g.getLanguageStr(2307,this.transformName()),this.m_nextLevelSkillInfo=g.getLanguageStr(2307,this.transformName(this.level+1)),this.refreshTag(!0)}}transformId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}transformName(t=-1){return t<0&&(t=this.level),ce.getOnlyExample().getData(this.transformId(t)).name}}const De=class De extends Bn{constructor(){super();a(this,"id","");a(this,"skills",{});a(this,"tag");this.tag="BaseUnit"}init(){this.initSkills()}initSkills(){}get data(){return this.m_data}};a(De,"SKILL_ID","skid"),a(De,"SKILL_LEVEL","lev"),a(De,"STATUS_RATE",200),a(De,"STATUS_TIME",De.STATUS_RATE/1e3),a(De,"AOE_SILENCE_RANGE",1e3),a(De,"AOE_SILENCE_TIME",2);let We=De;const it=class it extends We{constructor(e,l=1,s=1,i=0){super();a(this,"index",0);a(this,"m_level",0);a(this,"exp",0);a(this,"hp",0);a(this,"hpMax",0);a(this,"hpRate");a(this,"skillList",[]);this.tag="Monster",this.updateData(e),this.hpRate=s,this.updateLevelExp(l,i),this.index=it.COUNT++}updateData(e){e==""&&(e="dahuil");const l=e.indexOf("|");l!=-1&&(e=e.slice(0,l)),this.m_data=ce.getOnlyExample().getData(e),this.m_data==null&&(this.m_data=ce.getOnlyExample().getData("dahuil"))}createSkills(e){return e.map(l=>new re(l[We.SKILL_ID],l[We.SKILL_LEVEL],this).getSubClasses())}initSkills(){this.skills={};const e=this.data.skills;if(e!=null){this.skillList=this.createSkills(e);for(const l of this.skillList)this.skills[l.data.kindId]=l}}conflictSkillList(e){const l=[];if(e==null)return[];const s=w.$_conflict_skill_kind,i=e.data.kindId;this.skills[i]&&l.push(re.getKindName(i));for(const r of s)if(r.indexOf(i)!=-1)for(let _=0;_<r.length;_++)i!=r[_]&&this.skills[r[_]]&&l.push(re.getKindName(r[_]));return l}getSkillById(e){let l,s=null;for(l in this.skills)if(s=this.skills[l],s.data.id==e)return s;return null}updateLevelExp(e=0,l=0){this.level=e,this.exp=l}get allSkillsScore(){let e=1;for(const l of this.skillList)l.enabled&&(e*=this.getSkillScore(l.data.id,l.level));return e}getSkillScore(e,l){let s=null;const i=w.$_skill_grade_score,r=e.indexOf("_");return e.indexOf("_")==-1?1:(s=e.slice(r+1,e.length),i[s]&&i[s][String(l)]?i[s][String(l)]:1)}get levelMax(){return w.$_camp_wolf_lv_max}get expMax(){const e=this.m_level+1;return Math.round(this.monsterData.expMaxA+this.monsterData.expMaxB*e+this.monsterData.expMaxC*e*e+this.monsterData.expMaxD*e*e*e)}get level(){return this.m_level}set level(e){this.m_level=Math.max(Math.min(e,this.levelMax),0),q.currentMap&&q.currentMap&&(this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate)),this.hpMax<=1&&(this.hpMax=1)}refreshLevel(){this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate*1),this.hpMax<=1&&(this.hpMax=1)}get monsterData(){return this.m_data}get power(){const e=w.$_wolf_worth_factor,l=this.hpMax,s=this.monsterData.speedBase,i=this.allSkillsScore;return Math.round(l*s*i*e[2])}get skillInfo(){if(this.skills==null)return"";const e=Object.values(this.skills);return e.sort((l,s)=>l.index-s.index),e.map(l=>l.skillInfo).join("")}};a(it,"MONSTER_SAY_ARRAY",[g.getLanguageStr(1250),g.getLanguageStr(1251),g.getLanguageStr(1252),g.getLanguageStr(1253),g.getLanguageStr(1254),g.getLanguageStr(1255),g.getLanguageStr(1256),g.getLanguageStr(1257),g.getLanguageStr(1258),g.getLanguageStr(1259)]),a(it,"WEIGHTILY_SIZE",487500),a(it,"COUNT",0);let ct=it;const Ki=P({__name:"WolfSelect",setup(o){return(t,e)=>{const l=pt,s=Qa,i=mt;return f(),R(i,{filterable:""},{default:c(()=>[n(s,{label:"前线"},{default:c(()=>[(f(!0),b(k,null,B(u(Xn),r=>(f(),R(l,{key:r.id,label:r.label,value:r.id},null,8,["label","value"]))),128))]),_:1}),n(s,{label:"防线"},{default:c(()=>[(f(!0),b(k,null,B(u(pa),r=>(f(),R(l,{key:r.id,label:r.label,value:r.id},null,8,["label","value"]))),128))]),_:1}),n(s,{label:"噩梦"},{default:c(()=>[(f(!0),b(k,null,B(u(ha),r=>(f(),R(l,{key:r.id,label:r.label,value:r.id},null,8,["label","value"]))),128))]),_:1})]),_:1})}}}),Pi={class:"text-xs"},ki={class:"sk-tag text-xs"},Vi=P({__name:"MonsterSkillTable",props:{modelValue:{required:!0},modelModifiers:{}},emits:Et(["change"],["update:modelValue"]),setup(o,{emit:t}){const e=oe(o,"modelValue"),l=t,s=j(),i=It(w.$_skillAtt_Obj.monsterSkill,A=>A.kindId);Is(i,(A,I)=>i[I]=fe(A,"id"));const r=Object.keys(i).sort();let _=_e([]);Ae(()=>e.value.data.id,()=>{var A,I;e.value.initSkills(),_.length=0,_.push(...e.value.skillList.map((L,K)=>m(L,K))),(A=s.value)==null||A.clearSelection(),(I=s.value)==null||I.toggleAllSelection()});const m=(A,I=0)=>_e({index:I,kindId:A.data.kindId,id:A.data.id,name:A.data.name,level:A.level,levelMax:A.levelMax,score:A.skillScore,info:A.skillInfo,tags:A.skillTag1+A.skillTag2+A.skillTag3,skill:A});function p(A){A.id=i[A.kindId][0].id,A.level=1,d(A)}const d=A=>{const I=_.indexOf(A),L=new re(A.id,A.level,e.value).getSubClasses();e.value.skillList[I]=L,Object.assign(A,m(L,I)),l("change")},h=()=>{var I;const A=m(new re("WeakFire_X1",1,e.value).getSubClasses(),_.length);_.push(A),(I=s.value)==null||I.toggleRowSelection(A,!0),l("change")},T=A=>{e.value.skillList.forEach(I=>I.enabled=A.find(L=>L.skill==I)!==void 0)};return(A,I)=>{const L=Ue,K=pt,V=mt,C=me,pe=ge;return f(),b("div",null,[n(u(Me),{ref_key:"skillTableRef",ref:s,data:u(_),"row-key":"index",style:{"font-size":"small"},onSelectionChange:T},{default:c(()=>[n(L,{type:"selection","reverse-selection":"",width:30}),n(L,{label:"KindId",width:160,"header-align":"center"},{default:c(H=>[n(V,{modelValue:H.row.kindId,"onUpdate:modelValue":Z=>H.row.kindId=Z,style:{"font-size":"small"},onChange:Z=>p(H.row)},{default:c(()=>[(f(!0),b(k,null,B(u(r),Z=>(f(),R(K,{key:Z,label:Z,value:Z},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(L,{label:"Id",width:200,"header-align":"center"},{default:c(H=>[n(V,{modelValue:H.row.id,"onUpdate:modelValue":Z=>H.row.id=Z,style:{"font-size":"small"},onChange:Z=>d(H.row)},{default:c(()=>[(f(!0),b(k,null,B(u(i)[H.row.kindId],Z=>(f(),R(K,{key:Z.id,label:Z.id,value:Z.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(L,{prop:"name",label:"Name",width:120,"header-align":"center",align:"center"}),n(L,{prop:"level",label:"Level",width:120,"header-align":"center",align:"center"},{default:c(H=>[n(C,{modelValue:H.row.level,"onUpdate:modelValue":Z=>H.row.level=Z,min:1,max:H.row.levelMax,size:"small",style:{width:"80px"},onChange:Z=>d(H.row)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:1}),n(L,{prop:"levelMax",label:"Level Max",width:120,"header-align":"center",align:"center"}),n(L,{prop:"score",label:"Score",width:120,"header-align":"center",align:"center"}),n(L,{label:"Info"},{default:c(H=>[E("span",Pi,x(H.row.info),1),E("span",ki,x(H.row.tags),1)]),_:1})]),_:1},8,["data"]),n(pe,{onClick:h},{default:c(()=>I[0]||(I[0]=[S("增加一行")])),_:1})])}}}),Mi=Ie(Vi,[["__scopeId","data-v-cab482e1"]]),Ui={class:"ml-2"},Fi={class:"ml-8"},$i=P({__name:"MonsterCalcOne",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(o){const t=_e({wid:"al",level:1,expMax:0}),e=oe(o,"modelValue");s();const l=i=>{e.value.updateData(i),s()};Ae(()=>e.value.level,s);function s(){e.value.refreshLevel(),t.expMax=e.value.expMax}return(i,r)=>{const _=be,m=me,p=$e;return f(),b(k,null,[n(p,{"label-width":80},{default:c(()=>[n(_,{label:"狼"},{default:c(()=>[n(Ki,{modelValue:u(t).wid,"onUpdate:modelValue":r[0]||(r[0]=d=>u(t).wid=d),style:{"max-width":"200px"},onChange:l},null,8,["modelValue"])]),_:1}),n(_,{label:"等级"},{default:c(()=>[n(m,{modelValue:e.value.m_level,"onUpdate:modelValue":r[1]||(r[1]=d=>e.value.m_level=d),min:1},null,8,["modelValue"]),E("span",Ui,"最高等级："+x(e.value.levelMax),1)]),_:1}),n(_,{label:"速度"},{default:c(()=>[S(x(e.value.monsterData.speedBase),1)]),_:1}),n(_,{label:"升级经验"},{default:c(()=>[S(x(u(t).expMax),1)]),_:1}),n(_,{label:"血量"},{default:c(()=>[S(x(e.value.hpMax),1)]),_:1}),n(_,{label:"实力"},{default:c(()=>[S(x(e.value.power),1)]),_:1})]),_:1}),E("div",Fi,[r[3]||(r[3]=E("p",null,"技能",-1)),n(Mi,{modelValue:e.value,"onUpdate:modelValue":r[2]||(r[2]=d=>e.value=d)},null,8,["modelValue"])])],64)}}}),Bi=P({__name:"index",setup(o){const t=_e([new ct("dahuil")]),e=j(t[0].index),l=M(()=>{const[i,r]=w.$_wolf_worth_factor;return Math.round(Math.pow(Xe(t,_=>Math.pow(_.power,i)),r))}),s=(i,r)=>{if(r==="add"){const _=new ct("dahuil");t.push(_),e.value=_.index}else if(r==="remove"){const _=t;let m=e.value;m===i&&_.forEach((p,d)=>{if(p.index===i){const h=_[d+1]||_[d-1];h&&(m=h.index)}}),e.value=m,t.splice(t.findIndex(p=>p.index===i),1)}};return(i,r)=>{const _=yt,m=_t;return f(),b("div",null,[r[1]||(r[1]=E("h2",null,"狼相关计算",-1)),E("div",null,"总实力："+x(u(l)),1),n(m,{modelValue:u(e),"onUpdate:modelValue":r[0]||(r[0]=p=>te(e)?e.value=p:null),type:"border-card",editable:"",class:"m-4",onEdit:s},{default:c(()=>[(f(!0),b(k,null,B(u(t),(p,d)=>(f(),R(_,{key:p.index,label:p.monsterData.name,name:p.index},{default:c(()=>[n($i,{modelValue:u(t)[d],"onUpdate:modelValue":h=>u(t)[d]=h},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])}}}),Hi=Object.freeze(Object.defineProperty({__proto__:null,default:Bi},Symbol.toStringTag,{value:"Module"})),Gi=P({__name:"MonsterSkillTable",setup(o){const t=M(()=>It(vs(w.$_wolfAtt_Obj,s=>s.skills.map(i=>({skid:i.skid,lev:i.lev,owner_name:ue(s.id),owner_id:s.id}))),"skid")),e=M(()=>Ts(ut(It(w.$_skillAtt_Obj.monsterSkill,s=>s.kindId),s=>fe(s,"id"))).map(s=>Object.assign({},s,{owners:t.value[s.id]}))),l=[{key:"kindId",dataKey:"kindId",title:"kindId",width:100,align:"center"},{key:"id",dataKey:"id",title:"id",width:150,align:"center"},{key:"name",dataKey:"name",title:"name",width:100,align:"center"},{key:"levels",dataKey:"levels",title:"levels",width:300,cellRenderer:({cellData:s})=>n("div",null,[s.map((i,r)=>n("p",null,[" ",r+1,S(": "),n("code",null,[S("["),i.map(_=>JSON.stringify(_)).join(", "),S("]")])]))])},{key:"owners",dataKey:"owners",title:"owners",width:550,cellRenderer:({cellData:s})=>n("div",{class:"flex flex-wrap gap-0.5"},[s==null?void 0:s.map(i=>n(Fe,null,{default:()=>[n("ruby",null,[i.owner_name,S(" "),n("rt",null,[i.owner_id])]),n("sup",null,[i.lev])]}))])}];return(s,i)=>{const r=es;return f(),R(r,{columns:l,data:u(e),width:1200,height:600,"estimated-row-height":40},null,8,["data"])}}}),ji=P({__name:"index",setup(o){return(t,e)=>(f(),b("div",null,[n(Gi)]))}}),Wi=Object.freeze(Object.defineProperty({__proto__:null,default:ji},Symbol.toStringTag,{value:"Module"})),Xi={class:"sk-list"},zi={key:0,class:"sk-debuff"},Yi={key:1,class:"sk-buff"},qi={class:"sk-name"},Ji={class:"sk-id"},Zi={class:"sk-info"},Qi={key:2,class:"sk-tag"},eo={key:3,class:"sk-tag"},to={key:4,class:"sk-tag"},lo=P({__name:"index",setup(o){const t=["前线","随机Boss","Boss","噩梦Boss","大本营"].map(l=>({text:l,value:l})),e=ut(w.$_wolfAtt_Obj,(l,s)=>s).sort().map(l=>{let s=new ct(l,0,0);s.initSkills();let i=s.monsterData;return{id:l,data:i,skills:Object.values(s.skills),group:i.rawName.startsWith("camp_")?"大本营":i.id.startsWith("D_")?"噩梦Boss":i.population===99?"随机Boss":i.population===100?"Boss":"前线"}});return(l,s)=>{const i=Ue,r=Me;return f(),b(k,null,[s[0]||(s[0]=E("h1",null,"狼数据",-1)),s[1]||(s[1]=E("p",null,"前排解释：",-1)),s[2]||(s[2]=E("p",null,"pop 为狼在一波中占的容量，一般来说 pop 越大则出现机会越少。",-1)),s[3]||(s[3]=E("p",null,"charm 影响到寻路，charm 为负值越小则其他狼越会排斥它。",-1)),s[4]||(s[4]=E("p",null,"hp_factor 影响血量关于等级增长，是二次函数系数。",-1)),n(r,{data:u(e),"default-sort":{prop:"id",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},"row-key":"id","max-height":"600",style:{width:"100%","max-width":"1280px"}},{default:c(()=>[n(i,{prop:"id",label:"id",sortable:"",width:150}),n(i,{prop:"group",label:"group",sortable:"",filters:u(t),"filter-method":(_,m)=>m.group===_,width:100},null,8,["filters","filter-method"]),n(i,{prop:"data.name",label:"name",sortable:""}),n(i,{prop:"data.speedBase",label:"speedBase",sortable:""}),n(i,{prop:"data.population",label:"population",sortable:""}),n(i,{prop:"data.charm",label:"charm",sortable:"",width:80}),n(i,{label:"size"},{default:c(()=>[n(i,{prop:"data.width",label:"width",sortable:"",width:100}),n(i,{prop:"data.height",label:"height",sortable:"",width:100})]),_:1}),n(i,{label:"hpFactor"},{default:c(()=>[n(i,{prop:"data.hpMaxA",label:"a",sortable:"",width:90}),n(i,{prop:"data.hpMaxB",label:"b",sortable:"",width:80}),n(i,{prop:"data.hpMaxC",label:"c",sortable:"",width:80})]),_:1}),n(i,{label:"skills",type:"expand",width:"60"},{default:c(_=>[E("div",Xi,[(f(!0),b(k,null,B(_.row.skills,m=>(f(),b("p",{key:m.data.id},[m.isDebuff?(f(),b("span",zi,"↓")):(f(),b("span",Yi,"↑")),E("span",qi,x(m.name),1),E("span",Ji,"["+x(m.data.id)+"]",1),E("span",Zi,x(m.skillInfo),1),m.skillTag1?(f(),b("span",Qi,x(m.skillTag1),1)):ne("",!0),m.skillTag2?(f(),b("span",eo,x(m.skillTag2),1)):ne("",!0),m.skillTag3?(f(),b("span",to,x(m.skillTag3),1)):ne("",!0)]))),128))])]),_:1})]),_:1},8,["data"])],64)}}}),ao=Ie(lo,[["__scopeId","data-v-364d31db"]]),so=Object.freeze(Object.defineProperty({__proto__:null,default:ao},Symbol.toStringTag,{value:"Module"}));class no extends We{constructor(){super()}get buildingData(){return this.m_data}get range(){return this.buildingData.range}get skillInfo(){const t=Object.values(this.skills);t.sort((l,s)=>l.index-s.index);const e=t.map(l=>l.skillInfo).filter(l=>l!="").join(`
`);return e==""?this.buildingData.info:e}}class io extends We{constructor(e){super();a(this,"damage",0);a(this,"range",0);a(this,"attackType");this.m_data=tl.getOnlyExample().getData(e),this.attackType=Zt.EFFECT_TYPE_ALL}get bulletData(){return this.m_data}}const dt=class dt extends no{constructor(e){super();a(this,"m_level",0);a(this,"gem",null);a(this,"m_attackType","");this.tag="Tower",e&&(this.m_data=Qt.getOnlyExample().getData(e),this.initTower()),this.level=1}static fromData(e){const l=new dt(null);return l.m_data=e,l.initTower(),l}get towerData(){return this.m_data}initTower(){this.initSkills()}initSkills(){if(this.skills={},this.towerData.skillPackageId!=""){const e=new ua(this.towerData.skillPackageId,this.towerData.skillPackageLevel);if(e!=null&&e.skillsPackageData!=null)for(const l of e.skillsPackageData.skillsList){const s=new G(l,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}}if(this.gem){const e=this.gem.gemData.getSkillPackage(this.data.id);if(e!=null&&e.skillsPackageData!=null)for(const l of e.skillsPackageData.skillsList){const s=new G(l,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}this.skills[N.KIND_SCATTER_ATTACK]&&delete this.skills[N.KIND_DIVIDED_ATTACK]}}get color(){return this.gem!=null?this.gem.gemData.color:6316128}get level(){return this.m_level}set level(e){this.m_level=e}get gemLevel(){return this.gem?this.gem.gemData.gemLevel:0}get ability(){const e=this.gemLevel;return this.towerData.isMagicTower?e==0?0:this.m_level*(.8+e/5)*2:this.m_level*(1+e/10)}get power(){const e=this.level,l=w.$_tower_worth_factor,s=this.gemLevel,i=this.valueCostConst(e);return Math.round((i+Math.pow(s,l[0])*l[1])*(l[2]+s/l[3]))}buildValue(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildValueA+this.towerData.buildValueB*e+this.towerData.buildValueC*e*e)}buildCost(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildCostA+this.towerData.buildCostB*e+this.towerData.buildCostC*e*e)}valueCost(e=-1){e==-1&&(e=this.level);const l=e*this.towerData.buildCostA+(e*e+e)/2*this.towerData.buildCostB+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostC+this.towerData.buildCost-this.towerData.buildCostA-this.towerData.buildCostB-this.towerData.buildCostC;return Math.round(l)}valueCostConst(e=-1){e==-1&&(e=this.level);const l=e*this.towerData.buildCostAConst+(e*e+e)/2*this.towerData.buildCostBConst+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostCConst+this.towerData.buildCostConst-this.towerData.buildCostAConst-this.towerData.buildCostBConst-this.towerData.buildCostCConst;return Math.round(l)}buffEffect(e=-1){return e==-1&&(e=this.level),this.towerData.buffEffect*e+1}damage(e=-1){let l=0;if(e==-1&&(e=this.level),this.skills[N.KIND_CHANGE_DAMAGE]instanceof La){const s=this.skills[N.KIND_CHANGE_DAMAGE];s.isChangeBase()?l=Math.round((s.damageA+s.damageB*e+s.damageC*e*e)*s.damageRate+s.damageAdd):l=Math.round((this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e)*s.damageRate+s.damageAdd)}else l=Math.round(this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e);return Math.max(l,0)}get range(){let e=0;if(this.skills[N.KIND_CHANGE_RANGE]instanceof Da){const l=this.skills[N.KIND_CHANGE_RANGE];l.isChangeBase()?e=l.range*l.rangeRate+l.rangeAdd:e=this.towerData.range*l.rangeRate+l.rangeAdd}else e=this.towerData.range;return e}get rate(){let e=0;if(this.skills[N.KIND_CHANGE_RATE]instanceof xa){const l=this.skills[N.KIND_CHANGE_RATE];l.isChangeBase()?e=Math.round(l.rate*l.rateRate):e=Math.round(this.towerData.rate*l.rateRate)}else e=this.towerData.rate;return e}setGem(e){this.gem=e,this.initSkills()}newBullet(){return new io(this.getBulletId())}getBulletId(){let e=null;return this.skills[N.KIND_CHANGE_BULLET]instanceof Ta?(e=this.skills[N.KIND_CHANGE_BULLET],e.bulletId):this.towerData.bulletId}getInfoHtml(){return ll(this.skillInfo,this.color,!1,"14px")}};a(dt,"TOWER","tower"),a(dt,"GEM","gem");let xt=dt;const oo={class:"space-x-2"},ro=P({__name:"TowerDataForm",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(o){const t=oe(o,"modelValue"),e=j("shaota"),l=M(()=>w.$_towerAtt_Obj[e.value]);return Ae(l,s=>{t.value.m_data=new Kl(s)}),(s,i)=>{const r=Ee,_=be,m=me,p=$e,d=Ct;return f(),R(d,null,{default:c(()=>[n(p,{"label-width":"100px"},{default:c(()=>[n(_,{label:"原型"},{default:c(()=>[n(r,{modelValue:u(e),"onUpdate:modelValue":i[0]||(i[0]=h=>te(e)?e.value=h:null),options:u(Aa),"value-key":"id",style:{"max-width":"150px"}},null,8,["modelValue","options"])]),_:1}),n(_,{label:"等级"},{default:c(()=>[n(m,{modelValue:t.value.m_level,"onUpdate:modelValue":i[1]||(i[1]=h=>t.value.m_level=h)},null,8,["modelValue"])]),_:1}),n(_,{label:"damage"},{default:c(()=>[E("div",oo,[E("span",null,[i[8]||(i[8]=S(" a: ")),n(m,{modelValue:t.value.towerData.damageA,"onUpdate:modelValue":i[2]||(i[2]=h=>t.value.towerData.damageA=h),"controls-position":"right",step:u(Be)(u(l).damage.a),style:{width:"100px"}},null,8,["modelValue","step"])]),E("span",null,[i[9]||(i[9]=S(" b: ")),n(m,{modelValue:t.value.towerData.damageB,"onUpdate:modelValue":i[3]||(i[3]=h=>t.value.towerData.damageB=h),"controls-position":"right",step:u(Be)(u(l).damage.b),style:{width:"100px"}},null,8,["modelValue","step"])]),E("span",null,[i[10]||(i[10]=S(" c: ")),n(m,{modelValue:t.value.towerData.damageC,"onUpdate:modelValue":i[4]||(i[4]=h=>t.value.towerData.damageC=h),"controls-position":"right",step:u(Be)(u(l).damage.c),style:{width:"100px"}},null,8,["modelValue","step"])])])]),_:1}),n(_,{label:"rate"},{default:c(()=>[n(m,{modelValue:t.value.towerData.rate,"onUpdate:modelValue":i[5]||(i[5]=h=>t.value.towerData.rate=h),step:u(Be)(u(l).rate)},null,8,["modelValue","step"])]),_:1}),n(_,{label:"range"},{default:c(()=>[n(m,{modelValue:t.value.towerData.range,"onUpdate:modelValue":i[6]||(i[6]=h=>t.value.towerData.range=h),step:u(Be)(u(l).range)},null,8,["modelValue","step"])]),_:1}),n(_,{label:"buffEffect"},{default:c(()=>[n(m,{modelValue:t.value.towerData.buffEffect,"onUpdate:modelValue":i[7]||(i[7]=h=>t.value.towerData.buffEffect=h),step:u(Be)(u(l).buffEffect)},null,8,["modelValue","step"])]),_:1})]),_:1})]),_:1})}}}),uo=P({__name:"TowerSkillInfo",props:{tower:{}},setup(o){return(t,e)=>(f(),b("div",{class:"tower-info",style:bl({color:u(Zn)(t.tower.color)})},[(f(!0),b(k,null,B(t.tower.skillInfo.split(`
`),(l,s)=>(f(),b("p",{key:s},x(l),1))),128))],4))}}),Ca=Ie(uo,[["__scopeId","data-v-8d267a89"]]),co=P({__name:"TowerInfo",props:{tower:{}},setup(o){return(t,e)=>{const l=be,s=$e,i=Ct;return f(),R(i,null,{default:c(()=>[n(s,{"label-width":"80px"},{default:c(()=>[n(l,{label:"damage"},{default:c(()=>[S(x(t.tower.damage()),1)]),_:1}),n(l,{label:"rate"},{default:c(()=>[S(x(t.tower.rate),1)]),_:1}),n(l,{label:"range"},{default:c(()=>[S(x(t.tower.range),1)]),_:1}),n(l,{label:"简介"},{default:c(()=>[n(Ca,{tower:t.tower},null,8,["tower"])]),_:1})]),_:1})]),_:1})}}}),_o={key:0,class:"ml-2 space-x-2"},mo=P({__name:"TowerSkillItem",props:{tower:{required:!0},towerModifiers:{},modelValue:{required:!0},modelModifiers:{}},emits:["update:tower","update:modelValue"],setup(o){const t=oe(o,"tower"),e=oe(o,"modelValue"),l=j(),s=M(()=>Object.keys(jl).filter(r=>!(r in t.value.skills)).map(r=>({label:r,value:r}))),i=()=>{l.value=jl[e.value.kindId],e.value.params=l.value.params.slice()};return Ae(()=>e.value.kindId,(r,_)=>{var m;if(_!=r){delete t.value.skills[_];const p=new G(l.value.id,((m=t.value.skills[r])==null?void 0:m.level)??50,t.value).getSubClasses();p.m_data=new N(e.value),t.value.skills[r]=p}}),Ae(e,r=>{t.value.skills[r.kindId].m_data=new N(r)},{deep:!0}),is(()=>{e.value.kindId&&delete t.value.skills[e.value.kindId]}),(r,_)=>{const m=Ee,p=Rt,d=me;return f(),b("div",null,[n(m,{modelValue:e.value.kindId,"onUpdate:modelValue":[_[0]||(_[0]=h=>e.value.kindId=h),i],options:u(s),style:{"max-width":"160px"}},null,8,["modelValue","options"]),u(l)?(f(),b("span",_o,[(f(!0),b(k,null,B(u(l).params,(h,T)=>(f(),b(k,{key:T},[typeof h=="string"?(f(),R(p,{key:0,modelValue:e.value.params[T],"onUpdate:modelValue":A=>e.value.params[T]=A,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])):ne("",!0),typeof h=="number"?(f(),R(d,{key:1,modelValue:e.value.params[T],"onUpdate:modelValue":A=>e.value.params[T]=A,size:"small","controls-position":"right",step:u(Be)(h),style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue","step"])):ne("",!0)],64))),128))])):ne("",!0)])}}}),po=P({__name:"TowerSkillTable",props:{tower:{required:!0},towerModifiers:{}},emits:["update:tower"],setup(o){const t=oe(o,"tower"),e=_e([]),l=j(),s=()=>{e.push({data:{kindId:"",params:[]}})},i=r=>{e.splice(r,1)};return(r,_)=>{const m=Ue,p=me,d=ge;return f(),b("div",null,[n(u(Me),{ref_key:"skillTableRef",ref:l,data:u(e),stripe:"",border:"","table-layout":"auto",style:{"font-size":"small"}},{default:c(()=>[n(m,{label:"Skill","header-align":"center"},{default:c(h=>[n(mo,{modelValue:h.row.data,"onUpdate:modelValue":T=>h.row.data=T,tower:t.value,"onUpdate:tower":_[0]||(_[0]=T=>t.value=T)},null,8,["modelValue","onUpdate:modelValue","tower"])]),_:1}),n(m,{label:"Level","header-align":"center",width:130},{default:c(h=>[t.value.skills[h.row.data.kindId]?(f(),R(p,{key:0,modelValue:t.value.skills[h.row.data.kindId].level,"onUpdate:modelValue":T=>t.value.skills[h.row.data.kindId].level=T,style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"])):ne("",!0)]),_:1}),n(m,{label:"Info","header-align":"center"},{default:c(h=>{var T;return[S(x((T=t.value.skills[h.row.data.kindId])==null?void 0:T.skillInfo),1)]}),_:1}),n(m,{label:"操作",width:100,align:"center"},{default:c(h=>[n(d,{size:"small",type:"danger",onClick:T=>i(h.$index)},{default:c(()=>_[1]||(_[1]=[S(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),n(d,{onClick:s},{default:c(()=>_[2]||(_[2]=[S("新增")])),_:1})])}}}),ho=P({__name:"index",setup(o){const t=_e(new xt(null));return t.m_data=new Kl(w.$_towerAtt_Obj.shaota),(e,l)=>{const s=Kt,i=Ot;return f(),b(k,null,[n(i,{gutter:20},{default:c(()=>[n(s,{span:12},{default:c(()=>[n(ro,{modelValue:u(t),"onUpdate:modelValue":l[0]||(l[0]=r=>te(t)?t.value=r:null)},null,8,["modelValue"])]),_:1}),n(s,{span:12},{default:c(()=>[n(co,{tower:u(t)},null,8,["tower"])]),_:1})]),_:1}),n(po,{tower:u(t),class:"mt-2"},null,8,["tower"])],64)}}}),go=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"}));class fo extends gt{constructor(t){super(),this.m_data=Jt.getOnlyExample().getData(t)}get gemData(){return this.m_data}}const Ao=P({__name:"index",setup(o){const t=Bt({isDefendMap:!1,towerId:"shaota",gemId:"",level:1,buildFrom:0,buildTo:1,buildPower:50}),e=fe(Object.entries(w.$_global_properties.gem),r=>Number(Math.abs(r[1].index))).map(r=>[`${r[1].name} [${r[1].index}]`,r[0]]),l=M(()=>{const r=new xt(t.towerId);return r.level=t.level,t.gemId!==""&&r.setGem(new fo(t.gemId)),r}),s=()=>{q.currentMap=new q(t.isDefendMap?q.DEFEND_MAP_1:q.ENDLESS_MAP_1)},i=M(()=>{let r=0;if(t.buildFrom>t.buildTo)return NaN;for(let _=t.buildFrom+1;_<=t.buildTo;_++)r+=l.value.buildValue(_);return Math.round(r/t.buildPower)});return(r,_)=>{const m=Yl,p=be,d=Ee,h=Kt,T=pt,A=mt,I=Ot,L=me,K=$e;return f(),R(K,{model:u(t),"label-width":"120px"},{default:c(()=>[n(p,{label:"是否为防线"},{default:c(()=>[n(m,{modelValue:u(t).isDefendMap,"onUpdate:modelValue":_[0]||(_[0]=V=>u(t).isDefendMap=V),onChange:s},null,8,["modelValue"])]),_:1}),n(I,null,{default:c(()=>[n(h,{span:12},{default:c(()=>[n(p,{label:"塔"},{default:c(()=>[n(d,{modelValue:u(t).towerId,"onUpdate:modelValue":_[1]||(_[1]=V=>u(t).towerId=V),options:u(Aa),style:{"max-width":"150px"}},null,8,["modelValue","options"])]),_:1})]),_:1}),n(h,{span:12},{default:c(()=>[n(p,{label:"宝石"},{default:c(()=>[n(A,{modelValue:u(t).gemId,"onUpdate:modelValue":_[2]||(_[2]=V=>u(t).gemId=V),style:{"max-width":"200px"}},{default:c(()=>[n(T,{label:"无",value:""}),(f(!0),b(k,null,B(u(e),([V,C])=>(f(),R(T,{key:C,label:V,value:C},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(I,null,{default:c(()=>[n(h,{span:8},{default:c(()=>[n(p,{label:"等级"},{default:c(()=>[n(L,{modelValue:u(t).level,"onUpdate:modelValue":_[3]||(_[3]=V=>u(t).level=V),min:1},null,8,["modelValue"])]),_:1})]),_:1}),n(h,{span:8},{default:c(()=>[n(p,{label:"等级上限"},{default:c(()=>[E("label",null,x(u(l).towerData.levelMax),1)]),_:1})]),_:1}),n(h,{span:8},{default:c(()=>[n(p,{label:"升级经验"},{default:c(()=>[E("label",null,x(u(l).buildValue(u(l).level+1)),1)]),_:1})]),_:1})]),_:1}),n(I,null,{default:c(()=>[n(h,{span:8},{default:c(()=>[n(p,{label:"攻击力"},{default:c(()=>[E("label",null,x(u(l).damage()),1)]),_:1})]),_:1}),n(h,{span:8},{default:c(()=>[n(p,{label:"攻击频率"},{default:c(()=>[E("label",null,x(u(l).rate),1)]),_:1})]),_:1}),n(h,{span:8},{default:c(()=>[n(p,{label:"攻击范围"},{default:c(()=>[E("label",null,x(u(l).range),1)]),_:1})]),_:1})]),_:1}),n(p,{label:"简介"},{default:c(()=>[n(Ca,{tower:u(l)},null,8,["tower"])]),_:1}),n(I,null,{default:c(()=>[n(h,{span:8},{default:c(()=>[n(p,{label:"ability"},{default:c(()=>[E("label",null,x(u(l).ability.toFixed(1)),1)]),_:1})]),_:1}),n(h,{span:8},{default:c(()=>[n(p,{label:"power"},{default:c(()=>[E("label",null,x(u(l).power),1)]),_:1})]),_:1}),n(h,{span:8},{default:c(()=>[n(p,{label:"buffEffect"},{default:c(()=>[E("label",null,x(u(l).buffEffect().toFixed(1)),1)]),_:1})]),_:1})]),_:1}),n(I,null,{default:c(()=>[n(h,{span:8},{default:c(()=>[n(p,{label:"buildValue"},{default:c(()=>[E("label",null,x(u(l).buildValue()),1)]),_:1})]),_:1}),n(h,{span:8},{default:c(()=>[n(p,{label:"buildCost"},{default:c(()=>[E("label",null,x(u(l).buildCost()),1)]),_:1})]),_:1}),n(h,{span:8},{default:c(()=>[n(p,{label:"valueCost"},{default:c(()=>[E("label",null,x(u(l).valueCost()),1)]),_:1})]),_:1})]),_:1}),E("div",null,[n(p,{label:"升级计算",style:{"margin-bottom":"0 !important"}},{default:c(()=>[_[7]||(_[7]=S(" 从 ")),n(L,{modelValue:u(t).buildFrom,"onUpdate:modelValue":_[4]||(_[4]=V=>u(t).buildFrom=V),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),_[8]||(_[8]=S(" 级到 ")),n(L,{modelValue:u(t).buildTo,"onUpdate:modelValue":_[5]||(_[5]=V=>u(t).buildTo=V),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),_[9]||(_[9]=S(" 级， 苦工总力量 ")),n(L,{modelValue:u(t).buildPower,"onUpdate:modelValue":_[6]||(_[6]=V=>u(t).buildPower=V),size:"small","controls-position":"right",style:{width:"8em",margin:"0.5em"}},null,8,["modelValue"])]),_:1}),n(p,{style:{"margin-bottom":"0 !important"}},{default:c(()=>[_[10]||(_[10]=S(" 需要时间：")),E("label",null,x(u(Ei)(u(i))),1)]),_:1}),_[11]||(_[11]=E("p",null,"注：升级经验为塔下一级的 buildValue 值",-1))])]),_:1},8,["model"])}}}),Eo=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),Ra=P({__name:"WaveDistribChart",props:{mapData:{},height:{default:600},width:{default:600}},setup(o){Vt([Rl,bs,Mt,Ut,Ft,Ss,$t,Ns]);const t=o,e=M(()=>Wn(t.mapData)),l=M(()=>[t.mapData.name,...ue(t.mapData.monsterList)]),s=M(()=>ta(e.value.all.length)),i=M(()=>kt(l.value,[e.value.all,...e.value.each]).map(_=>({title:_[0],pdf:_[1],cdf:[...Zs(_[1])]}))),r=M(()=>({color:i.value.flatMap(_=>[ot(_.title,70,50),ot(_.title,50,80)]),tooltip:{trigger:"axis",valueFormatter:_=>Ai(_,6)},title:i.value.map((_,m)=>({text:_.title,left:"center",textVerticalAlign:"middle",top:t.height*((m+.5)/i.value.length)-5,z:-1,textStyle:{fontSize:t.height/i.value.length*.4,color:"#ccc"}})),xAxis:i.value.map((_,m)=>({gridIndex:m,type:"category",axisTick:{alignWithLabel:!0},data:s.value})),yAxis:i.value.flatMap((_,m)=>[{gridIndex:m,type:"value",alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}},{gridIndex:m,type:"value",position:"right",min:0,max:1,interval:.2,alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}}]),grid:i.value.map((_,m)=>({top:t.height*(m/i.value.length)+10,bottom:t.height*(1-(m+1)/i.value.length)+20})),series:i.value.flatMap((_,m)=>[{xAxisIndex:m,yAxisIndex:m*2,type:"bar",barWidth:"90%",data:_.pdf},{xAxisIndex:m,yAxisIndex:m*2+1,type:"line",smooth:!0,data:_.cdf}])}));return(_,m)=>{const p=Se("v-chart");return f(),b("div",null,[m[0]||(m[0]=E("h2",{style:{"text-align":"center"}},"狼出现频率（按数量，供参考）",-1)),n(p,{option:u(r),autoresize:"",style:{height:"600px"}},null,8,["option"])])}}}),Io={class:"text-center markup-table table-auto"},vo=P({__name:"UmapRandomBossTable",props:{mapData:{}},setup(o){const t=o,{mapData:e}=Zl(t);let l=0;const s=()=>kt(e.value.randomBossList,_a(e.value.randomBossList.map(p=>p[0]))).map(p=>({index:l++,id:p[0][1],weight:p[1],diff:parseFloat(p[0][2])})),i=_e(s()),r=j(null),_=M(()=>Xe(i,"weight"));Ae(e,()=>i.splice(0,i.length,...s())),Ae(i,()=>{const p=ma(i.map(d=>d.weight));e.value.randomBossList=i.map((d,h)=>[p[h],d.id,d.diff.toFixed(1),{}])},{deep:!0});const m=p=>{i.push({index:l++,id:p,weight:1,diff:1}),r.value=null};return(p,d)=>{const h=Ee,T=me;return f(),b("table",Io,[d[1]||(d[1]=E("thead",null,[E("th",null,"Boss"),E("th",null,"权重"),E("th",null,"概率"),E("th",null,"难度系数")],-1)),E("tbody",null,[(f(!0),b(k,null,B(u(i),(A,I)=>(f(),b("tr",{key:I},[E("td",null,[(f(),R(h,{key:A.index,modelValue:A.id,"onUpdate:modelValue":L=>A.id=L,options:u(zl),filterable:"",clearable:"",size:"small",style:{width:"200px"},onClear:L=>u(i).removeAt(I)},null,8,["modelValue","onUpdate:modelValue","options","onClear"]))]),E("td",null,[n(T,{modelValue:A.weight,"onUpdate:modelValue":L=>A.weight=L,min:0,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])]),E("td",null,x((A.weight/u(_)).toFixed(3)),1),E("td",null,[n(Ea,{modelValue:A.diff,"onUpdate:modelValue":L=>A.diff=L,style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])])]))),128)),E("tr",null,[E("td",null,[n(h,{modelValue:u(r),"onUpdate:modelValue":d[0]||(d[0]=A=>te(r)?r.value=A:null),options:u(zl),filterable:"",size:"small",onChange:m},null,8,["modelValue","options"])])])])])}}}),To={class:"text-center markup-table"},Lo=P({__name:"UmapWolfTable",props:{mapData:{}},setup(o){const t=o,{mapData:e}=Zl(t);let l=0;const s=()=>kt(e.value.monsterProportion,_a(e.value.monsterProportion.map(d=>d[0]))).map(d=>({index:l++,id:d[0][1],weight:d[1]})),i=_e(s()),r=j(null),_=M(()=>i.map(d=>ce.getOnlyExample().getData(d.id))),m=M(()=>Xe(i,"weight"));Ae(e,()=>i.splice(0,i.length,...s())),Ae(i,()=>{const d=ma(i.map(h=>h.weight));e.value.monsterList=i.map(h=>h.id),e.value.monsterProportion=i.map((h,T)=>[d[T],h.id])},{deep:!0});const p=d=>{i.push({index:l++,id:d,weight:1}),r.value=null};return(d,h)=>{const T=Ee,A=me;return f(),b("table",To,[h[1]||(h[1]=E("thead",null,[E("th",null,"狼"),E("th",null,"权重"),E("th",null,"概率"),E("th",null,"pop")],-1)),E("tbody",null,[(f(!0),b(k,null,B(u(i),(I,L)=>(f(),b("tr",{key:L},[E("td",null,[(f(),R(T,{key:I.index,modelValue:I.id,"onUpdate:modelValue":K=>I.id=K,options:u(Xl),filterable:"",clearable:"",size:"small",style:{width:"200px"},onClear:K=>u(i).removeAt(L)},null,8,["modelValue","onUpdate:modelValue","options","onClear"]))]),E("td",null,[n(A,{modelValue:I.weight,"onUpdate:modelValue":K=>I.weight=K,min:0,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])]),E("td",null,x((I.weight/u(m)).toFixed(3)),1),E("td",null,x(u(_)[L].population),1)]))),128)),E("tr",null,[E("td",null,[n(T,{modelValue:u(r),"onUpdate:modelValue":h[0]||(h[0]=I=>te(r)?r.value=I:null),options:u(Xl),filterable:"",size:"small",onChange:p},null,8,["modelValue","options"])])])])])}}}),Do={class:"space-x-2"},xo=P({__name:"UmapDataForm",props:{mapData:{default:new rt(w.$_map_Obj.m0B)},mapDataModifiers:{}},emits:["update:mapData"],setup(o){const t=j(w.$_map_Obj.m0B),e=oe(o,"mapData"),l=_e({mid:"m0B",wid:"dahuil",score:0,diff:1});Sl(()=>{t.value=w.$_map_Obj[l.mid],e.value=new rt(t.value)});const s=M(()=>e.value.monsterList.map(i=>ce.getOnlyExample().getData(i)));return(i,r)=>{const _=Ee,m=be,p=Rt,d=me,h=ql,T=$e;return f(),R(T,{model:u(l),"label-width":"120px"},{default:c(()=>[n(m,{label:"原型"},{default:c(()=>[n(_,{modelValue:u(l).mid,"onUpdate:modelValue":r[0]||(r[0]=A=>u(l).mid=A),options:u(fa),filterable:"",style:{"max-width":"200px"}},null,8,["modelValue","options"])]),_:1}),n(m,{label:"名称"},{default:c(()=>[n(p,{modelValue:e.value.name,"onUpdate:modelValue":r[1]||(r[1]=A=>e.value.name=A),style:{width:"200px"}},null,8,["modelValue"])]),_:1}),n(m,{label:"通关进度"},{default:c(()=>[n(d,{modelValue:e.value.scoreMax,"onUpdate:modelValue":r[2]||(r[2]=A=>e.value.scoreMax=A)},null,8,["modelValue"])]),_:1}),n(m,{label:"Population"},{default:c(()=>[n(d,{modelValue:e.value.populationMax,"onUpdate:modelValue":r[3]||(r[3]=A=>e.value.populationMax=A)},null,8,["modelValue"])]),_:1}),n(m,{label:"难度系数"},{default:c(()=>[E("div",Do,[r[6]||(r[6]=E("span",null,"A",-1)),n(d,{modelValue:e.value.hardA,"onUpdate:modelValue":r[4]||(r[4]=A=>e.value.hardA=A),size:"small"},null,8,["modelValue"]),r[7]||(r[7]=E("span",null,"B",-1)),n(d,{modelValue:e.value.hardB,"onUpdate:modelValue":r[5]||(r[5]=A=>e.value.hardB=A),size:"small"},null,8,["modelValue"])])]),_:1}),n(m,{label:"该地图的狼"},{default:c(()=>[n(Lo,{"map-data":e.value,style:{width:"100%"}},null,8,["map-data"])]),_:1}),n(m,{label:"随机 Boss"},{default:c(()=>[n(vo,{"map-data":e.value,style:{width:"100%"}},null,8,["map-data"])]),_:1}),n(h),n(kl,{"map-data":e.value,"map-monster-data":u(s)},null,8,["map-data","map-monster-data"])]),_:1},8,["model"])}}}),bo=P({__name:"index",setup(o){const t=j(),e=j("wolf"),l=Ol(),s=()=>{const i=t.value;l.open({name:i.name,pass_score:i.scoreMax,yield_val:i.hardA,hard_ness:i.hardB,pop_max:i.populationMax,wolf_proportion:i.monsterProportion,random_boss:i.randomBossList})};return(i,r)=>{const _=ge,m=Kt,p=yt,d=_t,h=Ot;return f(),R(h,null,{default:c(()=>[n(m,{md:16},{default:c(()=>[n(_,{onClick:s},{default:c(()=>r[2]||(r[2]=[S("导出")])),_:1}),n(xo,{"map-data":u(t),"onUpdate:mapData":r[0]||(r[0]=T=>te(t)?t.value=T:null),onExport:s},null,8,["map-data"])]),_:1}),n(m,{md:8,sm:16},{default:c(()=>[u(t)?(f(),R(d,{key:0,modelValue:u(e),"onUpdate:modelValue":r[1]||(r[1]=T=>te(e)?e.value=T:null),class:"chart-area"},{default:c(()=>[n(p,{label:"狼分布",name:"wolf"},{default:c(()=>[n(Ra,{"map-data":u(t)},null,8,["map-data"])]),_:1})]),_:1},8,["modelValue"])):ne("",!0)]),_:1})]),_:1})}}}),So=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),No={key:0,style:{"text-align":"center"}},wo={key:1,style:{"text-align":"center"}},Co=P({__name:"BossDistribChart",props:{mid:{}},setup(o){const t=o;Vt([ws,Mt,Ut,Cs,Ft,$t]);const e=_e({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:[{left:"5%",right:"4%",bottom:"52%",containLabel:!0},{left:"5%",right:"4%",top:"52%",containLabel:!0}],dataset:{source:[]},xAxis:[{gridIndex:0},{gridIndex:1}],yAxis:[{type:"category",gridIndex:0},{type:"category",gridIndex:1}],series:[]}),l=M(()=>{var s;return!!((s=w.$_map_Obj[t.mid].random_boss)!=null&&s.length)});return Sl(()=>{const s=w.$_map_Obj[t.mid].random_boss;if(!s)return;const i=s.map((p,d)=>{var h;return[Object.keys(p[3].properties.card)[0],p[1],Math.round((p[0]-(((h=s[d-1])==null?void 0:h[0])??0))*1e3)/10]}),r=Ul(i.map(p=>p[0])).sort(),_=Ul(i.map(p=>p[1])).sort(),m=[["boss",...ue(r)],..._.map(p=>[ue(p),...new Array(r.length)])];for(const p of i){const d=_.indexOf(p[1])+1,h=r.indexOf(p[0])+1;m[d][h]=(m[d][h]??0)+p[2]}e.dataset.source=m,e.series=[...new Array(r.length).fill({type:"bar",stack:`${t.mid}-totalA`,label:{show:!0},emphasis:{focus:"series"}}),...new Array(_.length).fill({type:"bar",stack:`${t.mid}-totalB`,seriesLayoutBy:"row",label:{show:!0},emphasis:{focus:"series"},xAxisIndex:1,yAxisIndex:1})]}),(s,i)=>(f(),b("div",null,[u(l)?(f(),b("h2",No,"随机Boss奖励分布")):(f(),b("h2",wo,"本图没有随机Boss哦")),u(l)?(f(),R(u(Ql),{key:2,option:u(e),autoresize:"","update-options":{notMerge:!0},style:{height:"600px"}},null,8,["option"])):ne("",!0)]))}}),Ro={class:"flex flex-wrap gap-1"},yo={class:"flex flex-wrap gap-1"},Oo=P({__name:"UmapInfoForm",props:{mid:{},midModifiers:{},mapData:{default:q.getMapData("m1")},mapDataModifiers:{}},emits:["update:mid","update:mapData"],setup(o){const t=oe(o,"mid"),e=Bt({mid:"m1",mid2:"",wid:"dahuil",diff:1}),l=M(()=>w.$_map_Obj[e.mid]),s=oe(o,"mapData"),i=M(()=>e.mid2===""?s.value:q.getMapData(e.mid2)),r=M(()=>s.value.monsterList.map(p=>ce.getOnlyExample().getData(p)));Sl(()=>{t.value=e.mid,s.value=q.getMapData(e.mid)});const _=p=>p.map(d=>{let h=w.$_wolfAtt_Obj[d[1]];return{id:d[1],prob:d[0],name:h.name,pop:h.pop}}),m=p=>p?p.map(d=>{let h=w.$_wolfAtt_Obj[d[1]];return{id:d[1],prob:d[0],name:h.name,diff:parseFloat(d[2])}}):[];return(p,d)=>{const h=Ee,T=Fe,A=be,I=pt,L=mt,K=ql,V=$e;return f(),R(V,{model:u(e),"label-width":"120px"},{default:c(()=>[n(A,{label:"地图"},{default:c(()=>[n(h,{modelValue:u(e).mid,"onUpdate:modelValue":d[0]||(d[0]=C=>u(e).mid=C),options:u(fa),filterable:"",style:{"max-width":"200px"}},null,8,["modelValue","options"]),n(T,{effect:"light",class:"mx-2"},{default:c(()=>[S(" 难度系数："+x(s.value.hardA)+","+x(s.value.hardB),1)]),_:1}),n(T,{effect:"light"},{default:c(()=>[S(" Population："+x(s.value.populationMax),1)]),_:1})]),_:1}),n(A,{label:"引狼到"},{default:c(()=>[n(L,{modelValue:u(e).mid2,"onUpdate:modelValue":d[1]||(d[1]=C=>u(e).mid2=C),filterable:"",clearable:"",style:{"max-width":"200px"}},{default:c(()=>[n(I,{label:"无",value:""}),(f(!0),b(k,null,B(u(ga),C=>(f(),R(I,{key:C.id,label:`${C.id} ${C.name}`,value:C.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(A,{label:"该地图的狼"},{default:c(()=>[E("div",Ro,[(f(!0),b(k,null,B(_(u(l).wolf_proportion),C=>(f(),R(T,{key:C.id,type:"success",class:"tag-button",effect:"light",onClick:pe=>u(e).wid=C.id},{default:c(()=>[E("sub",null,x(C.prob),1),S(" "+x(C.name)+" ",1),E("sup",null,x(C.pop),1)]),_:2},1032,["onClick"]))),128))])]),_:1}),"random_boss"in u(l)?(f(),R(A,{key:0,label:"随机 Boss"},{default:c(()=>[E("div",yo,[(f(!0),b(k,null,B(m(u(l).random_boss),(C,pe)=>(f(),R(T,{key:pe,type:"success",class:"tag-button",effect:"light",onClick:H=>{u(e).wid=C.id,u(e).diff=C.diff}},{default:c(()=>[E("sub",null,x(C.prob),1),S(" "+x(C.name)+" ",1),E("sub",null,x(C.diff),1)]),_:2},1032,["onClick"]))),128))])]),_:1})):ne("",!0),n(K),n(kl,{wid:u(e).wid,"onUpdate:wid":d[2]||(d[2]=C=>u(e).wid=C),diff:u(e).diff,"onUpdate:diff":d[3]||(d[3]=C=>u(e).diff=C),"map-data":u(i),"map-monster-data":u(r)},null,8,["wid","diff","map-data","map-monster-data"])]),_:1},8,["model"])}}}),Ko=Ie(Oo,[["__scopeId","data-v-b78a41b4"]]),Po=P({__name:"index",setup(o){const t=j("m1"),e=j(),l=j("wolf");return(s,i)=>{const r=Kt,_=yt,m=_t,p=Ot;return f(),R(p,null,{default:c(()=>[n(r,{md:16},{default:c(()=>[n(Ko,{mid:u(t),"onUpdate:mid":i[0]||(i[0]=d=>te(t)?t.value=d:null),"map-data":u(e),"onUpdate:mapData":i[1]||(i[1]=d=>te(e)?e.value=d:null)},null,8,["mid","map-data"])]),_:1}),n(r,{md:8,sm:16},{default:c(()=>[u(e)?(f(),R(m,{key:0,modelValue:u(l),"onUpdate:modelValue":i[2]||(i[2]=d=>te(l)?l.value=d:null),class:"chart-area"},{default:c(()=>[n(_,{label:"狼分布",name:"wolf"},{default:c(()=>[n(Ra,{"map-data":u(e)},null,8,["map-data"])]),_:1}),n(_,{label:"Boss分布",name:"boss"},{default:c(()=>[n(Co,{mid:u(t)},null,8,["mid"])]),_:1})]),_:1},8,["modelValue"])):ne("",!0)]),_:1})]),_:1})}}}),ko=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Vo={class:"flex flex-wrap gap-0.5"},Mo=P({__name:"index",setup(o){const t=ut(w.$_map_Obj,(s,i)=>Cl(s,{id:i})),e=(s,i)=>{let r=s.need_lev||0,_=i.need_lev||0;return r-_},l=s=>s.map(i=>{const r=ce.getOnlyExample().getData(i[1]);return{prob:i[0],name:r.name,pop:r.population}});return(s,i)=>{const r=Ue,_=Fe,m=Me;return f(),b(k,null,[i[0]||(i[0]=E("p",null,"前排解释：",-1)),i[1]||(i[1]=E("p",null,"狼的等级随进度增加而增加。难度系数 hardA 影响初始狼等级，hardB 影响等级增长速率。",-1)),i[2]||(i[2]=E("p",null,"population 影响一波狼的容量。每只狼都会占用一定容量。",-1)),i[3]||(i[3]=E("p",null,"不同随机boss有出现权重。出现率、难度、奖励水平是相对应的，难的比较稀有，奖励也会比较好。",-1)),n(m,{data:u(t),"default-sort":{prop:"index",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},height:"600px",style:{width:"100%","font-size":"80%"},class:"testbox"},{default:c(()=>[n(r,{prop:"index",label:"index",sortable:"",align:"center",fixed:"",width:"70"}),n(r,{prop:"id",label:"id",sortable:"",align:"center",fixed:"",width:"80"}),n(r,{prop:"name",label:"name",sortable:"",align:"center",fixed:"",width:"80"}),n(r,{prop:"pass_score",label:"scoreMax",sortable:"",align:"center"}),n(r,{label:"hardnessFactor"},{default:c(()=>[n(r,{prop:"yield_val",label:"hardA",sortable:"",align:"center"}),n(r,{prop:"hard_ness",label:"hardB",sortable:"",align:"center"})]),_:1}),n(r,{prop:"pop_max",label:"populationMax",sortable:"",align:"center"}),n(r,{prop:"interval",label:"unkennelDelay",sortable:"",align:"center"}),n(r,{prop:"interval_rule",label:"unkennelRule",sortable:"",align:"center"}),n(r,{prop:"teleport_rule",label:"teleportRule",sortable:"",align:"center"}),n(r,{prop:"need_lev",label:"needLevel",sortable:"","sort-method":e,align:"center"}),n(r,{prop:"pass_by",label:"passBy",align:"center"},{default:c(p=>[S(x(p.row.pass_by.map(d=>u(w).$_map_Obj[d].name).join(", ")),1)]),_:1}),n(r,{prop:"wolf_proportion",label:"monsterList","cell-style":{"text-align":"left"}},{default:c(p=>[E("div",Vo,[(f(!0),b(k,null,B(l(p.row.wolf_proportion),d=>(f(),R(_,{key:d.prob},{default:c(()=>[E("sub",null,x(d.prob),1),S(" "+x(d.name)+" ",1),E("sup",null,x(d.pop),1)]),_:2},1024))),128))])]),_:1})]),_:1},8,["data"])],64)}}}),Uo=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),Fo=P({__name:"index",setup(o){const t=Bt({level:1}),e=M(()=>((2*(t.level+1)+3)*(t.level+1)+4)*(t.level+1)+20),l=M(()=>Math.round((.015*t.level+.8)*t.level+2)),s=M(()=>Math.floor(t.level/4+1)),i=M(()=>(t.level+7)*l.value);return(r,_)=>{const m=me,p=be,d=$e;return f(),R(d,{model:u(t),"label-width":"120px"},{default:c(()=>[n(p,{label:"等级"},{default:c(()=>[n(m,{modelValue:u(t).level,"onUpdate:modelValue":_[0]||(_[0]=h=>u(t).level=h),min:1},null,8,["modelValue"])]),_:1}),n(p,{label:"升级经验"},{default:c(()=>[E("label",null,x(u(e)),1)]),_:1}),n(p,{label:"力量"},{default:c(()=>[E("label",null,x(u(l)),1)]),_:1}),n(p,{label:"连升等级"},{default:c(()=>[E("label",null,x(u(s)),1)]),_:1}),n(p,{label:"苦工价格"},{default:c(()=>[E("label",null,x(u(i)),1)]),_:1})]),_:1},8,["model"])}}}),$o=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"}));

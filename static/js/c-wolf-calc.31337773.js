import{g as K,h as q,v as p,t as U,j as b,n as u,A as S,k as n,w as i,l as d,z as m,G as J,J as P,Z as X,o as r,F as v,q as g,a1 as Z,V as H,W as Q,a3 as Y,a2 as ee,c as h,D as le}from"./c-.pnpm.2072088e.js";import{h as O,n as C}from"./c-unit.ab4348c0.js";import{M as D}from"./c-Monster.0303b791.js";import{t as ae}from"./c-translate.d310c36b.js";import{_ as te}from"./e-index.4f7828a9.js";import"./c-BaseUnit.63d8357b.js";const $=k=>(H("data-v-43daeb83"),k=k(),Q(),k),ne=$(()=>u("h1",null,"狼相关计算",-1)),oe=$(()=>u("p",null,"技能",-1)),de={class:"sk-tag"},se=K({__name:"wolf-calc",setup(k){const V=q(),y=p.sortBy(p.map(O.$_wolfAtt_Obj,(e,a)=>({id:a,name:e.name,label:`${ae(a)} [${a}]`})),"id"),B=y.filter(e=>e.name.startsWith("camp_")),L=y.filter(e=>e.id.startsWith("D_")),j=p.difference(y,B,L),_=p.groupBy(O.$_skillAtt_Obj.monsterSkill,e=>e.kindId);p.each(_,(e,a)=>_[a]=p.sortBy(e,"id")),console.log(_);const z=Object.keys(_).sort();p.map(_,(e,a)=>({label:a,value:a,children:e.map(s=>({value:s.id}))}));const t=U({wid:"al",level:1,levelMax:60,power:0,hpMax:0,expMax:0,speed:0,tableData:[],selected:[]}),I=new D("daihuil"),N=new C("WeakFire_X1",1,I).getSubClasses();f();const x=e=>U({kindId:e.data.kindId,id:e.data.id,name:e.data.name,level:e.level,levelMax:e.levelMax,score:e.skillScore,info:e.skillInfo,tags:e.skillTag1+e.skillTag2+e.skillTag3}),A=()=>{var a;const e=x(N);t.tableData.push(e),(a=V.value)==null||a.toggleRowSelection(e,!0)},R=e=>{t.selected=e.map(a=>a.id),f()};function W(){var s;const e=new D(t.wid,t.level,1,0,[]);e.initSkills();const a=p.sortBy(e.skills,"index");t.speed=e.monsterData.speedBase,t.levelMax=e.levelMax,t.tableData=a.map(w=>x(w)),(s=V.value)==null||s.toggleAllSelection(),f()}function F(e){const a=new C(_[e.kindId][0].id,1,I).getSubClasses();Object.assign(e,x(a)),f()}function E(e){console.log(e);const a=new C(e.id,e.level,I).getSubClasses();Object.assign(e,x(a)),f()}function f(){let e=t.tableData.filter(s=>t.selected.includes(s.id)).map(s=>({skid:s.id,lev:s.level})),a=new D(t.wid,t.level,1,0,e,[]);a.refreshLevel(),t.hpMax=a.hpMax,t.expMax=a.expMax,t.power=a.power}return(e,a)=>{const s=le,w=Y,M=J,T=P,c=ee,G=X;return r(),b("div",null,[ne,u("p",null,[S(" 狼： "),n(M,{modelValue:d(t).wid,"onUpdate:modelValue":a[0]||(a[0]=l=>d(t).wid=l),onChange:W},{default:i(()=>[n(w,{label:"前线"},{default:i(()=>[(r(!0),b(v,null,g(d(j),l=>(r(),h(s,{key:l.id,label:l.label,value:l.id},null,8,["label","value"]))),128))]),_:1}),n(w,{label:"防线"},{default:i(()=>[(r(!0),b(v,null,g(d(B),l=>(r(),h(s,{key:l.id,label:l.label,value:l.id},null,8,["label","value"]))),128))]),_:1}),n(w,{label:"噩梦"},{default:i(()=>[(r(!0),b(v,null,g(d(L),l=>(r(),h(s,{key:l.id,label:l.label,value:l.id},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),u("p",null,[S(" 等级： "),n(T,{modelValue:d(t).level,"onUpdate:modelValue":a[1]||(a[1]=l=>d(t).level=l),min:1,onChange:f},null,8,["modelValue"]),S(" 最高等级："+m(d(t).levelMax),1)]),u("p",null,"升级经验："+m(d(t).expMax),1),u("p",null,"血量："+m(d(t).hpMax),1),u("p",null,"速度："+m(d(t).speed),1),u("p",null,"实力："+m(d(t).power),1),oe,n(d(Z),{ref_key:"skillTableRef",ref:V,data:d(t).tableData,style:{"font-size":"small"},onSelectionChange:R},{default:i(()=>[n(c,{type:"selection",width:30}),n(c,{label:"KindId",width:160,"header-align":"center"},{default:i(l=>[n(M,{modelValue:l.row.kindId,"onUpdate:modelValue":o=>l.row.kindId=o,onChange:o=>F(l.row),style:{"font-size":"small"}},{default:i(()=>[(r(!0),b(v,null,g(d(z),o=>(r(),h(s,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(c,{label:"Id",width:200,"header-align":"center"},{default:i(l=>[n(M,{modelValue:l.row.id,"onUpdate:modelValue":o=>l.row.id=o,onChange:o=>E(l.row),style:{"font-size":"small"}},{default:i(()=>[(r(!0),b(v,null,g(d(_)[l.row.kindId],o=>(r(),h(s,{key:o.id,label:o.id,value:o.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(c,{prop:"name",label:"Name",width:120,"header-align":"center",align:"center"}),n(c,{prop:"level",label:"Level",width:120,"header-align":"center",align:"center"},{default:i(l=>[n(T,{modelValue:l.row.level,"onUpdate:modelValue":o=>l.row.level=o,min:1,max:l.row.levelMax,size:"small",style:{width:"80px"},onChange:o=>E(l.row)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:1}),n(c,{prop:"levelMax",label:"Level Max",width:100,"header-align":"center",align:"center"}),n(c,{prop:"score",label:"Score",width:100,"header-align":"center",align:"center"}),n(c,{label:"Info"},{default:i(l=>[u("span",null,m(l.row.info),1),u("span",de,m(l.row.tags),1)]),_:1})]),_:1},8,["data"]),n(G,{onClick:A},{default:i(()=>[S("增加一行")]),_:1})])}}});const me=te(se,[["__scopeId","data-v-43daeb83"]]);export{me as default};

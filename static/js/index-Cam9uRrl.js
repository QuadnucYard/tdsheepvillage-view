var xl=Object.defineProperty;var bl=(o,t,e)=>t in o?xl(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var l=(o,t,e)=>(bl(o,typeof t!="symbol"?t+"":t,e),e);import{E as Sl,z as Nl,a as wl,b as Ha,c as Cl,d as Rl,e as yl,f as Ol,g as Kl,h as Pl,i as Vl,j as Ml,k as kl,l as Ie,m as Ul,n as Fl,o as ct,p as Nt,q as ot,r as Ga,s as wt,t as Ct,u as ke,v as Ue,w as Fe,x as $e,y as Ae,A as xe,B as he,C as _t,D as $l,F as mt,G as Bl,H as Hl,I as Rt,J as yt,K as Gl,L as Wa}from"./element-plus-Coh2E6TI.js";import{l as Wl}from"./vatex-DVFeRQUC.js";import{d as V,V as C,U as d,u,af as be,o as f,R as n,ar as va,W as Ot,as as jl,c as x,a as A,b as Y,i as ja,S as M,a9 as H,l as S,Y as D,F as me,at as Ta,au as La,k,I as Xl,M as pe,Z as ne,X as Da,e as fe,av as At,aw as re,n as zl,P as Yl,L as ql,O as Xa,w as xa}from"./@vue-DujeDV0r.js";import{B as za,D as Jl}from"./vue-echarts-BqnfWVZ4.js";import{V as Zl}from"./vue-json-pretty-C1YX2rY3.js";import{c as Ql,a as es,u as ba,b as Ya}from"./vue-router-Lq7WSezN.js";import{A as ya,B as ts,C as as,D as Oa}from"./@element-plus-Cg4b9Kko.js";import{j as qa}from"./@vueuse-t5YEEHYv.js";import{c as ls}from"./vue-i18n-DivxfGD5.js";import{_ as ss,d as ie,l as ns,a as Ft,b as is}from"./assets-CToCuWKd.js";import{u as Ja}from"./vue-clipboard3-DrPodQP2.js";import{l as y}from"./lodash-es-Dd-h7Vv6.js";import{u as Kt,i as Sa,a as Pt,b as Vt,c as Mt,d as kt,e as os,f as rs,g as us,h as ds,j as cs}from"./echarts-CC7t-OK2.js";import{C as _s}from"./color-BxFCTj4Q.js";import{g as ms}from"./mathjs-DniOOhRP.js";import{X as ps}from"./x2js-DUBfAf9S.js";import"./async-validator-DKvM95Vc.js";import"./@ctrl-r5W6hzzQ.js";import"./@sxzz-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./memoize-one-BdPwpGay.js";import"./katex-DueBeHR3.js";import"./resize-detector-CZu9PX2v.js";import"./@xmldom-Dfpt1DVx.js";import"./vue-H9sxO237.js";import"./@intlify-Cpmfu_8y.js";import"./clipboard-CKIYzoIP.js";import"./tslib-BDyQ-Jie.js";import"./zrender-BlKUkYG_.js";import"./color-string-Ckj7g19G.js";import"./color-name-BQ5IbGbl.js";import"./simple-swizzle-BUB9Iq-C.js";import"./is-arrayish-BII_q15j.js";import"./color-convert-CkRI355n.js";import"./decimal.js-Dtyavigz.js";import"./typed-function-DrvtXXo-.js";import"./@babel-CCbyfPlC.js";import"./complex.js-CuhQh-UJ.js";import"./fraction.js-m1Y1AAw4.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();const hs={page:{home:"Home",notice:"Notice",section:"Tools",wiki:"Wiki"},section:{baoxiang:"Baoxiang Properties",bullets:"Bullets",dmap_detail:"Dream Map Detail",dmaps:"Dream Maps",dream_design:"Dream Design",monster_calc:"Wolf Calculation",monster_skills:"Monster Skills",monsters:"Wolfs",tower_design:"Tower Design",towers:"Towers",umap_design:"Umap Design",umap_detail:"Umap Detail",umaps:"Umaps",user:"User"}},gs={page:{home:"TDSheepView 保卫羊村小工具",notice:"公告",section:"小工具",wiki:"百科"},section:{baoxiang:"宝箱物品",bullets:"子弹",dmap_detail:"噩梦关卡详情",dmaps:"噩梦关卡",dream_design:"噩梦设计",monster_calc:"狼技能实力计算",monster_skills:"狼技能",monsters:"狼",tower_design:"塔设计",towers:"塔",umap_design:"前线设计",umap_detail:"前线关卡详情",umaps:"前线关卡",user:"用户"}},fs={"en-US":hs,"zh-CN":gs},Za=ls({legacy:!1,locale:"en-US",fallbackLocale:"zh-CN",messages:fs});(function(){String.prototype.isNullOrEmpty||(String.prototype.isNullOrEmpty=function(){return!this}),Array.prototype.firstOrDefault||(Array.prototype.firstOrDefault=function(o){for(let t=0;t<this.length;t++){const e=this[t];if(o(e))return e}return null}),Array.prototype.removeAt||(Array.prototype.removeAt=function(o){const t=this[o];return this.splice(o,1),t}),Array.prototype.removeOne||(Array.prototype.removeOne=function(o){const t=this.indexOf(o);return t>=0?(this.splice(t,1),!0):!1}),Array.prototype.removeRange||(Array.prototype.removeRange=function(o){for(let t=0;t<o.length;t++)this.removeOne(o[t])}),Array.prototype.addRange||(Array.prototype.addRange=function(o){for(let t=0;t<o.length;t++)this.push(o[t])}),Array.prototype.contains||(Array.prototype.contains=function(o){return this.indexOf(o)!=-1}),Array.prototype.empty||(Array.prototype.empty=function(){return this.length==0})})();const As=V({__name:"App",setup(o){return(t,e)=>{const a=be("router-view"),s=Sl;return f(),C(s,{locale:u(Nl)},{default:d(()=>[n(a,null,{default:d(({Component:i})=>[(f(),C(va,null,[(f(),C(Ot(i)))],1024))]),_:1})]),_:1},8,["locale"])}}}),Es="modulepreload",Is=function(o){return"/tdsheepvillage-view/"+o},Ka={},ee=function(t,e,a){let s=Promise.resolve();if(e&&e.length>0){const i=document.getElementsByTagName("link");s=Promise.all(e.map(r=>{if(r=Is(r),r in Ka)return;Ka[r]=!0;const _=r.endsWith(".css"),p=_?'[rel="stylesheet"]':"";if(!!a)for(let g=i.length-1;g>=0;g--){const T=i[g];if(T.href===r&&(!_||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${p}`))return;const c=document.createElement("link");if(c.rel=_?"stylesheet":Es,_||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),_)return new Promise((g,T)=>{c.addEventListener("load",g),c.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${r}`)))})}))}return s.then(()=>t()).catch(i=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=i,window.dispatchEvent(r),!r.defaultPrevented)throw i})},vs=(o,t)=>{const e=o[t];return e?typeof e=="function"?e():Promise.resolve(e):new Promise((a,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})},Ts=["home","notice","section","wiki"],Bt=["user","towers","bullets","monsters","monster-skills","monster-calc","umaps","umap-detail","umap-design","dmaps","dmap-detail","baoxiang","dream-design","tower-design"],Ls=[{path:"/",name:"index",component:()=>ee(()=>Promise.resolve().then(()=>Vs),void 0),children:[{path:"home",name:"home",alias:"",component:()=>ee(()=>Promise.resolve().then(()=>Hs),void 0)},{path:"notice",name:"notice",component:()=>ee(()=>Promise.resolve().then(()=>Xs),void 0)},{path:"wiki",name:"wiki",component:()=>ee(()=>Promise.resolve().then(()=>Ys),void 0)},{path:"section",name:"section",redirect:{name:Bt[0]},component:()=>ee(()=>Promise.resolve().then(()=>sn),void 0),children:Bt.map(o=>({path:o,name:o,meta:{keepAlive:!0},component:()=>vs(Object.assign({"../views/sections/baoxiang/index.vue":()=>ee(()=>Promise.resolve().then(()=>In),void 0),"../views/sections/bullets/index.vue":()=>ee(()=>Promise.resolve().then(()=>Ln),void 0),"../views/sections/dmap-detail/index.vue":()=>ee(()=>Promise.resolve().then(()=>Mn),void 0),"../views/sections/dmaps/index.vue":()=>ee(()=>Promise.resolve().then(()=>Bn),void 0),"../views/sections/dream-design/index.vue":()=>ee(()=>Promise.resolve().then(()=>jn),void 0),"../views/sections/monster-calc/index.vue":()=>ee(()=>Promise.resolve().then(()=>Ii),void 0),"../views/sections/monster-skills/index.vue":()=>ee(()=>Promise.resolve().then(()=>Li),void 0),"../views/sections/monsters/index.vue":()=>ee(()=>Promise.resolve().then(()=>Fi),void 0),"../views/sections/tower-design/index.vue":()=>ee(()=>Promise.resolve().then(()=>Ji),void 0),"../views/sections/towers/index.vue":()=>ee(()=>Promise.resolve().then(()=>to),void 0),"../views/sections/umap-design/index.vue":()=>ee(()=>Promise.resolve().then(()=>xo),void 0),"../views/sections/umap-detail/index.vue":()=>ee(()=>Promise.resolve().then(()=>Ko),void 0),"../views/sections/umaps/index.vue":()=>ee(()=>Promise.resolve().then(()=>$o),void 0),"../views/sections/user/index.vue":()=>ee(()=>Promise.resolve().then(()=>Ho),void 0)}),`../views/sections/${o}/index.vue`)}))}]}],Ds=Ql({history:es("/tdsheepvillage-view/"),routes:Ls}),Na=jl(As);Na.use(Ds).use(Za).use(Wl);Na.component("VChart",za);Na.mount("#app");const xs={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},bs=A("path",{fill:"currentColor",d:"m12.87 15.07l-2.54-2.51l.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35C8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5l3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7l1.62-4.33L19.12 17z"},null,-1),Ss=[bs];function Ns(o,t){return f(),x("svg",xs,[...Ss])}const ws={name:"mdi-translate",render:Ns},Cs=o=>(Ta("data-v-03178a2f"),o=o(),La(),o),Rs=Cs(()=>A("div",{class:"flex-grow"},null,-1)),ys={class:"no-menu-item"},Os=V({__name:"AppHeader",setup(o){const t=ba(),e=qa(),a=Y("0"),s=Ts;ja(()=>{a.value=s.indexOf(t.name).toString()});const i=r=>{Za.global.locale.value=r};return(r,_)=>{const p=wl,m=Ha,c=ws,g=Cl,T=Rl,v=yl,I=Ol,b=Kl;return f(),C(b,{router:"","default-active":u(a),mode:"horizontal","background-color":"#ff9900","text-color":"#fefefe","active-text-color":"#ffd9a1",ellipsis:!1},{default:d(()=>[(f(!0),x(M,null,H(u(s),(P,U)=>(f(),C(p,{key:P,index:U.toString(),route:{name:P}},{default:d(()=>[S(D(r.$t(`page.${P}`)),1)]),_:2},1032,["index","route"]))),128)),Rs,n(m,{modelValue:u(e),"onUpdate:modelValue":_[0]||(_[0]=P=>me(e)?e.value=P:null),"active-action-icon":u(ya),"inactive-action-icon":u(ya),class:"no-menu-item"},null,8,["modelValue","active-action-icon","inactive-action-icon"]),A("div",ys,[n(I,{class:"align-middle",onCommand:i},{dropdown:d(()=>[n(v,null,{default:d(()=>[n(T,{command:"zh-CN"},{default:d(()=>[S("中文")]),_:1}),n(T,{command:"en-US"},{default:d(()=>[S("English")]),_:1})]),_:1})]),default:d(()=>[n(g,{size:24},{default:d(()=>[n(c)]),_:1})]),_:1})])]),_:1},8,["default-active"])}}}),ge=(o,t)=>{const e=o.__vccOpts||o;for(const[a,s]of t)e[a]=s;return e},Ks=ge(Os,[["__scopeId","data-v-03178a2f"]]),Ps=V({__name:"index",setup(o){const t=qa(),e=k(()=>t.value?"dark":"light");return Xl(Jl,e),(a,s)=>{const i=Ks,r=Vl,_=be("router-view"),p=Ml,m=Pl;return f(),C(m,null,{default:d(()=>[n(r,null,{default:d(()=>[n(i)]),_:1}),n(p,null,{default:d(()=>[n(_,null,{default:d(({Component:c})=>[(f(),C(va,null,[(f(),C(Ot(c)))],1024))]),_:1})]),_:1})]),_:1})}}}),Vs=Object.freeze(Object.defineProperty({__proto__:null,default:Ps},Symbol.toStringTag,{value:"Module"})),Ms={},ks={class:"p-4"},Us={class:"absolute text-center mt-20 top-32 z-10 p-8 left-0 right-0 space-y-8 bg-black bg-opacity-50"},Fs=A("div",{class:"text-4xl text-orange-200"},"欢迎来到保卫羊村小工具！",-1);function $s(o,t){const e=Ul,a=Fl,s=kl,i=Ie,r=be("router-link");return f(),x("div",ks,[n(s,{interval:4e3,type:"card",height:"600px"},{default:d(()=>[(f(),x(M,null,H(8,_=>n(a,{key:_},{default:d(()=>[n(e,{fit:"cover",src:`/img/carousel/${_}.png`,style:{width:"628px",height:"540px"}},null,8,["src"])]),_:2},1024)),64))]),_:1}),A("div",Us,[Fs,A("div",null,[n(r,{to:{name:"notice"}},{default:d(()=>[n(i,{type:"primary",size:"large",style:{width:"120px"}},{default:d(()=>[S("🚀公告")]),_:1})]),_:1})]),A("div",null,[n(r,{to:{name:"section"}},{default:d(()=>[n(i,{type:"primary",size:"large",style:{width:"120px"}},{default:d(()=>[S("🧰小工具")]),_:1})]),_:1})]),A("div",null,[n(r,{to:{name:"wiki"}},{default:d(()=>[n(i,{type:"primary",size:"large",style:{width:"120px"}},{default:d(()=>[S("🌟百科")]),_:1})]),_:1})])])])}const Bs=ge(Ms,[["render",$s]]),Hs=Object.freeze(Object.defineProperty({__proto__:null,default:Bs},Symbol.toStringTag,{value:"Module"})),Gs={};function Ws(o,t){const e=ct;return f(),C(e)}const js=ge(Gs,[["render",Ws]]),Xs=Object.freeze(Object.defineProperty({__proto__:null,default:js},Symbol.toStringTag,{value:"Module"})),zs=V({__name:"wiki",setup(o){return(t,e)=>{const a=Nt;return f(),C(a,null,{default:d(()=>[(f(),C(Ot(u(ss)),{"color-theme":"dark"}))]),_:1})}}}),Ys=Object.freeze(Object.defineProperty({__proto__:null,default:zs},Symbol.toStringTag,{value:"Module"})),Ye=pe({visible:!1,data:"",resolve:void 0,reject:void 0}),Pa={open:()=>(Ye.data="",Ye.visible=!0,new Promise((o,t)=>{Ye.resolve=o,Ye.reject=t})),close:()=>{Ye.visible=!1}},Qa=()=>({state:Ye,open:Pa.open,close:Pa.close}),qe=pe({visible:!1,data:null}),Va={open:o=>(qe.data=o,qe.visible=!0,new Promise((t,e)=>{qe.resolve=t,qe.reject=e})),close:()=>{qe.visible=!1}},wa=()=>({state:qe,open:Va.open,close:Va.close}),qs={class:"dialog-footer"},Js=V({__name:"DialogExport",setup(o){const{toClipboard:t}=Ja(),{state:e,close:a}=wa(),s=Y(),i=()=>{t(JSON.stringify(e.data),s.value.$el),ot.success("已复制到剪贴板")},r=()=>{var _;(_=e.resolve)==null||_.call(e,e.data),e.data=null};return(_,p)=>{const m=Ie,c=Ga;return f(),C(c,{modelValue:u(e).visible,"onUpdate:modelValue":p[0]||(p[0]=g=>u(e).visible=g),title:"导出数据",onClose:r},{footer:d(()=>[A("span",qs,[n(m,{ref_key:"someRef",ref:s,onClick:i},{default:d(()=>[S("复制到剪贴板")]),_:1},512),n(m,{type:"primary",onClick:u(a)},{default:d(()=>[S(" 确定 ")]),_:1},8,["onClick"])])]),default:d(()=>[n(u(Zl),{data:u(e).data,virtual:"",deep:2},null,8,["data"])]),_:1},8,["modelValue"])}}}),Zs=ge(Js,[["__scopeId","data-v-37a7020e"]]),Qs={class:"dialog-footer"},en=V({__name:"DialogImport",setup(o){const{state:t,close:e}=Qa(),a=()=>{var i;try{const r=JSON.parse(t.data);(i=t.resolve)==null||i.call(t,r),e()}catch{ot.error("JSON格式不合法！")}},s=()=>{};return(i,r)=>{const _=wt,p=Ie,m=Ga;return f(),C(m,{modelValue:u(t).visible,"onUpdate:modelValue":r[1]||(r[1]=c=>u(t).visible=c),title:"导入数据",onClose:s},{footer:d(()=>[A("span",Qs,[n(p,{onClick:u(e)},{default:d(()=>[S("取消")]),_:1},8,["onClick"]),n(p,{type:"primary",onClick:a},{default:d(()=>[S(" 确定 ")]),_:1})])]),default:d(()=>[n(_,{modelValue:u(t).data,"onUpdate:modelValue":r[0]||(r[0]=c=>u(t).data=c),type:"textarea",rows:10,spellcheck:!1},null,8,["modelValue"])]),_:1},8,["modelValue"])}}}),tn=ge(en,[["__scopeId","data-v-3fea53a5"]]),an={class:"content sm:mx-8"},ln=V({__name:"index",setup(o){const t=Ya(),e=ba(),a=Y("");ja(()=>{a.value=e.name});const s=i=>{t.push({name:i.paneName})};return(i,r)=>{const _=Ct,p=ct,m=be("router-view");return f(),x(M,null,[A("div",null,[n(p,{modelValue:u(a),"onUpdate:modelValue":r[0]||(r[0]=c=>me(a)?a.value=c:null),type:"card",onTabClick:s},{default:d(()=>[(f(!0),x(M,null,H(u(Bt),c=>(f(),C(_,{key:c,label:i.$t(`section.${c.replaceAll("-","_")}`),name:c},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),A("div",an,[n(m,null,{default:d(({Component:c})=>[(f(),C(va,null,[(f(),C(Ot(c)))],1024))]),_:1})])]),n(Zs),n(tn)],64)}}}),sn=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"}));function nn(o,t=!1){t||(o=o.toLowerCase());let e=1315423911;for(let a=o.length-1;a>=0;a--)e^=(e<<5)+o.charCodeAt(a)+(e>>2);return e&2147483647}const on=function(o){return/^[a-zA-Z]+$/.test(o)},rn=function(o,t){return o<t?-1:o>t?1:0};function*un(o){let t=0;for(const e of o)t+=e,yield t}function Be(o){if(o===0)return 1;if(o=Math.abs(o),o%1===0)return Math.pow(10,Math.floor(Math.log10(o)));const t=o.toString();return Math.pow(10,t.indexOf(".")-t.length+1)}function Ma(...o){if(o.length==1)return new Array(o[0]).fill(0);if(o.length==2)return Array.from({length:o[0]},()=>new Array(o[1]).fill(0))}function $t(o){return y.mapValues(o,(t,e)=>Ht(t,e))}function Ht(o,t){return y.mapValues(o,(e,a)=>dn(e,t,a))}function dn(o,t,e){return{...o,type:t,id:e}}const w=function(){const o=new ps,t=ie.camp_system_simple,e=_=>parseInt(new RegExp("(?<=m).+(?=[A-Z]*)").exec(on(_[_.length-1])?_:_+"A")[0],36),a=Object.keys(ie.umaps).sort((_,p)=>rn(e(_),e(p))),s=$t(ie.building),i=$t(ie.skill),r={$_global_language_str:o.xml2dom(ns),$_global_properties:$t(ie.properties),$_skillAtt_Obj:i,$_skillPackage_Obj:ie.skill_package,$_map_Obj:ie.umaps,$_towerAtt_Obj:s.tower,$_bulletAtt_Obj:ie.bullet,$_wolfAtt_Obj:Ht(ie.wolfs,"wolf"),$_wallAtt_Obj:s.wall,$_barrierAtt_Obj:ie.barrier,$_level_up_gift:ie.level_up_gift,$_pass_map_gift:ie.pass_map_gift,$_wave_hard_Obj:ie.wolf_hard_ness,$Maps:ie.version_ctrl.Maps,$_wolfs_unlock_lv:t.camp_wolf_lv_max_factor,$_wolfs_unlock_gold:t.camp_wolf_gold_max_factor,$_camp_hold_time:t.hold_time,$_camp_pk_cd_time:t.pk_cd_time,$_camp_pk_times_max:t.pk_times_max,$_camp_defend_times_max:t.defend_times_max,$_camp_pk_arena_times_max:t.pk_arena_times_max,$_camp_defend_arena_times_max:t.defend_arena_times_max,$_camp_mining_rate:t.mine_rate,$_camp_sell_building_dis:t.sell_building_dis,$_tower_worth_factor:t.tower_worth_factor,$_wolf_worth_factor:t.wolf_worth_factor,$_defend_map_snarp_max:t.defend_map_snarp_max,$_defend_succ_factor:t.defend_succ_factor,$_defend_failed_factor:t.defend_failed_factor,$_defend_arena_succ_factor:t.defend_arena_succ_factor,$_defend_arena_failed_factor:t.defend_arena_failed_factor,$_conflict_skill_kind:t.conflict_skill_kind,$_skill_lvup_spend:t.skill_lvup_spend,$_skill_grade_score:t.skill_grade_score,$_camp_use_exp_wolf_max:t.use_exp_wolf_max,$_camp_use_exp_tower_max:t.use_exp_tower_max,$_camp_wolf_lv_max:t.wolf_lv_max,$_camp_need_user_level:t.camp_need_user_level,$_camp_arena_need_user_level:t.arena_need_user_level,$_camp_create_mine_help_max:t.create_mine_help_max,$_camp_create_mine_help_friends_num:t.create_mine_help_friends_num,$_dream_wolf_hard_ness:Ft.dm_wolf_hard_ness,umapsById:a.map(_=>[_,ie.umaps[_]]),dream_data:Ft,dream_maps:Ht(Ft.dmaps,"dmaps"),dream_waves:is};return console.log("init",r.umapsById),r}(),ft=o=>y.mapValues(o,t=>{const e=t.name;return e.includes("^")?e.substring(e.indexOf("^")+1):e}),Gt=Object.assign({},ft(w.$_map_Obj),ft(w.$_wolfAtt_Obj),ft(w.$_towerAtt_Obj),...Object.values(w.$_global_properties).map(o=>ft(o)));console.log("dict",Gt);function de(o){return typeof o=="string"?Gt[o]:o.map(t=>Gt[t])}const cn={key:0},_n={key:0},mn={class:"ml-4"},pn={key:1},hn={key:1},gn={key:0},fn={key:1},An={class:"ml-4"},En=V({__name:"index",setup(o){const t=y.chain(w.$_global_properties.card).values().filter(e=>e.id.startsWith("baoxiang")).sortBy(e=>Math.abs(e.index)).value();return(e,a)=>{const s=Ue,i=Fe,r=ke;return f(),x("div",null,[n(r,{data:u(t),style:{"font-size":"small"}},{default:d(()=>[n(s,{label:"id",prop:"id",width:120}),n(s,{label:"name",prop:"name",width:160}),n(s,{label:"open_num",prop:"open_num",width:100}),n(s,{label:"info",prop:"info",width:400}),n(s,{label:"data"},{default:d(_=>[_.row.default_gift?(f(),x("ul",cn,[(f(!0),x(M,null,H(_.row.default_gift,(p,m)=>(f(),x(M,{key:m},[String(m)=="properties"?(f(),x("li",_n,[n(i,{type:"warning"},{default:d(()=>[S(D(m),1)]),_:2},1024),A("ul",mn,[(f(!0),x(M,null,H(p,(c,g)=>(f(),x("li",{key:g},[n(i,null,{default:d(()=>[S(D(g),1)]),_:2},1024),(f(!0),x(M,null,H(c,(T,v)=>(f(),C(i,{key:v,type:"info",title:v},{default:d(()=>[S(D(u(de)(String(v)))+": "+D(T),1)]),_:2},1032,["title"]))),128))]))),128))])])):(f(),x("li",pn,[n(i,{type:"warning"},{default:d(()=>[S(D(m),1)]),_:2},1024),n(i,{type:"info"},{default:d(()=>[S(D(p),1)]),_:2},1024)]))],64))),128))])):ne("",!0),_.row.data?(f(),x("ul",hn,[(f(!0),x(M,null,H(_.row.data,p=>(f(),x(M,{key:p[0]},[p[1]=="invite_score"?(f(),x("li",gn,[n(i,{type:"success"},{default:d(()=>[S(D(p[0]),1)]),_:2},1024),n(i,{type:"warning"},{default:d(()=>[S(D(p[1]),1)]),_:2},1024),n(i,null,{default:d(()=>[S(D(p[2]),1)]),_:2},1024)])):ne("",!0),p[1]=="properties"?(f(),x("li",fn,[n(i,{type:"success"},{default:d(()=>[S(D(p[0]),1)]),_:2},1024),n(i,{type:"warning"},{default:d(()=>[S(D(p[1]),1)]),_:2},1024),A("ul",An,[(f(!0),x(M,null,H(p[2],m=>(f(),x("li",{key:m[0]},[n(i,{type:"success"},{default:d(()=>[S(D(m[0]),1)]),_:2},1024),n(i,{type:"warning"},{default:d(()=>[S(D(m[1]),1)]),_:2},1024),n(i,null,{default:d(()=>[(f(!0),x(M,null,H(m[2],c=>(f(),C(i,{key:c,title:c,type:"info"},{default:d(()=>[S(D(u(de)(c)),1)]),_:2},1032,["title"]))),128))]),_:2},1024)]))),128))])])):ne("",!0)],64))),128))])):ne("",!0)]),_:1})]),_:1},8,["data"])])}}}),In=Object.freeze(Object.defineProperty({__proto__:null,default:En},Symbol.toStringTag,{value:"Module"})),vn=V({__name:"BulletTable",setup(o){const t=y.map(w.$_bulletAtt_Obj,(e,a)=>y.extend(e,{id:a}));return(e,a)=>{const s=Ue,i=ke;return f(),C(i,{data:u(t),"default-sort":{prop:"id",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},style:{width:"100%","font-size":"80%"}},{default:d(()=>[n(s,{prop:"id",label:"id",sortable:"",align:"center",fixed:"",width:"80"}),n(s,{prop:"shapeMode",label:"shapeMode",sortable:"",align:"center"}),n(s,{prop:"damageMode",label:"damageMode",sortable:"",align:"center"}),n(s,{prop:"radii",label:"radii",sortable:"",align:"center"}),n(s,{prop:"fallAcc",label:"fallAccSpeed",sortable:"",align:"center"}),n(s,{prop:"shadow",label:"shadow",sortable:"",align:"center"}),n(s,{prop:"effect",label:"hitEffectId",sortable:"",align:"center"}),n(s,{prop:"path",label:"floorPathId",sortable:"",align:"center"})]),_:1},8,["data"])}}}),Tn=V({__name:"index",setup(o){return(t,e)=>(f(),x("div",null,[n(vn)]))}}),Ln=Object.freeze(Object.defineProperty({__proto__:null,default:Tn},Symbol.toStringTag,{value:"Module"})),Je=class Je{static getLanguageStr(t,...e){let a=null,s=null,i=null;if(w.$_global_language_str!=null&&(w.$_global_language_str.getElementsByTagName("id"+t)[0]!=null?w.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str")=="CHILD2010"?i=w.$_global_language_str.getElementsByTagName("id"+t)[0].children().toString():i=w.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str"):i=null),!(i!=null&&i.length))return"";let r=i.search("%%");for(;r!=-1;)s=i.slice(r,r+6),i=i.replace(s,Je.getLanguageStr(parseInt(s.slice(2)))),r=i.search("%%");for(let _=0;_<e.length;_++)a="%"+_,i=i==null?void 0:i.replaceAll(a,e[_]);return i}static getDataProfileTxt(t){let e=null,a=!1,s=null,i=null,r=null,_=t;return t&&(e=String(t),a=e.indexOf(Je.INTER_CONFIG_SPLIT_CHAR)>-1,s=null,i="",r="",a?(s=e.split(Je.INTER_CONFIG_SPLIT_CHAR),i=s[0],r=s[1],w.$_global_dataProfile_txt!=null?(w.$_global_dataProfile_txt.getElementsByTagName(i)[0]!=null?_=w.$_global_dataProfile_txt.getElementsByTagName(i)[0].getAttribute("s").toString():_=r,_=_.replace(/\\n/g,`
`)):_=r):_=e,s=null,e="",i="",r=""),_}};l(Je,"INTER_CONFIG_SPLIT_CHAR","^");let h=Je;const ae=class ae{constructor(t){l(this,"typeId");l(this,"kindId");l(this,"id");l(this,"name");l(this,"info");l(this,"help");l(this,"rawName");this.typeId=t[ae.DATA_TYPE_ID],this.kindId=t[ae.DATA_KIND_ID],this.id=t[ae.DATA_ID],this.rawName=t[ae.DATA_NAME],this.name=h.getDataProfileTxt(t[ae.DATA_NAME]),this.info=h.getDataProfileTxt(t[ae.DATA_INFO]),this.help=t[ae.DATA_HELP]?h.getDataProfileTxt(t[ae.DATA_HELP]):""}};l(ae,"DATA_TYPE_ID","typeId"),l(ae,"DATA_KIND_ID","kindId"),l(ae,"DATA_ID","id"),l(ae,"DATA_NAME","name"),l(ae,"DATA_INFO","info"),l(ae,"DATA_HELP","help");let ce=ae;const z=class z extends ce{constructor(e){super(e);l(this,"res");l(this,"resColor");e[z.DATA_RESOURCE_CLASS]==null?this.res=e[ce.DATA_ID]:this.res=e[z.DATA_RESOURCE_CLASS],this.resColor=e[z.DATA_RESOURCE_COLOR_CLASS]}};l(z,"TYPE_MONSTER","wolf"),l(z,"TYPE_TOWER","tower"),l(z,"TYPE_WALL","wall"),l(z,"TYPE_BARRIER","barrier"),l(z,"TYPE_ENTRANCE","typeEntrance"),l(z,"TYPE_EXPORT","typeExport"),l(z,"TYPE_BOX","box"),l(z,"TYPE_GEM_ITEM","gem"),l(z,"TYPE_TRAP_ITEM","snarp"),l(z,"TYPE_CARD_ITEM","card"),l(z,"TYPE_WOLF_CARD_ITEM","wc"),l(z,"TYPE_TAME_ITEM","tame"),l(z,"TYPE_FIX_ITEM","bomb"),l(z,"ID_SPADE_ITEM","mc"),l(z,"ID_GEM_HAMMER","gem_hammer"),l(z,"ID_GEM_OPENER","gem_opener"),l(z,"DATA_RESOURCE_CLASS","res"),l(z,"DATA_RESOURCE_COLOR_CLASS","resColor");let De=z;class ze{constructor(){l(this,"m_manager",{});this.clearData()}getDataById(t){return this.m_manager[t]}get manager(){return this.m_manager}clearData(){this.m_manager=new Object}}const B=class B extends De{constructor(e){super(e);l(this,"scoreMax");l(this,"populationMax");l(this,"hardA");l(this,"hardB");l(this,"passBy");l(this,"unkennelDelay");l(this,"unkennelRule");l(this,"bossList");l(this,"monsterList");l(this,"monsterProportion");l(this,"teleportRule");l(this,"randomBossList");this.scoreMax=e[B.DATA_SCORE_MAX]?e[B.DATA_SCORE_MAX]:B.DEFAULT_SCORE_MAX,this.populationMax=e[B.DATA_POPULATION_MAX]?e[B.DATA_POPULATION_MAX]:B.DEFAULT_POPULATION_MAX,this.hardA=e[B.DATA_HARD_A],this.hardB=e[B.DATA_HARD_B],this.passBy=e[B.DATA_PASS_BY],this.unkennelDelay=e[B.DATA_UNKENNEL_RATE],this.unkennelRule=e[B.DATA_UNKENNEL_RULE],this.bossList=e[B.DATA_BOSS_LIST],this.monsterList=e[B.DATA_MONSTER_LIST]?e[B.DATA_MONSTER_LIST].map(a=>a[1]):[],this.monsterProportion=e[B.DATA_MONSTER_LIST],this.teleportRule=e[B.DATA_TELEPORT_RULE],this.randomBossList=e.random_boss??[]}getDifficultyLevel(e){return Math.sqrt(this.hardA+this.hardB*e)}calcPKGold(e){const a=this.populationMax;return Math.round((2+1.07*a)*Math.pow(e/.39,2/3))}calcPKExp(e){const a=this.populationMax;return Math.round((3.5+.14*a)*Math.pow(e/.39,2/3))}calcAccumulative(e=this.scoreMax){let a=0,s=0;for(let i=0;i<e;i++){const r=this.getDifficultyLevel(i);a+=this.calcPKGold(r),s+=this.calcPKExp(r)}return a=Math.floor(a/2),s=Math.floor(s/2),{gold:a,exp:s}}};l(B,"DEFAULT_SCORE_MAX",100),l(B,"DEFAULT_POPULATION_MAX",10),l(B,"RULE_MULTICAST",1),l(B,"DATA_SCORE_MAX","pass_score"),l(B,"DATA_POPULATION_MAX","pop_max"),l(B,"DATA_HARD_A","yield_val"),l(B,"DATA_HARD_B","hard_ness"),l(B,"DATA_PASS_BY","passBy"),l(B,"DATA_UNKENNEL_RATE","interval"),l(B,"DATA_UNKENNEL_RULE","interval_rule"),l(B,"DATA_BOSS_LIST","boss"),l(B,"DATA_MONSTER_LIST","wolf_proportion"),l(B,"DATA_TELEPORT_RULE","teleport_rule"),l(B,"DATA_DEBUG","debug");let ut=B;const ve=class ve extends ze{constructor(){super(),ve.onlyExample=this,this.loadData(w.$_map_Obj)}static getOnlyExample(){return ve.onlyExample==null&&(ve.onlyExample=new ve),ve.onlyExample}loadData(t){for(const e in t){const a=t[e];a[ce.DATA_ID]=e,this.m_manager[e]=new ut(t[e])}}getData(t){return this.getDataById(t)}};l(ve,"DATA_COUNT",6),l(ve,"onlyExample");let Et=ve;class pt{constructor(){l(this,"m_data");this.m_data=new ce({})}get baseData(){return this.m_data}}class Dn extends pt{constructor(){super()}}class J extends pt{constructor(e){super();l(this,"score",0);l(this,"isDream",!1);l(this,"isDefendMap",!1);this.m_data=Et.getOnlyExample().getData(e)}static getMapData(e){return Et.getOnlyExample().getData(e)}get gameMapData(){return this.m_data}get canUnkennelAdjust(){return!1}}l(J,"DEFEND_MAP_1","mfx1"),l(J,"ENDLESS_MAP_1","m11"),l(J,"currentMap");const He=class He extends ce{constructor(e){super(e);l(this,"skillsList");e[He.DATA_SKILLS_LIST]instanceof Array?this.skillsList=e[He.DATA_SKILLS_LIST]:e[He.DATA_SKILLS_LIST]instanceof String&&(this.skillsList=[e[He.DATA_SKILLS_LIST]])}};l(He,"DATA_SKILLS_LIST","skills");let Wt=He;const we=class we extends ze{constructor(){super(),we.onlyExample=this,this.loadData(w.$_skillPackage_Obj)}static getOnlyExample(){return we.onlyExample==null&&(we.onlyExample=new we),we.onlyExample}loadData(t){for(const e in t){const a=t[e];a[ce.DATA_ID]=e,this.m_manager[e]=new Wt(t[e])}}getData(t){return this.getDataById(t)}};l(we,"onlyExample");let jt=we;class el extends pt{constructor(e,a=1){super();l(this,"level");this.m_data=jt.getOnlyExample().getData(e),this.level=a}get skillsPackageData(){return this.m_data}}class tl{}l(tl,"COLOR_LIST",[6316128,13631488,13668352,43520,28927,8913056,0]);const te=class te extends De{constructor(e){super(e);l(this,"m_price");l(this,"priceCoin",0);l(this,"priceGold",0);l(this,"priceScore",0);l(this,"unlockMapId","");l(this,"index",0);this.m_price=e[te.DATA_PRICE],this.initPrice(),this.unlockMapId=e[te.DATA_UNLOCK_MAP_ID],this.index=e[te.DATA_INDEX]}get price(){return this.m_price}initPrice(){const e=this.price;if(e)if(e instanceof Array){const a=e;a[0]==te.DATA_COIN?this.priceCoin=a[1]:a[0]==te.DATA_GOLD?this.priceGold=a[1]:a[0]==te.DATA_SCORE&&(this.priceScore=a[1])}else this.priceCoin=e[te.DATA_COIN],this.priceGold=e[te.DATA_GOLD],this.priceScore=e[te.DATA_SCORE]}get isRare(){if(this.priceCoin>0){if(this.priceCoin>=w.$_rare_item_coin||this.index<0)return!0}else if(this.priceScore>0&&(this.priceScore>=w.$_rare_item_invite_score||this.index<0))return!0;return!1}};l(te,"DATA_PRICE","price"),l(te,"DATA_UNLOCK_MAP_ID","unlock_mid"),l(te,"DATA_COIN","coin"),l(te,"DATA_GOLD","gold"),l(te,"DATA_SCORE","invite_score"),l(te,"DATA_INDEX","index");let It=te;const le=class le extends It{constructor(e){super(e);l(this,"gemLevel");l(this,"towerSkillPackage");l(this,"nextLevelId");l(this,"colorIndex");this.typeId=De.TYPE_GEM_ITEM,this.gemLevel=e[le.DATA_GEM_LEVEL],this.towerSkillPackage=e[le.DATA_TOWER_SKILL_PACKAGE],this.nextLevelId=e[le.DATA_NEXT_LEVEL_ID],this.colorIndex=e[le.DATA_COLOR_INDEX],this.res=this.resString}getSkillPackage(e){if(this.towerSkillPackage==null)return null;const a=/\D/gi;e=e.match(a).join("");const s=this.towerSkillPackage[e];return s==null?null:new el(s[le.SKILL_PACKAGE_ID],s[le.SKILL_PACKAGE_LEVEL])}get color(){return tl.COLOR_LIST[this.colorIndex]}get resString(){return"hong"+this.gemLevel}};l(le,"TYPE_PURE","typePure"),l(le,"TYPE_MIX","typeMix"),l(le,"DATA_GEM_LEVEL","gamLevel"),l(le,"DATA_TOWER_SKILL_PACKAGE","sp"),l(le,"DATA_NEXT_LEVEL_ID","nextId"),l(le,"DATA_COLOR_INDEX","color"),l(le,"SKILL_PACKAGE_ID","id"),l(le,"SKILL_PACKAGE_LEVEL","lv");let Xt=le;const Ce=class Ce extends ze{constructor(){super(),Ce.onlyExample=this,this.loadData(w.$_global_properties[De.TYPE_GEM_ITEM])}static getOnlyExample(){return Ce.onlyExample==null&&(Ce.onlyExample=new Ce),Ce.onlyExample}loadData(t){let e;for(e in t)this.m_manager[e]=new Xt(t[e])}initData(){}getData(t){return this.getDataById(t)}};l(Ce,"onlyExample");let zt=Ce;const q=class q extends It{constructor(e){super(e);l(this,"skillPackageId");l(this,"skillPackageLevel");l(this,"skills");l(this,"xGrid");l(this,"yGrid");if(this.skillPackageId=e[q.DATA_SKILL_PACKAGE_ID],this.skillPackageLevel=e[q.DATA_SKILL_PACKAGE_LEVEL],e[q.DATA_SKILLS]instanceof Array)this.skills=e[q.DATA_SKILLS];else if(e[q.DATA_SKILLS]instanceof Object){this.skills=[];for(const a in e[q.DATA_SKILLS])this.skills.push({skid:a,lev:e[q.DATA_SKILLS][a]})}e[q.DATA_X_GRID]?this.xGrid=e[q.DATA_X_GRID]:this.xGrid=1,e[q.DATA_Y_GRID]?this.yGrid=e[q.DATA_Y_GRID]:this.yGrid=1}};l(q,"DATA_A","a"),l(q,"DATA_B","b"),l(q,"DATA_C","c"),l(q,"DATA_D","d"),l(q,"DATA_SKILL_PACKAGE_ID","skill"),l(q,"DATA_SKILL_PACKAGE_LEVEL","skillLv"),l(q,"DATA_SKILLS","skills"),l(q,"DATA_X_GRID","x_grid"),l(q,"DATA_Y_GRID","y_grid");let Z=q;const X=class X extends Z{constructor(e){super(e);l(this,"m_buildValueA",0);l(this,"m_buildValueB",0);l(this,"m_buildValueC",0);l(this,"m_campPrice",["",0]);l(this,"m_campBuildValueA",0);l(this,"m_campBuildValueB",0);l(this,"m_campBuildValueC",0);l(this,"range");l(this,"rate");l(this,"limitNum");e[X.DATA_BUILD_VALUE]?(this.m_buildValueA=e[X.DATA_BUILD_VALUE][Z.DATA_A],this.m_buildValueB=e[X.DATA_BUILD_VALUE][Z.DATA_B],this.m_buildValueC=e[X.DATA_BUILD_VALUE][Z.DATA_C]):e[X.DATA_EXP_VALUE]&&(this.m_buildValueA=e[X.DATA_EXP_VALUE][Z.DATA_A],this.m_buildValueB=e[X.DATA_EXP_VALUE][Z.DATA_B],this.m_buildValueC=e[X.DATA_EXP_VALUE][Z.DATA_C]),e[X.DATA_CAMP_PRICE]&&(this.m_campPrice=e[X.DATA_CAMP_PRICE]),e[X.DATA_CAMP_BUILD_VALUE]&&(this.m_campBuildValueA=e[X.DATA_CAMP_BUILD_VALUE][Z.DATA_A],this.m_campBuildValueB=e[X.DATA_CAMP_BUILD_VALUE][Z.DATA_B],this.m_campBuildValueC=e[X.DATA_CAMP_BUILD_VALUE][Z.DATA_C]),this.range=e[X.DATA_RANGE],this.rate=Math.round(e[X.DATA_RATE]*10),this.limitNum=e[X.DATA_LIMIT_NUM]}get buildValueA(){return J.currentMap&&J.currentMap.isDefendMap?this.m_campBuildValueA:this.m_buildValueA}get buildValueB(){return J.currentMap&&J.currentMap.isDefendMap?this.m_campBuildValueB:this.m_buildValueB}get buildValueC(){return J.currentMap&&J.currentMap.isDefendMap?this.m_campBuildValueC:this.m_buildValueC}get price(){var e;return(e=J.currentMap)!=null&&e.isDefendMap&&this.campPrice instanceof Array?this.campPrice:this.m_price}get campPrice(){return this.m_campPrice}get buildCostPrice(){return this.price[0]}get buildCost(){return this.price[1]}get buildValueAConst(){return this.m_buildValueA}get buildValueBConst(){return this.m_buildValueB}get buildValueCConst(){return this.m_buildValueC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}};l(X,"DATA_BUILD_VALUE","build_val"),l(X,"DATA_EXP_VALUE","exp_val"),l(X,"DATA_CAMP_PRICE","camp_price"),l(X,"DATA_CAMP_BUILD_VALUE","camp_build_val"),l(X,"DATA_RANGE","range"),l(X,"DATA_RATE","rate"),l(X,"DATA_LIMIT_NUM","limit_num");let vt=X;const F=class F extends vt{constructor(e){super(e);l(this,"valueList");l(this,"effectType");l(this,"effectKind");l(this,"effectRange");l(this,"useNum");l(this,"colddown");l(this,"delay");l(this,"attackEffectId");this.typeId=De.TYPE_TRAP_ITEM,this.valueList=e[F.DATA_VALUE_LIST],this.effectType=e[F.DATA_EFFECT_TYPE],this.effectKind=e[F.DATA_EFFECT_KIND],e[F.DATA_USE_NUM]?this.useNum=e[F.DATA_USE_NUM]:this.useNum=1,e[F.DATA_COLDDOWN]?this.colddown=e[F.DATA_COLDDOWN]:this.colddown=.1,e[F.DATA_DELAY]?this.delay=e[F.DATA_DELAY]:this.delay=0,e[F.DATA_EFFECT_RANGE]?this.effectRange=e[F.DATA_EFFECT_RANGE]:this.effectRange=this.range,this.attackEffectId=e[F.DATA_EFFECT]}};l(F,"KIND_BLAST","1"),l(F,"KIND_DAMAGE","2"),l(F,"KIND_VERTIGO","3"),l(F,"KIND_SLOW","4"),l(F,"KIND_BEAT_BACK","5"),l(F,"KIND_COLD_BULLET","50"),l(F,"KIND_BULLET","100"),l(F,"KIND_BULLET_RANDOM","101"),l(F,"EFFECT_TYPE_FLOOR","1"),l(F,"EFFECT_TYPE_AIR","2"),l(F,"EFFECT_TYPE_ALL","3"),l(F,"EFFECT_TYPE_LIGHTNING","4"),l(F,"EFFECT_KIND_SINGLE","1"),l(F,"EFFECT_KIND_MULTI","2"),l(F,"DATA_VALUE_LIST","value"),l(F,"DATA_EFFECT_TYPE","effectType"),l(F,"DATA_EFFECT_KIND","effectKind"),l(F,"DATA_EFFECT_RANGE","effectRange"),l(F,"DATA_USE_NUM","use_times"),l(F,"DATA_COLDDOWN","colddown"),l(F,"DATA_DELAY","delay"),l(F,"DATA_EFFECT","effect");let Yt=F;class Ca extends vt{constructor(e){super(e);l(this,"m_buildCostA");l(this,"m_buildCostB");l(this,"m_buildCostC");l(this,"m_campBuildCostA");l(this,"m_campBuildCostB");l(this,"m_campBuildCostC");l(this,"damageA");l(this,"damageB");l(this,"damageC");l(this,"bulletId","");l(this,"buffEffect");l(this,"levelMax");this.m_buildCostA=e.build_cost.a,this.m_buildCostB=e.build_cost.b,this.m_buildCostC=e.build_cost.c,this.m_campBuildCostA=e.camp_build_cost.a,this.m_campBuildCostB=e.camp_build_cost.b,this.m_campBuildCostC=e.camp_build_cost.c,this.damageA=e.damage.a,this.damageB=e.damage.b,this.damageC=e.damage.c,this.buffEffect=e.buffEffect,this.levelMax=e.lev_max,this.bulletId=e.bId}get buildCostA(){var e;return(e=J.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostA:this.m_buildCostA}get buildCostB(){var e;return(e=J.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostB:this.m_buildCostB}get buildCostC(){var e;return(e=J.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostC:this.m_buildCostC}get buildCostAConst(){return this.m_buildCostA}get buildCostBConst(){return this.m_buildCostB}get buildCostCConst(){return this.m_buildCostC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}get isMagicTower(){return this.id=="xiangqianta"}}const Re=class Re extends ze{constructor(){super(),Re.onlyExample=this,this.loadData(w.$_towerAtt_Obj)}static getOnlyExample(){return Re.onlyExample==null&&(Re.onlyExample=new Re),Re.onlyExample}loadData(t){for(const e in t){const a=t[e];a[ce.DATA_ID]=e,this.m_manager[e]=new Ca(t[e])}}getData(t){return this.getDataById(t)}};l(Re,"onlyExample");let qt=Re;const j=class j extends Z{constructor(e){super(e);l(this,"shapeMode");l(this,"damageMode");l(this,"radii");l(this,"shadow");l(this,"fallAccSpeed");l(this,"floorPathId");l(this,"hitEffectId");this.shapeMode=e[j.DATA_SHAPE_MODE],this.damageMode=e[j.DATA_DAMAGE_MODE],this.radii=e[j.DATA_RADII],e[j.DATA_SHADOW]?this.shadow=e[j.DATA_SHADOW]:this.shadow=1,this.fallAccSpeed=e[j.DATA_FALL_ACC_SPEED],this.floorPathId=e[j.DATA_FLOOR_PATH_ID],this.hitEffectId=e[j.DATA_HIT_EFFECT_ID]}};l(j,"SHAPE_COMMON",0),l(j,"SHAPE_DIRECTION",1),l(j,"SHAPE_ROLL",2),l(j,"DAMAGE_NULL",0),l(j,"DAMAGE_COMMON",1),l(j,"DAMAGE_PERFORATIVE",2),l(j,"DAMAGE_MAGICAL",3),l(j,"DAMAGE_SIEGE",4),l(j,"DAMAGE_MIXED",5),l(j,"FALL_ACC_SPEED_THRESHOLD",-7),l(j,"DATA_SHAPE_MODE","shapeMode"),l(j,"DATA_DAMAGE_MODE","damageMode"),l(j,"DATA_RADII","radii"),l(j,"DATA_SHADOW","shadow"),l(j,"DATA_FALL_ACC_SPEED","fallAcc"),l(j,"DATA_FLOOR_PATH_ID","path"),l(j,"DATA_HIT_EFFECT_ID","effect");let Jt=j;const ye=class ye extends ze{constructor(){super(),ye.onlyExample=this,this.loadData(w.$_bulletAtt_Obj)}static getOnlyExample(){return ye.onlyExample==null&&(ye.onlyExample=new ye),ye.onlyExample}loadData(t){for(const e in t){const a=t[e];a[ce.DATA_ID]=e,this.m_manager[e]=new Jt(t[e])}}getData(t){return this.getDataById(t)}};l(ye,"onlyExample");let Zt=ye;const R=class R extends Z{constructor(e){super(e);l(this,"hpMaxA");l(this,"hpMaxB");l(this,"hpMaxC");l(this,"expMaxA",0);l(this,"expMaxB",0);l(this,"expMaxC",0);l(this,"expMaxD",0);l(this,"speedBase");l(this,"charm");l(this,"height");l(this,"width");l(this,"speakList",[]);l(this,"population");e[R.DATA_HP_MAX]?(this.hpMaxA=e[R.DATA_HP_MAX][Z.DATA_A],this.hpMaxB=e[R.DATA_HP_MAX][Z.DATA_B],this.hpMaxC=e[R.DATA_HP_MAX][Z.DATA_C]):(this.hpMaxA=e[R.DATA_HP_MAX_A],this.hpMaxB=e[R.DATA_HP_MAX_B],this.hpMaxC=e[R.DATA_HP_MAX_C]),e[R.DATA_EXP_MAX]&&(this.expMaxA=e[R.DATA_EXP_MAX][Z.DATA_A],this.expMaxB=e[R.DATA_EXP_MAX][Z.DATA_B],this.expMaxC=e[R.DATA_EXP_MAX][Z.DATA_C],this.expMaxD=e[R.DATA_EXP_MAX][Z.DATA_D]),this.speedBase=e[R.DATA_SPEED_BASE],this.charm=e[R.DATA_CHARM],this.height=e[R.DATA_HEIGHT],this.width=e[R.DATA_WIDTH],e[R.DATA_SPEAK_LIST]instanceof Array&&(this.speakList=e[R.DATA_SPEAK_LIST]),this.population=e[R.DATA_POPULATION]}getSpeak(e=0){if(this.speakList instanceof Array&&this.speakList.length>e){if(this.speakList[e]instanceof String)return this.speakList[e];if(this.speakList[e]instanceof Array){const a=this.speakList[e];return a[Math.floor(Math.random()*a.length)]}}return""}getSpeakEnter(){return this.getSpeak(R.SPEAK_ENTER)}getSpeakIdle(){return this.getSpeak(R.SPEAK_IDLE)}getSpeakInjury(){return this.getSpeak(R.SPEAK_INJURY)}getSpeakDie(){return this.getSpeak(R.SPEAK_DIE)}getSpeakInvade(){return this.getSpeak(R.SPEAK_INVADE)}getSpeakCast(){return this.getSpeak(R.SPEAK_CAST)}get isBoss(){return this.population>=100}get isRandomBoss(){return this.population==99}getHpMax(e,a=1){return Math.floor((this.hpMaxA+e*(this.hpMaxB+e*this.hpMaxC))*a)}};l(R,"SPEAK_ENTER",0),l(R,"SPEAK_IDLE",1),l(R,"SPEAK_INJURY",2),l(R,"SPEAK_DIE",3),l(R,"SPEAK_INVADE",4),l(R,"SPEAK_CAST",5),l(R,"DEFENSE_NULL",0),l(R,"DEFENSE_LIGHT",1),l(R,"DEFENSE_COMMON",2),l(R,"DEFENSE_HEAVY",3),l(R,"DEFENSE_BUILDING",4),l(R,"DEFENSE_BOSS",5),l(R,"DEFENSE_HOLY",6),l(R,"DEFENSE_INVINCIBLE",7),l(R,"DATA_HP_MAX","hp_factor"),l(R,"DATA_EXP_MAX","explev"),l(R,"DATA_HP_MAX_A","ha"),l(R,"DATA_HP_MAX_B","hb"),l(R,"DATA_HP_MAX_C","hc"),l(R,"DATA_SPEED_BASE","speed"),l(R,"DATA_CHARM","charm"),l(R,"DATA_HEIGHT","height"),l(R,"DATA_WIDTH","width"),l(R,"DATA_SPEAK_LIST","speak"),l(R,"DATA_POPULATION","pop");let Tt=R;const Oe=class Oe extends ze{constructor(){super(),Oe.onlyExample=this,this.loadData(w.$_wolfAtt_Obj)}static getOnlyExample(){return Oe.onlyExample==null&&(Oe.onlyExample=new Oe),Oe.onlyExample}loadData(t){for(const e in t){const a=t[e];a[ce.DATA_ID]=e,this.m_manager[e]=new Tt(a)}}getBossList(t){const e=[];if(!(t instanceof Array))return e;for(let a=0;a<t.length;a++){const s=this.getData(t[a]);s&&s.isBoss&&e.push(t[a])}return e}getRandomBossList(t){const e=[];if(!(t instanceof Array))return e;for(let a=0;a<t.length;a++){const s=this.getData(t[a]);s&&s.isRandomBoss&&e.push(t[a])}return e}getData(t){return this.getDataById(t)}static get(t){return this.getOnlyExample().getData(t)}};l(Oe,"onlyExample");let _e=Oe;function al(o,t){const e=w.$_wolfAtt_Obj[o].pop;return e<99?e:t??e}function xn(o,t=1){return y.sumBy(o,e=>al(e,t))}function ka(o,t){return Math.round((2+1.07*t)*Math.pow(o/.39,2/3))}function bn(o,t){const e=w.dream_data.dm_opt_cfg.tower_sum_exp;return Math.round(t*Math.pow(o,e.power)*e.popu+e.p)}function Sn(o,t){const e=o.monsterProportion.map(_=>({prop:_[0],data:_e.get(_[1])}));let a=e.length;if(a==0)return{mlist:[],clist:[]};const s=t.slice(0,a),i=s.flatMap((_,p)=>new Array(_).fill(e[p].data));let r=o.populationMax-y.sumBy(i,_=>_.population);if(r<0)return null;for(;r>0;){for(;a>0&&r<e[a-1].data.population;)a--;if(a==0)break;const _=Math.random()*e[a-1].prop,p=y.findIndex(e,m=>_<m.prop);r-=e[p].data.population,i.push(e[p].data),s[p]++}return{mlist:y.shuffle(i),clist:y.zip(e,s).map(_=>({data:_[0].data,num:_[1]}))}}function ll(o){if(o.length==0)return[];const t=o.map(a=>a*1e3),e=ms(...t);for(let a=t.length-1;a>=0;a--)t[a]=(t[a]-(a==0?0:t[a-1]))/e;return t}function sl(o){const t=[];for(const a of o)t.push(t.length==0?a:t.at(-1)+a);const e=t.at(-1);return t.map(a=>a/e)}function Nn(o){const t=o.monsterProportion.length,e=o.monsterProportion.map((c,g)=>c[0]-(g==0?0:o.monsterProportion[g-1][0])),a=o.monsterList.map(c=>al(c)),s=o.populationMax,i=Ma(s+1);for(let c=0;c<=s;c++)for(let g=0;g<t;g++)a[g]<=c&&(i[c]+=e[g]);const r=Ma(s+1,s+1);r[0][0]=1;for(let c=1;c<=s;c++)for(let g=1;g<=s;g++)for(let T=0;T<t;T++)c>=a[T]&&(r[c][g]+=r[c-a[T]][g-1]*(e[T]/i[c]));const _=r[s].findLastIndex(c=>c>1e-6),p=[...r[s].slice(0,_+1)],m=[];for(let c=0;c<t;c++){const g=Math.min(_,Math.floor(s/a[c]));for(let T=0;T<=s;T++)r[T].fill(0);r[0][0]=1;for(let T=1;T<=s;T++)for(let v=0;v<=g;v++)for(let I=0;I<t;I++)T<a[I]||(I!=c?r[T][v]+=r[T-a[I]][v]*(e[I]/i[T]):v>0&&(r[T][v]+=r[T-a[I]][v-1]*(e[I]/i[T])));m.push([...r[s].slice(0,g+1)])}return{all:p,each:m}}const Ra=y.sortBy(y.map(w.$_wolfAtt_Obj,(o,t)=>({id:t,name:o.name,label:`${de(t)} [${t}]`})),"id"),nl=Ra.filter(o=>o.name.startsWith("camp_")),il=Ra.filter(o=>o.id.startsWith("D_")),wn=y.difference(Ra,nl,il),Ua=y.chain(Object.values(w.$_skillAtt_Obj.towerSkill)).groupBy(o=>o.kindId).mapValues(o=>({id:o[0].id,params:o[0].params})).value(),Fa=[1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100],ol=y.chain(w.$_map_Obj).map((o,t)=>y.extend(o,{id:t})).toArray().sortBy("index").value(),Cn=y.chain(w.dream_maps).toArray().sortBy("index").value(),rl=ol.map(o=>({label:`${o.id} ${o.name}`,value:o.id})),Rn=Cn.map(o=>({label:`${o.id} ${o.name}`,value:o.id})),ul=y.chain(w.$_towerAtt_Obj).sortBy(o=>Math.abs(o.index)).map(o=>({label:o.name,value:o.id})).value(),yn=y.chain(w.$_wolfAtt_Obj).map(o=>({value:o.id,label:`${de(o.id)} [${o.id}]`})).sortBy("id").value(),$a=y.chain(w.$_wolfAtt_Obj).filter(o=>o.pop<99).map(o=>({value:o.id,label:`${de(o.id)} [${o.id}]`})).sortBy("id").value(),Ba=y.chain(w.$_wolfAtt_Obj).filter(o=>o.pop>=99).map(o=>({value:o.id,label:`${de(o.id)} [${o.id}]`})).sortBy("id").value();function On(o){return nn(o)}function it(o,t,e){return _s.hsl(On(o),t,e).string()}function Kn(o){return"#"+o.toString(16).padStart(6,"0")}const dl=V({__name:"WolfHpChart",props:{hpData:{},width:{default:600},height:{default:200}},setup(o){Kt([Sa,Pt,Vt,Mt,kt]);const t=o,e=k(()=>({color:["#00A2E8"],title:{text:"当前狼血量",left:"center",textStyle:{fontStyle:"normal",fontFamily:"sans-serif",fontSize:16}},tooltip:{},xAxis:{type:"value",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}}},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.hpData.map(a=>a.name)},grid:{left:100,top:30,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.hpData.map(a=>a.value),itemStyle:{color:function(a){return it(a.name,80,45)}}}}));return(a,s)=>{const i=be("v-chart");return f(),x("div",null,[n(i,{class:"chart",option:u(e),style:Da({width:`${a.width}px`,height:`${a.height}px`}),autoresize:""},null,8,["option","style"])])}}}),Ut=o=>{const t=Ya(),e=ba(),a=e.query,s=pe(y.mapValues(o,(i,r)=>r in a?typeof i=="number"?Number(a[r]):typeof i=="boolean"?a[r]==="true":a[r]:i));return fe(s,()=>t.replace({path:e.path,query:y.pickBy(s,(i,r)=>i!=o[r])})),s},Pn={class:"space-x-4"},Vn=V({__name:"index",setup(o){const t=Ut({mid:"m2A",score:1}),e=k(()=>w.dream_maps[t.mid]),a=I=>I%10===0?(I-10)%100+10:I%10,s=I=>{const b=a(I).toString(),P=w.dream_waves[t.mid];return I%10==0?P.boss[b]:P.wolf[b]},i=k(()=>s(t.score).map(I=>_e.getOnlyExample().getData(I))),r=(I,b)=>{const P=a(b).toString();return w.dream_waves[I].popu[P]},_=k(()=>r(t.mid,t.score)),p=I=>bn(I,r(t.mid,I==0?1:I==9?10:a(I))),m=k(()=>p(t.score)),c=k(()=>Math.sqrt(e.value.hard_ness*t.score+e.value.yield_val)),g=k(()=>{for(const[I,b]of Object.entries(w.dream_data.dm_wolf_hard_ness)){const[P,U]=I.split("_");if(t.score>=Number.parseInt(P)&&t.score<=Number.parseInt(U))return b}return w.dream_data.dm_wolf_hard_ness.default}),T=k(()=>i.value.map(I=>({name:I.name,value:I.getHpMax(c.value,g.value)}))),v=k(()=>{let I=0,b=0;for(let P=1;P<=t.score;P++){let U=Math.sqrt(e.value.yield_val+e.value.hard_ness*P);I+=ka(U,r(t.mid,P)),b+=p(P)}return{gold:I,exp:b}});return(I,b)=>{const P=Ae,U=Fe,K=xe,Se=he,G=be("vue-latex"),Q=$e;return f(),C(Q,{model:u(t),"label-width":"120px"},{default:d(()=>[n(K,{label:"地图"},{default:d(()=>[n(P,{modelValue:u(t).mid,"onUpdate:modelValue":b[0]||(b[0]=gt=>u(t).mid=gt),options:u(Rn),style:{"max-width":"250px"}},null,8,["modelValue","options"]),n(U,{effect:"light",class:"mx-1"},{default:d(()=>[S(" 难度系数："+D(u(e).hard_ness)+", "+D(u(e).yield_val),1)]),_:1})]),_:1}),n(K,{label:"进度"},{default:d(()=>[n(Se,{modelValue:u(t).score,"onUpdate:modelValue":b[1]||(b[1]=gt=>u(t).score=gt),min:0},null,8,["modelValue"]),n(U,{effect:"light",class:"mx-1"},{default:d(()=>[S(" HpRate："+D(u(g)),1)]),_:1}),n(U,{effect:"light",class:"mx-1"},{default:d(()=>[S(" Population："+D(u(_)),1)]),_:1})]),_:1}),n(K,null,{default:d(()=>[S(" 银币： "),n(G,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${u(ka)(u(c),u(_))}`},null,8,["expression"])]),_:1}),n(K,null,{default:d(()=>[S(" 经验： "),n(G,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${u(m)}`},null,8,["expression"])]),_:1}),n(K,null,{default:d(()=>[A("div",Pn,[A("span",null,"总银币："+D(u(v).gold),1),A("span",null,"总经验："+D(u(v).exp),1)])]),_:1}),n(dl,{"hp-data":u(T),height:300},null,8,["hp-data"])]),_:1},8,["model"])}}}),Mn=Object.freeze(Object.defineProperty({__proto__:null,default:Vn},Symbol.toStringTag,{value:"Module"})),kn={key:0,class:"space-y-1"},Un={class:"space-x-0.5"},Fn=V({__name:"index",setup(o){const t=y.sortBy(Object.values(w.dream_maps),"name").map(e=>({...e,...w.dream_waves[e.id],waves:Object.assign({},w.dream_waves[e.id].wolf,w.dream_waves[e.id].boss)}));return(e,a)=>{const s=Ue,i=Fe,r=ke;return f(),x("div",null,[n(r,{data:u(t)},{default:d(()=>[n(s,{prop:"id",label:"id",sortable:"",align:"center"}),n(s,{prop:"name",label:"name",sortable:"",align:"center"}),n(s,{prop:"interval",label:"interval",sortable:"",align:"center"}),n(s,{prop:"interval_rule",label:"interval_rule",sortable:"",align:"center"}),n(s,{prop:"hard_ness",label:"hard_ness",sortable:"",align:"center"}),n(s,{prop:"yield_val",label:"yield_val",sortable:"",align:"center"}),n(s,{label:"waves",type:"expand",width:"80"},{default:d(_=>[_.row.waves?(f(),x("div",kn,[A("table",null,[(f(!0),x(M,null,H(_.row.waves,(p,m)=>(f(),x("tr",{key:m},[A("td",null,[n(i,null,{default:d(()=>[S(D(m),1)]),_:2},1024)]),A("td",Un,[(f(!0),x(M,null,H(p,(c,g)=>(f(),C(i,{key:g,style:Da({color:u(it)(c,40,40),"background-color":u(it)(c,80,90),"border-color":u(it)(c,50,80)})},{default:d(()=>[S(D(u(de)(c)),1)]),_:2},1032,["style"]))),128))]),A("td",null,[n(i,null,{default:d(()=>[S(D(_.row.popu[m]),1)]),_:2},1024)])]))),128))]),(f(!0),x(M,null,H(_.row.waves,(p,m)=>(f(),x("div",{key:m,class:"space-x-1"}))),128))])):ne("",!0)]),_:1})]),_:1},8,["data"])])}}}),$n=ge(Fn,[["__scopeId","data-v-3b5ce602"]]),Bn=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"})),Hn=V({__name:"DreamWaveEditor",props:At({wolfList:{}},{modelValue:{},modelModifiers:{}}),emits:At(["change"],["update:modelValue"]),setup(o,{emit:t}){const e=o,a=re(o,"modelValue"),s=t,i=Y(""),r=Y(!1),_=Y(),p=Y(e.wolfList.slice()),m=I=>{a.value.splice(a.value.indexOf(I),1),s("change")},c=()=>{r.value=!0,zl(()=>{_.value.focus()})},g=I=>{console.log(I),p.value=I?e.wolfList.filter(T(I)):e.wolfList},T=I=>b=>b.id.toLowerCase().includes(I.toLowerCase())||b.value.includes(I),v=I=>{a.value.push(I),a.value.sort((b,P)=>b.id.localeCompare(P.id)),r.value=!1,i.value="",s("change")};return(I,b)=>{const P=Fe,U=$l,K=mt,Se=Ie;return f(),x("div",null,[A("div",null,[(f(!0),x(M,null,H(a.value,(G,Q)=>(f(),C(P,{key:Q,type:"info",effect:"plain",class:"m-0.5",closable:"","disable-transitions":!1,onClose:gt=>m(G)},{default:d(()=>[A("ruby",null,[S(D(G.value)+" ",1),A("rt",null,D(G.id),1)])]),_:2},1032,["onClose"]))),128)),u(r)?(f(),C(u(_t),{key:0,ref_key:"InputRef",ref:_,modelValue:u(i),"onUpdate:modelValue":b[0]||(b[0]=G=>me(i)?i.value=G:null),filterable:"","filter-method":g,class:"inline-block m-0.5",placeholder:"Select",size:"small",style:{"max-width":"160px"},onChange:v},{default:d(()=>[(f(!0),x(M,null,H(u(p),G=>(f(),C(K,{key:G.id,value:G},{default:d(()=>[S(D(G.value)+" ",1),n(U,{class:"mx-1",type:"primary"},{default:d(()=>[S("["+D(G.id)+"]",1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(f(),C(Se,{key:1,class:"button-new-tag m-0.5",type:"primary",plain:"",size:"small",onClick:c},{default:d(()=>[S(" + ")]),_:1}))])])}}}),Gn=V({__name:"DreamWaveTable",props:{modelValue:{default:Fa.map(o=>({key:o,wolf:[],popu:0,popFixed:!1}))},modelModifiers:{}},emits:["update:modelValue"],setup(o,{expose:t}){const e=Object.keys(w.$_wolfAtt_Obj).map(p=>({id:p,value:de(p)})),a=re(o,"modelValue"),s=(p,m=!1)=>{(!p.popFixed||m)&&(p.popFixed=!1,p.popu=xn(p.wolf.map(c=>c.id)))},i=p=>{p.popu==0?(p.popFixed=!1,s(p)):p.popFixed=!0};return t({importData:p=>{a.value=Fa.map(m=>({key:m,wolf:(p.wolf[m]??p.boss[m]??[]).map(c=>({id:c,value:de(c)})),popu:p.popu[m],popFixed:!0}))},toExportData:()=>{const p={wolf:{},boss:{},popu:{}};for(const m of a.value){const c=m.wolf.map(g=>g.id);p[m.key<10?"wolf":"boss"][m.key]=c,p.popu[m.key]=m.popu}return p}}),(p,m)=>{const c=Ue,g=he,T=Ie,v=ke;return f(),C(v,{data:a.value,style:{"max-width":"1200px"}},{default:d(()=>[n(c,{prop:"key",label:"Key",width:80,align:"center"}),n(c,{label:"Wolf"},{default:d(I=>[n(Hn,{modelValue:I.row.wolf,"onUpdate:modelValue":b=>I.row.wolf=b,"wolf-list":u(e),onChange:b=>s(I.row)},null,8,["modelValue","onUpdate:modelValue","wolf-list","onChange"])]),_:1}),n(c,{label:"Population",width:160,align:"center"},{default:d(I=>[n(g,{modelValue:I.row.popu,"onUpdate:modelValue":b=>I.row.popu=b,size:"small",min:0,style:{width:"90px"},class:Yl({primary:I.row.popFixed}),onChange:b=>i(I.row)},null,8,["modelValue","onUpdate:modelValue","class","onChange"]),n(T,{icon:I.row.popFixed?u(ts):u(as),circle:"",size:"small",class:"m-0.5",onClick:b=>I.row.popFixed?s(I.row,!0):I.row.popFixed=!0},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])}}}),Wn=V({__name:"index",setup(o){const t=Qa(),e=wa(),a=Y(),s=Object.values(w.dream_maps).map(m=>({label:m.name,value:m.id})),i=Y(),r=()=>{var m;i.value&&((m=a.value)==null||m.importData(w.dream_waves[i.value]))},_=async()=>{var m;try{const c=await t.open();(m=a.value)==null||m.importData(c),ot.success("成功导入数据")}catch{ot.error("导入格式错误！")}},p=()=>{var m;e.open((m=a.value)==null?void 0:m.toExportData())};return(m,c)=>{const g=Ae,T=Ie;return f(),x("div",null,[n(g,{modelValue:u(i),"onUpdate:modelValue":c[0]||(c[0]=v=>me(i)?i.value=v:null),options:u(s),placeholder:"原型",style:{"max-width":"250px"},onChange:r},null,8,["modelValue","options"]),n(T,{onClick:_},{default:d(()=>[S("导入")]),_:1}),n(T,{onClick:p},{default:d(()=>[S("导出")]),_:1}),n(Gn,{ref_key:"tableRef",ref:a},null,512)])}}}),jn=Object.freeze(Object.defineProperty({__proto__:null,default:Wn},Symbol.toStringTag,{value:"Module"}));function Xn(o,t){const e=o.toFixed(8),a=e.indexOf(".");return a==-1||e.length-a-1<=t?e:o.toFixed(t).replace(/\.?0+$/,"")}function Qt(o,t=0,e=!1,a="14",s=""){return`<span style="color:#${t.toString(16).padStart(6,"0")};${e?"font-weight:bold;":""}${a?`font-size:${a};`:""}${s?`font-family:${s};`:""}">${o.replaceAll(`
`,"<br>")}</span>`}function zn(o){return Math.floor(o/3600)+":"+Math.floor(o/60%60).toString().padStart(2,"0")+":"+(o%60).toString().padStart(2,"0")}class $ extends De{constructor(t){super(t)}}l($,"KIND_HIT","hit"),l($,"KIND_INVASION","invasion"),l($,"KIND_TELEPORT","teleport"),l($,"KIND_BUFF_TOP","buffTop"),l($,"KIND_BUFF_MID","buffMid"),l($,"KIND_BUFF_BOT","buffBot"),l($,"KIND_MAGIC","effectMagic"),l($,"KIND_PATH","effectPath"),l($,"KIND_CRIT","effectCrit"),l($,"KIND_SUMMON","effectSummon"),l($,"KIND_CLOUD","effectCloud"),l($,"KIND_MIRROR","effectMirror"),l($,"KIND_CURE","effectCure"),l($,"KIND_CURE_ONE","effectCureOne"),l($,"KIND_SNEER","effectSneer"),l($,"KIND_LINKS","effectLinks"),l($,"KIND_RELIVE","effectRelive"),l($,"KIND_SUICIDE","effectSuicide"),l($,"KIND_BLINK_IN","effectBlinkIn"),l($,"KIND_BLINK_OUT","effectBlinkOut"),l($,"KIND_LIGHTNING","lightning"),l($,"KIND_FIELD_ATTACK","allAttack"),l($,"KIND_FIELD_ATTACK_AOE","allAttackAOE"),l($,"KIND_CUSS","effectCuss"),l($,"KIND_CUSS_BREAK","effectCussBreak"),l($,"KIND_SIGN_SUMMON","signSummon"),l($,"KIND_SIGN_CURE","signCure"),l($,"KIND_SIGN_CLOUD","signCloud"),l($,"KIND_SIGN_SHIELD","signShield"),l($,"KIND_SIGN_TRANSFORM","signTransform"),l($,"KIND_BOSS","effectBoss");const Ke=class Ke extends De{constructor(e){super(e);l(this,"parameter");l(this,"levels");this.parameter=e[Ke.DATA_PARAMETER],this.levels=e[Ke.DATA_LEVELS]}getLevelParam(e,a){return this.parameter!=null?this.parameter[a]:this.levels!=null?(e=Math.min(Math.max(0,e-1),this.levels.length-1),this.levels[e][a]):null}hasLevel(){return this.parameter==null}};l(Ke,"TYPE_TOWER_SKILL","typeTowerSkill"),l(Ke,"TYPE_MONSTER_SKILL","typeMonsterSkill"),l(Ke,"DATA_PARAMETER","params"),l(Ke,"DATA_LEVELS","levels");let Xe=Ke;class N extends Xe{constructor(t){super(t),t[ce.DATA_TYPE_ID]=Xe.TYPE_TOWER_SKILL}}l(N,"KIND_AURA","Aura"),l(N,"KIND_CHANGE_BULLET","Bultype"),l(N,"KIND_CHANGE_DAMAGE","ChangeDam"),l(N,"KIND_CHANGE_RATE","ChangeRate"),l(N,"KIND_CHANGE_RANGE","ChangeRange"),l(N,"KIND_FIELD_ATTACK","ALLAP"),l(N,"KIND_DIVIDED_ATTACK","DivAP"),l(N,"KIND_SCATTER_ATTACK","ScaAP"),l(N,"KIND_COMBO_ATTACK","ComAP"),l(N,"KIND_GUIDED_BULLET","GuidedBul"),l(N,"KIND_ATTACK_RATE","AttackRate"),l(N,"KIND_AOE_ATTACK","AoeAP"),l(N,"KIND_THROUGHOUT_ATTACK","ThoAP"),l(N,"KIND_BOUNCE_ATTACK","BouAP"),l(N,"KIND_FLOAT_DAMAGE","FloatDam"),l(N,"KIND_CRIT","Crit"),l(N,"KIND_REDUCED_DEFENSE","RedDef"),l(N,"KIND_POISON","Poison"),l(N,"KIND_SLOW","Slow"),l(N,"KIND_BURN_COLD","BC"),l(N,"KIND_BEAT_BACK","Beat"),l(N,"KIND_SILENCE","Silence"),l(N,"KIND_VERTIGO","Vertigo"),l(N,"KIND_INTIMIDATE","Intimidate"),l(N,"KIND_CUSS","Cuss"),l(N,"KIND_BURN","Burn"),l(N,"KIND_COLD","Cold");const L=class L extends Xe{constructor(t){super(t),t[ce.DATA_TYPE_ID]=Xe.TYPE_MONSTER_SKILL}static get allMonsterSkill(){return[L.KIND_FLY,L.KIND_AIRBORNE,L.KIND_ISOLATION,L.KIND_RELIVE,L.KIND_SUICIDE,L.KIND_REINCARNATE,L.KIND_RESIST_FIRE,L.KIND_RESIST_FROST,L.KIND_RESIST_POISON,L.KIND_RESIST_BEAT,L.KIND_RESIST_SILENCE,L.KIND_RESIST_VERTIGO,L.KIND_RESIST_CRIT,L.KIND_RESIST_LIGHT,L.KIND_RESIST_STRSMOOTH,L.KIND_SLOWF,L.KIND_WEAK_FIRE,L.KIND_WEAK_FROST,L.KIND_WEAK_POISON,L.KIND_WEAK_BEAT,L.KIND_WEAK_SILENCE,L.KIND_WEAK_VERTIGO,L.KIND_WEAK_CRIT,L.KIND_WEAK_LIGHT,L.KIND_RUN,L.KIND_MIRROR,L.KIND_SUMMON,L.KIND_CLOUD,L.KIND_CURE,L.KIND_BLINK,L.KIND_HIDE,L.KIND_SHIELD,L.KIND_SNEER,L.KIND_TRANSFORM,L.KIND_LINKS]}};l(L,"EVENT_RED",1),l(L,"EVENT_YELLOW",2),l(L,"EVENT_GREEN",3),l(L,"EVENT_FULL",4),l(L,"EVENT_INTIMIDATE",20),l(L,"EVENT_VERTIGO",21),l(L,"EVENT_SILENCE",22),l(L,"EVENT_SLOW",23),l(L,"EVENT_REDUCED_DEFENSE",24),l(L,"EVENT_POISON",25),l(L,"EVENT_BURN",26),l(L,"EVENT_COLD",27),l(L,"EVENT_HIT",40),l(L,"EVENT_CRIT",41),l(L,"EVENT_BEAT_BACK",42),l(L,"EVENT_FRIENT_DIE",43),l(L,"EVENT_DIE",44),l(L,"KIND_FLY","fly"),l(L,"KIND_AIRBORNE","airborne"),l(L,"KIND_ISOLATION","isolation"),l(L,"KIND_RELIVE","revive"),l(L,"KIND_SUICIDE","burst"),l(L,"KIND_REINCARNATE","reborn"),l(L,"KIND_SLOWF","slowf"),l(L,"KIND_RESIST_FIRE","resistFire"),l(L,"KIND_RESIST_FROST","resistFrost"),l(L,"KIND_RESIST_POISON","resistPoison"),l(L,"KIND_RESIST_SLOW","resistSlow"),l(L,"KIND_RESIST_BEAT","resistBeat"),l(L,"KIND_RESIST_SILENCE","resistSilence"),l(L,"KIND_RESIST_VERTIGO","resistVertigo"),l(L,"KIND_RESIST_CRIT","resistCrit"),l(L,"KIND_RESIST_LIGHT","resistLight"),l(L,"KIND_RESIST_INTIMIDATE","resistIntimidate"),l(L,"KIND_WEAK_FIRE","weakFire"),l(L,"KIND_WEAK_FROST","weakFrost"),l(L,"KIND_WEAK_POISON","weakPoison"),l(L,"KIND_WEAK_SLOW","weakSlow"),l(L,"KIND_WEAK_BEAT","weakBeat"),l(L,"KIND_WEAK_SILENCE","weakSilence"),l(L,"KIND_WEAK_VERTIGO","weakVertigo"),l(L,"KIND_WEAK_CRIT","weakCrit"),l(L,"KIND_WEAK_LIGHT","weakLight"),l(L,"KIND_WEAK_INTIMIDATE","weakIntimidate"),l(L,"KIND_RESIST_STRSMOOTH","strsmooth"),l(L,"KIND_RUN","sprint"),l(L,"KIND_MIRROR","divide"),l(L,"KIND_SUMMON","summon"),l(L,"KIND_CLOUD","cloud"),l(L,"KIND_CURE","massTreatment"),l(L,"KIND_BLINK","blink"),l(L,"KIND_HIDE","invisible"),l(L,"KIND_SHIELD","shield"),l(L,"KIND_SNEER","taunt"),l(L,"KIND_TRANSFORM","morph"),l(L,"KIND_LINKS","links");let E=L;const oe=class oe extends ze{constructor(){super(),oe.onlyExample=this,this.loadData(w.$_skillAtt_Obj)}static getOnlyExample(){return oe.onlyExample==null&&(oe.onlyExample=new oe),oe.onlyExample}loadData(t){for(const e in t[oe.TOWER_SKILL]){const a=t[oe.TOWER_SKILL][e];a[ce.DATA_ID]=e,this.m_manager[e]=new N(a)}for(const e in t[oe.MONSTER_SKILL]){const a=t[oe.MONSTER_SKILL][e];a[ce.DATA_ID]=e,this.m_manager[e]=new E(a)}}getData(t){return this.getDataById(t)}};l(oe,"onlyExample"),l(oe,"TOWER_SKILL","towerSkill"),l(oe,"MONSTER_SKILL","monsterSkill"),l(oe,"TRAP_SKILL","trapSkill");let ea=oe;class O{static toPercentage(t){return String(Math.round(t*100*100)/100)+"%"}static toGridStr(t){return String(Math.round(t/100)/10)}static getPosID(t,e){return t+"_"+e}}class cl extends pt{constructor(e,a,s=!1){super();l(this,"level",0);l(this,"index",0);l(this,"enabled",!0);l(this,"m_skillInfo","");l(this,"m_nextLevelSkillInfo","");l(this,"skillTag1","");l(this,"skillTag2","");l(this,"skillTag3","");l(this,"nextLevelSkillTag1","");l(this,"nextLevelSkillTag2","");l(this,"nextLevelSkillTag3","");l(this,"m_updateFunction",()=>{});if(s){this.m_data=new Tt({id:e+"_0",kindId:e});return}this.m_data=ea.getOnlyExample().getData(e),this.level=a,this.enabled=!0}get data(){return this.m_data}get skillInfo(){return this.m_updateFunction!=null&&this.m_updateFunction(),this.m_skillInfo||(this.m_skillInfo=""),this.m_skillInfo}get nextLevelSkillInfo(){return this.m_nextLevelSkillInfo||(this.m_nextLevelSkillInfo=""),this.m_nextLevelSkillInfo}}class W extends cl{constructor(e,a,s){super(e,a);l(this,"tower");this.tower=s}static create(e,a,s){const i=new W("",a,s);return i.m_data=e,i}shouldTransferBullet(){switch(this.data.kindId){case N.KIND_GUIDED_BULLET:case N.KIND_ATTACK_RATE:case N.KIND_AOE_ATTACK:case N.KIND_THROUGHOUT_ATTACK:case N.KIND_BOUNCE_ATTACK:case N.KIND_FLOAT_DAMAGE:case N.KIND_CRIT:case N.KIND_REDUCED_DEFENSE:case N.KIND_POISON:case N.KIND_SLOW:case N.KIND_BURN_COLD:case N.KIND_BEAT_BACK:case N.KIND_SILENCE:case N.KIND_VERTIGO:case N.KIND_INTIMIDATE:case N.KIND_CUSS:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case N.KIND_AURA:return new aa(this.data.id,this.level,this.tower);case N.KIND_CHANGE_BULLET:return new _l(this.data.id,this.level,this.tower);case N.KIND_CHANGE_DAMAGE:return new ml(this.data.id,this.level,this.tower);case N.KIND_CHANGE_RATE:return new hl(this.data.id,this.level,this.tower);case N.KIND_CHANGE_RANGE:return new pl(this.data.id,this.level,this.tower);case N.KIND_FIELD_ATTACK:return new da(this.data.id,this.level,this.tower);case N.KIND_DIVIDED_ATTACK:return new ra(this.data.id,this.level,this.tower);case N.KIND_SCATTER_ATTACK:return new ma(this.data.id,this.level,this.tower);case N.KIND_COMBO_ATTACK:return new na(this.data.id,this.level,this.tower);case N.KIND_GUIDED_BULLET:return new Zn(this.data.id,this.level,this.tower);case N.KIND_ATTACK_RATE:return new Yn(this.data.id,this.level,this.tower);case N.KIND_AOE_ATTACK:return new ta(this.data.id,this.level,this.tower);case N.KIND_THROUGHOUT_ATTACK:return new ga(this.data.id,this.level,this.tower);case N.KIND_BOUNCE_ATTACK:return new sa(this.data.id,this.level,this.tower);case N.KIND_FLOAT_DAMAGE:return new Jn(this.data.id,this.level,this.tower);case N.KIND_CRIT:return new ia(this.data.id,this.level,this.tower);case N.KIND_REDUCED_DEFENSE:return new _a(this.data.id,this.level,this.tower);case N.KIND_POISON:return new ca(this.data.id,this.level,this.tower);case N.KIND_SLOW:return new ha(this.data.id,this.level,this.tower);case N.KIND_BURN_COLD:return new qn(this.data.id,this.level,this.tower);case N.KIND_BEAT_BACK:return new la(this.data.id,this.level,this.tower);case N.KIND_SILENCE:return new pa(this.data.id,this.level,this.tower);case N.KIND_VERTIGO:return new fa(this.data.id,this.level,this.tower);case N.KIND_INTIMIDATE:return new ua(this.data.id,this.level,this.tower);case N.KIND_CUSS:return new oa(this.data.id,this.level,this.tower);default:return this}}}const Pe=class Pe extends W{constructor(t,e,a){super(t,e,a),this.index=1050,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3001,this.radiiInfo,O.toPercentage(this.nextEffectRate))}}get radii(){return this.data.getLevelParam(this.level,0)+Pe.DEFAULT_RADII}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Pe.DEFAULT_NEXT_EFFECT_RATE,Pe.MAX_NEXT_EFFECT_RATE)}get radiiInfo(){return this.radii.toString()}};l(Pe,"DEFAULT_RADII",0),l(Pe,"DEFAULT_NEXT_EFFECT_RATE",0),l(Pe,"MAX_NEXT_EFFECT_RATE",1);let ta=Pe;class Yn extends W{constructor(t,e,a){super(t,e,a),this.index=1040,this.m_updateFunction=()=>{const s=this.floorRate,i=this.airRate;s<=0&&i>0?this.m_skillInfo=h.getLanguageStr(3029):i<=0&&s>0?this.m_skillInfo=h.getLanguageStr(3028):s!=1?this.m_skillInfo=h.getLanguageStr(3030,O.toPercentage(s)):i!=1&&(this.m_skillInfo=h.getLanguageStr(3031,O.toPercentage(i)))}}get floorRate(){return this.data.getLevelParam(this.level,0)}get airRate(){return this.data.getLevelParam(this.level,1)}}const Dt=class Dt extends W{constructor(t,e,a){super(t,e,a),this.index=1500,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3002)}}get spId(){return this.data.getLevelParam(this.level,0)}get spLevel(){return this.data.getLevelParam(this.level,1)}get radii(){return this.data.getLevelParam(this.level,2)*this.level+Dt.DEFAULT_RADII}};l(Dt,"DEFAULT_RADII",1e3);let aa=Dt;const Ge=class Ge extends W{constructor(t,e,a){super(t,e,a),this.index=1060,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3003,O.toPercentage(this.chances),this.distanceInfo)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Ge.DEFAULT_CHANCES,1),0)}get beatBackDistance(){return this.data.getLevelParam(this.level,1)+Ge.DEFAULT_BEAT_BACK_DISTANCE}get distanceInfo(){return this.beatBackDistance.toString()}};l(Ge,"SHIFT_TIME",.2),l(Ge,"DEFAULT_CHANCES",0),l(Ge,"DEFAULT_BEAT_BACK_DISTANCE",0);let la=Ge;const Te=class Te extends W{constructor(t,e,a){super(t,e,a),this.index=1070,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3004,this.bounceNum,O.toPercentage(1-this.nextEffectRate),this.attackInfo)}}get bounceNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Te.DEFAULT_BOUNCE_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)*this.level+Te.DEFAULT_NEXT_EFFECT_RATE,Te.MAX_NEXT_EFFECT_RATE)}get attackInfo(){var e;let t=null;return((e=this.tower)==null?void 0:e.newBullet().bulletData.hitEffectId)==$.KIND_LIGHTNING?t=h.getLanguageStr(3516):t=h.getLanguageStr(3515),t}};l(Te,"DEFAULT_BOUNCE_NUM",.5),l(Te,"DEFAULT_NEXT_EFFECT_RATE",.35),l(Te,"MAX_NEXT_EFFECT_RATE",1),l(Te,"MAX_DISTANCE",3e3);let sa=Te;class qn extends W{constructor(t,e,a){super(t,e,a),this.index=1080,this.m_updateFunction=()=>{this.burnColdValue>0?this.m_skillInfo=h.getLanguageStr(3005,this.burn):this.m_skillInfo=h.getLanguageStr(3006,O.toPercentage(this.cold))}}get burnColdValue(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return this.data.getLevelParam(this.level,0)<0&&(e=-e),Math.floor(e)}get burn(){return Math.floor(Math.sqrt(this.burnColdValue))}get cold(){let t=1;this.tower&&(t=this.tower.buffEffect());const e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return Math.pow(e,.25)*.03}}class _l extends W{constructor(t,e,a){super(t,e,a)}get bulletId(){return this.data.getLevelParam(this.level,0)}}class ml extends W{constructor(t,e,a){super(t,e,a),this.index=1e3,this.m_updateFunction=()=>{this.damageRate>1?this.m_skillInfo=h.getLanguageStr(3007,O.toPercentage(this.damageRate-1)):this.damageRate<1&&(this.m_skillInfo=h.getLanguageStr(3008,O.toPercentage(1-this.damageRate)))}}get damageAdd(){return this.data.getLevelParam(this.level,0)*this.level}get damageRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get damageA(){return this.data.getLevelParam(this.level,2)}get damageB(){return this.data.getLevelParam(this.level,3)}get damageC(){return this.data.getLevelParam(this.level,4)}isChangeBase(){return!(this.damageA==0&&this.damageB==0&&this.damageC==0)}}class pl extends W{constructor(t,e,a){super(t,e,a),this.index=1010,this.m_updateFunction=()=>{this.rangeRate>1?this.m_skillInfo=h.getLanguageStr(3009,O.toPercentage(this.rangeRate-1)):this.m_skillInfo=h.getLanguageStr(3010,O.toPercentage(1-this.rangeRate)),this.rangeMin>0&&(this.m_skillInfo+=h.getLanguageStr(3027))}}get rangeAdd(){return this.data.getLevelParam(this.level,0)*this.level}get rangeRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get range(){return this.data.getLevelParam(this.level,2)}get rangeMin(){return this.data.getLevelParam(this.level,3)}isChangeBase(){return this.range!=0}}class hl extends W{constructor(t,e,a){super(t,e,a),this.index=1020,this.m_updateFunction=()=>{this.rateRate>1?this.m_skillInfo=h.getLanguageStr(3011,O.toPercentage(this.rateRate-1)):this.m_skillInfo=h.getLanguageStr(3012,O.toPercentage(1-this.rateRate))}}get rateRate(){return this.data.getLevelParam(this.level,0)+this.data.getLevelParam(this.level,1)*this.level+1}get rate(){return this.data.getLevelParam(this.level,2)}isChangeBase(){return this.rate!=0}}const We=class We extends W{constructor(t,e,a){super(t,e,a),this.index=1090,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3013,O.toPercentage(this.chances),this.extraBullet+1)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)+We.DEFAULT_CHANCES,1),0)}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,1)*this.level+We.DEFAULT_EXTRA_BULLET)}};l(We,"DEFAULT_CHANCES",0),l(We,"DEFAULT_EXTRA_BULLET",.5),l(We,"DEFAULT_RATE",.08);let na=We;const Ve=class Ve extends W{constructor(t,e,a){super(t,e,a),this.index=1100,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3014,O.toPercentage(this.chances),this.damageEffectRate.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Ve.DEFAULT_CHANCES,1),0)}get damageEffectRate(){return this.data.getLevelParam(this.level,1)*this.level+Ve.DEFAULT_DAMAGE_EFFECT_RATE+1}get buffEffectRate(){return this.data.getLevelParam(this.level,2)*this.level+Ve.DEFAULT_BUFF_EFFECT_RATE+1}};l(Ve,"DEFAULT_CHANCES",.1),l(Ve,"DEFAULT_DAMAGE_EFFECT_RATE",.5),l(Ve,"DEFAULT_BUFF_EFFECT_RATE",.1);let ia=Ve;const Ze=class Ze extends W{constructor(t,e,a){super(t,e,a),this.index=1110,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3026,Math.round(this.cussPower),this.duration.toFixed(0))}}get cussPower(){return this.data.getLevelParam(this.level,0)*this.level*this.tower.level+Ze.DEFAULT_CUSS_POWER}get duration(){return this.data.getLevelParam(this.level,1)+Ze.DEFAULT_DURATION}};l(Ze,"DEFAULT_CUSS_POWER",0),l(Ze,"DEFAULT_DURATION",0);let oa=Ze;const xt=class xt extends W{constructor(t,e,a){super(t,e,a),this.index=1120,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3015,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+xt.DEFAULT_EXTRA_BULLET)}};l(xt,"DEFAULT_EXTRA_BULLET",.5);let ra=xt;class Jn extends W{constructor(t,e,a){super(t,e,a),this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3017)}}get floatDamageRate(){return this.data.getLevelParam(this.level,0)*this.level}}class Zn extends W{constructor(t,e,a){super(t,e,a),this.m_skillInfo=""}get guideRatio(){return this.data.getLevelParam(this.level,0)}get bulletSpeedRate(){return this.data.getLevelParam(this.level,1)+1}get bulletAccSpeed(){return this.data.getLevelParam(this.level,2)}get guideInfo(){let t=null;const e=this.guideRatio;return e<.1?t=h.getLanguageStr(3500):e<.2?t=h.getLanguageStr(3501):e<.3?t=h.getLanguageStr(3502):e<.4?t=h.getLanguageStr(3503):t=h.getLanguageStr(3504),t}}const Qe=class Qe extends W{constructor(t,e,a){super(t,e,a),this.index=1140,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3019,O.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Qe.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+Qe.DEFAULT_DURATION}};l(Qe,"DEFAULT_CHANCES",.05),l(Qe,"DEFAULT_DURATION",0);let ua=Qe;const bt=class bt extends W{constructor(t,e,a){super(t,e,a),this.index=1130,this.m_skillInfo=h.getLanguageStr(3016)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+bt.DEFAULT_CHANCES,1),0)}};l(bt,"DEFAULT_CHANCES",.05);let da=bt;const et=class et extends W{constructor(e,a,s){super(e,a,s);l(this,"m_poisonRate",-1);this.index=1150,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3e3,Math.round(this.poisonRate*this.tower.damage()),this.duration.toFixed(0))}}get poisonRate(){return this.m_poisonRate<0?this.data.getLevelParam(this.level,0)*this.level+et.DEFAULT_POISON_RATE:this.m_poisonRate}set poisonRate(e){this.m_poisonRate<0&&(this.m_poisonRate=e)}get duration(){return this.data.getLevelParam(this.level,1)+et.DEFAULT_DURATION}};l(et,"DEFAULT_POISON_RATE",0),l(et,"DEFAULT_DURATION",0);let ca=et;const tt=class tt extends W{constructor(t,e,a){super(t,e,a),this.index=1160,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3020,O.toPercentage(this.reducedDefenseRate),this.duration.toFixed(1))}}get reducedDefenseRate(){return this.data.getLevelParam(this.level,0)*this.level+tt.DEFAULT_REDUCED_DEFENSE_RATE}get duration(){return this.data.getLevelParam(this.level,1)+tt.DEFAULT_DURATION}};l(tt,"DEFAULT_REDUCED_DEFENSE_RATE",.1),l(tt,"DEFAULT_DURATION",0);let _a=tt;const St=class St extends W{constructor(t,e,a){super(t,e,a),this.index=1170,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3021,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+St.DEFAULT_EXTRA_BULLET)}};l(St,"DEFAULT_EXTRA_BULLET",.5);let ma=St;const at=class at extends W{constructor(t,e,a){super(t,e,a),this.index=1180,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3022,O.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+at.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+at.DEFAULT_DURATION}};l(at,"DEFAULT_CHANCES",.05),l(at,"DEFAULT_DURATION",0);let pa=at;const lt=class lt extends W{constructor(t,e,a){super(t,e,a),this.index=1190,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3023,O.toPercentage(this.slowRate),this.duration.toFixed(1))}}get slowRate(){return this.data.getLevelParam(this.level,0)*this.level+lt.DEFAULT_SLOW_RATE}get duration(){return this.data.getLevelParam(this.level,1)+lt.DEFAULT_DURATION}};l(lt,"DEFAULT_SLOW_RATE",.1),l(lt,"DEFAULT_DURATION",0);let ha=lt;const Me=class Me extends W{constructor(t,e,a){super(t,e,a),this.index=1200,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3024,this.throughoutNum)}}get throughoutNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Me.DEFAULT_THROUGHOUT_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Me.DEFAULT_NEXT_EFFECT_RATE,Me.MAX_NEXT_EFFECT_RATE)}};l(Me,"DEFAULT_THROUGHOUT_NUM",.5),l(Me,"DEFAULT_NEXT_EFFECT_RATE",0),l(Me,"MAX_NEXT_EFFECT_RATE",1);let ga=Me;const st=class st extends W{constructor(t,e,a){super(t,e,a),this.index=1210,this.m_updateFunction=()=>{this.m_skillInfo=h.getLanguageStr(3025,O.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+st.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+st.DEFAULT_DURATION}};l(st,"DEFAULT_CHANCES",0),l(st,"DEFAULT_DURATION",0);let fa=st;const se=class se extends cl{constructor(e,a,s,i=!1){super(e,a,i);l(this,"monster");l(this,"m_levelMax",0);this.monster=s,this.m_data.typeId=Xe.TYPE_MONSTER_SKILL}static getKindName(e){switch(e){case E.KIND_FLY:return h.getLanguageStr(2507);case E.KIND_AIRBORNE:return h.getLanguageStr(2510);case E.KIND_RESIST_FIRE:return h.getLanguageStr(2515,h.getLanguageStr(2710));case E.KIND_RESIST_FROST:return h.getLanguageStr(2515,h.getLanguageStr(2711));case E.KIND_RESIST_POISON:return h.getLanguageStr(2515,h.getLanguageStr(2712));case E.KIND_RESIST_SLOW:return h.getLanguageStr(2515,h.getLanguageStr(2719));case E.KIND_RESIST_BEAT:return h.getLanguageStr(2515,h.getLanguageStr(2717));case E.KIND_RESIST_SILENCE:return h.getLanguageStr(2515,h.getLanguageStr(2722));case E.KIND_RESIST_VERTIGO:return h.getLanguageStr(2515,h.getLanguageStr(2715));case E.KIND_RESIST_CRIT:return h.getLanguageStr(2515,h.getLanguageStr(2716));case E.KIND_RESIST_LIGHT:return h.getLanguageStr(2515,h.getLanguageStr(2714));case E.KIND_RESIST_INTIMIDATE:return h.getLanguageStr(2515,h.getLanguageStr(2718));case E.KIND_RESIST_STRSMOOTH:return h.getLanguageStr(2723);case E.KIND_SLOWF:return h.getLanguageStr(2725);case E.KIND_WEAK_FIRE:return h.getLanguageStr(2516,h.getLanguageStr(2710));case E.KIND_WEAK_FROST:return h.getLanguageStr(2516,h.getLanguageStr(2711));case E.KIND_WEAK_POISON:return h.getLanguageStr(2516,h.getLanguageStr(2712));case E.KIND_WEAK_SLOW:return h.getLanguageStr(2516,h.getLanguageStr(2719));case E.KIND_WEAK_BEAT:return h.getLanguageStr(2516,h.getLanguageStr(2717));case E.KIND_WEAK_SILENCE:return h.getLanguageStr(2516,h.getLanguageStr(2722));case E.KIND_WEAK_VERTIGO:return h.getLanguageStr(2516,h.getLanguageStr(2715));case E.KIND_WEAK_CRIT:return h.getLanguageStr(2516,h.getLanguageStr(2716));case E.KIND_WEAK_LIGHT:return h.getLanguageStr(2516,h.getLanguageStr(2714));case E.KIND_WEAK_INTIMIDATE:return h.getLanguageStr(2516,h.getLanguageStr(2718));case E.KIND_ISOLATION:return h.getLanguageStr(2517);case E.KIND_RUN:return h.getLanguageStr(2500);case E.KIND_MIRROR:return h.getLanguageStr(2501);case E.KIND_SUMMON:return h.getLanguageStr(2502);case E.KIND_CLOUD:return h.getLanguageStr(2503);case E.KIND_CURE:return h.getLanguageStr(2504);case E.KIND_BLINK:return h.getLanguageStr(2505);case E.KIND_HIDE:return h.getLanguageStr(2506);case E.KIND_RELIVE:return h.getLanguageStr(2508);case E.KIND_SUICIDE:return h.getLanguageStr(2509);case E.KIND_SHIELD:return h.getLanguageStr(2511);case E.KIND_SNEER:return h.getLanguageStr(2512);case E.KIND_REINCARNATE:return h.getLanguageStr(2514);case E.KIND_TRANSFORM:return h.getLanguageStr(2513);case E.KIND_LINKS:return h.getLanguageStr(2727);default:return""}}get name(){return this.canLevelUp(1)?h.getLanguageStr(2416,this.data.name,this.level):this.data.name}get isDebuff(){return this.grade.indexOf(se.RES_FG_X)!=-1}get skillSign(){return this.isDebuff?Qt(h.getLanguageStr(2422),0,!0,13):Qt(h.getLanguageStr(2421),16711680,!0,13)}get isDowerSkill(){return!1}get isLearnSkill(){return!1}getConflictStr(){let e=null,a=0,s=0;const i=w.$_conflict_skill_kind;let r="";for(a=0;a<i.length;a++)if(e=i[a],e.indexOf(this.data.kindId)!=-1)for(s=0;s<e.length;s++)e[s]!=this.data.kindId&&(r+=se.getKindName(e[s]),r+=h.getLanguageStr(2406));return r.length>0&&(r=r.slice(0,r.length-1)),r}canLevelUp(e=-1){return e<0&&(e=this.level),e<this.levelMax}get levelMax(){if(this.m_levelMax<=0){const e=w.$_skill_lvup_spend,a=this.grade;if(e[a])for(const s in e[a])this.m_levelMax=Math.max(this.m_levelMax,parseInt(s))+1;else this.m_levelMax=1}return this.m_levelMax}levelUpSpend(e=-1){e<0&&(e=this.level);const a=w.$_skill_lvup_spend,s=this.grade;return a[s]&&a[s][String(e)]?a[s][String(e)]:null}get skillScore(){const e=w.$_skill_grade_score,a=this.grade;return e[a]&&e[a][String(this.level)]?e[a][String(this.level)]:1}get grade(){const e=this.data.id,a=e.indexOf("_");return a==-1?se.RES_FG_X:e.slice(a+1,e.length)}isEventSkill(){switch(this.data.kindId){case E.KIND_RUN:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case E.KIND_FLY:return new ai(this.data.id,this.level,this.monster);case E.KIND_AIRBORNE:return new Aa(this.data.id,this.level,this.monster);case E.KIND_RESIST_FIRE:case E.KIND_RESIST_FROST:case E.KIND_RESIST_POISON:case E.KIND_RESIST_SLOW:case E.KIND_RESIST_BEAT:case E.KIND_RESIST_SILENCE:case E.KIND_RESIST_VERTIGO:case E.KIND_RESIST_CRIT:case E.KIND_RESIST_LIGHT:case E.KIND_RESIST_INTIMIDATE:case E.KIND_RESIST_STRSMOOTH:case E.KIND_SLOWF:case E.KIND_WEAK_FIRE:case E.KIND_WEAK_FROST:case E.KIND_WEAK_POISON:case E.KIND_WEAK_SLOW:case E.KIND_WEAK_BEAT:case E.KIND_WEAK_SILENCE:case E.KIND_WEAK_VERTIGO:case E.KIND_WEAK_CRIT:case E.KIND_WEAK_LIGHT:case E.KIND_WEAK_INTIMIDATE:return new Ne(this.data.id,this.level,this.monster);case E.KIND_ISOLATION:return new li(this.data.id,this.level,this.monster);case E.KIND_RUN:return new ni(this.data.id,this.level,this.monster);case E.KIND_MIRROR:return new gl(this.data.id,this.level,this.monster);case E.KIND_SUMMON:return new El(this.data.id,this.level,this.monster);case E.KIND_CLOUD:return new ei(this.data.id,this.level,this.monster);case E.KIND_CURE:return new ti(this.data.id,this.level,this.monster);case E.KIND_BLINK:return new Qn(this.data.id,this.level,this.monster);case E.KIND_HIDE:return new Ea(this.data.id,this.level,this.monster);case E.KIND_RELIVE:return new Al(this.data.id,this.level,this.monster);case E.KIND_SUICIDE:return new Ia(this.data.id,this.level,this.monster);case E.KIND_SHIELD:return new ii(this.data.id,this.level,this.monster);case E.KIND_SNEER:return new oi(this.data.id,this.level,this.monster);case E.KIND_REINCARNATE:return new fl(this.data.id,this.level,this.monster);case E.KIND_TRANSFORM:return new ri(this.data.id,this.level,this.monster);case E.KIND_LINKS:return new si(this.data.id,this.level,this.monster);default:return this}}};l(se,"RES_SKILL","skill_"),l(se,"RES_FG_A","A"),l(se,"RES_FG_B","B"),l(se,"RES_FG_C","C"),l(se,"RES_FG_Z","Z"),l(se,"RES_FG_X","X"),l(se,"RES_FG_0","0"),l(se,"RES_BG","bg"),l(se,"PHOTO_WIDTH",34),l(se,"PHOTO_HEIGHT",34),l(se,"PHOTO_ROUND",8);let ue=se;class Ee extends ue{constructor(t,e,a){super(t,e,a)}warmup(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cooldown(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}chances(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}eventType(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,3)}duration(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,4)}refreshTag(t=!1){this.skillTag1=this.getTagEventType(),this.nextLevelSkillTag1=this.getTagEventType(this.level+1),this.skillTag2=this.getTagCooldown(),this.nextLevelSkillTag2=this.getTagCooldown(this.level+1),t&&(this.skillTag3=this.getTagDuration(),this.nextLevelSkillTag3=this.getTagDuration(this.level+1))}getTagEventType(t=-1){let e=0;t<0&&(t=this.level);let a="";const s=this.eventType(t);if(s.length!=4){for(e=0;e<s.length;e++)s[e]==E.EVENT_RED?a+=h.getLanguageStr(2402)+h.getLanguageStr(2406):s[e]==E.EVENT_YELLOW?a+=h.getLanguageStr(2403)+h.getLanguageStr(2406):s[e]==E.EVENT_GREEN?a+=h.getLanguageStr(2404)+h.getLanguageStr(2406):s[e]==E.EVENT_FULL&&(a+=h.getLanguageStr(2405)+h.getLanguageStr(2406));a=a.slice(0,a.length-1),a=h.getLanguageStr(2400,a)}return a}getTagCooldown(t=-1){return t<0&&(t=this.level),""+h.getLanguageStr(2401,this.cooldown(t))}getTagDuration(t=-1){return t<0&&(t=this.level),""+h.getLanguageStr(2407,this.duration(t))}}class Aa extends ue{constructor(t,e,a){super(t,e,a),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2201)}}heightSpeed(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}pathLengthMin(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}pathLengthMax(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}}l(Aa,"BALLOON","balloon"),l(Aa,"DEFAULT_HEIGHT",2e3);class Qn extends Ee{constructor(t,e,a){super(t,e,a),this.index=100,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2303,O.toGridStr(this.range())),this.m_nextLevelSkillInfo=h.getLanguageStr(2303,O.toGridStr(this.range(this.level+1))),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}}class ei extends Ee{constructor(t,e,a){super(t,e,a),this.index=110,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2302,this.cloudTime()),this.m_nextLevelSkillInfo=h.getLanguageStr(2302,this.cloudTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class ti extends Ee{constructor(t,e,a){super(t,e,a),this.index=140,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2300,O.toGridStr(this.cureRange()),O.toPercentage(this.cureRate())),this.m_nextLevelSkillInfo=h.getLanguageStr(2300,O.toGridStr(this.cureRange(this.level+1)),O.toPercentage(this.cureRate(this.level+1))),this.refreshTag()}}cureRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cureRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class ai extends ue{constructor(t,e,a){super(t,e,a),this.index=90,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2200),this.m_nextLevelSkillInfo=h.getLanguageStr(2200)}}get flyHeight(){return this.data.getLevelParam(this.level,0)}}class Ea extends Ee{constructor(t,e,a){super(t,e,a),this.index=150,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2305,this.duration()),this.m_nextLevelSkillInfo=h.getLanguageStr(2305,this.duration(this.level+1)),this.refreshTag()}}}l(Ea,"HIDE_TIME",1),l(Ea,"HIDE_ALPHA",.1);class li extends ue{constructor(t,e,a){super(t,e,a),this.index=500,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2202)}}}class si extends Ee{constructor(t,e,a){super(t,e,a),this.index=116,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2728,O.toGridStr(this.range()),O.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=h.getLanguageStr(2728,O.toGridStr(this.range(this.level+1)),O.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class gl extends Ee{constructor(t,e,a){super(t,e,a),this.index=130,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2306,this.mirrorNum(),O.toPercentage(this.hpRate()),this.duration()),this.m_nextLevelSkillInfo=h.getLanguageStr(2306,this.mirrorNum(this.level+1),O.toPercentage(this.hpRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}mirrorNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}l(gl,"DEFAULT_DISTANCE",750);class fl extends ue{constructor(t,e,a){super(t,e,a),this.index=85,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2215,this.monsterName()),this.m_nextLevelSkillInfo=h.getLanguageStr(2215,this.monsterName(this.level+1))}}monsterIdList(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}monsterName(t=-1){let e=0;const a=this.monsterIdList(t);let s="";for(e=0;e<a.length;e++)s+=_e.getOnlyExample().getData(a[e]).name,s+=h.getLanguageStr(2406);return s.slice(0,s.length-1),s}}l(fl,"REINCARNATE_TIME",5);class Al extends ue{constructor(t,e,a){super(t,e,a),this.index=170,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2213,this.reliveNum(),O.toPercentage(this.reliveHpRate())),this.m_nextLevelSkillInfo=h.getLanguageStr(2213,this.reliveNum(this.level+1),O.toPercentage(this.reliveHpRate(this.level+1)))}}reliveNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}reliveHpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}l(Al,"RELIVE_TIME",8);class Ne extends ue{constructor(e,a,s){super(e,a,s);l(this,"maxHP",0);this.index=300,this.m_updateFunction=function(){this.m_skillInfo=this.resistInfo(),this.m_nextLevelSkillInfo=this.resistInfo(this.level+1)}}getResist(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}getRange(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}getMaxHP(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}resistInfo(e=-1){const a=this.getResist(e);let s="";const i=O.toPercentage(Math.abs(a));return a==0||(a>0?s=h.getLanguageStr(2409):s=h.getLanguageStr(2408),this.data.kindId==E.KIND_SLOWF&&(s=O.toGridStr(this.getRange())),s=h.getLanguageStr(this.resistInfoNumber,s,i),this.data.kindId==E.KIND_RESIST_STRSMOOTH&&this.getMaxHP(e)>0&&(s+=h.getLanguageStr(2730,this.getMaxHP(e)))),s}get resistInfoNumber(){switch(this.data.kindId){case E.KIND_RESIST_FIRE:case E.KIND_WEAK_FIRE:return 2203;case E.KIND_RESIST_FROST:case E.KIND_WEAK_FROST:return 2204;case E.KIND_RESIST_POISON:case E.KIND_WEAK_POISON:return 2205;case E.KIND_RESIST_SLOW:case E.KIND_WEAK_SLOW:return 2206;case E.KIND_RESIST_BEAT:case E.KIND_WEAK_BEAT:return 2207;case E.KIND_RESIST_SILENCE:case E.KIND_WEAK_SILENCE:return 2208;case E.KIND_RESIST_VERTIGO:case E.KIND_WEAK_VERTIGO:return 2209;case E.KIND_RESIST_CRIT:case E.KIND_WEAK_CRIT:return 2210;case E.KIND_RESIST_LIGHT:case E.KIND_WEAK_LIGHT:return 2211;case E.KIND_RESIST_INTIMIDATE:case E.KIND_WEAK_INTIMIDATE:return 2212;case E.KIND_RESIST_STRSMOOTH:return 2724;case E.KIND_SLOWF:return 2726;default:return 0}}}l(Ne,"IMMUNITY",2701),l(Ne,"RESIST_SUPER",2702),l(Ne,"RESIST_HIGH",2703),l(Ne,"RESIST",2704),l(Ne,"FEAR",2705),l(Ne,"FEAR_HIGH",2706),l(Ne,"FEAR_SUPER",2707);class ni extends Ee{constructor(t,e,a){super(t,e,a),this.index=160,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2304,O.toPercentage(this.speedRate()-1),this.duration()),this.m_nextLevelSkillInfo=h.getLanguageStr(2304,O.toPercentage(this.speedRate(this.level+1)-1),this.duration(this.level+1)),this.refreshTag()}}speedRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)+1}}class ii extends Ee{constructor(t,e,a){super(t,e,a),this.index=105,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2308,O.toPercentage(this.shieldRate()),this.shieldTime()),this.m_nextLevelSkillInfo=h.getLanguageStr(2308,O.toPercentage(this.shieldRate(this.level+1)),this.shieldTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}class oi extends Ee{constructor(t,e,a){super(t,e,a),this.index=106,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2309,O.toGridStr(this.range()),O.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=h.getLanguageStr(2309,O.toGridStr(this.range(this.level+1)),O.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class Ia extends ue{constructor(t,e,a){super(t,e,a),this.index=185,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2214,O.toGridStr(this.cloudRange()),this.cloudTime()),this.m_nextLevelSkillInfo=h.getLanguageStr(2214,O.toGridStr(this.cloudRange(this.level+1)),this.cloudTime(this.level+1))}}cloudRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}l(Ia,"isEveryTime",!0),l(Ia,"SUICIDE_TIME",.5);class El extends Ee{constructor(t,e,a){super(t,e,a),this.index=120,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2301,this.summonNum(),O.toPercentage(this.hpRate()),this.summonName()),this.m_nextLevelSkillInfo=h.getLanguageStr(2301,this.summonNum(this.level+1),O.toPercentage(this.hpRate(this.level+1)),this.summonName(this.level+1)),this.refreshTag(!0)}}summonId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}summonName(t=-1){return t<0&&(t=this.level),_e.getOnlyExample().getData(this.summonId(t)).name}summonNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}l(El,"DEFAULT_DISTANCE",750);class ri extends Ee{constructor(t,e,a){super(t,e,a),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=h.getLanguageStr(2307,this.transformName()),this.m_nextLevelSkillInfo=h.getLanguageStr(2307,this.transformName(this.level+1)),this.refreshTag(!0)}}transformId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}transformName(t=-1){return t<0&&(t=this.level),_e.getOnlyExample().getData(this.transformId(t)).name}}const Le=class Le extends Dn{constructor(){super();l(this,"id","");l(this,"skills",{});l(this,"tag");this.tag="BaseUnit"}init(){this.initSkills()}initSkills(){}get data(){return this.m_data}};l(Le,"SKILL_ID","skid"),l(Le,"SKILL_LEVEL","lev"),l(Le,"STATUS_RATE",200),l(Le,"STATUS_TIME",Le.STATUS_RATE/1e3),l(Le,"AOE_SILENCE_RANGE",1e3),l(Le,"AOE_SILENCE_TIME",2);let je=Le;const nt=class nt extends je{constructor(e,a=1,s=1,i=0){super();l(this,"index",0);l(this,"m_level",0);l(this,"exp",0);l(this,"hp",0);l(this,"hpMax",0);l(this,"hpRate");l(this,"skillList",[]);this.tag="Monster",this.updateData(e),this.hpRate=s,this.updateLevelExp(a,i),this.index=nt.COUNT++}updateData(e){e==""&&(e="dahuil");const a=e.indexOf("|");a!=-1&&(e=e.slice(0,a)),this.m_data=_e.getOnlyExample().getData(e),this.m_data==null&&(this.m_data=_e.getOnlyExample().getData("dahuil"))}createSkills(e){return e.map(a=>new ue(a[je.SKILL_ID],a[je.SKILL_LEVEL],this).getSubClasses())}initSkills(){this.skills={};const e=this.data.skills;if(e!=null){this.skillList=this.createSkills(e);for(const a of this.skillList)this.skills[a.data.kindId]=a}}conflictSkillList(e){const a=[];if(e==null)return[];const s=w.$_conflict_skill_kind,i=e.data.kindId;this.skills[i]&&a.push(ue.getKindName(i));for(const r of s)if(r.indexOf(i)!=-1)for(let _=0;_<r.length;_++)i!=r[_]&&this.skills[r[_]]&&a.push(ue.getKindName(r[_]));return a}getSkillById(e){let a,s=null;for(a in this.skills)if(s=this.skills[a],s.data.id==e)return s;return null}updateLevelExp(e=0,a=0){this.level=e,this.exp=a}get allSkillsScore(){let e=1;for(const a of this.skillList)a.enabled&&(e*=this.getSkillScore(a.data.id,a.level));return e}getSkillScore(e,a){let s=null;const i=w.$_skill_grade_score,r=e.indexOf("_");return e.indexOf("_")==-1?1:(s=e.slice(r+1,e.length),i[s]&&i[s][String(a)]?i[s][String(a)]:1)}get levelMax(){return w.$_camp_wolf_lv_max}get expMax(){const e=this.m_level+1;return Math.round(this.monsterData.expMaxA+this.monsterData.expMaxB*e+this.monsterData.expMaxC*e*e+this.monsterData.expMaxD*e*e*e)}get level(){return this.m_level}set level(e){this.m_level=Math.max(Math.min(e,this.levelMax),0),J.currentMap&&J.currentMap&&(this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate)),this.hpMax<=1&&(this.hpMax=1)}refreshLevel(){this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate*1),this.hpMax<=1&&(this.hpMax=1)}get monsterData(){return this.m_data}get power(){const e=w.$_wolf_worth_factor,a=this.hpMax,s=this.monsterData.speedBase,i=this.allSkillsScore;return Math.round(a*s*i*e[2])}get skillInfo(){if(this.skills==null)return"";const e=Object.values(this.skills);return e.sort((a,s)=>a.index-s.index),e.map(a=>a.skillInfo).join("")}};l(nt,"MONSTER_SAY_ARRAY",[h.getLanguageStr(1250),h.getLanguageStr(1251),h.getLanguageStr(1252),h.getLanguageStr(1253),h.getLanguageStr(1254),h.getLanguageStr(1255),h.getLanguageStr(1256),h.getLanguageStr(1257),h.getLanguageStr(1258),h.getLanguageStr(1259)]),l(nt,"WEIGHTILY_SIZE",487500),l(nt,"COUNT",0);let dt=nt;const ui=V({__name:"WolfSelect",setup(o){return(t,e)=>{const a=mt,s=Bl,i=_t;return f(),C(i,{filterable:""},{default:d(()=>[n(s,{label:"前线"},{default:d(()=>[(f(!0),x(M,null,H(u(wn),r=>(f(),C(a,{key:r.id,label:r.label,value:r.id},null,8,["label","value"]))),128))]),_:1}),n(s,{label:"防线"},{default:d(()=>[(f(!0),x(M,null,H(u(nl),r=>(f(),C(a,{key:r.id,label:r.label,value:r.id},null,8,["label","value"]))),128))]),_:1}),n(s,{label:"噩梦"},{default:d(()=>[(f(!0),x(M,null,H(u(il),r=>(f(),C(a,{key:r.id,label:r.label,value:r.id},null,8,["label","value"]))),128))]),_:1})]),_:1})}}}),di={class:"text-xs"},ci={class:"sk-tag text-xs"},_i=V({__name:"MonsterSkillTable",props:{modelValue:{required:!0},modelModifiers:{}},emits:At(["change"],["update:modelValue"]),setup(o,{emit:t}){const e=re(o,"modelValue"),a=t,s=Y(),i=y.groupBy(w.$_skillAtt_Obj.monsterSkill,v=>v.kindId);y.each(i,(v,I)=>i[I]=y.sortBy(v,"id"));const r=Object.keys(i).sort();let _=pe([]);fe(()=>e.value.data.id,()=>{var v,I;e.value.initSkills(),_.length=0,_.push(...e.value.skillList.map((b,P)=>p(b,P))),(v=s.value)==null||v.clearSelection(),(I=s.value)==null||I.toggleAllSelection()});const p=(v,I=0)=>pe({index:I,kindId:v.data.kindId,id:v.data.id,name:v.data.name,level:v.level,levelMax:v.levelMax,score:v.skillScore,info:v.skillInfo,tags:v.skillTag1+v.skillTag2+v.skillTag3,skill:v});function m(v){v.id=i[v.kindId][0].id,v.level=1,c(v)}const c=v=>{const I=_.indexOf(v),b=new ue(v.id,v.level,e.value).getSubClasses();e.value.skillList[I]=b,Object.assign(v,p(b,I)),a("change")},g=()=>{var I;const v=p(new ue("WeakFire_X1",1,e.value).getSubClasses(),_.length);_.push(v),(I=s.value)==null||I.toggleRowSelection(v,!0),a("change")},T=v=>{e.value.skillList.forEach(I=>I.enabled=v.find(b=>b.skill==I)!==void 0)};return(v,I)=>{const b=Ue,P=mt,U=_t,K=he,Se=Ie;return f(),x("div",null,[n(u(ke),{ref_key:"skillTableRef",ref:s,data:u(_),"row-key":"index",style:{"font-size":"small"},onSelectionChange:T},{default:d(()=>[n(b,{type:"selection","reverse-selection":"",width:30}),n(b,{label:"KindId",width:160,"header-align":"center"},{default:d(G=>[n(U,{modelValue:G.row.kindId,"onUpdate:modelValue":Q=>G.row.kindId=Q,style:{"font-size":"small"},onChange:Q=>m(G.row)},{default:d(()=>[(f(!0),x(M,null,H(u(r),Q=>(f(),C(P,{key:Q,label:Q,value:Q},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(b,{label:"Id",width:200,"header-align":"center"},{default:d(G=>[n(U,{modelValue:G.row.id,"onUpdate:modelValue":Q=>G.row.id=Q,style:{"font-size":"small"},onChange:Q=>c(G.row)},{default:d(()=>[(f(!0),x(M,null,H(u(i)[G.row.kindId],Q=>(f(),C(P,{key:Q.id,label:Q.id,value:Q.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(b,{prop:"name",label:"Name",width:120,"header-align":"center",align:"center"}),n(b,{prop:"level",label:"Level",width:120,"header-align":"center",align:"center"},{default:d(G=>[n(K,{modelValue:G.row.level,"onUpdate:modelValue":Q=>G.row.level=Q,min:1,max:G.row.levelMax,size:"small",style:{width:"80px"},onChange:Q=>c(G.row)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:1}),n(b,{prop:"levelMax",label:"Level Max",width:120,"header-align":"center",align:"center"}),n(b,{prop:"score",label:"Score",width:120,"header-align":"center",align:"center"}),n(b,{label:"Info"},{default:d(G=>[A("span",di,D(G.row.info),1),A("span",ci,D(G.row.tags),1)]),_:1})]),_:1},8,["data"]),n(Se,{onClick:g},{default:d(()=>[S("增加一行")]),_:1})])}}}),mi=ge(_i,[["__scopeId","data-v-e38dbe25"]]),pi={class:"ml-2"},hi={class:"ml-8"},gi=A("p",null,"技能",-1),fi=V({__name:"MonsterCalcOne",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(o){const t=pe({wid:"al",level:1,expMax:0}),e=re(o,"modelValue");s();const a=i=>{e.value.updateData(i),s()};fe(()=>e.value.level,s);function s(){e.value.refreshLevel(),t.expMax=e.value.expMax}return(i,r)=>{const _=xe,p=he,m=$e;return f(),x(M,null,[n(m,{"label-width":80},{default:d(()=>[n(_,{label:"狼"},{default:d(()=>[n(ui,{modelValue:u(t).wid,"onUpdate:modelValue":r[0]||(r[0]=c=>u(t).wid=c),style:{"max-width":"200px"},onChange:a},null,8,["modelValue"])]),_:1}),n(_,{label:"等级"},{default:d(()=>[n(p,{modelValue:e.value.m_level,"onUpdate:modelValue":r[1]||(r[1]=c=>e.value.m_level=c),min:1},null,8,["modelValue"]),A("span",pi,"最高等级："+D(e.value.levelMax),1)]),_:1}),n(_,{label:"速度"},{default:d(()=>[S(D(e.value.monsterData.speedBase),1)]),_:1}),n(_,{label:"升级经验"},{default:d(()=>[S(D(u(t).expMax),1)]),_:1}),n(_,{label:"血量"},{default:d(()=>[S(D(e.value.hpMax),1)]),_:1}),n(_,{label:"实力"},{default:d(()=>[S(D(e.value.power),1)]),_:1})]),_:1}),A("div",hi,[gi,n(mi,{modelValue:e.value,"onUpdate:modelValue":r[2]||(r[2]=c=>e.value=c)},null,8,["modelValue"])])],64)}}}),Ai=A("h2",null,"狼相关计算",-1),Ei=V({__name:"index",setup(o){const t=pe([new dt("dahuil")]),e=Y(t[0].index),a=k(()=>{const[i,r]=w.$_wolf_worth_factor;return Math.round(Math.pow(y.sumBy(t,_=>Math.pow(_.power,i)),r))}),s=(i,r)=>{if(r==="add"){const _=new dt("dahuil");t.push(_),e.value=_.index}else if(r==="remove"){const _=t;let p=e.value;p===i&&_.forEach((m,c)=>{if(m.index===i){const g=_[c+1]||_[c-1];g&&(p=g.index)}}),e.value=p,t.splice(t.findIndex(m=>m.index===i),1)}};return(i,r)=>{const _=Ct,p=ct;return f(),x("div",null,[Ai,A("div",null,"总实力："+D(u(a)),1),n(p,{modelValue:u(e),"onUpdate:modelValue":r[0]||(r[0]=m=>me(e)?e.value=m:null),type:"border-card",editable:"",class:"m-4",onEdit:s},{default:d(()=>[(f(!0),x(M,null,H(u(t),(m,c)=>(f(),C(_,{key:m.index,label:m.monsterData.name,name:m.index},{default:d(()=>[n(fi,{modelValue:u(t)[c],"onUpdate:modelValue":g=>u(t)[c]=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])}}}),Ii=Object.freeze(Object.defineProperty({__proto__:null,default:Ei},Symbol.toStringTag,{value:"Module"})),vi=V({__name:"MonsterSkillTable",setup(o){const t=k(()=>y.chain(w.$_wolfAtt_Obj).flatMap(s=>s.skills.map(i=>({skid:i.skid,lev:i.lev,owner_name:de(s.id),owner_id:s.id}))).groupBy("skid").value()),e=k(()=>y.chain(w.$_skillAtt_Obj.monsterSkill).groupBy(s=>s.kindId).map(s=>y.sortBy(s,"id")).flatten().map(s=>Object.assign({},s,{owners:t.value[s.id]})).value()),a=[{key:"kindId",dataKey:"kindId",title:"kindId",width:100,align:"center"},{key:"id",dataKey:"id",title:"id",width:150,align:"center"},{key:"name",dataKey:"name",title:"name",width:100,align:"center"},{key:"levels",dataKey:"levels",title:"levels",width:300,cellRenderer:({cellData:s})=>n("div",null,[s.map((i,r)=>n("p",null,[" ",r+1,S(": "),n("code",null,[S("["),i.map(_=>JSON.stringify(_)).join(", "),S("]")])]))])},{key:"owners",dataKey:"owners",title:"owners",width:550,cellRenderer:({cellData:s})=>n("div",{class:"flex flex-wrap gap-0.5"},[s==null?void 0:s.map(i=>n(Fe,null,{default:()=>[n("ruby",null,[i.owner_name,S(" "),n("rt",null,[i.owner_id])]),n("sup",null,[i.lev])]}))])}];return(s,i)=>{const r=Hl;return f(),C(r,{columns:a,data:u(e),width:1200,height:600,"estimated-row-height":40},null,8,["data"])}}}),Ti=V({__name:"index",setup(o){return(t,e)=>(f(),x("div",null,[n(vi)]))}}),Li=Object.freeze(Object.defineProperty({__proto__:null,default:Ti},Symbol.toStringTag,{value:"Module"})),ht=o=>(Ta("data-v-08912217"),o=o(),La(),o),Di=ht(()=>A("h1",null,"狼数据",-1)),xi=ht(()=>A("p",null,"前排解释：",-1)),bi=ht(()=>A("p",null,"pop 为狼在一波中占的容量，一般来说 pop 越大则出现机会越少。",-1)),Si=ht(()=>A("p",null,"charm 影响到寻路，charm 为负值越小则其他狼越会排斥它。",-1)),Ni=ht(()=>A("p",null,"hp_factor 影响血量关于等级增长，是二次函数系数。",-1)),wi={class:"sk-list"},Ci={key:0,class:"sk-debuff"},Ri={key:1,class:"sk-buff"},yi={class:"sk-name"},Oi={class:"sk-id"},Ki={class:"sk-info"},Pi={key:2,class:"sk-tag"},Vi={key:3,class:"sk-tag"},Mi={key:4,class:"sk-tag"},ki=V({__name:"index",setup(o){const t=["前线","随机Boss","Boss","噩梦Boss","大本营"].map(a=>({text:a,value:a})),e=y.map(w.$_wolfAtt_Obj,(a,s)=>s).sort().map(a=>{let s=new dt(a,0,0);s.initSkills();let i=s.monsterData;return{id:a,data:i,skills:Object.values(s.skills),group:i.rawName.startsWith("camp_")?"大本营":i.id.startsWith("D_")?"噩梦Boss":i.population===99?"随机Boss":i.population===100?"Boss":"前线"}});return(a,s)=>{const i=Ue,r=ke;return f(),x(M,null,[Di,xi,bi,Si,Ni,n(r,{data:u(e),"default-sort":{prop:"id",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},"row-key":"id","max-height":"600",style:{width:"100%","max-width":"1280px"}},{default:d(()=>[n(i,{prop:"id",label:"id",sortable:"",width:150}),n(i,{prop:"group",label:"group",sortable:"",filters:u(t),"filter-method":(_,p)=>p.group===_,width:100},null,8,["filters","filter-method"]),n(i,{prop:"data.name",label:"name",sortable:""}),n(i,{prop:"data.speedBase",label:"speedBase",sortable:""}),n(i,{prop:"data.population",label:"population",sortable:""}),n(i,{prop:"data.charm",label:"charm",sortable:"",width:80}),n(i,{label:"size"},{default:d(()=>[n(i,{prop:"data.width",label:"width",sortable:"",width:100}),n(i,{prop:"data.height",label:"height",sortable:"",width:100})]),_:1}),n(i,{label:"hpFactor"},{default:d(()=>[n(i,{prop:"data.hpMaxA",label:"a",sortable:"",width:90}),n(i,{prop:"data.hpMaxB",label:"b",sortable:"",width:80}),n(i,{prop:"data.hpMaxC",label:"c",sortable:"",width:80})]),_:1}),n(i,{label:"skills",type:"expand",width:"60"},{default:d(_=>[A("div",wi,[(f(!0),x(M,null,H(_.row.skills,p=>(f(),x("p",{key:p.data.id},[p.isDebuff?(f(),x("span",Ci,"↓")):(f(),x("span",Ri,"↑")),A("span",yi,D(p.name),1),A("span",Oi,"["+D(p.data.id)+"]",1),A("span",Ki,D(p.skillInfo),1),p.skillTag1?(f(),x("span",Pi,D(p.skillTag1),1)):ne("",!0),p.skillTag2?(f(),x("span",Vi,D(p.skillTag2),1)):ne("",!0),p.skillTag3?(f(),x("span",Mi,D(p.skillTag3),1)):ne("",!0)]))),128))])]),_:1})]),_:1},8,["data"])],64)}}}),Ui=ge(ki,[["__scopeId","data-v-08912217"]]),Fi=Object.freeze(Object.defineProperty({__proto__:null,default:Ui},Symbol.toStringTag,{value:"Module"}));class $i extends je{constructor(){super()}get buildingData(){return this.m_data}get range(){return this.buildingData.range}get skillInfo(){const t=Object.values(this.skills);t.sort((a,s)=>a.index-s.index);const e=t.map(a=>a.skillInfo).filter(a=>a!="").join(`
`);return e==""?this.buildingData.info:e}}class Bi extends je{constructor(e){super();l(this,"damage",0);l(this,"range",0);l(this,"attackType");this.m_data=Zt.getOnlyExample().getData(e),this.attackType=Yt.EFFECT_TYPE_ALL}get bulletData(){return this.m_data}}const rt=class rt extends $i{constructor(e){super();l(this,"m_level",0);l(this,"gem",null);l(this,"m_attackType","");this.tag="Tower",e&&(this.m_data=qt.getOnlyExample().getData(e),this.initTower()),this.level=1}static fromData(e){const a=new rt(null);return a.m_data=e,a.initTower(),a}get towerData(){return this.m_data}initTower(){this.initSkills()}initSkills(){if(this.skills={},this.towerData.skillPackageId!=""){const e=new el(this.towerData.skillPackageId,this.towerData.skillPackageLevel);if(e!=null&&e.skillsPackageData!=null)for(const a of e.skillsPackageData.skillsList){const s=new W(a,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}}if(this.gem){const e=this.gem.gemData.getSkillPackage(this.data.id);if(e!=null&&e.skillsPackageData!=null)for(const a of e.skillsPackageData.skillsList){const s=new W(a,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}this.skills[N.KIND_SCATTER_ATTACK]&&delete this.skills[N.KIND_DIVIDED_ATTACK]}}get color(){return this.gem!=null?this.gem.gemData.color:6316128}get level(){return this.m_level}set level(e){this.m_level=e}get gemLevel(){return this.gem?this.gem.gemData.gemLevel:0}get ability(){const e=this.gemLevel;return this.towerData.isMagicTower?e==0?0:this.m_level*(.8+e/5)*2:this.m_level*(1+e/10)}get power(){const e=this.level,a=w.$_tower_worth_factor,s=this.gemLevel,i=this.valueCostConst(e);return Math.round((i+Math.pow(s,a[0])*a[1])*(a[2]+s/a[3]))}buildValue(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildValueA+this.towerData.buildValueB*e+this.towerData.buildValueC*e*e)}buildCost(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildCostA+this.towerData.buildCostB*e+this.towerData.buildCostC*e*e)}valueCost(e=-1){e==-1&&(e=this.level);const a=e*this.towerData.buildCostA+(e*e+e)/2*this.towerData.buildCostB+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostC+this.towerData.buildCost-this.towerData.buildCostA-this.towerData.buildCostB-this.towerData.buildCostC;return Math.round(a)}valueCostConst(e=-1){e==-1&&(e=this.level);const a=e*this.towerData.buildCostAConst+(e*e+e)/2*this.towerData.buildCostBConst+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostCConst+this.towerData.buildCostConst-this.towerData.buildCostAConst-this.towerData.buildCostBConst-this.towerData.buildCostCConst;return Math.round(a)}buffEffect(e=-1){return e==-1&&(e=this.level),this.towerData.buffEffect*e+1}damage(e=-1){let a=0;if(e==-1&&(e=this.level),this.skills[N.KIND_CHANGE_DAMAGE]instanceof ml){const s=this.skills[N.KIND_CHANGE_DAMAGE];s.isChangeBase()?a=Math.round((s.damageA+s.damageB*e+s.damageC*e*e)*s.damageRate+s.damageAdd):a=Math.round((this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e)*s.damageRate+s.damageAdd)}else a=Math.round(this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e);return Math.max(a,0)}get range(){let e=0;if(this.skills[N.KIND_CHANGE_RANGE]instanceof pl){const a=this.skills[N.KIND_CHANGE_RANGE];a.isChangeBase()?e=a.range*a.rangeRate+a.rangeAdd:e=this.towerData.range*a.rangeRate+a.rangeAdd}else e=this.towerData.range;return e}get rate(){let e=0;if(this.skills[N.KIND_CHANGE_RATE]instanceof hl){const a=this.skills[N.KIND_CHANGE_RATE];a.isChangeBase()?e=Math.round(a.rate*a.rateRate):e=Math.round(this.towerData.rate*a.rateRate)}else e=this.towerData.rate;return e}setGem(e){this.gem=e,this.initSkills()}newBullet(){return new Bi(this.getBulletId())}getBulletId(){let e=null;return this.skills[N.KIND_CHANGE_BULLET]instanceof _l?(e=this.skills[N.KIND_CHANGE_BULLET],e.bulletId):this.towerData.bulletId}getInfoHtml(){return Qt(this.skillInfo,this.color,!1,"14px")}};l(rt,"TOWER","tower"),l(rt,"GEM","gem");let Lt=rt;const Hi={class:"space-x-2"},Gi=V({__name:"TowerDataForm",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(o){const t=re(o,"modelValue"),e=Y("shaota"),a=k(()=>w.$_towerAtt_Obj[e.value]);return fe(a,s=>{t.value.m_data=new Ca(s)}),(s,i)=>{const r=Ae,_=xe,p=he,m=$e,c=Nt;return f(),C(c,null,{default:d(()=>[n(m,{"label-width":"100px"},{default:d(()=>[n(_,{label:"原型"},{default:d(()=>[n(r,{modelValue:u(e),"onUpdate:modelValue":i[0]||(i[0]=g=>me(e)?e.value=g:null),options:u(ul),"value-key":"id",style:{"max-width":"150px"}},null,8,["modelValue","options"])]),_:1}),n(_,{label:"等级"},{default:d(()=>[n(p,{modelValue:t.value.m_level,"onUpdate:modelValue":i[1]||(i[1]=g=>t.value.m_level=g)},null,8,["modelValue"])]),_:1}),n(_,{label:"damage"},{default:d(()=>[A("div",Hi,[A("span",null,[S(" a: "),n(p,{modelValue:t.value.towerData.damageA,"onUpdate:modelValue":i[2]||(i[2]=g=>t.value.towerData.damageA=g),"controls-position":"right",step:u(Be)(u(a).damage.a),style:{width:"100px"}},null,8,["modelValue","step"])]),A("span",null,[S(" b: "),n(p,{modelValue:t.value.towerData.damageB,"onUpdate:modelValue":i[3]||(i[3]=g=>t.value.towerData.damageB=g),"controls-position":"right",step:u(Be)(u(a).damage.b),style:{width:"100px"}},null,8,["modelValue","step"])]),A("span",null,[S(" c: "),n(p,{modelValue:t.value.towerData.damageC,"onUpdate:modelValue":i[4]||(i[4]=g=>t.value.towerData.damageC=g),"controls-position":"right",step:u(Be)(u(a).damage.c),style:{width:"100px"}},null,8,["modelValue","step"])])])]),_:1}),n(_,{label:"rate"},{default:d(()=>[n(p,{modelValue:t.value.towerData.rate,"onUpdate:modelValue":i[5]||(i[5]=g=>t.value.towerData.rate=g),step:u(Be)(u(a).rate)},null,8,["modelValue","step"])]),_:1}),n(_,{label:"range"},{default:d(()=>[n(p,{modelValue:t.value.towerData.range,"onUpdate:modelValue":i[6]||(i[6]=g=>t.value.towerData.range=g),step:u(Be)(u(a).range)},null,8,["modelValue","step"])]),_:1}),n(_,{label:"buffEffect"},{default:d(()=>[n(p,{modelValue:t.value.towerData.buffEffect,"onUpdate:modelValue":i[7]||(i[7]=g=>t.value.towerData.buffEffect=g),step:u(Be)(u(a).buffEffect)},null,8,["modelValue","step"])]),_:1})]),_:1})]),_:1})}}}),Wi=V({__name:"TowerSkillInfo",props:{tower:{}},setup(o){return(t,e)=>(f(),x("div",{class:"tower-info",style:Da({color:u(Kn)(t.tower.color)})},[(f(!0),x(M,null,H(t.tower.skillInfo.split(`
`),(a,s)=>(f(),x("p",{key:s},D(a),1))),128))],4))}}),Il=ge(Wi,[["__scopeId","data-v-8d267a89"]]),ji=V({__name:"TowerInfo",props:{tower:{}},setup(o){return(t,e)=>{const a=xe,s=$e,i=Nt;return f(),C(i,null,{default:d(()=>[n(s,{"label-width":"80px"},{default:d(()=>[n(a,{label:"damage"},{default:d(()=>[S(D(t.tower.damage()),1)]),_:1}),n(a,{label:"rate"},{default:d(()=>[S(D(t.tower.rate),1)]),_:1}),n(a,{label:"range"},{default:d(()=>[S(D(t.tower.range),1)]),_:1}),n(a,{label:"简介"},{default:d(()=>[n(Il,{tower:t.tower},null,8,["tower"])]),_:1})]),_:1})]),_:1})}}}),Xi={key:0,class:"ml-2 space-x-2"},zi=V({__name:"TowerSkillItem",props:{tower:{required:!0},towerModifiers:{},modelValue:{required:!0},modelModifiers:{}},emits:["update:tower","update:modelValue"],setup(o){const t=re(o,"tower"),e=re(o,"modelValue"),a=Y(),s=k(()=>Object.keys(Ua).filter(r=>!(r in t.value.skills)).map(r=>({label:r,value:r}))),i=()=>{a.value=Ua[e.value.kindId],e.value.params=a.value.params.slice()};return fe(()=>e.value.kindId,(r,_)=>{var p;if(_!=r){delete t.value.skills[_];const m=new W(a.value.id,((p=t.value.skills[r])==null?void 0:p.level)??50,t.value).getSubClasses();m.m_data=new N(e.value),t.value.skills[r]=m}}),fe(e,r=>{t.value.skills[r.kindId].m_data=new N(r)},{deep:!0}),ql(()=>{e.value.kindId&&delete t.value.skills[e.value.kindId]}),(r,_)=>{const p=Ae,m=wt,c=he;return f(),x("div",null,[n(p,{modelValue:e.value.kindId,"onUpdate:modelValue":[_[0]||(_[0]=g=>e.value.kindId=g),i],options:u(s),style:{"max-width":"160px"}},null,8,["modelValue","options"]),u(a)?(f(),x("span",Xi,[(f(!0),x(M,null,H(u(a).params,(g,T)=>(f(),x(M,{key:T},[typeof g=="string"?(f(),C(m,{key:0,modelValue:e.value.params[T],"onUpdate:modelValue":v=>e.value.params[T]=v,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])):ne("",!0),typeof g=="number"?(f(),C(c,{key:1,modelValue:e.value.params[T],"onUpdate:modelValue":v=>e.value.params[T]=v,size:"small","controls-position":"right",step:u(Be)(g),style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue","step"])):ne("",!0)],64))),128))])):ne("",!0)])}}}),Yi=V({__name:"TowerSkillTable",props:{tower:{required:!0},towerModifiers:{}},emits:["update:tower"],setup(o){const t=re(o,"tower"),e=pe([]),a=Y(),s=()=>{e.push({data:{kindId:"",params:[]}})},i=r=>{e.splice(r,1)};return(r,_)=>{const p=Ue,m=he,c=Ie;return f(),x("div",null,[n(u(ke),{ref_key:"skillTableRef",ref:a,data:u(e),stripe:"",border:"","table-layout":"auto",style:{"font-size":"small"}},{default:d(()=>[n(p,{label:"Skill","header-align":"center"},{default:d(g=>[n(zi,{modelValue:g.row.data,"onUpdate:modelValue":T=>g.row.data=T,tower:t.value,"onUpdate:tower":_[0]||(_[0]=T=>t.value=T)},null,8,["modelValue","onUpdate:modelValue","tower"])]),_:1}),n(p,{label:"Level","header-align":"center",width:130},{default:d(g=>[t.value.skills[g.row.data.kindId]?(f(),C(m,{key:0,modelValue:t.value.skills[g.row.data.kindId].level,"onUpdate:modelValue":T=>t.value.skills[g.row.data.kindId].level=T,style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"])):ne("",!0)]),_:1}),n(p,{label:"Info","header-align":"center"},{default:d(g=>{var T;return[S(D((T=t.value.skills[g.row.data.kindId])==null?void 0:T.skillInfo),1)]}),_:1}),n(p,{label:"操作",width:100,align:"center"},{default:d(g=>[n(c,{size:"small",type:"danger",onClick:T=>i(g.$index)},{default:d(()=>[S(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),n(c,{onClick:s},{default:d(()=>[S("新增")]),_:1})])}}}),qi=V({__name:"index",setup(o){const t=pe(new Lt(null));return t.m_data=new Ca(w.$_towerAtt_Obj.shaota),(e,a)=>{const s=yt,i=Rt;return f(),x(M,null,[n(i,{gutter:20},{default:d(()=>[n(s,{span:12},{default:d(()=>[n(Gi,{modelValue:u(t),"onUpdate:modelValue":a[0]||(a[0]=r=>me(t)?t.value=r:null)},null,8,["modelValue"])]),_:1}),n(s,{span:12},{default:d(()=>[n(ji,{tower:u(t)},null,8,["tower"])]),_:1})]),_:1}),n(Yi,{tower:u(t),class:"mt-2"},null,8,["tower"])],64)}}}),Ji=Object.freeze(Object.defineProperty({__proto__:null,default:qi},Symbol.toStringTag,{value:"Module"}));class Zi extends pt{constructor(t){super(),this.m_data=zt.getOnlyExample().getData(t)}get gemData(){return this.m_data}}const Qi=A("p",null,"注：升级经验为塔下一级的 buildValue 值",-1),eo=V({__name:"index",setup(o){const t=Ut({isDefendMap:!1,towerId:"shaota",gemId:"",level:1,buildFrom:0,buildTo:1,buildPower:50}),e=y.chain(w.$_global_properties.gem).toPairs().sortBy(r=>Number(Math.abs(r[1].index))).map(r=>[`${r[1].name} [${r[1].index}]`,r[0]]).value(),a=k(()=>{const r=new Lt(t.towerId);return r.level=t.level,t.gemId!==""&&r.setGem(new Zi(t.gemId)),r}),s=()=>{J.currentMap=new J(t.isDefendMap?J.DEFEND_MAP_1:J.ENDLESS_MAP_1)},i=k(()=>{let r=0;if(t.buildFrom>t.buildTo)return NaN;for(let _=t.buildFrom+1;_<=t.buildTo;_++)r+=a.value.buildValue(_);return Math.round(r/t.buildPower)});return(r,_)=>{const p=Ha,m=xe,c=Ae,g=yt,T=mt,v=_t,I=Rt,b=he,P=$e;return f(),C(P,{model:u(t),"label-width":"120px"},{default:d(()=>[n(m,{label:"是否为防线"},{default:d(()=>[n(p,{modelValue:u(t).isDefendMap,"onUpdate:modelValue":_[0]||(_[0]=U=>u(t).isDefendMap=U),onChange:s},null,8,["modelValue"])]),_:1}),n(I,null,{default:d(()=>[n(g,{span:12},{default:d(()=>[n(m,{label:"塔"},{default:d(()=>[n(c,{modelValue:u(t).towerId,"onUpdate:modelValue":_[1]||(_[1]=U=>u(t).towerId=U),options:u(ul),style:{"max-width":"150px"}},null,8,["modelValue","options"])]),_:1})]),_:1}),n(g,{span:12},{default:d(()=>[n(m,{label:"宝石"},{default:d(()=>[n(v,{modelValue:u(t).gemId,"onUpdate:modelValue":_[2]||(_[2]=U=>u(t).gemId=U),style:{"max-width":"200px"}},{default:d(()=>[n(T,{label:"无",value:""}),(f(!0),x(M,null,H(u(e),([U,K])=>(f(),C(T,{key:K,label:U,value:K},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(I,null,{default:d(()=>[n(g,{span:8},{default:d(()=>[n(m,{label:"等级"},{default:d(()=>[n(b,{modelValue:u(t).level,"onUpdate:modelValue":_[3]||(_[3]=U=>u(t).level=U),min:1},null,8,["modelValue"])]),_:1})]),_:1}),n(g,{span:8},{default:d(()=>[n(m,{label:"等级上限"},{default:d(()=>[A("label",null,D(u(a).towerData.levelMax),1)]),_:1})]),_:1}),n(g,{span:8},{default:d(()=>[n(m,{label:"升级经验"},{default:d(()=>[A("label",null,D(u(a).buildValue(u(a).level+1)),1)]),_:1})]),_:1})]),_:1}),n(I,null,{default:d(()=>[n(g,{span:8},{default:d(()=>[n(m,{label:"攻击力"},{default:d(()=>[A("label",null,D(u(a).damage()),1)]),_:1})]),_:1}),n(g,{span:8},{default:d(()=>[n(m,{label:"攻击频率"},{default:d(()=>[A("label",null,D(u(a).rate),1)]),_:1})]),_:1}),n(g,{span:8},{default:d(()=>[n(m,{label:"攻击范围"},{default:d(()=>[A("label",null,D(u(a).range),1)]),_:1})]),_:1})]),_:1}),n(m,{label:"简介"},{default:d(()=>[n(Il,{tower:u(a)},null,8,["tower"])]),_:1}),n(I,null,{default:d(()=>[n(g,{span:8},{default:d(()=>[n(m,{label:"ability"},{default:d(()=>[A("label",null,D(u(a).ability.toFixed(1)),1)]),_:1})]),_:1}),n(g,{span:8},{default:d(()=>[n(m,{label:"power"},{default:d(()=>[A("label",null,D(u(a).power),1)]),_:1})]),_:1}),n(g,{span:8},{default:d(()=>[n(m,{label:"buffEffect"},{default:d(()=>[A("label",null,D(u(a).buffEffect().toFixed(1)),1)]),_:1})]),_:1})]),_:1}),n(I,null,{default:d(()=>[n(g,{span:8},{default:d(()=>[n(m,{label:"buildValue"},{default:d(()=>[A("label",null,D(u(a).buildValue()),1)]),_:1})]),_:1}),n(g,{span:8},{default:d(()=>[n(m,{label:"buildCost"},{default:d(()=>[A("label",null,D(u(a).buildCost()),1)]),_:1})]),_:1}),n(g,{span:8},{default:d(()=>[n(m,{label:"valueCost"},{default:d(()=>[A("label",null,D(u(a).valueCost()),1)]),_:1})]),_:1})]),_:1}),A("div",null,[n(m,{label:"升级计算",style:{"margin-bottom":"0 !important"}},{default:d(()=>[S(" 从 "),n(b,{modelValue:u(t).buildFrom,"onUpdate:modelValue":_[4]||(_[4]=U=>u(t).buildFrom=U),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),S(" 级到 "),n(b,{modelValue:u(t).buildTo,"onUpdate:modelValue":_[5]||(_[5]=U=>u(t).buildTo=U),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),S(" 级， 苦工总力量 "),n(b,{modelValue:u(t).buildPower,"onUpdate:modelValue":_[6]||(_[6]=U=>u(t).buildPower=U),size:"small","controls-position":"right",style:{width:"8em",margin:"0.5em"}},null,8,["modelValue"])]),_:1}),n(m,{style:{"margin-bottom":"0 !important"}},{default:d(()=>[S(" 需要时间："),A("label",null,D(u(zn)(u(i))),1)]),_:1}),Qi])]),_:1},8,["model"])}}}),to=Object.freeze(Object.defineProperty({__proto__:null,default:eo},Symbol.toStringTag,{value:"Module"})),ao=A("h2",{style:{"text-align":"center"}},"狼出现频率（按数量，供参考）",-1),vl=V({__name:"WaveDistribChart",props:{mapData:{},height:{default:600},width:{default:600}},setup(o){Kt([Sa,os,Pt,Vt,Mt,rs,kt,us]);const t=o,e=k(()=>Nn(t.mapData)),a=k(()=>[t.mapData.name,...de(t.mapData.monsterList)]),s=k(()=>y.range(e.value.all.length)),i=k(()=>y.zip(a.value,[e.value.all,...e.value.each]).map(_=>({title:_[0],pdf:_[1],cdf:[...un(_[1])]}))),r=k(()=>({color:i.value.flatMap(_=>[it(_.title,70,50),it(_.title,50,80)]),tooltip:{trigger:"axis",valueFormatter:_=>Xn(_,6)},title:i.value.map((_,p)=>({text:_.title,left:"center",textVerticalAlign:"middle",top:t.height*((p+.5)/i.value.length)-5,z:-1,textStyle:{fontSize:t.height/i.value.length*.4,color:"#ccc"}})),xAxis:i.value.map((_,p)=>({gridIndex:p,type:"category",axisTick:{alignWithLabel:!0},data:s.value})),yAxis:i.value.flatMap((_,p)=>[{gridIndex:p,type:"value",alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}},{gridIndex:p,type:"value",position:"right",min:0,max:1,interval:.2,alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}}]),grid:i.value.map((_,p)=>({top:t.height*(p/i.value.length)+10,bottom:t.height*(1-(p+1)/i.value.length)+20})),series:i.value.flatMap((_,p)=>[{xAxisIndex:p,yAxisIndex:p*2,type:"bar",barWidth:"90%",data:_.pdf},{xAxisIndex:p,yAxisIndex:p*2+1,type:"line",smooth:!0,data:_.cdf}])}));return(_,p)=>{const m=be("v-chart");return f(),x("div",null,[ao,n(m,{option:u(r),autoresize:"",style:{height:"600px"}},null,8,["option"])])}}}),Tl=V({__name:"DifficultySelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const t=Object.entries(w.$_wave_hard_Obj).map(([a,s])=>({value:parseFloat(a),label:`${s.desc.split("^")[1]} (x${a}, +${s.add_score})`})),e=re(o,"modelValue");return(a,s)=>{const i=Ae;return f(),C(i,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=r=>e.value=r),options:u(t)},null,8,["modelValue","options"])}}}),lo=V({__name:"WolfNumberChart",props:{data:{},max:{}},setup(o){Kt([Vt,Sa,Pt,Mt,kt]);const t=o,e=k(()=>({color:["#C00000"],xAxis:{type:"value",interval:1,axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},max:t.max},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.data.map(a=>a.name)},grid:{left:100,top:0,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.data.map(a=>a.num)}}));return(a,s)=>{const i=be("v-chart");return f(),x("div",null,[n(i,{class:"chart",option:u(e),autoresize:""},null,8,["option"])])}}}),so=ge(lo,[["__scopeId","data-v-2f4c44da"]]),Ll=o=>(Ta("data-v-06912778"),o=o(),La(),o),no=Ll(()=>A("h3",null,"波工具",-1)),io={class:"space-y-2"},oo=Ll(()=>A("label",null,"下表为预留量",-1)),ro={class:"text-center markup-table"},uo=V({__name:"WaveTool",props:{mapData:{},mapMonsterData:{},level:{},diff:{}},setup(o){const{toClipboard:t}=Ja(),e=async m=>{m&&(await t(m),ot.success("已复制到剪贴板"))},a=o,s=pe({count:0,avgHp:0,reservation:new Array(20).fill(0),extra:"",result:"",resultRaw:""}),i=Y([]);fe(()=>a.mapData,()=>{Object.assign(s,{count:0,avgHp:0,resetReservation:a.mapData.monsterProportion.map(()=>0),extra:"",result:"",resultRaw:""}),i.value=[]});const _=()=>{s.reservation.fill(0)},p=()=>{let m=Sn(a.mapData,s.reservation);if(!m){ot.error("预留量不合法，请重新输入！");return}let{mlist:c,clist:g}=m;s.extra&&(c=y.shuffle(c.concat(s.extra.split(",").map(T=>_e.get(T.trim()))))),s.resultRaw=JSON.stringify(c.map(T=>T.id)),s.result=c.map(T=>de(T.id)).join(", "),i.value=g.map(T=>({name:de(T.data.id),num:T.num})),s.count=y.sumBy(g,T=>T.num),s.avgHp=Math.round(y.sumBy(c,T=>T.getHpMax(a.level,a.diff))/c.length)};return(m,c)=>{const g=Ie,T=he,v=wt,I=Nt;return f(),C(I,{class:"wave-tool"},{default:d(()=>[no,A("div",io,[A("div",null,[n(g,{onClick:p},{default:d(()=>[S("随机生成波")]),_:1}),A("span",null,[S(" 共 "),n(T,{modelValue:u(s).count,"onUpdate:modelValue":c[0]||(c[0]=b=>u(s).count=b),size:"small",style:{width:"100px"}},null,8,["modelValue"]),S(" 只狼，平均血量 "),n(v,{modelValue:u(s).avgHp,"onUpdate:modelValue":c[1]||(c[1]=b=>u(s).avgHp=b),modelModifiers:{number:!0},style:{width:"100px"}},null,8,["modelValue"])])]),A("div",null,[oo,n(g,{size:"small",onClick:_},{default:d(()=>[S("重置")]),_:1})]),A("table",ro,[A("tbody",null,[A("tr",null,[(f(!0),x(M,null,H(m.mapMonsterData,b=>(f(),x("td",{key:b.id},D(b.name),1))),128))]),A("tr",null,[(f(!0),x(M,null,H(m.mapMonsterData,(b,P)=>(f(),x("td",{key:b.id},[n(T,{modelValue:u(s).reservation[P],"onUpdate:modelValue":U=>u(s).reservation[P]=U,size:"small",min:0,style:{width:"80px"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))])])]),A("div",null,[S(" 额外："),n(v,{modelValue:u(s).extra,"onUpdate:modelValue":c[2]||(c[2]=b=>u(s).extra=b),placeholder:"多个请用半角逗号分隔",spellcheck:!1,style:{width:"calc(100% - 60px)"}},null,8,["modelValue"])]),A("div",null,[S(" 波： "),n(v,{modelValue:u(s).resultRaw,"onUpdate:modelValue":c[3]||(c[3]=b=>u(s).resultRaw=b),style:{width:"calc(100% - 75px)"},spellcheck:!1},null,8,["modelValue"]),n(g,{icon:u(Oa),onClick:c[4]||(c[4]=b=>e(u(s).resultRaw))},null,8,["icon"])]),A("div",null,[S(" 波： "),n(v,{modelValue:u(s).result,"onUpdate:modelValue":c[5]||(c[5]=b=>u(s).result=b),style:{width:"calc(100% - 75px)"},spellcheck:!1},null,8,["modelValue"]),n(g,{icon:u(Oa),onClick:c[6]||(c[6]=b=>e(u(s).result))},null,8,["icon"])]),n(so,{data:u(i),max:10},null,8,["data"])])]),_:1})}}}),co=ge(uo,[["__scopeId","data-v-06912778"]]),_o={class:"space-x-8"},mo=A("div",null,"（假设每波+2且不引狼）",-1),Dl=V({__name:"LevelPreview",props:At({mapData:{},mapMonsterData:{}},{wid:{default:"dahuil"},widModifiers:{},score:{default:0},scoreModifiers:{},diff:{default:1},diffModifiers:{}}),emits:["update:wid","update:score","update:diff"],setup(o){const t=o,e=re(o,"wid"),a=re(o,"score"),s=re(o,"diff"),i=k(()=>_e.getOnlyExample().getData(e.value)),r=k(()=>t.mapData.getDifficultyLevel(a.value)),_=k(()=>i.value.getHpMax(r.value,s.value)),p=k(()=>({gold:t.mapData.calcAccumulative(a.value).gold,goldMax:t.mapData.calcAccumulative().gold,exp:t.mapData.calcAccumulative(a.value).exp,expMax:t.mapData.calcAccumulative().exp})),m=k(()=>t.mapMonsterData.map(c=>({name:c.name,value:c.getHpMax(r.value,s.value)})));return(c,g)=>{const T=Ae,v=Fe,I=xe,b=he,P=Gl,U=be("vue-latex");return f(),x(M,null,[n(I,{label:"狼"},{default:d(()=>[n(T,{modelValue:e.value,"onUpdate:modelValue":g[0]||(g[0]=K=>e.value=K),options:u(yn),filterable:"",style:{"max-width":"200px"}},null,8,["modelValue","options"]),n(v,{effect:"light",class:"mx-2"},{default:d(()=>[S(" 血量系数："+D(u(i).hpMaxA)+","+D(u(i).hpMaxB)+","+D(u(i).hpMaxC),1)]),_:1})]),_:1}),n(I,{label:"进度"},{default:d(()=>[n(b,{modelValue:a.value,"onUpdate:modelValue":g[1]||(g[1]=K=>a.value=K),min:0},null,8,["modelValue"]),n(v,{effect:"light",class:"tag-button mx-2",onClick:g[2]||(g[2]=K=>a.value=c.mapData.scoreMax)},{default:d(()=>[S(" 通关进度："+D(c.mapData.scoreMax),1)]),_:1}),n(P,{"text-inside":"","stroke-width":24,percentage:a.value/c.mapData.scoreMax*100,format:K=>K.toFixed(0)+"%",style:{width:"100px"}},null,8,["percentage","format"])]),_:1}),n(I,{label:"难度"},{default:d(()=>[n(Tl,{modelValue:s.value,"onUpdate:modelValue":g[3]||(g[3]=K=>s.value=K),style:{"max-width":"200px"}},null,8,["modelValue"])]),_:1}),n(I,null,{default:d(()=>[A("div",_o,[A("span",null,[S(" 等级： "),n(U,{expression:`L(x)=\\sqrt{h_a + h_b x}=${u(r).toFixed(2)}`},null,8,["expression"])]),A("span",null,"最大血量："+D(u(_)),1)])]),_:1}),n(I,null,{default:d(()=>[S(" 银币： "),n(U,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${c.mapData.calcPKGold(u(r))}`},null,8,["expression"])]),_:1}),n(I,null,{default:d(()=>[S(" 经验： "),n(U,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${c.mapData.calcPKExp(u(r))}`},null,8,["expression"])]),_:1}),n(I,null,{default:d(()=>[A("div",null,[A("div",null,[S(" 总银币： "),n(P,{percentage:u(p).gold/u(p).goldMax*100,"show-text":!1,"stroke-width":10,style:{display:"inline-flex",width:"100px"}},null,8,["percentage"]),S(" "+D(u(p).gold)+" / "+D(u(p).goldMax),1)]),A("div",null,[S(" 总经验： "),n(P,{percentage:u(p).exp/u(p).expMax*100,"show-text":!1,"stroke-width":10,style:{display:"inline-flex",width:"100px"}},null,8,["percentage"]),S(" "+D(u(p).exp)+" / "+D(u(p).expMax),1)]),mo])]),_:1}),n(dl,{"hp-data":u(m),height:100*Math.sqrt(c.mapMonsterData.length)},null,8,["hp-data","height"]),n(co,{"map-data":c.mapData,"map-monster-data":c.mapMonsterData,level:u(r),diff:s.value},null,8,["map-data","map-monster-data","level","diff"])],64)}}}),po={class:"text-center markup-table table-auto"},ho=A("thead",null,[A("th",null,"Boss"),A("th",null,"权重"),A("th",null,"概率"),A("th",null,"难度系数")],-1),go=V({__name:"UmapRandomBossTable",props:{mapData:{}},setup(o){const t=o,{mapData:e}=Xa(t);let a=0;const s=()=>y.zip(e.value.randomBossList,ll(e.value.randomBossList.map(m=>m[0]))).map(m=>({index:a++,id:m[0][1],weight:m[1],diff:parseFloat(m[0][2])})),i=pe(s()),r=Y(null),_=k(()=>y.sumBy(i,"weight"));fe(e,()=>i.splice(0,i.length,...s())),fe(i,()=>{const m=sl(i.map(c=>c.weight));e.value.randomBossList=i.map((c,g)=>[m[g],c.id,c.diff.toFixed(1),{}])},{deep:!0});const p=m=>{i.push({index:a++,id:m,weight:1,diff:1}),r.value=null};return(m,c)=>{const g=Ae,T=he;return f(),x("table",po,[ho,A("tbody",null,[(f(!0),x(M,null,H(u(i),(v,I)=>(f(),x("tr",{key:I},[A("td",null,[(f(),C(g,{key:v.index,modelValue:v.id,"onUpdate:modelValue":b=>v.id=b,options:u(Ba),filterable:"",clearable:"",size:"small",style:{width:"200px"},onClear:b=>u(i).removeAt(I)},null,8,["modelValue","onUpdate:modelValue","options","onClear"]))]),A("td",null,[n(T,{modelValue:v.weight,"onUpdate:modelValue":b=>v.weight=b,min:0,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])]),A("td",null,D((v.weight/u(_)).toFixed(3)),1),A("td",null,[n(Tl,{modelValue:v.diff,"onUpdate:modelValue":b=>v.diff=b,style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])])]))),128)),A("tr",null,[A("td",null,[n(g,{modelValue:u(r),"onUpdate:modelValue":c[0]||(c[0]=v=>me(r)?r.value=v:null),options:u(Ba),filterable:"",size:"small",onChange:p},null,8,["modelValue","options"])])])])])}}}),fo={class:"text-center markup-table"},Ao=A("thead",null,[A("th",null,"狼"),A("th",null,"权重"),A("th",null,"概率"),A("th",null,"pop")],-1),Eo=V({__name:"UmapWolfTable",props:{mapData:{}},setup(o){const t=o,{mapData:e}=Xa(t);let a=0;const s=()=>y.zip(e.value.monsterProportion,ll(e.value.monsterProportion.map(c=>c[0]))).map(c=>({index:a++,id:c[0][1],weight:c[1]})),i=pe(s()),r=Y(null),_=k(()=>i.map(c=>_e.getOnlyExample().getData(c.id))),p=k(()=>y.sumBy(i,"weight"));fe(e,()=>i.splice(0,i.length,...s())),fe(i,()=>{const c=sl(i.map(g=>g.weight));e.value.monsterList=i.map(g=>g.id),e.value.monsterProportion=i.map((g,T)=>[c[T],g.id])},{deep:!0});const m=c=>{i.push({index:a++,id:c,weight:1}),r.value=null};return(c,g)=>{const T=Ae,v=he;return f(),x("table",fo,[Ao,A("tbody",null,[(f(!0),x(M,null,H(u(i),(I,b)=>(f(),x("tr",{key:b},[A("td",null,[(f(),C(T,{key:I.index,modelValue:I.id,"onUpdate:modelValue":P=>I.id=P,options:u($a),filterable:"",clearable:"",size:"small",style:{width:"200px"},onClear:P=>u(i).removeAt(b)},null,8,["modelValue","onUpdate:modelValue","options","onClear"]))]),A("td",null,[n(v,{modelValue:I.weight,"onUpdate:modelValue":P=>I.weight=P,min:0,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])]),A("td",null,D((I.weight/u(p)).toFixed(3)),1),A("td",null,D(u(_)[b].population),1)]))),128)),A("tr",null,[A("td",null,[n(T,{modelValue:u(r),"onUpdate:modelValue":g[0]||(g[0]=I=>me(r)?r.value=I:null),options:u($a),filterable:"",size:"small",onChange:m},null,8,["modelValue","options"])])])])])}}}),Io={class:"space-x-2"},vo=A("span",null,"A",-1),To=A("span",null,"B",-1),Lo=V({__name:"UmapDataForm",props:{mapData:{default:new ut(w.$_map_Obj.m0B)},mapDataModifiers:{}},emits:["update:mapData"],setup(o){const t=Y(w.$_map_Obj.m0B),e=re(o,"mapData"),a=pe({mid:"m0B",wid:"dahuil",score:0,diff:1});xa(()=>{t.value=w.$_map_Obj[a.mid],e.value=new ut(t.value)});const s=k(()=>e.value.monsterList.map(i=>_e.getOnlyExample().getData(i)));return(i,r)=>{const _=Ae,p=xe,m=wt,c=he,g=Wa,T=$e;return f(),C(T,{model:u(a),"label-width":"120px"},{default:d(()=>[n(p,{label:"原型"},{default:d(()=>[n(_,{modelValue:u(a).mid,"onUpdate:modelValue":r[0]||(r[0]=v=>u(a).mid=v),options:u(rl),filterable:"",style:{"max-width":"200px"}},null,8,["modelValue","options"])]),_:1}),n(p,{label:"名称"},{default:d(()=>[n(m,{modelValue:e.value.name,"onUpdate:modelValue":r[1]||(r[1]=v=>e.value.name=v),style:{width:"200px"}},null,8,["modelValue"])]),_:1}),n(p,{label:"通关进度"},{default:d(()=>[n(c,{modelValue:e.value.scoreMax,"onUpdate:modelValue":r[2]||(r[2]=v=>e.value.scoreMax=v)},null,8,["modelValue"])]),_:1}),n(p,{label:"Population"},{default:d(()=>[n(c,{modelValue:e.value.populationMax,"onUpdate:modelValue":r[3]||(r[3]=v=>e.value.populationMax=v)},null,8,["modelValue"])]),_:1}),n(p,{label:"难度系数"},{default:d(()=>[A("div",Io,[vo,n(c,{modelValue:e.value.hardA,"onUpdate:modelValue":r[4]||(r[4]=v=>e.value.hardA=v),size:"small"},null,8,["modelValue"]),To,n(c,{modelValue:e.value.hardB,"onUpdate:modelValue":r[5]||(r[5]=v=>e.value.hardB=v),size:"small"},null,8,["modelValue"])])]),_:1}),n(p,{label:"该地图的狼"},{default:d(()=>[n(Eo,{"map-data":e.value,style:{width:"100%"}},null,8,["map-data"])]),_:1}),n(p,{label:"随机 Boss"},{default:d(()=>[n(go,{"map-data":e.value,style:{width:"100%"}},null,8,["map-data"])]),_:1}),n(g),n(Dl,{"map-data":e.value,"map-monster-data":u(s)},null,8,["map-data","map-monster-data"])]),_:1},8,["model"])}}}),Do=V({__name:"index",setup(o){const t=Y(),e=Y("wolf"),a=wa(),s=()=>{const i=t.value;a.open({name:i.name,pass_score:i.scoreMax,yield_val:i.hardA,hard_ness:i.hardB,pop_max:i.populationMax,wolf_proportion:i.monsterProportion,random_boss:i.randomBossList})};return(i,r)=>{const _=Ie,p=yt,m=Ct,c=ct,g=Rt;return f(),C(g,null,{default:d(()=>[n(p,{md:16},{default:d(()=>[n(_,{onClick:s},{default:d(()=>[S("导出")]),_:1}),n(Lo,{"map-data":u(t),"onUpdate:mapData":r[0]||(r[0]=T=>me(t)?t.value=T:null),onExport:s},null,8,["map-data"])]),_:1}),n(p,{md:8,sm:16},{default:d(()=>[u(t)?(f(),C(c,{key:0,modelValue:u(e),"onUpdate:modelValue":r[1]||(r[1]=T=>me(e)?e.value=T:null),class:"chart-area"},{default:d(()=>[n(m,{label:"狼分布",name:"wolf"},{default:d(()=>[n(vl,{"map-data":u(t)},null,8,["map-data"])]),_:1})]),_:1},8,["modelValue"])):ne("",!0)]),_:1})]),_:1})}}}),xo=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),bo={key:0,style:{"text-align":"center"}},So={key:1,style:{"text-align":"center"}},No=V({__name:"BossDistribChart",props:{mid:{}},setup(o){const t=o;Kt([ds,Pt,Vt,cs,Mt,kt]);const e=pe({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:[{left:"5%",right:"4%",bottom:"52%",containLabel:!0},{left:"5%",right:"4%",top:"52%",containLabel:!0}],dataset:{source:[]},xAxis:[{gridIndex:0},{gridIndex:1}],yAxis:[{type:"category",gridIndex:0},{type:"category",gridIndex:1}],series:[]}),a=k(()=>{var s;return!!((s=w.$_map_Obj[t.mid].random_boss)!=null&&s.length)});return xa(()=>{const s=w.$_map_Obj[t.mid].random_boss;if(!s)return;const i=s.map((m,c)=>{var g;return[Object.keys(m[3].properties.card)[0],m[1],Math.round((m[0]-(((g=s[c-1])==null?void 0:g[0])??0))*1e3)/10]}),r=y.uniq(i.map(m=>m[0])).sort(),_=y.uniq(i.map(m=>m[1])).sort(),p=[["boss",...de(r)],..._.map(m=>[de(m),...new Array(r.length)])];for(const m of i)p[_.indexOf(m[1])+1][r.indexOf(m[0])+1]=m[2];e.dataset.source=p,e.series=[...new Array(r.length).fill({type:"bar",stack:`${t.mid}-totalA`,label:{show:!0},emphasis:{focus:"series"}}),...new Array(_.length).fill({type:"bar",stack:`${t.mid}-totalB`,seriesLayoutBy:"row",label:{show:!0},emphasis:{focus:"series"},xAxisIndex:1,yAxisIndex:1})]}),(s,i)=>(f(),x("div",null,[u(a)?(f(),x("h2",bo,"随机Boss奖励分布")):(f(),x("h2",So,"本图没有随机Boss哦")),u(a)?(f(),C(u(za),{key:2,option:u(e),autoresize:"","update-options":{notMerge:!0},style:{height:"600px"}},null,8,["option"])):ne("",!0)]))}}),wo={class:"flex flex-wrap gap-1"},Co={class:"flex flex-wrap gap-1"},Ro=V({__name:"UmapInfoForm",props:{mid:{},midModifiers:{},mapData:{default:J.getMapData("m1")},mapDataModifiers:{}},emits:["update:mid","update:mapData"],setup(o){const t=re(o,"mid"),e=Ut({mid:"m1",mid2:"",wid:"dahuil",diff:1}),a=k(()=>w.$_map_Obj[e.mid]),s=re(o,"mapData"),i=k(()=>e.mid2===""?s.value:J.getMapData(e.mid2)),r=k(()=>s.value.monsterList.map(m=>_e.getOnlyExample().getData(m)));xa(()=>{t.value=e.mid,s.value=J.getMapData(e.mid)});const _=m=>m.map(c=>{let g=w.$_wolfAtt_Obj[c[1]];return{id:c[1],prob:c[0],name:g.name,pop:g.pop}}),p=m=>m?m.map(c=>{let g=w.$_wolfAtt_Obj[c[1]];return{id:c[1],prob:c[0],name:g.name,diff:parseFloat(c[2])}}):[];return(m,c)=>{const g=Ae,T=Fe,v=xe,I=mt,b=_t,P=Wa,U=$e;return f(),C(U,{model:u(e),"label-width":"120px"},{default:d(()=>[n(v,{label:"地图"},{default:d(()=>[n(g,{modelValue:u(e).mid,"onUpdate:modelValue":c[0]||(c[0]=K=>u(e).mid=K),options:u(rl),filterable:"",style:{"max-width":"200px"}},null,8,["modelValue","options"]),n(T,{effect:"light",class:"mx-2"},{default:d(()=>[S(" 难度系数："+D(s.value.hardA)+","+D(s.value.hardB),1)]),_:1}),n(T,{effect:"light"},{default:d(()=>[S(" Population："+D(s.value.populationMax),1)]),_:1})]),_:1}),n(v,{label:"引狼到"},{default:d(()=>[n(b,{modelValue:u(e).mid2,"onUpdate:modelValue":c[1]||(c[1]=K=>u(e).mid2=K),filterable:"",clearable:"",style:{"max-width":"200px"}},{default:d(()=>[n(I,{label:"无",value:""}),(f(!0),x(M,null,H(u(ol),K=>(f(),C(I,{key:K.id,label:`${K.id} ${K.name}`,value:K.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(v,{label:"该地图的狼"},{default:d(()=>[A("div",wo,[(f(!0),x(M,null,H(_(u(a).wolf_proportion),K=>(f(),C(T,{key:K.id,type:"success",class:"tag-button",effect:"light",onClick:Se=>u(e).wid=K.id},{default:d(()=>[A("sub",null,D(K.prob),1),S(" "+D(K.name)+" ",1),A("sup",null,D(K.pop),1)]),_:2},1032,["onClick"]))),128))])]),_:1}),"random_boss"in u(a)?(f(),C(v,{key:0,label:"随机 Boss"},{default:d(()=>[A("div",Co,[(f(!0),x(M,null,H(p(u(a).random_boss),(K,Se)=>(f(),C(T,{key:Se,type:"success",class:"tag-button",effect:"light",onClick:G=>{u(e).wid=K.id,u(e).diff=K.diff}},{default:d(()=>[A("sub",null,D(K.prob),1),S(" "+D(K.name)+" ",1),A("sub",null,D(K.diff),1)]),_:2},1032,["onClick"]))),128))])]),_:1})):ne("",!0),n(P),n(Dl,{wid:u(e).wid,"onUpdate:wid":c[2]||(c[2]=K=>u(e).wid=K),diff:u(e).diff,"onUpdate:diff":c[3]||(c[3]=K=>u(e).diff=K),"map-data":u(i),"map-monster-data":u(r)},null,8,["wid","diff","map-data","map-monster-data"])]),_:1},8,["model"])}}}),yo=ge(Ro,[["__scopeId","data-v-b78a41b4"]]),Oo=V({__name:"index",setup(o){const t=Y("m1"),e=Y(),a=Y("wolf");return(s,i)=>{const r=yt,_=Ct,p=ct,m=Rt;return f(),C(m,null,{default:d(()=>[n(r,{md:16},{default:d(()=>[n(yo,{mid:u(t),"onUpdate:mid":i[0]||(i[0]=c=>me(t)?t.value=c:null),"map-data":u(e),"onUpdate:mapData":i[1]||(i[1]=c=>me(e)?e.value=c:null)},null,8,["mid","map-data"])]),_:1}),n(r,{md:8,sm:16},{default:d(()=>[u(e)?(f(),C(p,{key:0,modelValue:u(a),"onUpdate:modelValue":i[2]||(i[2]=c=>me(a)?a.value=c:null),class:"chart-area"},{default:d(()=>[n(_,{label:"狼分布",name:"wolf"},{default:d(()=>[n(vl,{"map-data":u(e)},null,8,["map-data"])]),_:1}),n(_,{label:"Boss分布",name:"boss"},{default:d(()=>[n(No,{mid:u(t)},null,8,["mid"])]),_:1})]),_:1},8,["modelValue"])):ne("",!0)]),_:1})]),_:1})}}}),Ko=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),Po=A("p",null,"前排解释：",-1),Vo=A("p",null,"狼的等级随进度增加而增加。难度系数 hardA 影响初始狼等级，hardB 影响等级增长速率。",-1),Mo=A("p",null,"population 影响一波狼的容量。每只狼都会占用一定容量。",-1),ko=A("p",null,"不同随机boss有出现权重。出现率、难度、奖励水平是相对应的，难的比较稀有，奖励也会比较好。",-1),Uo={class:"flex flex-wrap gap-0.5"},Fo=V({__name:"index",setup(o){const t=y.map(w.$_map_Obj,(s,i)=>y.extend(s,{id:i})),e=(s,i)=>{let r=s.need_lev||0,_=i.need_lev||0;return r-_},a=s=>s.map(i=>{const r=_e.getOnlyExample().getData(i[1]);return{prob:i[0],name:r.name,pop:r.population}});return(s,i)=>{const r=Ue,_=Fe,p=ke;return f(),x(M,null,[Po,Vo,Mo,ko,n(p,{data:u(t),"default-sort":{prop:"index",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},height:"600px",style:{width:"100%","font-size":"80%"},class:"testbox"},{default:d(()=>[n(r,{prop:"index",label:"index",sortable:"",align:"center",fixed:"",width:"70"}),n(r,{prop:"id",label:"id",sortable:"",align:"center",fixed:"",width:"80"}),n(r,{prop:"name",label:"name",sortable:"",align:"center",fixed:"",width:"80"}),n(r,{prop:"pass_score",label:"scoreMax",sortable:"",align:"center"}),n(r,{label:"hardnessFactor"},{default:d(()=>[n(r,{prop:"yield_val",label:"hardA",sortable:"",align:"center"}),n(r,{prop:"hard_ness",label:"hardB",sortable:"",align:"center"})]),_:1}),n(r,{prop:"pop_max",label:"populationMax",sortable:"",align:"center"}),n(r,{prop:"interval",label:"unkennelDelay",sortable:"",align:"center"}),n(r,{prop:"interval_rule",label:"unkennelRule",sortable:"",align:"center"}),n(r,{prop:"teleport_rule",label:"teleportRule",sortable:"",align:"center"}),n(r,{prop:"need_lev",label:"needLevel",sortable:"","sort-method":e,align:"center"}),n(r,{prop:"pass_by",label:"passBy",align:"center"},{default:d(m=>[S(D(m.row.pass_by.map(c=>u(w).$_map_Obj[c].name).join(", ")),1)]),_:1}),n(r,{prop:"wolf_proportion",label:"monsterList","cell-style":{"text-align":"left"}},{default:d(m=>[A("div",Uo,[(f(!0),x(M,null,H(a(m.row.wolf_proportion),c=>(f(),C(_,{key:c.prob},{default:d(()=>[A("sub",null,D(c.prob),1),S(" "+D(c.name)+" ",1),A("sup",null,D(c.pop),1)]),_:2},1024))),128))])]),_:1})]),_:1},8,["data"])],64)}}}),$o=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),Bo=V({__name:"index",setup(o){const t=Ut({level:1}),e=k(()=>((2*(t.level+1)+3)*(t.level+1)+4)*(t.level+1)+20),a=k(()=>Math.round((.015*t.level+.8)*t.level+2)),s=k(()=>Math.floor(t.level/4+1)),i=k(()=>(t.level+7)*a.value);return(r,_)=>{const p=he,m=xe,c=$e;return f(),C(c,{model:u(t),"label-width":"120px"},{default:d(()=>[n(m,{label:"等级"},{default:d(()=>[n(p,{modelValue:u(t).level,"onUpdate:modelValue":_[0]||(_[0]=g=>u(t).level=g),min:1},null,8,["modelValue"])]),_:1}),n(m,{label:"升级经验"},{default:d(()=>[A("label",null,D(u(e)),1)]),_:1}),n(m,{label:"力量"},{default:d(()=>[A("label",null,D(u(a)),1)]),_:1}),n(m,{label:"连升等级"},{default:d(()=>[A("label",null,D(u(s)),1)]),_:1}),n(m,{label:"苦工价格"},{default:d(()=>[A("label",null,D(u(i)),1)]),_:1})]),_:1},8,["model"])}}}),Ho=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

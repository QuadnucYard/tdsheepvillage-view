var ca=Object.defineProperty;var _a=(o,t,e)=>t in o?ca(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var l=(o,t,e)=>(_a(o,typeof t!="symbol"?t+"":t,e),e);import{l as ma}from"./vatex-zX9wRrel.js";import{ad as We,o as h,W as y,R as c,am as Ol,S as Al,an as pa,d as B,b as W,i as ha,c as x,O as n,P as V,af as $,u as r,B as ce,a as f,X as de,U as b,V as C,y as F,T as Kl,J as ne,ao as rt,ap as Le,n as ga,L as fa,aq as Aa,e as ve,I as Ea,ar as yl,as as Pl,K as Vl,w as El}from"./@vue-g-XYjvEB.js";import{B as Ml}from"./vue-echarts-d9Jnvkdw.js";import{V as kl}from"./vue-json-pretty-ooxDwGNO.js";import{c as Ia,a as Ta,u as La,b as va}from"./vue-router-S5u6H_R-.js";import{E as pt,a as ht,b as je,c as Xe,d as ze,e as Ve,f as be,g as fe,h as Me,i as ke,j as Ye,k as Da,l as wt,m as Et,n as Ul,o as Rt,p as Ct,q as Ot,r as ba,s as ut,t as Fl,u as xa}from"./element-plus-UTWfw5e2.js";import{l as M}from"./lodash-es-XRSUaxaC.js";import{u as Sa,k as Na,n as bl}from"./@element-plus-S1MFk4yC.js";import{u as Il}from"./vue-clipboard3-Cptz2BMG.js";/* empty css                            */import{u as Kt,i as Tl,a as yt,b as Pt,c as Vt,d as Mt,e as wa,f as Ra,g as Ca,h as Oa,j as Ka}from"./echarts-GjKPecxE.js";import{C as ya}from"./color-lGaxW6_7.js";import{g as Pa}from"./mathjs-gTgI8z7z.js";import{X as Va}from"./x2js-W03PkrVR.js";import{d as oe,l as Ma,a as kt,b as ka}from"./assets-SCj47aO5.js";import"./katex-_zvSrubh.js";import"./resize-detector-MCIWMGSt.js";import"./@xmldom-d9eUxd-a.js";import"./vue-2aSfOg-4.js";import"./async-validator-BHjhHa7C.js";import"./@vueuse-sJix5jFV.js";import"./@ctrl-ZggoHSuR.js";import"./@sxzz--N-3kK7X.js";import"./memoize-one-JaOscZgY.js";import"./escape-html-YJzPAAme.js";import"./normalize-wheel-es-1urBKM79.js";import"./clipboard-Hgl8elDU.js";import"./tslib-21A5UWR7.js";import"./zrender-dN4b0SPD.js";import"./color-string-ubjL45Um.js";import"./color-name-uE2j7_hh.js";import"./simple-swizzle-b_rj1vgy.js";import"./is-arrayish-j_Z-KVb3.js";import"./color-convert-aInGpaEG.js";import"./decimal.js-fO9wOXnX.js";import"./typed-function-lmhpVYy-.js";import"./@babel-dGVwEr9R.js";import"./complex.js-yJ1Lcpjn.js";import"./fraction.js-MQ8Bsltp.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();(function(){String.prototype.isNullOrEmpty||(String.prototype.isNullOrEmpty=function(){return!this}),Array.prototype.firstOrDefault||(Array.prototype.firstOrDefault=function(o){for(let t=0;t<this.length;t++){const e=this[t];if(o(e))return e}return null}),Array.prototype.removeAt||(Array.prototype.removeAt=function(o){const t=this[o];return this.splice(o,1),t}),Array.prototype.removeOne||(Array.prototype.removeOne=function(o){const t=this.indexOf(o);return t>=0?(this.splice(t,1),!0):!1}),Array.prototype.removeRange||(Array.prototype.removeRange=function(o){for(let t=0;t<o.length;t++)this.removeOne(o[t])}),Array.prototype.addRange||(Array.prototype.addRange=function(o){for(let t=0;t<o.length;t++)this.push(o[t])}),Array.prototype.contains||(Array.prototype.contains=function(o){return this.indexOf(o)!=-1}),Array.prototype.empty||(Array.prototype.empty=function(){return this.length==0})})();const qe=(o,t)=>{const e=o.__vccOpts||o;for(const[a,s]of t)e[a]=s;return e},Ua={};function Fa(o,t){const e=We("router-view");return h(),y(e,null,{default:c(({Component:a})=>[(h(),y(Ol,null,[(h(),y(Al(a)))],1024))]),_:1})}const $a=qe(Ua,[["render",Fa]]),Ba="modulepreload",Ha=function(o,t){return new URL(o,t).href},xl={},he=function(t,e,a){let s=Promise.resolve();if(e&&e.length>0){const i=document.getElementsByTagName("link");s=Promise.all(e.map(d=>{if(d=Ha(d,a),d in xl)return;xl[d]=!0;const _=d.endsWith(".css"),g=_?'[rel="stylesheet"]':"";if(!!a)for(let I=i.length-1;I>=0;I--){const T=i[I];if(T.href===d&&(!_||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${g}`))return;const u=document.createElement("link");if(u.rel=_?"stylesheet":Ba,_||(u.as="script",u.crossOrigin=""),u.href=d,document.head.appendChild(u),_)return new Promise((I,T)=>{u.addEventListener("load",I),u.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${d}`)))})}))}return s.then(()=>t()).catch(i=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=i,window.dispatchEvent(d),!d.defaultPrevented)throw i})},Ga=(o,t)=>{const e=o[t];return e?typeof e=="function"?e():Promise.resolve(e):new Promise((a,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})},$l=[{name:"notice",label:"Notice"},{name:"user",label:"User"},{name:"towers",label:"Towers"},{name:"wolfs",label:"Wolfs"},{name:"umaps",label:"Umaps"},{name:"umap-detail",label:"Umap Detail"},{name:"umap-design",label:"Umap Design"},{name:"dmaps",label:"Dream Maps"},{name:"dmap-detail",label:"Dream Map Detail"},{name:"wolf-calc",label:"Wolf Calculation"},{name:"baoxiang",label:"Baoxiang Properties"},{name:"dream-design",label:"Dream Design"},{name:"tower-design",label:"Tower Design"}],Wa=[{path:"/",name:"index",component:()=>he(()=>Promise.resolve().then(()=>Ya),void 0,import.meta.url),children:$l.map(o=>({path:"/"+o.name,name:o.name,meta:{keepAlive:!0},component:()=>Ga(Object.assign({"../views/sections/baoxiang/index.vue":()=>he(()=>Promise.resolve().then(()=>ds),void 0,import.meta.url),"../views/sections/dmap-detail/index.vue":()=>he(()=>Promise.resolve().then(()=>Es),void 0,import.meta.url),"../views/sections/dmaps/index.vue":()=>he(()=>Promise.resolve().then(()=>Ds),void 0,import.meta.url),"../views/sections/dream-design/index.vue":()=>he(()=>Promise.resolve().then(()=>Ns),void 0,import.meta.url),"../views/sections/notice/index.vue":()=>he(()=>Promise.resolve().then(()=>ys),void 0,import.meta.url),"../views/sections/tower-design/index.vue":()=>he(()=>Promise.resolve().then(()=>dn),void 0,import.meta.url),"../views/sections/towers/index.vue":()=>he(()=>Promise.resolve().then(()=>hn),void 0,import.meta.url),"../views/sections/umap-design/index.vue":()=>he(()=>Promise.resolve().then(()=>kn),void 0,import.meta.url),"../views/sections/umap-detail/index.vue":()=>he(()=>Promise.resolve().then(()=>Wn),void 0,import.meta.url),"../views/sections/umaps/index.vue":()=>he(()=>Promise.resolve().then(()=>Jn),void 0,import.meta.url),"../views/sections/user/index.vue":()=>he(()=>Promise.resolve().then(()=>Qn),void 0,import.meta.url),"../views/sections/wolf-calc/index.vue":()=>he(()=>Promise.resolve().then(()=>ci),void 0,import.meta.url),"../views/sections/wolfs/index.vue":()=>he(()=>Promise.resolve().then(()=>Ni),void 0,import.meta.url)}),`../views/sections/${o.name}/index.vue`)})),redirect:"notice"}],ja=Ia({history:Ta("/tdsheepvillage-view/"),routes:Wa}),Ll=pa($a);Ll.use(ja).use(ma);Ll.component("VChart",Ml);Ll.mount("#app");const Xa={class:"content"},za=B({__name:"index",setup(o){const t=La(),e=va(),a=W(""),s=(i,d)=>{t.push({name:i.paneName})};return ha(()=>{a.value=e.name}),(i,d)=>{const _=ht,g=pt,p=We("router-view");return h(),x("main",null,[n(g,{modelValue:r(a),"onUpdate:modelValue":d[0]||(d[0]=u=>ce(a)?a.value=u:null),type:"card",onTabClick:s},{default:c(()=>[(h(!0),x(V,null,$(r($l),u=>(h(),y(_,{key:u.name,label:u.label,name:u.name},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),f("div",Xa,[n(p,null,{default:c(({Component:u})=>[(h(),y(Ol,null,[(h(),y(Al(u)))],1024))]),_:1})])])}}}),Ya=Object.freeze(Object.defineProperty({__proto__:null,default:za},Symbol.toStringTag,{value:"Module"}));function qa(o,t=!1){t||(o=o.toLowerCase());let e=1315423911;for(let a=o.length-1;a>=0;a--)e^=(e<<5)+o.charCodeAt(a)+(e>>2);return e&2147483647}const Ja=function(o){return/^[a-zA-Z]+$/.test(o)},Za=function(o,t){return o<t?-1:o>t?1:0};function*Qa(o){let t=0;for(const e of o)t+=e,yield t}function Ue(o){if(o===0)return 1;if(o=Math.abs(o),o%1===0)return Math.pow(10,Math.floor(Math.log10(o)));const t=o.toString();return Math.pow(10,t.indexOf(".")-t.length+1)}function Sl(...o){if(o.length==1)return new Array(o[0]).fill(0);if(o.length==2)return Array.from({length:o[0]},()=>new Array(o[1]).fill(0))}function Ut(o){return M.mapValues(o,(t,e)=>Ft(t,e))}function Ft(o,t){return M.mapValues(o,(e,a)=>es(e,t,a))}function es(o,t,e){return{...o,type:t,id:e}}const R=function(){const o=new Va;let t=oe.camp_system_simple;const e=_=>parseInt(new RegExp("(?<=m).+(?=[A-Z]*)").exec(Ja(_[_.length-1])?_:_+"A")[0],36),a=Object.keys(oe.umaps).sort((_,g)=>Za(e(_),e(g))),s=Ut(oe.building),i=Ut(oe.skill),d={$_global_language_str:o.xml2dom(Ma),$_global_properties:Ut(oe.properties),$_skillAtt_Obj:i,$_skillPackage_Obj:oe.skill_package,$_map_Obj:oe.umaps,$_towerAtt_Obj:s.tower,$_bulletAtt_Obj:oe.bullet,$_wolfAtt_Obj:Ft(oe.wolfs,"wolf"),$_wallAtt_Obj:s.wall,$_barrierAtt_Obj:oe.barrier,$_level_up_gift:oe.level_up_gift,$_pass_map_gift:oe.pass_map_gift,$_wave_hard_Obj:oe.wolf_hard_ness,$Maps:oe.version_ctrl.Maps,$_wolfs_unlock_lv:t.camp_wolf_lv_max_factor,$_wolfs_unlock_gold:t.camp_wolf_gold_max_factor,$_camp_hold_time:t.hold_time,$_camp_pk_cd_time:t.pk_cd_time,$_camp_pk_times_max:t.pk_times_max,$_camp_defend_times_max:t.defend_times_max,$_camp_pk_arena_times_max:t.pk_arena_times_max,$_camp_defend_arena_times_max:t.defend_arena_times_max,$_camp_mining_rate:t.mine_rate,$_camp_sell_building_dis:t.sell_building_dis,$_tower_worth_factor:t.tower_worth_factor,$_wolf_worth_factor:t.wolf_worth_factor,$_defend_map_snarp_max:t.defend_map_snarp_max,$_defend_succ_factor:t.defend_succ_factor,$_defend_failed_factor:t.defend_failed_factor,$_defend_arena_succ_factor:t.defend_arena_succ_factor,$_defend_arena_failed_factor:t.defend_arena_failed_factor,$_conflict_skill_kind:t.conflict_skill_kind,$_skill_lvup_spend:t.skill_lvup_spend,$_skill_grade_score:t.skill_grade_score,$_camp_use_exp_wolf_max:t.use_exp_wolf_max,$_camp_use_exp_tower_max:t.use_exp_tower_max,$_camp_wolf_lv_max:t.wolf_lv_max,$_camp_need_user_level:t.camp_need_user_level,$_camp_arena_need_user_level:t.arena_need_user_level,$_camp_create_mine_help_max:t.create_mine_help_max,$_camp_create_mine_help_friends_num:t.create_mine_help_friends_num,$_dream_wolf_hard_ness:kt.dm_wolf_hard_ness,umapsById:a.map(_=>[_,oe.umaps[_]]),dream_data:kt,dream_maps:Ft(kt.dmaps,"dmaps"),dream_waves:ka};return console.log("init",d.umapsById),d}(),At=o=>M.mapValues(o,t=>{let e=t.name;return e.includes("^")?e.substring(e.indexOf("^")+1):e}),$t=Object.assign({},At(R.$_map_Obj),At(R.$_wolfAtt_Obj),At(R.$_towerAtt_Obj),...Object.values(R.$_global_properties).map(o=>At(o)));console.log("dict",$t);function ge(o){return typeof o=="string"?$t[o]:o.map(t=>$t[t])}const ts={key:0},ls={key:0},as={class:"ml-4"},ss={key:1},ns={key:1},is={key:0},os={key:1},rs={class:"ml-4"},us=B({__name:"index",setup(o){const t=M.chain(R.$_global_properties.card).values().filter(e=>e.id.startsWith("baoxiang")).sortBy(e=>Math.abs(e.index)).value();return(e,a)=>{const s=je,i=ze,d=Xe;return h(),x("div",null,[n(d,{data:r(t),style:{"font-size":"small"}},{default:c(()=>[n(s,{label:"id",prop:"id",width:120}),n(s,{label:"name",prop:"name",width:160}),n(s,{label:"open_num",prop:"open_num",width:100}),n(s,{label:"info",prop:"info",width:400}),n(s,{label:"data"},{default:c(_=>[_.row.default_gift?(h(),x("ul",ts,[(h(!0),x(V,null,$(_.row.default_gift,(g,p)=>(h(),x(V,{key:p},[String(p)=="properties"?(h(),x("li",ls,[n(i,{type:"warning"},{default:c(()=>[C(b(p),1)]),_:2},1024),f("ul",as,[(h(!0),x(V,null,$(g,(u,I)=>(h(),x("li",{key:I},[n(i,null,{default:c(()=>[C(b(I),1)]),_:2},1024),(h(!0),x(V,null,$(u,(T,E)=>(h(),y(i,{key:E,type:"info",title:E},{default:c(()=>[C(b(r(ge)(String(E)))+": "+b(T),1)]),_:2},1032,["title"]))),128))]))),128))])])):(h(),x("li",ss,[n(i,{type:"warning"},{default:c(()=>[C(b(p),1)]),_:2},1024),n(i,{type:"info"},{default:c(()=>[C(b(g),1)]),_:2},1024)]))],64))),128))])):de("",!0),_.row.data?(h(),x("ul",ns,[(h(!0),x(V,null,$(_.row.data,g=>(h(),x(V,{key:g[0]},[g[1]=="invite_score"?(h(),x("li",is,[n(i,{type:"success"},{default:c(()=>[C(b(g[0]),1)]),_:2},1024),n(i,{type:"warning"},{default:c(()=>[C(b(g[1]),1)]),_:2},1024),n(i,null,{default:c(()=>[C(b(g[2]),1)]),_:2},1024)])):de("",!0),g[1]=="properties"?(h(),x("li",os,[n(i,{type:"success"},{default:c(()=>[C(b(g[0]),1)]),_:2},1024),n(i,{type:"warning"},{default:c(()=>[C(b(g[1]),1)]),_:2},1024),f("ul",rs,[(h(!0),x(V,null,$(g[2],p=>(h(),x("li",{key:p[0]},[n(i,{type:"success"},{default:c(()=>[C(b(p[0]),1)]),_:2},1024),n(i,{type:"warning"},{default:c(()=>[C(b(p[1]),1)]),_:2},1024),n(i,null,{default:c(()=>[(h(!0),x(V,null,$(p[2],u=>(h(),y(i,{title:u,type:"info",key:u},{default:c(()=>[C(b(r(ge)(u)),1)]),_:2},1032,["title"]))),128))]),_:2},1024)]))),128))])])):de("",!0)],64))),128))])):de("",!0)]),_:1})]),_:1},8,["data"])])}}}),ds=Object.freeze(Object.defineProperty({__proto__:null,default:us},Symbol.toStringTag,{value:"Module"})),Ze=class Ze{static getLanguageStr(t,...e){let a=null,s=null,i=null;if(R.$_global_language_str!=null&&(R.$_global_language_str.getElementsByTagName("id"+t)[0]!=null?R.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str")=="CHILD2010"?i=R.$_global_language_str.getElementsByTagName("id"+t)[0].children().toString():i=R.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str"):i=null),!(i!=null&&i.length))return"";let d=i.search("%%");for(;d!=-1;)s=i.slice(d,d+6),i=i.replace(s,Ze.getLanguageStr(parseInt(s.slice(2)))),d=i.search("%%");for(let _=0;_<e.length;_++)a="%"+_,i=i==null?void 0:i.replaceAll(a,e[_]);return i}static getDataProfileTxt(t){let e=null,a=!1,s=null,i=null,d=null,_=t;return t&&(e=String(t),a=e.indexOf(Ze.INTER_CONFIG_SPLIT_CHAR)>-1,s=null,i="",d="",a?(s=e.split(Ze.INTER_CONFIG_SPLIT_CHAR),i=s[0],d=s[1],R.$_global_dataProfile_txt!=null?(R.$_global_dataProfile_txt.getElementsByTagName(i)[0]!=null?_=R.$_global_dataProfile_txt.getElementsByTagName(i)[0].getAttribute("s").toString():_=d,_=_.replace(/\\n/g,`
`)):_=d):_=e,s=null,e="",i="",d=""),_}};l(Ze,"INTER_CONFIG_SPLIT_CHAR","^");let m=Ze;const re=class re{constructor(t){l(this,"typeId");l(this,"kindId");l(this,"id");l(this,"name");l(this,"info");l(this,"help");this.typeId=t[re.DATA_TYPE_ID],this.kindId=t[re.DATA_KIND_ID],this.id=t[re.DATA_ID],this.name=m.getDataProfileTxt(t[re.DATA_NAME]),this.info=m.getDataProfileTxt(t[re.DATA_INFO]),this.help=t[re.DATA_HELP]?m.getDataProfileTxt(t[re.DATA_HELP]):""}};l(re,"DATA_TYPE_ID","typeId"),l(re,"DATA_KIND_ID","kindId"),l(re,"DATA_ID","id"),l(re,"DATA_NAME","name"),l(re,"DATA_INFO","info"),l(re,"DATA_HELP","help");let me=re;const Y=class Y extends me{constructor(e){super(e);l(this,"res");l(this,"resColor");e[Y.DATA_RESOURCE_CLASS]==null?this.res=e[me.DATA_ID]:this.res=e[Y.DATA_RESOURCE_CLASS],this.resColor=e[Y.DATA_RESOURCE_COLOR_CLASS]}};l(Y,"TYPE_MONSTER","wolf"),l(Y,"TYPE_TOWER","tower"),l(Y,"TYPE_WALL","wall"),l(Y,"TYPE_BARRIER","barrier"),l(Y,"TYPE_ENTRANCE","typeEntrance"),l(Y,"TYPE_EXPORT","typeExport"),l(Y,"TYPE_BOX","box"),l(Y,"TYPE_GEM_ITEM","gem"),l(Y,"TYPE_TRAP_ITEM","snarp"),l(Y,"TYPE_CARD_ITEM","card"),l(Y,"TYPE_WOLF_CARD_ITEM","wc"),l(Y,"TYPE_TAME_ITEM","tame"),l(Y,"TYPE_FIX_ITEM","bomb"),l(Y,"ID_SPADE_ITEM","mc"),l(Y,"ID_GEM_HAMMER","gem_hammer"),l(Y,"ID_GEM_OPENER","gem_opener"),l(Y,"DATA_RESOURCE_CLASS","res"),l(Y,"DATA_RESOURCE_COLOR_CLASS","resColor");let De=Y;class Je{constructor(){l(this,"m_manager",{});this.clearData()}getDataById(t){return this.m_manager[t]}get manager(){return this.m_manager}clearData(){this.m_manager=new Object}}const G=class G extends De{constructor(e){super(e);l(this,"scoreMax");l(this,"populationMax");l(this,"hardA");l(this,"hardB");l(this,"passBy");l(this,"unkennelDelay");l(this,"unkennelRule");l(this,"bossList");l(this,"monsterList");l(this,"monsterProportion");l(this,"teleportRule");l(this,"randomBossList");this.scoreMax=e[G.DATA_SCORE_MAX]?e[G.DATA_SCORE_MAX]:G.DEFAULT_SCORE_MAX,this.populationMax=e[G.DATA_POPULATION_MAX]?e[G.DATA_POPULATION_MAX]:G.DEFAULT_POPULATION_MAX,this.hardA=e[G.DATA_HARD_A],this.hardB=e[G.DATA_HARD_B],this.passBy=e[G.DATA_PASS_BY],this.unkennelDelay=e[G.DATA_UNKENNEL_RATE],this.unkennelRule=e[G.DATA_UNKENNEL_RULE],this.bossList=e[G.DATA_BOSS_LIST],this.monsterList=e[G.DATA_MONSTER_LIST]?e[G.DATA_MONSTER_LIST].map(a=>a[1]):[],this.monsterProportion=e[G.DATA_MONSTER_LIST],this.teleportRule=e[G.DATA_TELEPORT_RULE],this.randomBossList=e.random_boss??[]}getDifficultyLevel(e){return Math.sqrt(this.hardA+this.hardB*e)}calcPKGold(e){const a=this.populationMax;return Math.round((2+1.07*a)*Math.pow(e/.39,2/3))}calcPKExp(e){const a=this.populationMax;return Math.round((3.5+.14*a)*Math.pow(e/.39,2/3))}calcAccumulative(){let e=0,a=0;for(let s=0;s<=this.scoreMax;s+=2){let i=this.getDifficultyLevel(s);e+=this.calcPKGold(i),a+=this.calcPKExp(i)}return{gold:e,exp:a}}};l(G,"DEFAULT_SCORE_MAX",100),l(G,"DEFAULT_POPULATION_MAX",10),l(G,"RULE_MULTICAST",1),l(G,"DATA_SCORE_MAX","pass_score"),l(G,"DATA_POPULATION_MAX","pop_max"),l(G,"DATA_HARD_A","yield_val"),l(G,"DATA_HARD_B","hard_ness"),l(G,"DATA_PASS_BY","passBy"),l(G,"DATA_UNKENNEL_RATE","interval"),l(G,"DATA_UNKENNEL_RULE","interval_rule"),l(G,"DATA_BOSS_LIST","boss"),l(G,"DATA_MONSTER_LIST","wolf_proportion"),l(G,"DATA_TELEPORT_RULE","teleport_rule"),l(G,"DATA_DEBUG","debug");let _t=G;const Ee=class Ee extends Je{constructor(){super(),Ee.onlyExample=this,this.loadData(R.$_map_Obj)}static getOnlyExample(){return Ee.onlyExample==null&&(Ee.onlyExample=new Ee),Ee.onlyExample}loadData(t){for(const e in t){const a=t[e];a[me.DATA_ID]=e,this.m_manager[e]=new _t(t[e])}}getData(t){return this.getDataById(t)}};l(Ee,"DATA_COUNT",6),l(Ee,"onlyExample");let It=Ee;class gt{constructor(){l(this,"m_data");this.m_data=new me({})}get baseData(){return this.m_data}}class cs extends gt{constructor(){super()}}class Z extends gt{constructor(e,a=!0){super();l(this,"score",0);l(this,"isDream",!1);l(this,"isDefendMap",!1);this.m_data=It.getOnlyExample().getData(e)}static getMapData(e){return It.getOnlyExample().getData(e)}get gameMapData(){return this.m_data}get canUnkennelAdjust(){return!1}}l(Z,"DEFEND_MAP_1","mfx1"),l(Z,"ENDLESS_MAP_1","m11"),l(Z,"currentMap");const Fe=class Fe extends me{constructor(e){super(e);l(this,"skillsList");e[Fe.DATA_SKILLS_LIST]instanceof Array?this.skillsList=e[Fe.DATA_SKILLS_LIST]:e[Fe.DATA_SKILLS_LIST]instanceof String&&(this.skillsList=[e[Fe.DATA_SKILLS_LIST]])}};l(Fe,"DATA_SKILLS_LIST","skills");let Bt=Fe;const Se=class Se extends Je{constructor(){super(),Se.onlyExample=this,this.loadData(R.$_skillPackage_Obj)}static getOnlyExample(){return Se.onlyExample==null&&(Se.onlyExample=new Se),Se.onlyExample}loadData(t){for(const e in t){const a=t[e];a[me.DATA_ID]=e,this.m_manager[e]=new Bt(t[e])}}getData(t){return this.getDataById(t)}};l(Se,"onlyExample");let Ht=Se;class Bl extends gt{constructor(e,a=1){super();l(this,"level");this.m_data=Ht.getOnlyExample().getData(e),this.level=a}get skillsPackageData(){return this.m_data}}class Hl{}l(Hl,"COLOR_LIST",[6316128,13631488,13668352,43520,28927,8913056,0]);const te=class te extends De{constructor(e){super(e);l(this,"m_price");l(this,"priceCoin",0);l(this,"priceGold",0);l(this,"priceScore",0);l(this,"unlockMapId","");l(this,"index",0);this.m_price=e[te.DATA_PRICE],this.initPrice(),this.unlockMapId=e[te.DATA_UNLOCK_MAP_ID],this.index=e[te.DATA_INDEX]}get price(){return this.m_price}initPrice(){let e=this.price;if(e)if(e instanceof Array){const a=e;a[0]==te.DATA_COIN?this.priceCoin=a[1]:a[0]==te.DATA_GOLD?this.priceGold=a[1]:a[0]==te.DATA_SCORE&&(this.priceScore=a[1])}else this.priceCoin=e[te.DATA_COIN],this.priceGold=e[te.DATA_GOLD],this.priceScore=e[te.DATA_SCORE]}get isRare(){if(this.priceCoin>0){if(this.priceCoin>=R.$_rare_item_coin||this.index<0)return!0}else if(this.priceScore>0&&(this.priceScore>=R.$_rare_item_invite_score||this.index<0))return!0;return!1}};l(te,"DATA_PRICE","price"),l(te,"DATA_UNLOCK_MAP_ID","unlock_mid"),l(te,"DATA_COIN","coin"),l(te,"DATA_GOLD","gold"),l(te,"DATA_SCORE","invite_score"),l(te,"DATA_INDEX","index");let Tt=te;const ae=class ae extends Tt{constructor(e){super(e);l(this,"gemLevel");l(this,"towerSkillPackage");l(this,"nextLevelId");l(this,"colorIndex");this.typeId=De.TYPE_GEM_ITEM,this.gemLevel=e[ae.DATA_GEM_LEVEL],this.towerSkillPackage=e[ae.DATA_TOWER_SKILL_PACKAGE],this.nextLevelId=e[ae.DATA_NEXT_LEVEL_ID],this.colorIndex=e[ae.DATA_COLOR_INDEX],this.res=this.resString}getSkillPackage(e){if(this.towerSkillPackage==null)return null;let a=/\D/gi;e=e.match(a).join("");let s=this.towerSkillPackage[e];return s==null?null:new Bl(s[ae.SKILL_PACKAGE_ID],s[ae.SKILL_PACKAGE_LEVEL])}get color(){return Hl.COLOR_LIST[this.colorIndex]}get resString(){return"hong"+this.gemLevel}};l(ae,"TYPE_PURE","typePure"),l(ae,"TYPE_MIX","typeMix"),l(ae,"DATA_GEM_LEVEL","gamLevel"),l(ae,"DATA_TOWER_SKILL_PACKAGE","sp"),l(ae,"DATA_NEXT_LEVEL_ID","nextId"),l(ae,"DATA_COLOR_INDEX","color"),l(ae,"SKILL_PACKAGE_ID","id"),l(ae,"SKILL_PACKAGE_LEVEL","lv");let Gt=ae;const Ne=class Ne extends Je{constructor(){super(),Ne.onlyExample=this,this.loadData(R.$_global_properties[De.TYPE_GEM_ITEM])}static getOnlyExample(){return Ne.onlyExample==null&&(Ne.onlyExample=new Ne),Ne.onlyExample}loadData(t){let e;for(e in t)this.m_manager[e]=new Gt(t[e])}initData(){}getData(t){return this.getDataById(t)}};l(Ne,"onlyExample");let Wt=Ne;const J=class J extends Tt{constructor(e){super(e);l(this,"skillPackageId");l(this,"skillPackageLevel");l(this,"skills");l(this,"xGrid");l(this,"yGrid");if(this.skillPackageId=e[J.DATA_SKILL_PACKAGE_ID],this.skillPackageLevel=e[J.DATA_SKILL_PACKAGE_LEVEL],e[J.DATA_SKILLS]instanceof Array)this.skills=e[J.DATA_SKILLS];else if(e[J.DATA_SKILLS]instanceof Object){this.skills=[];for(const a in e[J.DATA_SKILLS])this.skills.push({skid:a,lev:e[J.DATA_SKILLS][a]})}e[J.DATA_X_GRID]?this.xGrid=e[J.DATA_X_GRID]:this.xGrid=1,e[J.DATA_Y_GRID]?this.yGrid=e[J.DATA_Y_GRID]:this.yGrid=1}};l(J,"DATA_A","a"),l(J,"DATA_B","b"),l(J,"DATA_C","c"),l(J,"DATA_D","d"),l(J,"DATA_SKILL_PACKAGE_ID","skill"),l(J,"DATA_SKILL_PACKAGE_LEVEL","skillLv"),l(J,"DATA_SKILLS","skills"),l(J,"DATA_X_GRID","x_grid"),l(J,"DATA_Y_GRID","y_grid");let ee=J;const z=class z extends ee{constructor(e){super(e);l(this,"m_buildValueA",0);l(this,"m_buildValueB",0);l(this,"m_buildValueC",0);l(this,"m_campPrice",["",0]);l(this,"m_campBuildValueA",0);l(this,"m_campBuildValueB",0);l(this,"m_campBuildValueC",0);l(this,"range");l(this,"rate");l(this,"limitNum");e[z.DATA_BUILD_VALUE]?(this.m_buildValueA=e[z.DATA_BUILD_VALUE][ee.DATA_A],this.m_buildValueB=e[z.DATA_BUILD_VALUE][ee.DATA_B],this.m_buildValueC=e[z.DATA_BUILD_VALUE][ee.DATA_C]):e[z.DATA_EXP_VALUE]&&(this.m_buildValueA=e[z.DATA_EXP_VALUE][ee.DATA_A],this.m_buildValueB=e[z.DATA_EXP_VALUE][ee.DATA_B],this.m_buildValueC=e[z.DATA_EXP_VALUE][ee.DATA_C]),e[z.DATA_CAMP_PRICE]&&(this.m_campPrice=e[z.DATA_CAMP_PRICE]),e[z.DATA_CAMP_BUILD_VALUE]&&(this.m_campBuildValueA=e[z.DATA_CAMP_BUILD_VALUE][ee.DATA_A],this.m_campBuildValueB=e[z.DATA_CAMP_BUILD_VALUE][ee.DATA_B],this.m_campBuildValueC=e[z.DATA_CAMP_BUILD_VALUE][ee.DATA_C]),this.range=e[z.DATA_RANGE],this.rate=Math.round(e[z.DATA_RATE]*10),this.limitNum=e[z.DATA_LIMIT_NUM]}get buildValueA(){return Z.currentMap&&Z.currentMap.isDefendMap?this.m_campBuildValueA:this.m_buildValueA}get buildValueB(){return Z.currentMap&&Z.currentMap.isDefendMap?this.m_campBuildValueB:this.m_buildValueB}get buildValueC(){return Z.currentMap&&Z.currentMap.isDefendMap?this.m_campBuildValueC:this.m_buildValueC}get price(){var e;return(e=Z.currentMap)!=null&&e.isDefendMap&&this.campPrice instanceof Array?this.campPrice:this.m_price}get campPrice(){return this.m_campPrice}get buildCostPrice(){return this.price[0]}get buildCost(){return this.price[1]}get buildValueAConst(){return this.m_buildValueA}get buildValueBConst(){return this.m_buildValueB}get buildValueCConst(){return this.m_buildValueC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}};l(z,"DATA_BUILD_VALUE","build_val"),l(z,"DATA_EXP_VALUE","exp_val"),l(z,"DATA_CAMP_PRICE","camp_price"),l(z,"DATA_CAMP_BUILD_VALUE","camp_build_val"),l(z,"DATA_RANGE","range"),l(z,"DATA_RATE","rate"),l(z,"DATA_LIMIT_NUM","limit_num");let Lt=z;const U=class U extends Lt{constructor(e){super(e);l(this,"valueList");l(this,"effectType");l(this,"effectKind");l(this,"effectRange");l(this,"useNum");l(this,"colddown");l(this,"delay");l(this,"attackEffectId");this.typeId=De.TYPE_TRAP_ITEM,this.valueList=e[U.DATA_VALUE_LIST],this.effectType=e[U.DATA_EFFECT_TYPE],this.effectKind=e[U.DATA_EFFECT_KIND],e[U.DATA_USE_NUM]?this.useNum=e[U.DATA_USE_NUM]:this.useNum=1,e[U.DATA_COLDDOWN]?this.colddown=e[U.DATA_COLDDOWN]:this.colddown=.1,e[U.DATA_DELAY]?this.delay=e[U.DATA_DELAY]:this.delay=0,e[U.DATA_EFFECT_RANGE]?this.effectRange=e[U.DATA_EFFECT_RANGE]:this.effectRange=this.range,this.attackEffectId=e[U.DATA_EFFECT]}};l(U,"KIND_BLAST","1"),l(U,"KIND_DAMAGE","2"),l(U,"KIND_VERTIGO","3"),l(U,"KIND_SLOW","4"),l(U,"KIND_BEAT_BACK","5"),l(U,"KIND_COLD_BULLET","50"),l(U,"KIND_BULLET","100"),l(U,"KIND_BULLET_RANDOM","101"),l(U,"EFFECT_TYPE_FLOOR","1"),l(U,"EFFECT_TYPE_AIR","2"),l(U,"EFFECT_TYPE_ALL","3"),l(U,"EFFECT_TYPE_LIGHTNING","4"),l(U,"EFFECT_KIND_SINGLE","1"),l(U,"EFFECT_KIND_MULTI","2"),l(U,"DATA_VALUE_LIST","value"),l(U,"DATA_EFFECT_TYPE","effectType"),l(U,"DATA_EFFECT_KIND","effectKind"),l(U,"DATA_EFFECT_RANGE","effectRange"),l(U,"DATA_USE_NUM","use_times"),l(U,"DATA_COLDDOWN","colddown"),l(U,"DATA_DELAY","delay"),l(U,"DATA_EFFECT","effect");let jt=U;class vl extends Lt{constructor(e){super(e);l(this,"m_buildCostA");l(this,"m_buildCostB");l(this,"m_buildCostC");l(this,"m_campBuildCostA");l(this,"m_campBuildCostB");l(this,"m_campBuildCostC");l(this,"damageA");l(this,"damageB");l(this,"damageC");l(this,"bulletId","");l(this,"buffEffect");l(this,"levelMax");this.m_buildCostA=e.build_cost.a,this.m_buildCostB=e.build_cost.b,this.m_buildCostC=e.build_cost.c,this.m_campBuildCostA=e.camp_build_cost.a,this.m_campBuildCostB=e.camp_build_cost.b,this.m_campBuildCostC=e.camp_build_cost.c,this.damageA=e.damage.a,this.damageB=e.damage.b,this.damageC=e.damage.c,this.buffEffect=e.buffEffect,this.levelMax=e.lev_max,this.bulletId=e.bId}get buildCostA(){var e;return(e=Z.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostA:this.m_buildCostA}get buildCostB(){var e;return(e=Z.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostB:this.m_buildCostB}get buildCostC(){var e;return(e=Z.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostC:this.m_buildCostC}get buildCostAConst(){return this.m_buildCostA}get buildCostBConst(){return this.m_buildCostB}get buildCostCConst(){return this.m_buildCostC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}get isMagicTower(){return this.id=="xiangqianta"}}const we=class we extends Je{constructor(){super(),we.onlyExample=this,this.loadData(R.$_towerAtt_Obj)}static getOnlyExample(){return we.onlyExample==null&&(we.onlyExample=new we),we.onlyExample}loadData(t){for(const e in t){const a=t[e];a[me.DATA_ID]=e,this.m_manager[e]=new vl(t[e])}}getData(t){return this.getDataById(t)}};l(we,"onlyExample");let Xt=we;const X=class X extends ee{constructor(e){super(e);l(this,"shapeMode");l(this,"damageMode");l(this,"radii");l(this,"shadow");l(this,"fallAccSpeed");l(this,"floorPathId");l(this,"hitEffectId");this.shapeMode=e[X.DATA_SHAPE_MODE],this.damageMode=e[X.DATA_DAMAGE_MODE],this.radii=e[X.DATA_RADII],e[X.DATA_SHADOW]?this.shadow=e[X.DATA_SHADOW]:this.shadow=1,this.fallAccSpeed=e[X.DATA_FALL_ACC_SPEED],this.floorPathId=e[X.DATA_FLOOR_PATH_ID],this.hitEffectId=e[X.DATA_HIT_EFFECT_ID]}};l(X,"SHAPE_COMMON",0),l(X,"SHAPE_DIRECTION",1),l(X,"SHAPE_ROLL",2),l(X,"DAMAGE_NULL",0),l(X,"DAMAGE_COMMON",1),l(X,"DAMAGE_PERFORATIVE",2),l(X,"DAMAGE_MAGICAL",3),l(X,"DAMAGE_SIEGE",4),l(X,"DAMAGE_MIXED",5),l(X,"FALL_ACC_SPEED_THRESHOLD",-7),l(X,"DATA_SHAPE_MODE","shapeMode"),l(X,"DATA_DAMAGE_MODE","damageMode"),l(X,"DATA_RADII","radii"),l(X,"DATA_SHADOW","shadow"),l(X,"DATA_FALL_ACC_SPEED","fallAcc"),l(X,"DATA_FLOOR_PATH_ID","path"),l(X,"DATA_HIT_EFFECT_ID","effect");let zt=X;const Re=class Re extends Je{constructor(){super(),Re.onlyExample=this,this.loadData(R.$_bulletAtt_Obj)}static getOnlyExample(){return Re.onlyExample==null&&(Re.onlyExample=new Re),Re.onlyExample}loadData(t){for(const e in t){const a=t[e];a[me.DATA_ID]=e,this.m_manager[e]=new zt(t[e])}}getData(t){return this.getDataById(t)}};l(Re,"onlyExample");let Yt=Re;const K=class K extends ee{constructor(e){super(e);l(this,"hpMaxA");l(this,"hpMaxB");l(this,"hpMaxC");l(this,"expMaxA",0);l(this,"expMaxB",0);l(this,"expMaxC",0);l(this,"expMaxD",0);l(this,"speedBase");l(this,"charm");l(this,"height");l(this,"width");l(this,"speakList",[]);l(this,"population");e[K.DATA_HP_MAX]?(this.hpMaxA=e[K.DATA_HP_MAX][ee.DATA_A],this.hpMaxB=e[K.DATA_HP_MAX][ee.DATA_B],this.hpMaxC=e[K.DATA_HP_MAX][ee.DATA_C]):(this.hpMaxA=e[K.DATA_HP_MAX_A],this.hpMaxB=e[K.DATA_HP_MAX_B],this.hpMaxC=e[K.DATA_HP_MAX_C]),e[K.DATA_EXP_MAX]&&(this.expMaxA=e[K.DATA_EXP_MAX][ee.DATA_A],this.expMaxB=e[K.DATA_EXP_MAX][ee.DATA_B],this.expMaxC=e[K.DATA_EXP_MAX][ee.DATA_C],this.expMaxD=e[K.DATA_EXP_MAX][ee.DATA_D]),this.speedBase=e[K.DATA_SPEED_BASE],this.charm=e[K.DATA_CHARM],this.height=e[K.DATA_HEIGHT],this.width=e[K.DATA_WIDTH],e[K.DATA_SPEAK_LIST]instanceof Array&&(this.speakList=e[K.DATA_SPEAK_LIST]),this.population=e[K.DATA_POPULATION]}getSpeak(e=0){if(this.speakList instanceof Array&&this.speakList.length>e){if(this.speakList[e]instanceof String)return this.speakList[e];if(this.speakList[e]instanceof Array){const a=this.speakList[e];return a[Math.floor(Math.random()*a.length)]}}return""}getSpeakEnter(){return this.getSpeak(K.SPEAK_ENTER)}getSpeakIdle(){return this.getSpeak(K.SPEAK_IDLE)}getSpeakInjury(){return this.getSpeak(K.SPEAK_INJURY)}getSpeakDie(){return this.getSpeak(K.SPEAK_DIE)}getSpeakInvade(){return this.getSpeak(K.SPEAK_INVADE)}getSpeakCast(){return this.getSpeak(K.SPEAK_CAST)}get isBoss(){return this.population>=100}get isRandomBoss(){return this.population==99}getHpMax(e,a=1){return Math.floor((this.hpMaxA+e*(this.hpMaxB+e*this.hpMaxC))*a)}};l(K,"SPEAK_ENTER",0),l(K,"SPEAK_IDLE",1),l(K,"SPEAK_INJURY",2),l(K,"SPEAK_DIE",3),l(K,"SPEAK_INVADE",4),l(K,"SPEAK_CAST",5),l(K,"DEFENSE_NULL",0),l(K,"DEFENSE_LIGHT",1),l(K,"DEFENSE_COMMON",2),l(K,"DEFENSE_HEAVY",3),l(K,"DEFENSE_BUILDING",4),l(K,"DEFENSE_BOSS",5),l(K,"DEFENSE_HOLY",6),l(K,"DEFENSE_INVINCIBLE",7),l(K,"DATA_HP_MAX","hp_factor"),l(K,"DATA_EXP_MAX","explev"),l(K,"DATA_HP_MAX_A","ha"),l(K,"DATA_HP_MAX_B","hb"),l(K,"DATA_HP_MAX_C","hc"),l(K,"DATA_SPEED_BASE","speed"),l(K,"DATA_CHARM","charm"),l(K,"DATA_HEIGHT","height"),l(K,"DATA_WIDTH","width"),l(K,"DATA_SPEAK_LIST","speak"),l(K,"DATA_POPULATION","pop");let vt=K;const Ce=class Ce extends Je{constructor(){super(),Ce.onlyExample=this,this.loadData(R.$_wolfAtt_Obj)}static getOnlyExample(){return Ce.onlyExample==null&&(Ce.onlyExample=new Ce),Ce.onlyExample}loadData(t){for(const e in t){const a=t[e];a[me.DATA_ID]=e,this.m_manager[e]=new vt(a)}}getBossList(t){const e=[];if(!(t instanceof Array))return e;for(let a=0;a<t.length;a++){const s=this.getData(t[a]);s&&s.isBoss&&e.push(t[a])}return e}getRandomBossList(t){const e=[];if(!(t instanceof Array))return e;for(let a=0;a<t.length;a++){const s=this.getData(t[a]);s&&s.isRandomBoss&&e.push(t[a])}return e}getData(t){return this.getDataById(t)}static get(t){return this.getOnlyExample().getData(t)}};l(Ce,"onlyExample");let pe=Ce;function Gl(o,t){const e=R.$_wolfAtt_Obj[o].pop;return e<99?e:t??e}function _s(o,t=1){return M.sumBy(o,e=>Gl(e,t))}function Nl(o,t){return Math.round((2+1.07*t)*Math.pow(o/.39,2/3))}function ms(o,t){const e=R.dream_data.dm_opt_cfg.tower_sum_exp;return Math.round(t*Math.pow(o,e.power)*e.popu+e.p)}function ps(o,t){const e=o.monsterProportion.map(_=>({prop:_[0],data:pe.get(_[1])}));let a=e.length;if(a==0)return{mlist:[],clist:[]};const s=t.slice(0,a),i=s.flatMap((_,g)=>new Array(_).fill(e[g].data));let d=o.populationMax-M.sumBy(i,_=>_.population);if(d<0)return null;for(;d>0;){for(;a>0&&d<e[a-1].data.population;)a--;if(a==0)break;const _=Math.random()*e[a-1].prop,g=M.findIndex(e,p=>_<p.prop);d-=e[g].data.population,i.push(e[g].data),s[g]++}return{mlist:t?M.shuffle(i):i,clist:M.zip(e,s).map(_=>({data:_[0].data,num:_[1]}))}}function Wl(o){if(o.length==0)return[];const t=o.map(a=>a*1e3),e=Pa(...t);for(let a=t.length-1;a>=0;a--)t[a]=(t[a]-(a==0?0:t[a-1]))/e;return t}function jl(o){const t=[];for(const a of o)t.push(t.length==0?a:t.at(-1)+a);const e=t.at(-1);return t.map(a=>a/e)}function hs(o){const t=o.monsterProportion.length,e=o.monsterProportion.map((u,I)=>u[0]-(I==0?0:o.monsterProportion[I-1][0])),a=o.monsterList.map(u=>Gl(u)),s=o.populationMax,i=Sl(s+1);for(let u=0;u<=s;u++)for(let I=0;I<t;I++)a[I]<=u&&(i[u]+=e[I]);const d=Sl(s+1,s+1);d[0][0]=1;for(let u=1;u<=s;u++)for(let I=1;I<=s;I++)for(let T=0;T<t;T++)u>=a[T]&&(d[u][I]+=d[u-a[T]][I-1]*(e[T]/i[u]));const _=d[s].findLastIndex(u=>u>1e-6),g=[...d[s].slice(0,_+1)],p=[];for(let u=0;u<t;u++){const I=Math.floor(s/a[u]);for(let T=0;T<=s;T++)d[T].fill(0);d[0][0]=1;for(let T=1;T<=s;T++)for(let E=0;E<=I;E++)for(let D=0;D<t;D++)T<a[D]||(D!=u?d[T][E]+=d[T-a[D]][E]*(e[D]/i[T]):E>0&&(d[T][E]+=d[T-a[D]][E-1]*(e[D]/i[T])));p.push([...d[s].slice(0,_+1)])}return{all:g,each:p}}function gs(o){return qa(o)}function ot(o,t,e){return ya.hsl(gs(o),t,e).string()}const Xl=B({__name:"WolfHpChart",props:{hpData:{},width:{default:600},height:{default:200}},setup(o){Kt([Tl,yt,Pt,Vt,Mt]);const t=o,e=F(()=>({color:["#00A2E8"],title:{text:"当前狼血量",left:"center",textStyle:{fontStyle:"normal",fontFamily:"sans-serif",fontSize:16}},tooltip:{},xAxis:{type:"value",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}}},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.hpData.map(a=>a.name)},grid:{left:100,top:30,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.hpData.map(a=>a.value),itemStyle:{color:function(a){return ot(a.name,80,45)}}}}));return(a,s)=>{const i=We("v-chart");return h(),x("div",null,[n(i,{class:"chart",option:r(e),style:Kl({width:`${a.width}px`,height:`${a.height}px`}),autoresize:""},null,8,["option","style"])])}}}),fs={class:"space-x-4"},As=B({__name:"index",setup(o){const t=M.chain(R.dream_maps).toArray().sortBy("index").value(),e=ne({mid:"m2A",score:1}),a=F(()=>R.dream_maps[e.mid]),s=v=>v%10===0?(v-10)%100+10:v%10,i=v=>{const N=s(v).toString(),w=R.dream_waves[e.mid];return v%10==0?w.boss[N]:w.wolf[N]},d=F(()=>i(e.score).map(v=>pe.getOnlyExample().getData(v))),_=(v,N)=>{const w=s(N).toString();return R.dream_waves[e.mid].popu[w]},g=F(()=>_(e.mid,e.score)),p=v=>ms(v,_(e.mid,v==0?1:v==9?10:s(v))),u=F(()=>p(e.score)),I=F(()=>Math.sqrt(a.value.hard_ness*e.score+a.value.yield_val)),T=F(()=>{for(const[v,N]of Object.entries(R.dream_data.dm_wolf_hard_ness)){const[w,O]=v.split("_");if(e.score>=Number.parseInt(w)&&e.score<=Number.parseInt(O))return N}return R.dream_data.dm_wolf_hard_ness.default}),E=F(()=>d.value.map(v=>({name:v.name,value:v.getHpMax(I.value,T.value)}))),D=F(()=>{let v=0,N=0;for(let w=1;w<=e.score;w++){let O=Math.sqrt(a.value.yield_val+a.value.hard_ness*w);v+=Nl(O,_(e.mid,w)),N+=p(w)}return{gold:v,exp:N}});return(v,N)=>{const w=ke,O=Ve,le=ze,k=be,Q=fe,dt=We("vue-latex"),q=Me;return h(),y(q,{model:r(e),"label-width":"120px"},{default:c(()=>[n(k,{label:"地图"},{default:c(()=>[n(O,{modelValue:r(e).mid,"onUpdate:modelValue":N[0]||(N[0]=ie=>r(e).mid=ie)},{default:c(()=>[(h(!0),x(V,null,$(r(t),ie=>(h(),y(w,{key:ie.id,label:`${ie.id} ${ie.name}`,value:ie.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),n(le,{effect:"light",class:"mx-1"},{default:c(()=>[C(" 难度系数："+b(r(a).hard_ness)+", "+b(r(a).yield_val),1)]),_:1})]),_:1}),n(k,{label:"进度"},{default:c(()=>[n(Q,{modelValue:r(e).score,"onUpdate:modelValue":N[1]||(N[1]=ie=>r(e).score=ie),min:0},null,8,["modelValue"]),n(le,{effect:"light",class:"mx-1"},{default:c(()=>[C(" HpRate："+b(r(T)),1)]),_:1}),n(le,{effect:"light",class:"mx-1"},{default:c(()=>[C(" Population："+b(r(g)),1)]),_:1})]),_:1}),n(k,null,{default:c(()=>[C(" 银币： "),n(dt,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${r(Nl)(r(I),r(g))}`},null,8,["expression"])]),_:1}),n(k,null,{default:c(()=>[C(" 经验： "),n(dt,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${r(u)}`},null,8,["expression"])]),_:1}),n(k,null,{default:c(()=>[f("div",fs,[f("span",null,"总银币："+b(r(D).gold),1),f("span",null,"总经验："+b(r(D).exp),1)])]),_:1}),n(Xl,{"hp-data":r(E),height:300},null,8,["hp-data"])]),_:1},8,["model"])}}}),Es=Object.freeze(Object.defineProperty({__proto__:null,default:As},Symbol.toStringTag,{value:"Module"})),Is={key:0,class:"space-y-1"},Ts={class:"space-x-0.5"},Ls=B({__name:"index",setup(o){const t=M.sortBy(Object.values(R.dream_maps),"name").map(e=>({...e,...R.dream_waves[e.id],waves:Object.assign({},R.dream_waves[e.id].wolf,R.dream_waves[e.id].boss)}));return(e,a)=>{const s=je,i=ze,d=Xe;return h(),x("div",null,[n(d,{data:r(t)},{default:c(()=>[n(s,{prop:"id",label:"id",sortable:"",align:"center"}),n(s,{prop:"name",label:"name",sortable:"",align:"center"}),n(s,{prop:"interval",label:"interval",sortable:"",align:"center"}),n(s,{prop:"interval_rule",label:"interval_rule",sortable:"",align:"center"}),n(s,{prop:"hard_ness",label:"hard_ness",sortable:"",align:"center"}),n(s,{prop:"yield_val",label:"yield_val",sortable:"",align:"center"}),n(s,{label:"waves",type:"expand",width:"80"},{default:c(_=>[_.row.waves?(h(),x("div",Is,[f("table",null,[(h(!0),x(V,null,$(_.row.waves,(g,p)=>(h(),x("tr",{key:p},[f("td",null,[n(i,null,{default:c(()=>[C(b(p),1)]),_:2},1024)]),f("td",Ts,[(h(!0),x(V,null,$(g,u=>(h(),y(i,{key:u,style:Kl({color:r(ot)(u,40,40),"background-color":r(ot)(u,80,90),"border-color":r(ot)(u,50,80)})},{default:c(()=>[C(b(r(ge)(u)),1)]),_:2},1032,["style"]))),128))]),f("td",null,[n(i,null,{default:c(()=>[C(b(_.row.popu[p]),1)]),_:2},1024)])]))),128))]),(h(!0),x(V,null,$(_.row.waves,(g,p)=>(h(),x("div",{key:p,class:"space-x-1"}))),128))])):de("",!0)]),_:1})]),_:1},8,["data"])])}}}),vs=qe(Ls,[["__scopeId","data-v-3255a3ed"]]),Ds=Object.freeze(Object.defineProperty({__proto__:null,default:vs},Symbol.toStringTag,{value:"Module"})),bs=B({__name:"DreamWaveEditor",props:rt({wolfList:{}},{modelValue:{},modelModifiers:{}}),emits:rt(["change"],["update:modelValue"]),setup(o,{emit:t}){const e=o,a=Le(o,"modelValue"),s=t,i=W(""),d=W(!1),_=W(),g=W(e.wolfList.slice()),p=D=>{a.value.splice(a.value.indexOf(D),1),s("change")},u=()=>{d.value=!0,ga(()=>{_.value.focus()})},I=D=>{console.log(D),g.value=D?e.wolfList.filter(T(D)):e.wolfList},T=D=>v=>v.id.toLowerCase().includes(D.toLowerCase())||v.value.includes(D),E=D=>{a.value.push(D),a.value.sort((v,N)=>v.id.localeCompare(N.id)),d.value=!1,i.value="",s("change")};return(D,v)=>{const N=ze,w=Da,O=ke,le=Ye;return h(),x("div",null,[f("div",null,[(h(!0),x(V,null,$(a.value,k=>(h(),y(N,{key:k.id,type:"info",effect:"plain",class:"m-0.5",closable:"","disable-transitions":!1,onClose:Q=>p(k)},{default:c(()=>[f("ruby",null,[C(b(k.value)+" ",1),f("rt",null,b(k.id),1)])]),_:2},1032,["onClose"]))),128)),r(d)?(h(),y(r(Ve),{key:0,ref_key:"InputRef",ref:_,modelValue:r(i),"onUpdate:modelValue":v[0]||(v[0]=k=>ce(i)?i.value=k:null),filterable:"","filter-method":I,class:"inline-block m-0.5",placeholder:"Select",size:"small",onChange:E},{default:c(()=>[(h(!0),x(V,null,$(r(g),k=>(h(),y(O,{key:k.id,value:k},{default:c(()=>[C(b(k.value)+" ",1),n(w,{class:"mx-1",type:"primary"},{default:c(()=>[C("["+b(k.id)+"]",1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(h(),y(le,{key:1,class:"button-new-tag m-0.5",type:"primary",plain:"",size:"small",onClick:u},{default:c(()=>[C(" + ")]),_:1}))])])}}}),xs={class:"dialog-footer"},Ss=B({__name:"index",setup(o){const{toClipboard:t}=Il(),e=W(!1),a=W(""),s=W(!1),i=W({}),d=W(""),_=W(),g=Object.keys(R.$_wolfAtt_Obj).map(N=>({id:N,value:ge(N)})),p=[1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100],u=W(p.map(N=>({key:N,wolf:[],popu:0,popFixed:!1}))),I=(N,w=!1)=>{(!N.popFixed||w)&&(N.popFixed=!1,N.popu=_s(N.wolf.map(O=>O.id)))},T=N=>{N.popu==0?(N.popFixed=!1,I(N)):N.popFixed=!0},E=()=>{const N=JSON.parse(a.value);u.value=p.map(w=>({key:w,wolf:(N.wolf[w]??N.boss[w]??[]).map(O=>({id:O,value:ge(O)})),popu:N.popu[w],popFixed:!0})),e.value=!1},D=()=>{s.value=!0;const N={wolf:{},boss:{},popu:{}};for(const w of u.value){const O=w.wolf.map(le=>le.id);N[w.key<10?"wolf":"boss"][w.key]=O,w.key<10?N.wolf[w.key]=O:N.boss[w.key]=O,N.popu[w.key]=w.popu}i.value=N,d.value=JSON.stringify(N)},v=()=>{t(d.value,_.value.$el),Et.success("已复制到剪贴板")};return(N,w)=>{const O=Ye,le=je,k=fe,Q=Xe,dt=Ul;return h(),x("div",null,[n(O,{onClick:w[0]||(w[0]=q=>e.value=!0)},{default:c(()=>[C("导入")]),_:1}),n(O,{onClick:D},{default:c(()=>[C("导出")]),_:1}),n(Q,{data:r(u),style:{"max-width":"1200px"}},{default:c(()=>[n(le,{prop:"key",label:"Key",width:80,align:"center"}),n(le,{label:"Wolf"},{default:c(q=>[n(bs,{"wolf-list":r(g),modelValue:q.row.wolf,"onUpdate:modelValue":ie=>q.row.wolf=ie,onChange:ie=>I(q.row)},null,8,["wolf-list","modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(le,{label:"Population",width:160,align:"center"},{default:c(q=>[n(k,{modelValue:q.row.popu,"onUpdate:modelValue":ie=>q.row.popu=ie,size:"small",min:0,onChange:ie=>T(q.row),style:{width:"90px"},class:fa({primary:q.row.popFixed})},null,8,["modelValue","onUpdate:modelValue","onChange","class"]),n(O,{icon:q.row.popFixed?r(Sa):r(Na),circle:"",size:"small",class:"m-0.5",onClick:ie=>q.row.popFixed?I(q.row,!0):q.row.popFixed=!0},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),n(dt,{modelValue:r(e),"onUpdate:modelValue":w[3]||(w[3]=q=>ce(e)?e.value=q:null),title:"导出数据"},{footer:c(()=>[f("span",xs,[n(O,{onClick:w[2]||(w[2]=q=>e.value=!1)},{default:c(()=>[C("取消")]),_:1}),n(O,{type:"primary",onClick:E},{default:c(()=>[C(" 确定 ")]),_:1})])]),default:c(()=>[n(r(wt),{type:"textarea",rows:10,modelValue:r(a),"onUpdate:modelValue":w[1]||(w[1]=q=>ce(a)?a.value=q:null),spellcheck:!1},null,8,["modelValue"])]),_:1},8,["modelValue"]),n(dt,{modelValue:r(s),"onUpdate:modelValue":w[4]||(w[4]=q=>ce(s)?s.value=q:null),title:"导出数据"},{default:c(()=>[n(r(kl),{data:r(i),virtual:"",deep:2},null,8,["data"]),n(O,{onClick:v,ref_key:"someRef",ref:_},{default:c(()=>[C("复制到剪贴板")]),_:1},512)]),_:1},8,["modelValue"])])}}}),Ns=Object.freeze(Object.defineProperty({__proto__:null,default:Ss},Symbol.toStringTag,{value:"Module"})),ws={class:"markdown-body"},Rs=Aa("<h1>羊村设计大赛快来参加一下吧</h1><p>在苦工们的努力建设之下，新羊村的首个可公开版本不久就要上线了。</p><p>在我们有机会一睹真容前呢，先说个好消息。感谢耳阝鱼禾与技术的沟通，怀旧版可以开放四图啦！</p><p>不过呢，由于<strong>没有官方策划人手投入</strong>，要想玩到新关卡，还得靠我们自己来设计新图呢……</p><p>新的一年，举办羊村首届设计大赛，有兴趣的快来参加吧！</p><h2>时间</h2><p><strong>2024/1/6 18:00 ~ 2024/1/20 18:00（UTC+8）</strong></p><p>视参与情况可能会延长。</p><h2>赛道</h2><p><strong>比赛分为以下赛道</strong></p><h3>赛道 1：怀旧版新地图</h3><p>打造自己的羊村四图！需要提供如下内容（不必都有，但内容尽可能完善）：</p><ol><li><strong>地图资源</strong>。每个地图有一个 swf 文件，其中内嵌代码配置了地形数据（每个格子的类型，如可行走地面、传送阵、传送带）。可使用 ffdec 解包老羊村的地图资源，然后用 Adobe Animate 进行重新设计，导出成所需的 swf 格式。也可只提供概念风格设计，画出格子分布、前景和背景，给出特殊地块的位置。</li><li><strong>地图配置数据</strong>。小工具将会开放地图设计工具，导出所需的配置数据格式。主要内容为： <ul><li>地图名称</li><li>通关分数</li><li>难度系数</li><li>狼的种类和权重</li><li>出怪间隔</li><li>随机 boss 及奖励的分布</li><li>最终 boss 波出怪列表</li></ul></li></ol><p>考虑操作存在一定技术性，可以不提供具体的资源/配置文件，但需要有方案使得我们可以快速实现这些设想。</p><p>暂时不考虑怀旧的新狼、新建筑、新道具的设计。</p><p>新地图可以是老羊村已有地图的<strong>重新设计</strong>，如改变狼的配置，扩充格子，移动甚至拆除障碍，增加特殊地块等。发挥创造力的时刻到了！</p><p><strong>新地图越多越好！在通过内部测试后会向大众开放！</strong></p><h3>赛道 2：新羊村地图</h3><p>可设计内容包括：</p><ol><li><strong>章节</strong>。一个章节有大约 10 个关卡，可以设计这个章节的主题、剧情，描述各关卡风格差异。 <ul><li>目前考虑的主题有：工业遗迹、海洋、湖泊、洞穴等。可以在此基础上发挥，也可自创新的章节。</li></ul></li><li><strong>地图地形</strong>。地图均为六边形格子，行走方向为 0°、60°、120°。地图宽高不超过 13x11（出口入口除外）。 <ul><li>希望地块布局不限于方方正正。可以发挥想象，加入各种只能放塔、只能走狼、只能飞行经过的格子。</li><li>同时给出较为详细的地图美术风格设计，描述场景布置、美术表现。</li></ul></li><li><strong>地图特殊机制和障碍</strong><ul><li>原版内容包括： <ul><li>机制：传送阵、弹簧、传送带、箱子等。</li><li>障碍：火山、反应炉、核电厂等。</li><li>特殊地形：增强毒效果的格子。</li></ul></li><li>希望在新的章节里有富有主题特色的机制加入。</li><li>目前考虑的机制包括：狼可以行走但会减速的水面，狼狂奔加速、被击退距离增加的冰面等。</li></ul></li></ol><h3>赛道 3：新羊村角色</h3><p>提供<strong>美术设计方案</strong>。此处角色包括：</p><ol><li>进攻方（狼）。可以是原版狼的美术重置，也可以是新狼。其他种族也是可以的！</li><li>防守方（英雄角色，塔）。英雄可以同时作为攻防方。目前已有一大批英雄的设计方案，但暂未公开。可以考虑在给出形象设计后与合适的角色进行匹配。</li><li>其他想加入的角色。</li></ol><p>因为新羊村会全面采用 3D 美术，这里只需要给出 <strong>2D 概念设计图</strong>。</p><p><s>有不被采纳的风险，但奖励会照常发放。</s></p><h3>赛道 4：周边</h3><p>其实我也不知道周边有啥……玩偶？挂件？</p><p>反正设计出来就有奖。</p><h2>奖励</h2><p>公开投票，每个赛道独立排名，奖项宁缺毋滥。会考虑设计贡献度和工作量。</p><ul><li>Track 1 &amp; 2 <ul><li>1st：20R</li><li>2nd：10R</li><li>3rd：5R</li><li>创意奖：5R x 2</li></ul></li><li>Track 3 <ul><li>1st：15R</li><li>2nd：10R</li><li>3rd：5R</li></ul></li><li>Track 4 <ul><li>视质量，10R 起步</li></ul></li></ul><p>同一赛道不重复获奖。</p><p>解释权归 Stankle 所有，所有奖励由 Stankle 自掏腰包。</p>",33),Cs=[Rs],Os={__name:"design-contest",setup(o,{expose:t}){return t({frontmatter:{}}),(a,s)=>(h(),x("div",ws,Cs))}},Ks=B({__name:"index",setup(o){return(t,e)=>{const a=Rt,s=ht,i=pt;return h(),y(i,null,{default:c(()=>[n(s,{label:"设计大赛"},{default:c(()=>[n(a,null,{default:c(()=>[(h(),y(Al(r(Os))))]),_:1})]),_:1})]),_:1})}}}),ys=Object.freeze(Object.defineProperty({__proto__:null,default:Ks},Symbol.toStringTag,{value:"Module"}));function Ps(o,t){let e=o.toFixed(8),a=e.indexOf(".");return a==-1||e.length-a-1<=t?e:o.toFixed(t).replace(/\.?0+$/,"")}function qt(o,t=0,e=!1,a="14",s=""){return`<span style="color:#${t.toString(16).padStart(6,"0")};${e?"font-weight:bold;":""}${a?`font-size:${a};`:""}${s?`font-family:${s};`:""}">${o.replaceAll(`
`,"<br>")}</span>`}function Vs(o){return Math.floor(o/3600)+":"+Math.floor(o/60%60).toString().padStart(2,"0")+":"+(o%60).toString().padStart(2,"0")}const Oe=class Oe extends De{constructor(e){super(e);l(this,"parameter");l(this,"levels");this.parameter=e[Oe.DATA_PARAMETER],this.levels=e[Oe.DATA_LEVELS]}getLevelParam(e,a){return this.parameter!=null?this.parameter[a]:this.levels!=null?(e=Math.min(Math.max(0,e-1),this.levels.length-1),this.levels[e][a]):null}hasLevel(){return this.parameter==null}};l(Oe,"TYPE_TOWER_SKILL","typeTowerSkill"),l(Oe,"TYPE_MONSTER_SKILL","typeMonsterSkill"),l(Oe,"DATA_PARAMETER","params"),l(Oe,"DATA_LEVELS","levels");let Ge=Oe;class S extends Ge{constructor(t){super(t),t[me.DATA_TYPE_ID]=Ge.TYPE_TOWER_SKILL}}l(S,"KIND_AURA","Aura"),l(S,"KIND_CHANGE_BULLET","Bultype"),l(S,"KIND_CHANGE_DAMAGE","ChangeDam"),l(S,"KIND_CHANGE_RATE","ChangeRate"),l(S,"KIND_CHANGE_RANGE","ChangeRange"),l(S,"KIND_FIELD_ATTACK","ALLAP"),l(S,"KIND_DIVIDED_ATTACK","DivAP"),l(S,"KIND_SCATTER_ATTACK","ScaAP"),l(S,"KIND_COMBO_ATTACK","ComAP"),l(S,"KIND_GUIDED_BULLET","GuidedBul"),l(S,"KIND_ATTACK_RATE","AttackRate"),l(S,"KIND_AOE_ATTACK","AoeAP"),l(S,"KIND_THROUGHOUT_ATTACK","ThoAP"),l(S,"KIND_BOUNCE_ATTACK","BouAP"),l(S,"KIND_FLOAT_DAMAGE","FloatDam"),l(S,"KIND_CRIT","Crit"),l(S,"KIND_REDUCED_DEFENSE","RedDef"),l(S,"KIND_POISON","Poison"),l(S,"KIND_SLOW","Slow"),l(S,"KIND_BURN_COLD","BC"),l(S,"KIND_BEAT_BACK","Beat"),l(S,"KIND_SILENCE","Silence"),l(S,"KIND_VERTIGO","Vertigo"),l(S,"KIND_INTIMIDATE","Intimidate"),l(S,"KIND_CUSS","Cuss"),l(S,"KIND_BURN","Burn"),l(S,"KIND_COLD","Cold");const L=class L extends Ge{constructor(t){super(t),t[me.DATA_TYPE_ID]=Ge.TYPE_MONSTER_SKILL}static get allMonsterSkill(){return[L.KIND_FLY,L.KIND_AIRBORNE,L.KIND_ISOLATION,L.KIND_RELIVE,L.KIND_SUICIDE,L.KIND_REINCARNATE,L.KIND_RESIST_FIRE,L.KIND_RESIST_FROST,L.KIND_RESIST_POISON,L.KIND_RESIST_BEAT,L.KIND_RESIST_SILENCE,L.KIND_RESIST_VERTIGO,L.KIND_RESIST_CRIT,L.KIND_RESIST_LIGHT,L.KIND_RESIST_STRSMOOTH,L.KIND_SLOWF,L.KIND_WEAK_FIRE,L.KIND_WEAK_FROST,L.KIND_WEAK_POISON,L.KIND_WEAK_BEAT,L.KIND_WEAK_SILENCE,L.KIND_WEAK_VERTIGO,L.KIND_WEAK_CRIT,L.KIND_WEAK_LIGHT,L.KIND_RUN,L.KIND_MIRROR,L.KIND_SUMMON,L.KIND_CLOUD,L.KIND_CURE,L.KIND_BLINK,L.KIND_HIDE,L.KIND_SHIELD,L.KIND_SNEER,L.KIND_TRANSFORM,L.KIND_LINKS]}};l(L,"EVENT_RED",1),l(L,"EVENT_YELLOW",2),l(L,"EVENT_GREEN",3),l(L,"EVENT_FULL",4),l(L,"EVENT_INTIMIDATE",20),l(L,"EVENT_VERTIGO",21),l(L,"EVENT_SILENCE",22),l(L,"EVENT_SLOW",23),l(L,"EVENT_REDUCED_DEFENSE",24),l(L,"EVENT_POISON",25),l(L,"EVENT_BURN",26),l(L,"EVENT_COLD",27),l(L,"EVENT_HIT",40),l(L,"EVENT_CRIT",41),l(L,"EVENT_BEAT_BACK",42),l(L,"EVENT_FRIENT_DIE",43),l(L,"EVENT_DIE",44),l(L,"KIND_FLY","fly"),l(L,"KIND_AIRBORNE","airborne"),l(L,"KIND_ISOLATION","isolation"),l(L,"KIND_RELIVE","revive"),l(L,"KIND_SUICIDE","burst"),l(L,"KIND_REINCARNATE","reborn"),l(L,"KIND_SLOWF","slowf"),l(L,"KIND_RESIST_FIRE","resistFire"),l(L,"KIND_RESIST_FROST","resistFrost"),l(L,"KIND_RESIST_POISON","resistPoison"),l(L,"KIND_RESIST_SLOW","resistSlow"),l(L,"KIND_RESIST_BEAT","resistBeat"),l(L,"KIND_RESIST_SILENCE","resistSilence"),l(L,"KIND_RESIST_VERTIGO","resistVertigo"),l(L,"KIND_RESIST_CRIT","resistCrit"),l(L,"KIND_RESIST_LIGHT","resistLight"),l(L,"KIND_RESIST_INTIMIDATE","resistIntimidate"),l(L,"KIND_WEAK_FIRE","weakFire"),l(L,"KIND_WEAK_FROST","weakFrost"),l(L,"KIND_WEAK_POISON","weakPoison"),l(L,"KIND_WEAK_SLOW","weakSlow"),l(L,"KIND_WEAK_BEAT","weakBeat"),l(L,"KIND_WEAK_SILENCE","weakSilence"),l(L,"KIND_WEAK_VERTIGO","weakVertigo"),l(L,"KIND_WEAK_CRIT","weakCrit"),l(L,"KIND_WEAK_LIGHT","weakLight"),l(L,"KIND_WEAK_INTIMIDATE","weakIntimidate"),l(L,"KIND_RESIST_STRSMOOTH","strsmooth"),l(L,"KIND_RUN","sprint"),l(L,"KIND_MIRROR","divide"),l(L,"KIND_SUMMON","summon"),l(L,"KIND_CLOUD","cloud"),l(L,"KIND_CURE","massTreatment"),l(L,"KIND_BLINK","blink"),l(L,"KIND_HIDE","invisible"),l(L,"KIND_SHIELD","shield"),l(L,"KIND_SNEER","taunt"),l(L,"KIND_TRANSFORM","morph"),l(L,"KIND_LINKS","links");let A=L;const ue=class ue extends Je{constructor(){super(),ue.onlyExample=this,this.loadData(R.$_skillAtt_Obj)}static getOnlyExample(){return ue.onlyExample==null&&(ue.onlyExample=new ue),ue.onlyExample}loadData(t){for(const e in t[ue.TOWER_SKILL]){const a=t[ue.TOWER_SKILL][e];a[me.DATA_ID]=e,this.m_manager[e]=new S(a)}for(const e in t[ue.MONSTER_SKILL]){const a=t[ue.MONSTER_SKILL][e];a[me.DATA_ID]=e,this.m_manager[e]=new A(a)}}getData(t){return this.getDataById(t)}};l(ue,"onlyExample"),l(ue,"TOWER_SKILL","towerSkill"),l(ue,"MONSTER_SKILL","monsterSkill"),l(ue,"TRAP_SKILL","trapSkill");let Jt=ue;class H extends De{constructor(t){super(t)}}l(H,"KIND_HIT","hit"),l(H,"KIND_INVASION","invasion"),l(H,"KIND_TELEPORT","teleport"),l(H,"KIND_BUFF_TOP","buffTop"),l(H,"KIND_BUFF_MID","buffMid"),l(H,"KIND_BUFF_BOT","buffBot"),l(H,"KIND_MAGIC","effectMagic"),l(H,"KIND_PATH","effectPath"),l(H,"KIND_CRIT","effectCrit"),l(H,"KIND_SUMMON","effectSummon"),l(H,"KIND_CLOUD","effectCloud"),l(H,"KIND_MIRROR","effectMirror"),l(H,"KIND_CURE","effectCure"),l(H,"KIND_CURE_ONE","effectCureOne"),l(H,"KIND_SNEER","effectSneer"),l(H,"KIND_LINKS","effectLinks"),l(H,"KIND_RELIVE","effectRelive"),l(H,"KIND_SUICIDE","effectSuicide"),l(H,"KIND_BLINK_IN","effectBlinkIn"),l(H,"KIND_BLINK_OUT","effectBlinkOut"),l(H,"KIND_LIGHTNING","lightning"),l(H,"KIND_FIELD_ATTACK","allAttack"),l(H,"KIND_FIELD_ATTACK_AOE","allAttackAOE"),l(H,"KIND_CUSS","effectCuss"),l(H,"KIND_CUSS_BREAK","effectCussBreak"),l(H,"KIND_SIGN_SUMMON","signSummon"),l(H,"KIND_SIGN_CURE","signCure"),l(H,"KIND_SIGN_CLOUD","signCloud"),l(H,"KIND_SIGN_SHIELD","signShield"),l(H,"KIND_SIGN_TRANSFORM","signTransform"),l(H,"KIND_BOSS","effectBoss");class P{static toPercentage(t){return String(Math.round(t*100*100)/100)+"%"}static toGridStr(t){return String(Math.round(t/100)/10)}static getPosID(t,e){return t+"_"+e}}class zl extends gt{constructor(e,a,s=!1){super();l(this,"level",0);l(this,"index",0);l(this,"enabled",!0);l(this,"m_skillInfo","");l(this,"m_nextLevelSkillInfo","");l(this,"skillTag1","");l(this,"skillTag2","");l(this,"skillTag3","");l(this,"nextLevelSkillTag1","");l(this,"nextLevelSkillTag2","");l(this,"nextLevelSkillTag3","");l(this,"m_updateFunction",()=>{});if(s){this.m_data=new vt({id:e+"_0",kindId:e});return}this.m_data=Jt.getOnlyExample().getData(e),this.level=a,this.enabled=!0}get data(){return this.m_data}get skillInfo(){return this.m_updateFunction!=null&&this.m_updateFunction(),this.m_skillInfo||(this.m_skillInfo=""),this.m_skillInfo}get nextLevelSkillInfo(){return this.m_nextLevelSkillInfo||(this.m_nextLevelSkillInfo=""),this.m_nextLevelSkillInfo}}class j extends zl{constructor(e,a,s){super(e,a);l(this,"tower");this.tower=s}static create(e,a,s){const i=new j("",a,s);return i.m_data=e,i}shouldTransferBullet(){switch(this.data.kindId){case S.KIND_GUIDED_BULLET:case S.KIND_ATTACK_RATE:case S.KIND_AOE_ATTACK:case S.KIND_THROUGHOUT_ATTACK:case S.KIND_BOUNCE_ATTACK:case S.KIND_FLOAT_DAMAGE:case S.KIND_CRIT:case S.KIND_REDUCED_DEFENSE:case S.KIND_POISON:case S.KIND_SLOW:case S.KIND_BURN_COLD:case S.KIND_BEAT_BACK:case S.KIND_SILENCE:case S.KIND_VERTIGO:case S.KIND_INTIMIDATE:case S.KIND_CUSS:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case S.KIND_AURA:return new Qt(this.data.id,this.level,this.tower);case S.KIND_CHANGE_BULLET:return new Yl(this.data.id,this.level,this.tower);case S.KIND_CHANGE_DAMAGE:return new ql(this.data.id,this.level,this.tower);case S.KIND_CHANGE_RATE:return new Zl(this.data.id,this.level,this.tower);case S.KIND_CHANGE_RANGE:return new Jl(this.data.id,this.level,this.tower);case S.KIND_FIELD_ATTACK:return new ol(this.data.id,this.level,this.tower);case S.KIND_DIVIDED_ATTACK:return new nl(this.data.id,this.level,this.tower);case S.KIND_SCATTER_ATTACK:return new dl(this.data.id,this.level,this.tower);case S.KIND_COMBO_ATTACK:return new ll(this.data.id,this.level,this.tower);case S.KIND_GUIDED_BULLET:return new Fs(this.data.id,this.level,this.tower);case S.KIND_ATTACK_RATE:return new Ms(this.data.id,this.level,this.tower);case S.KIND_AOE_ATTACK:return new Zt(this.data.id,this.level,this.tower);case S.KIND_THROUGHOUT_ATTACK:return new ml(this.data.id,this.level,this.tower);case S.KIND_BOUNCE_ATTACK:return new tl(this.data.id,this.level,this.tower);case S.KIND_FLOAT_DAMAGE:return new Us(this.data.id,this.level,this.tower);case S.KIND_CRIT:return new al(this.data.id,this.level,this.tower);case S.KIND_REDUCED_DEFENSE:return new ul(this.data.id,this.level,this.tower);case S.KIND_POISON:return new rl(this.data.id,this.level,this.tower);case S.KIND_SLOW:return new _l(this.data.id,this.level,this.tower);case S.KIND_BURN_COLD:return new ks(this.data.id,this.level,this.tower);case S.KIND_BEAT_BACK:return new el(this.data.id,this.level,this.tower);case S.KIND_SILENCE:return new cl(this.data.id,this.level,this.tower);case S.KIND_VERTIGO:return new pl(this.data.id,this.level,this.tower);case S.KIND_INTIMIDATE:return new il(this.data.id,this.level,this.tower);case S.KIND_CUSS:return new sl(this.data.id,this.level,this.tower);default:return this}}}const Ke=class Ke extends j{constructor(t,e,a){super(t,e,a),this.index=1050,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3001,this.radiiInfo,P.toPercentage(this.nextEffectRate))}}get radii(){return this.data.getLevelParam(this.level,0)+Ke.DEFAULT_RADII}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Ke.DEFAULT_NEXT_EFFECT_RATE,Ke.MAX_NEXT_EFFECT_RATE)}get radiiInfo(){return this.radii.toString()}};l(Ke,"DEFAULT_RADII",0),l(Ke,"DEFAULT_NEXT_EFFECT_RATE",0),l(Ke,"MAX_NEXT_EFFECT_RATE",1);let Zt=Ke;class Ms extends j{constructor(t,e,a){super(t,e,a),this.index=1040,this.m_updateFunction=()=>{let s=this.floorRate,i=this.airRate;s<=0&&i>0?this.m_skillInfo=m.getLanguageStr(3029):i<=0&&s>0?this.m_skillInfo=m.getLanguageStr(3028):s!=1?this.m_skillInfo=m.getLanguageStr(3030,P.toPercentage(s)):i!=1&&(this.m_skillInfo=m.getLanguageStr(3031,P.toPercentage(i)))}}get floorRate(){return this.data.getLevelParam(this.level,0)}get airRate(){return this.data.getLevelParam(this.level,1)}}const bt=class bt extends j{constructor(t,e,a){super(t,e,a),this.index=1500,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3002)}}get spId(){return this.data.getLevelParam(this.level,0)}get spLevel(){return this.data.getLevelParam(this.level,1)}get radii(){return this.data.getLevelParam(this.level,2)*this.level+bt.DEFAULT_RADII}};l(bt,"DEFAULT_RADII",1e3);let Qt=bt;const $e=class $e extends j{constructor(t,e,a){super(t,e,a),this.index=1060,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3003,P.toPercentage(this.chances),this.distanceInfo)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+$e.DEFAULT_CHANCES,1),0)}get beatBackDistance(){return this.data.getLevelParam(this.level,1)+$e.DEFAULT_BEAT_BACK_DISTANCE}get distanceInfo(){return this.beatBackDistance.toString()}};l($e,"SHIFT_TIME",.2),l($e,"DEFAULT_CHANCES",0),l($e,"DEFAULT_BEAT_BACK_DISTANCE",0);let el=$e;const Ie=class Ie extends j{constructor(t,e,a){super(t,e,a),this.index=1070,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3004,this.bounceNum,P.toPercentage(1-this.nextEffectRate),this.attackInfo)}}get bounceNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Ie.DEFAULT_BOUNCE_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)*this.level+Ie.DEFAULT_NEXT_EFFECT_RATE,Ie.MAX_NEXT_EFFECT_RATE)}get attackInfo(){var e;let t=null;return((e=this.tower)==null?void 0:e.newBullet().bulletData.hitEffectId)==H.KIND_LIGHTNING?t=m.getLanguageStr(3516):t=m.getLanguageStr(3515),t}};l(Ie,"DEFAULT_BOUNCE_NUM",.5),l(Ie,"DEFAULT_NEXT_EFFECT_RATE",.35),l(Ie,"MAX_NEXT_EFFECT_RATE",1),l(Ie,"MAX_DISTANCE",3e3);let tl=Ie;class ks extends j{constructor(t,e,a){super(t,e,a),this.index=1080,this.m_updateFunction=()=>{this.burnColdValue>0?this.m_skillInfo=m.getLanguageStr(3005,this.burn):this.m_skillInfo=m.getLanguageStr(3006,P.toPercentage(this.cold))}}get burnColdValue(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return this.data.getLevelParam(this.level,0)<0&&(e=-e),Math.floor(e)}get burn(){return Math.floor(Math.sqrt(this.burnColdValue))}get cold(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return Math.pow(e,.25)*.03}}class Yl extends j{constructor(t,e,a){super(t,e,a)}get bulletId(){return this.data.getLevelParam(this.level,0)}}class ql extends j{constructor(t,e,a){super(t,e,a),this.index=1e3,this.m_updateFunction=()=>{this.damageRate>1?this.m_skillInfo=m.getLanguageStr(3007,P.toPercentage(this.damageRate-1)):this.damageRate<1&&(this.m_skillInfo=m.getLanguageStr(3008,P.toPercentage(1-this.damageRate)))}}get damageAdd(){return this.data.getLevelParam(this.level,0)*this.level}get damageRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get damageA(){return this.data.getLevelParam(this.level,2)}get damageB(){return this.data.getLevelParam(this.level,3)}get damageC(){return this.data.getLevelParam(this.level,4)}isChangeBase(){return!(this.damageA==0&&this.damageB==0&&this.damageC==0)}}class Jl extends j{constructor(t,e,a){super(t,e,a),this.index=1010,this.m_updateFunction=()=>{this.rangeRate>1?this.m_skillInfo=m.getLanguageStr(3009,P.toPercentage(this.rangeRate-1)):this.m_skillInfo=m.getLanguageStr(3010,P.toPercentage(1-this.rangeRate)),this.rangeMin>0&&(this.m_skillInfo+=m.getLanguageStr(3027))}}get rangeAdd(){return this.data.getLevelParam(this.level,0)*this.level}get rangeRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get range(){return this.data.getLevelParam(this.level,2)}get rangeMin(){return this.data.getLevelParam(this.level,3)}isChangeBase(){return this.range!=0}}class Zl extends j{constructor(t,e,a){super(t,e,a),this.index=1020,this.m_updateFunction=()=>{this.rateRate>1?this.m_skillInfo=m.getLanguageStr(3011,P.toPercentage(this.rateRate-1)):this.m_skillInfo=m.getLanguageStr(3012,P.toPercentage(1-this.rateRate))}}get rateRate(){return this.data.getLevelParam(this.level,0)+this.data.getLevelParam(this.level,1)*this.level+1}get rate(){return this.data.getLevelParam(this.level,2)}isChangeBase(){return this.rate!=0}}const Be=class Be extends j{constructor(t,e,a){super(t,e,a),this.index=1090,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3013,P.toPercentage(this.chances),this.extraBullet+1)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)+Be.DEFAULT_CHANCES,1),0)}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,1)*this.level+Be.DEFAULT_EXTRA_BULLET)}};l(Be,"DEFAULT_CHANCES",0),l(Be,"DEFAULT_EXTRA_BULLET",.5),l(Be,"DEFAULT_RATE",.08);let ll=Be;const ye=class ye extends j{constructor(t,e,a){super(t,e,a),this.index=1100,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3014,P.toPercentage(this.chances),this.damageEffectRate.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+ye.DEFAULT_CHANCES,1),0)}get damageEffectRate(){return this.data.getLevelParam(this.level,1)*this.level+ye.DEFAULT_DAMAGE_EFFECT_RATE+1}get buffEffectRate(){return this.data.getLevelParam(this.level,2)*this.level+ye.DEFAULT_BUFF_EFFECT_RATE+1}};l(ye,"DEFAULT_CHANCES",.1),l(ye,"DEFAULT_DAMAGE_EFFECT_RATE",.5),l(ye,"DEFAULT_BUFF_EFFECT_RATE",.1);let al=ye;const Qe=class Qe extends j{constructor(t,e,a){super(t,e,a),this.index=1110,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3026,Math.round(this.cussPower),this.duration.toFixed(0))}}get cussPower(){return this.data.getLevelParam(this.level,0)*this.level*this.tower.level+Qe.DEFAULT_CUSS_POWER}get duration(){return this.data.getLevelParam(this.level,1)+Qe.DEFAULT_DURATION}};l(Qe,"DEFAULT_CUSS_POWER",0),l(Qe,"DEFAULT_DURATION",0);let sl=Qe;const xt=class xt extends j{constructor(t,e,a){super(t,e,a),this.index=1120,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3015,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+xt.DEFAULT_EXTRA_BULLET)}};l(xt,"DEFAULT_EXTRA_BULLET",.5);let nl=xt;class Us extends j{constructor(t,e,a){super(t,e,a),this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3017)}}get floatDamageRate(){return this.data.getLevelParam(this.level,0)*this.level}}class Fs extends j{constructor(t,e,a){super(t,e,a),this.m_skillInfo=""}get guideRatio(){return this.data.getLevelParam(this.level,0)}get bulletSpeedRate(){return this.data.getLevelParam(this.level,1)+1}get bulletAccSpeed(){return this.data.getLevelParam(this.level,2)}get guideInfo(){let t=null,e=this.guideRatio;return e<.1?t=m.getLanguageStr(3500):e<.2?t=m.getLanguageStr(3501):e<.3?t=m.getLanguageStr(3502):e<.4?t=m.getLanguageStr(3503):t=m.getLanguageStr(3504),t}}const et=class et extends j{constructor(t,e,a){super(t,e,a),this.index=1140,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3019,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+et.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+et.DEFAULT_DURATION}};l(et,"DEFAULT_CHANCES",.05),l(et,"DEFAULT_DURATION",0);let il=et;const St=class St extends j{constructor(t,e,a){super(t,e,a),this.index=1130,this.m_skillInfo=m.getLanguageStr(3016)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+St.DEFAULT_CHANCES,1),0)}};l(St,"DEFAULT_CHANCES",.05);let ol=St;const tt=class tt extends j{constructor(e,a,s){super(e,a,s);l(this,"m_poisonRate",-1);this.index=1150,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3e3,Math.round(this.poisonRate*this.tower.damage()),this.duration.toFixed(0))}}get poisonRate(){return this.m_poisonRate<0?this.data.getLevelParam(this.level,0)*this.level+tt.DEFAULT_POISON_RATE:this.m_poisonRate}set poisonRate(e){this.m_poisonRate<0&&(this.m_poisonRate=e)}get duration(){return this.data.getLevelParam(this.level,1)+tt.DEFAULT_DURATION}};l(tt,"DEFAULT_POISON_RATE",0),l(tt,"DEFAULT_DURATION",0);let rl=tt;const lt=class lt extends j{constructor(t,e,a){super(t,e,a),this.index=1160,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3020,P.toPercentage(this.reducedDefenseRate),this.duration.toFixed(1))}}get reducedDefenseRate(){return this.data.getLevelParam(this.level,0)*this.level+lt.DEFAULT_REDUCED_DEFENSE_RATE}get duration(){return this.data.getLevelParam(this.level,1)+lt.DEFAULT_DURATION}};l(lt,"DEFAULT_REDUCED_DEFENSE_RATE",.1),l(lt,"DEFAULT_DURATION",0);let ul=lt;const Nt=class Nt extends j{constructor(t,e,a){super(t,e,a),this.index=1170,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3021,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Nt.DEFAULT_EXTRA_BULLET)}};l(Nt,"DEFAULT_EXTRA_BULLET",.5);let dl=Nt;const at=class at extends j{constructor(t,e,a){super(t,e,a),this.index=1180,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3022,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+at.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+at.DEFAULT_DURATION}};l(at,"DEFAULT_CHANCES",.05),l(at,"DEFAULT_DURATION",0);let cl=at;const st=class st extends j{constructor(t,e,a){super(t,e,a),this.index=1190,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3023,P.toPercentage(this.slowRate),this.duration.toFixed(1))}}get slowRate(){return this.data.getLevelParam(this.level,0)*this.level+st.DEFAULT_SLOW_RATE}get duration(){return this.data.getLevelParam(this.level,1)+st.DEFAULT_DURATION}};l(st,"DEFAULT_SLOW_RATE",.1),l(st,"DEFAULT_DURATION",0);let _l=st;const Pe=class Pe extends j{constructor(t,e,a){super(t,e,a),this.index=1200,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3024,this.throughoutNum)}}get throughoutNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Pe.DEFAULT_THROUGHOUT_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Pe.DEFAULT_NEXT_EFFECT_RATE,Pe.MAX_NEXT_EFFECT_RATE)}};l(Pe,"DEFAULT_THROUGHOUT_NUM",.5),l(Pe,"DEFAULT_NEXT_EFFECT_RATE",0),l(Pe,"MAX_NEXT_EFFECT_RATE",1);let ml=Pe;const nt=class nt extends j{constructor(t,e,a){super(t,e,a),this.index=1210,this.m_updateFunction=()=>{this.m_skillInfo=m.getLanguageStr(3025,P.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+nt.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+nt.DEFAULT_DURATION}};l(nt,"DEFAULT_CHANCES",0),l(nt,"DEFAULT_DURATION",0);let pl=nt;const se=class se extends zl{constructor(e,a,s,i=!1){super(e,a,i);l(this,"monster");l(this,"m_levelMax",0);this.monster=s,this.m_data.typeId=Ge.TYPE_MONSTER_SKILL}static getKindName(e){switch(e){case A.KIND_FLY:return m.getLanguageStr(2507);case A.KIND_AIRBORNE:return m.getLanguageStr(2510);case A.KIND_RESIST_FIRE:return m.getLanguageStr(2515,m.getLanguageStr(2710));case A.KIND_RESIST_FROST:return m.getLanguageStr(2515,m.getLanguageStr(2711));case A.KIND_RESIST_POISON:return m.getLanguageStr(2515,m.getLanguageStr(2712));case A.KIND_RESIST_SLOW:return m.getLanguageStr(2515,m.getLanguageStr(2719));case A.KIND_RESIST_BEAT:return m.getLanguageStr(2515,m.getLanguageStr(2717));case A.KIND_RESIST_SILENCE:return m.getLanguageStr(2515,m.getLanguageStr(2722));case A.KIND_RESIST_VERTIGO:return m.getLanguageStr(2515,m.getLanguageStr(2715));case A.KIND_RESIST_CRIT:return m.getLanguageStr(2515,m.getLanguageStr(2716));case A.KIND_RESIST_LIGHT:return m.getLanguageStr(2515,m.getLanguageStr(2714));case A.KIND_RESIST_INTIMIDATE:return m.getLanguageStr(2515,m.getLanguageStr(2718));case A.KIND_RESIST_STRSMOOTH:return m.getLanguageStr(2723);case A.KIND_SLOWF:return m.getLanguageStr(2725);case A.KIND_WEAK_FIRE:return m.getLanguageStr(2516,m.getLanguageStr(2710));case A.KIND_WEAK_FROST:return m.getLanguageStr(2516,m.getLanguageStr(2711));case A.KIND_WEAK_POISON:return m.getLanguageStr(2516,m.getLanguageStr(2712));case A.KIND_WEAK_SLOW:return m.getLanguageStr(2516,m.getLanguageStr(2719));case A.KIND_WEAK_BEAT:return m.getLanguageStr(2516,m.getLanguageStr(2717));case A.KIND_WEAK_SILENCE:return m.getLanguageStr(2516,m.getLanguageStr(2722));case A.KIND_WEAK_VERTIGO:return m.getLanguageStr(2516,m.getLanguageStr(2715));case A.KIND_WEAK_CRIT:return m.getLanguageStr(2516,m.getLanguageStr(2716));case A.KIND_WEAK_LIGHT:return m.getLanguageStr(2516,m.getLanguageStr(2714));case A.KIND_WEAK_INTIMIDATE:return m.getLanguageStr(2516,m.getLanguageStr(2718));case A.KIND_ISOLATION:return m.getLanguageStr(2517);case A.KIND_RUN:return m.getLanguageStr(2500);case A.KIND_MIRROR:return m.getLanguageStr(2501);case A.KIND_SUMMON:return m.getLanguageStr(2502);case A.KIND_CLOUD:return m.getLanguageStr(2503);case A.KIND_CURE:return m.getLanguageStr(2504);case A.KIND_BLINK:return m.getLanguageStr(2505);case A.KIND_HIDE:return m.getLanguageStr(2506);case A.KIND_RELIVE:return m.getLanguageStr(2508);case A.KIND_SUICIDE:return m.getLanguageStr(2509);case A.KIND_SHIELD:return m.getLanguageStr(2511);case A.KIND_SNEER:return m.getLanguageStr(2512);case A.KIND_REINCARNATE:return m.getLanguageStr(2514);case A.KIND_TRANSFORM:return m.getLanguageStr(2513);case A.KIND_LINKS:return m.getLanguageStr(2727);default:return""}}get name(){return this.canLevelUp(1)?m.getLanguageStr(2416,this.data.name,this.level):this.data.name}get isDebuff(){return this.grade.indexOf(se.RES_FG_X)!=-1}get skillSign(){return this.isDebuff?qt(m.getLanguageStr(2422),0,!0,13):qt(m.getLanguageStr(2421),16711680,!0,13)}get isDowerSkill(){return!1}get isLearnSkill(){return!1}getConflictStr(){let e=null,a=0,s=0,i=R.$_conflict_skill_kind,d="";for(a=0;a<i.length;a++)if(e=i[a],e.indexOf(this.data.kindId)!=-1)for(s=0;s<e.length;s++)e[s]!=this.data.kindId&&(d+=se.getKindName(e[s]),d+=m.getLanguageStr(2406));return d.length>0&&(d=d.slice(0,d.length-1)),d}canLevelUp(e=-1){return e<0&&(e=this.level),e<this.levelMax}get levelMax(){if(this.m_levelMax<=0){const e=R.$_skill_lvup_spend,a=this.grade;if(e[a])for(const s in e[a])this.m_levelMax=Math.max(this.m_levelMax,parseInt(s))+1;else this.m_levelMax=1}return this.m_levelMax}levelUpSpend(e=-1){e<0&&(e=this.level);let a=R.$_skill_lvup_spend,s=this.grade;return a[s]&&a[s][String(e)]?a[s][String(e)]:null}get skillScore(){let e=R.$_skill_grade_score,a=this.grade;return e[a]&&e[a][String(this.level)]?e[a][String(this.level)]:1}get grade(){let e=this.data.id,a=e.indexOf("_");return a==-1?se.RES_FG_X:e.slice(a+1,e.length)}isEventSkill(){switch(this.data.kindId){case A.KIND_RUN:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case A.KIND_FLY:return new Gs(this.data.id,this.level,this.monster);case A.KIND_AIRBORNE:return new hl(this.data.id,this.level,this.monster);case A.KIND_RESIST_FIRE:case A.KIND_RESIST_FROST:case A.KIND_RESIST_POISON:case A.KIND_RESIST_SLOW:case A.KIND_RESIST_BEAT:case A.KIND_RESIST_SILENCE:case A.KIND_RESIST_VERTIGO:case A.KIND_RESIST_CRIT:case A.KIND_RESIST_LIGHT:case A.KIND_RESIST_INTIMIDATE:case A.KIND_RESIST_STRSMOOTH:case A.KIND_SLOWF:case A.KIND_WEAK_FIRE:case A.KIND_WEAK_FROST:case A.KIND_WEAK_POISON:case A.KIND_WEAK_SLOW:case A.KIND_WEAK_BEAT:case A.KIND_WEAK_SILENCE:case A.KIND_WEAK_VERTIGO:case A.KIND_WEAK_CRIT:case A.KIND_WEAK_LIGHT:case A.KIND_WEAK_INTIMIDATE:return new xe(this.data.id,this.level,this.monster);case A.KIND_ISOLATION:return new Ws(this.data.id,this.level,this.monster);case A.KIND_RUN:return new Xs(this.data.id,this.level,this.monster);case A.KIND_MIRROR:return new Ql(this.data.id,this.level,this.monster);case A.KIND_SUMMON:return new la(this.data.id,this.level,this.monster);case A.KIND_CLOUD:return new Bs(this.data.id,this.level,this.monster);case A.KIND_CURE:return new Hs(this.data.id,this.level,this.monster);case A.KIND_BLINK:return new $s(this.data.id,this.level,this.monster);case A.KIND_HIDE:return new gl(this.data.id,this.level,this.monster);case A.KIND_RELIVE:return new ta(this.data.id,this.level,this.monster);case A.KIND_SUICIDE:return new fl(this.data.id,this.level,this.monster);case A.KIND_SHIELD:return new zs(this.data.id,this.level,this.monster);case A.KIND_SNEER:return new Ys(this.data.id,this.level,this.monster);case A.KIND_REINCARNATE:return new ea(this.data.id,this.level,this.monster);case A.KIND_TRANSFORM:return new qs(this.data.id,this.level,this.monster);case A.KIND_LINKS:return new js(this.data.id,this.level,this.monster);default:return this}}};l(se,"RES_SKILL","skill_"),l(se,"RES_FG_A","A"),l(se,"RES_FG_B","B"),l(se,"RES_FG_C","C"),l(se,"RES_FG_Z","Z"),l(se,"RES_FG_X","X"),l(se,"RES_FG_0","0"),l(se,"RES_BG","bg"),l(se,"PHOTO_WIDTH",34),l(se,"PHOTO_HEIGHT",34),l(se,"PHOTO_ROUND",8);let _e=se;class Ae extends _e{constructor(t,e,a){super(t,e,a)}warmup(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cooldown(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}chances(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}eventType(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,3)}duration(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,4)}refreshTag(t=!1){this.skillTag1=this.getTagEventType(),this.nextLevelSkillTag1=this.getTagEventType(this.level+1),this.skillTag2=this.getTagCooldown(),this.nextLevelSkillTag2=this.getTagCooldown(this.level+1),t&&(this.skillTag3=this.getTagDuration(),this.nextLevelSkillTag3=this.getTagDuration(this.level+1))}getTagEventType(t=-1){let e=0;t<0&&(t=this.level);let a="",s=this.eventType(t);if(s.length!=4){for(e=0;e<s.length;e++)s[e]==A.EVENT_RED?a+=m.getLanguageStr(2402)+m.getLanguageStr(2406):s[e]==A.EVENT_YELLOW?a+=m.getLanguageStr(2403)+m.getLanguageStr(2406):s[e]==A.EVENT_GREEN?a+=m.getLanguageStr(2404)+m.getLanguageStr(2406):s[e]==A.EVENT_FULL&&(a+=m.getLanguageStr(2405)+m.getLanguageStr(2406));a=a.slice(0,a.length-1),a=m.getLanguageStr(2400,a)}return a}getTagCooldown(t=-1){return t<0&&(t=this.level),""+m.getLanguageStr(2401,this.cooldown(t))}getTagDuration(t=-1){return t<0&&(t=this.level),""+m.getLanguageStr(2407,this.duration(t))}}class hl extends _e{constructor(t,e,a){super(t,e,a),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2201)}}heightSpeed(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}pathLengthMin(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}pathLengthMax(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}}l(hl,"BALLOON","balloon"),l(hl,"DEFAULT_HEIGHT",2e3);class $s extends Ae{constructor(t,e,a){super(t,e,a),this.index=100,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2303,P.toGridStr(this.range())),this.m_nextLevelSkillInfo=m.getLanguageStr(2303,P.toGridStr(this.range(this.level+1))),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}}class Bs extends Ae{constructor(t,e,a){super(t,e,a),this.index=110,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2302,this.cloudTime()),this.m_nextLevelSkillInfo=m.getLanguageStr(2302,this.cloudTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class Hs extends Ae{constructor(t,e,a){super(t,e,a),this.index=140,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2300,P.toGridStr(this.cureRange()),P.toPercentage(this.cureRate())),this.m_nextLevelSkillInfo=m.getLanguageStr(2300,P.toGridStr(this.cureRange(this.level+1)),P.toPercentage(this.cureRate(this.level+1))),this.refreshTag()}}cureRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cureRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class Gs extends _e{constructor(t,e,a){super(t,e,a),this.index=90,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2200),this.m_nextLevelSkillInfo=m.getLanguageStr(2200)}}get flyHeight(){return this.data.getLevelParam(this.level,0)}}class gl extends Ae{constructor(t,e,a){super(t,e,a),this.index=150,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2305,this.duration()),this.m_nextLevelSkillInfo=m.getLanguageStr(2305,this.duration(this.level+1)),this.refreshTag()}}}l(gl,"HIDE_TIME",1),l(gl,"HIDE_ALPHA",.1);class Ws extends _e{constructor(t,e,a){super(t,e,a),this.index=500,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2202)}}}class js extends Ae{constructor(t,e,a){super(t,e,a),this.index=116,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2728,P.toGridStr(this.range()),P.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=m.getLanguageStr(2728,P.toGridStr(this.range(this.level+1)),P.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class Ql extends Ae{constructor(t,e,a){super(t,e,a),this.index=130,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2306,this.mirrorNum(),P.toPercentage(this.hpRate()),this.duration()),this.m_nextLevelSkillInfo=m.getLanguageStr(2306,this.mirrorNum(this.level+1),P.toPercentage(this.hpRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}mirrorNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}l(Ql,"DEFAULT_DISTANCE",750);class ea extends _e{constructor(t,e,a){super(t,e,a),this.index=85,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2215,this.monsterName()),this.m_nextLevelSkillInfo=m.getLanguageStr(2215,this.monsterName(this.level+1))}}monsterIdList(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}monsterName(t=-1){let e=0,a=this.monsterIdList(t),s="";for(e=0;e<a.length;e++)s+=pe.getOnlyExample().getData(a[e]).name,s+=m.getLanguageStr(2406);return s.slice(0,s.length-1),s}}l(ea,"REINCARNATE_TIME",5);class ta extends _e{constructor(t,e,a){super(t,e,a),this.index=170,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2213,this.reliveNum(),P.toPercentage(this.reliveHpRate())),this.m_nextLevelSkillInfo=m.getLanguageStr(2213,this.reliveNum(this.level+1),P.toPercentage(this.reliveHpRate(this.level+1)))}}reliveNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}reliveHpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}l(ta,"RELIVE_TIME",8);class xe extends _e{constructor(e,a,s){super(e,a,s);l(this,"maxHP",0);this.index=300,this.m_updateFunction=function(){this.m_skillInfo=this.resistInfo(),this.m_nextLevelSkillInfo=this.resistInfo(this.level+1)}}getResist(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}getRange(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}getMaxHP(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}resistInfo(e=-1){let a=this.getResist(e),s="",i=P.toPercentage(Math.abs(a));return a==0||(a>0?s=m.getLanguageStr(2409):s=m.getLanguageStr(2408),this.data.kindId==A.KIND_SLOWF&&(s=P.toGridStr(this.getRange())),s=m.getLanguageStr(this.resistInfoNumber,s,i),this.data.kindId==A.KIND_RESIST_STRSMOOTH&&this.getMaxHP(e)>0&&(s+=m.getLanguageStr(2730,this.getMaxHP(e)))),s}get resistInfoNumber(){switch(this.data.kindId){case A.KIND_RESIST_FIRE:case A.KIND_WEAK_FIRE:return 2203;case A.KIND_RESIST_FROST:case A.KIND_WEAK_FROST:return 2204;case A.KIND_RESIST_POISON:case A.KIND_WEAK_POISON:return 2205;case A.KIND_RESIST_SLOW:case A.KIND_WEAK_SLOW:return 2206;case A.KIND_RESIST_BEAT:case A.KIND_WEAK_BEAT:return 2207;case A.KIND_RESIST_SILENCE:case A.KIND_WEAK_SILENCE:return 2208;case A.KIND_RESIST_VERTIGO:case A.KIND_WEAK_VERTIGO:return 2209;case A.KIND_RESIST_CRIT:case A.KIND_WEAK_CRIT:return 2210;case A.KIND_RESIST_LIGHT:case A.KIND_WEAK_LIGHT:return 2211;case A.KIND_RESIST_INTIMIDATE:case A.KIND_WEAK_INTIMIDATE:return 2212;case A.KIND_RESIST_STRSMOOTH:return 2724;case A.KIND_SLOWF:return 2726;default:return 0}}}l(xe,"IMMUNITY",2701),l(xe,"RESIST_SUPER",2702),l(xe,"RESIST_HIGH",2703),l(xe,"RESIST",2704),l(xe,"FEAR",2705),l(xe,"FEAR_HIGH",2706),l(xe,"FEAR_SUPER",2707);class Xs extends Ae{constructor(t,e,a){super(t,e,a),this.index=160,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2304,P.toPercentage(this.speedRate()-1),this.duration()),this.m_nextLevelSkillInfo=m.getLanguageStr(2304,P.toPercentage(this.speedRate(this.level+1)-1),this.duration(this.level+1)),this.refreshTag()}}speedRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)+1}}class zs extends Ae{constructor(t,e,a){super(t,e,a),this.index=105,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2308,P.toPercentage(this.shieldRate()),this.shieldTime()),this.m_nextLevelSkillInfo=m.getLanguageStr(2308,P.toPercentage(this.shieldRate(this.level+1)),this.shieldTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}class Ys extends Ae{constructor(t,e,a){super(t,e,a),this.index=106,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2309,P.toGridStr(this.range()),P.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=m.getLanguageStr(2309,P.toGridStr(this.range(this.level+1)),P.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class fl extends _e{constructor(t,e,a){super(t,e,a),this.index=185,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2214,P.toGridStr(this.cloudRange()),this.cloudTime()),this.m_nextLevelSkillInfo=m.getLanguageStr(2214,P.toGridStr(this.cloudRange(this.level+1)),this.cloudTime(this.level+1))}}cloudRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}l(fl,"isEveryTime",!0),l(fl,"SUICIDE_TIME",.5);class la extends Ae{constructor(t,e,a){super(t,e,a),this.index=120,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2301,this.summonNum(),P.toPercentage(this.hpRate()),this.summonName()),this.m_nextLevelSkillInfo=m.getLanguageStr(2301,this.summonNum(this.level+1),P.toPercentage(this.hpRate(this.level+1)),this.summonName(this.level+1)),this.refreshTag(!0)}}summonId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}summonName(t=-1){return t<0&&(t=this.level),pe.getOnlyExample().getData(this.summonId(t)).name}summonNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}l(la,"DEFAULT_DISTANCE",750);class qs extends Ae{constructor(t,e,a){super(t,e,a),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=m.getLanguageStr(2307,this.transformName()),this.m_nextLevelSkillInfo=m.getLanguageStr(2307,this.transformName(this.level+1)),this.refreshTag(!0)}}transformId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}transformName(t=-1){return t<0&&(t=this.level),pe.getOnlyExample().getData(this.transformId(t)).name}}const Te=class Te extends cs{constructor(){super();l(this,"id","");l(this,"skills",{});l(this,"tag");this.tag="BaseUnit"}init(){this.initSkills()}initSkills(){}get data(){return this.m_data}};l(Te,"SKILL_ID","skid"),l(Te,"SKILL_LEVEL","lev"),l(Te,"STATUS_RATE",200),l(Te,"STATUS_TIME",Te.STATUS_RATE/1e3),l(Te,"AOE_SILENCE_RANGE",1e3),l(Te,"AOE_SILENCE_TIME",2);let He=Te;class Js extends He{constructor(){super()}get buildingData(){return this.m_data}get range(){return this.buildingData.range}get skillInfo(){const t=Object.values(this.skills);t.sort((a,s)=>a.index-s.index);const e=t.map(a=>a.skillInfo).filter(a=>a!="").join(`
`);return e==""?this.buildingData.info:e}}class Zs extends He{constructor(e){super();l(this,"damage",0);l(this,"range",0);l(this,"attackType");this.m_data=Yt.getOnlyExample().getData(e),this.attackType=jt.EFFECT_TYPE_ALL}get bulletData(){return this.m_data}}const ct=class ct extends Js{constructor(e){super();l(this,"m_level",0);l(this,"gem",null);l(this,"m_attackType","");this.tag="Tower",e&&(this.m_data=Xt.getOnlyExample().getData(e),this.initTower()),this.level=1}static fromData(e){const a=new ct(null);return a.m_data=e,a.initTower(),a}get towerData(){return this.m_data}initTower(){this.initSkills()}initSkills(){if(this.skills={},this.towerData.skillPackageId!=""){const e=new Bl(this.towerData.skillPackageId,this.towerData.skillPackageLevel);if(e!=null&&e.skillsPackageData!=null)for(const a of e.skillsPackageData.skillsList){const s=new j(a,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}}if(this.gem){const e=this.gem.gemData.getSkillPackage(this.data.id);if(e!=null&&e.skillsPackageData!=null)for(const a of e.skillsPackageData.skillsList){const s=new j(a,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}this.skills[S.KIND_SCATTER_ATTACK]&&delete this.skills[S.KIND_DIVIDED_ATTACK]}}get color(){return this.gem!=null?this.gem.gemData.color:6316128}get level(){return this.m_level}set level(e){this.m_level=e}get gemLevel(){return this.gem?this.gem.gemData.gemLevel:0}get ability(){const e=this.gemLevel;return this.towerData.isMagicTower?e==0?0:this.m_level*(.8+e/5)*2:this.m_level*(1+e/10)}get power(){const e=this.level,a=R.$_tower_worth_factor,s=this.gemLevel,i=this.valueCostConst(e);return Math.round((i+Math.pow(s,a[0])*a[1])*(a[2]+s/a[3]))}buildValue(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildValueA+this.towerData.buildValueB*e+this.towerData.buildValueC*e*e)}buildCost(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildCostA+this.towerData.buildCostB*e+this.towerData.buildCostC*e*e)}valueCost(e=-1){e==-1&&(e=this.level);const a=e*this.towerData.buildCostA+(e*e+e)/2*this.towerData.buildCostB+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostC+this.towerData.buildCost-this.towerData.buildCostA-this.towerData.buildCostB-this.towerData.buildCostC;return Math.round(a)}valueCostConst(e=-1){e==-1&&(e=this.level);const a=e*this.towerData.buildCostAConst+(e*e+e)/2*this.towerData.buildCostBConst+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostCConst+this.towerData.buildCostConst-this.towerData.buildCostAConst-this.towerData.buildCostBConst-this.towerData.buildCostCConst;return Math.round(a)}buffEffect(e=-1){return e==-1&&(e=this.level),this.towerData.buffEffect*e+1}damage(e=-1){let a=0;if(e==-1&&(e=this.level),this.skills[S.KIND_CHANGE_DAMAGE]instanceof ql){let s=this.skills[S.KIND_CHANGE_DAMAGE];s.isChangeBase()?a=Math.round((s.damageA+s.damageB*e+s.damageC*e*e)*s.damageRate+s.damageAdd):a=Math.round((this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e)*s.damageRate+s.damageAdd)}else a=Math.round(this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e);return Math.max(a,0)}get range(){let e=0;if(this.skills[S.KIND_CHANGE_RANGE]instanceof Jl){let a=this.skills[S.KIND_CHANGE_RANGE];a.isChangeBase()?e=a.range*a.rangeRate+a.rangeAdd:e=this.towerData.range*a.rangeRate+a.rangeAdd}else e=this.towerData.range;return e}get rate(){let e=0;if(this.skills[S.KIND_CHANGE_RATE]instanceof Zl){let a=this.skills[S.KIND_CHANGE_RATE];a.isChangeBase()?e=Math.round(a.rate*a.rateRate):e=Math.round(this.towerData.rate*a.rateRate)}else e=this.towerData.rate;return e}setGem(e){this.gem=e,this.initSkills()}newBullet(){return new Zs(this.getBulletId())}getBulletId(){let e=null;return this.skills[S.KIND_CHANGE_BULLET]instanceof Yl?(e=this.skills[S.KIND_CHANGE_BULLET],e.bulletId):this.towerData.bulletId}getInfoHtml(){return qt(this.skillInfo,this.color,!1,"14px")}};l(ct,"TOWER","tower"),l(ct,"GEM","gem");let Dt=ct;const Qs={class:"space-x-2"},en=B({__name:"TowerDataForm",props:{tower:{}},setup(o){const t=o;ne({});const e=W(R.$_towerAtt_Obj.shaota),a=s=>{t.tower.m_data=new vl(s)};return(s,i)=>{const d=ke,_=Ve,g=be,p=fe,u=Me,I=Rt;return h(),y(I,null,{default:c(()=>[n(u,{"label-width":"100px"},{default:c(()=>[n(g,{label:"原型"},{default:c(()=>[n(_,{modelValue:r(e),"onUpdate:modelValue":i[0]||(i[0]=T=>ce(e)?e.value=T:null),"value-key":"id",onChange:a},{default:c(()=>[(h(!0),x(V,null,$(r(R).$_towerAtt_Obj,(T,E)=>(h(),y(d,{key:E,label:T.name,value:T},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(g,{label:"等级"},{default:c(()=>[n(p,{modelValue:s.tower.m_level,"onUpdate:modelValue":i[1]||(i[1]=T=>s.tower.m_level=T)},null,8,["modelValue"])]),_:1}),n(g,{label:"damage"},{default:c(()=>[f("div",Qs,[f("span",null,[C(" a: "),n(p,{modelValue:s.tower.towerData.damageA,"onUpdate:modelValue":i[2]||(i[2]=T=>s.tower.towerData.damageA=T),"controls-position":"right",step:r(Ue)(r(e).damage.a),style:{width:"100px"}},null,8,["modelValue","step"])]),f("span",null,[C(" b: "),n(p,{modelValue:s.tower.towerData.damageB,"onUpdate:modelValue":i[3]||(i[3]=T=>s.tower.towerData.damageB=T),"controls-position":"right",step:r(Ue)(r(e).damage.b),style:{width:"100px"}},null,8,["modelValue","step"])]),f("span",null,[C(" c: "),n(p,{modelValue:s.tower.towerData.damageC,"onUpdate:modelValue":i[4]||(i[4]=T=>s.tower.towerData.damageC=T),"controls-position":"right",step:r(Ue)(r(e).damage.c),style:{width:"100px"}},null,8,["modelValue","step"])])])]),_:1}),n(g,{label:"rate"},{default:c(()=>[n(p,{modelValue:s.tower.towerData.rate,"onUpdate:modelValue":i[5]||(i[5]=T=>s.tower.towerData.rate=T),step:r(Ue)(r(e).rate)},null,8,["modelValue","step"])]),_:1}),n(g,{label:"range"},{default:c(()=>[n(p,{modelValue:s.tower.towerData.range,"onUpdate:modelValue":i[6]||(i[6]=T=>s.tower.towerData.range=T),step:r(Ue)(r(e).range)},null,8,["modelValue","step"])]),_:1}),n(g,{label:"buffEffect"},{default:c(()=>[n(p,{modelValue:s.tower.towerData.buffEffect,"onUpdate:modelValue":i[7]||(i[7]=T=>s.tower.towerData.buffEffect=T),step:r(Ue)(r(e).buffEffect)},null,8,["modelValue","step"])]),_:1})]),_:1})]),_:1})}}}),tn=["innerHTML"],ln=B({__name:"TowerInfo",props:{tower:{}},setup(o){return(t,e)=>{const a=be,s=Me,i=Rt;return h(),y(i,null,{default:c(()=>[n(s,{"label-width":"80px"},{default:c(()=>[n(a,{label:"damage"},{default:c(()=>[C(b(t.tower.damage()),1)]),_:1}),n(a,{label:"rate"},{default:c(()=>[C(b(t.tower.rate),1)]),_:1}),n(a,{label:"range"},{default:c(()=>[C(b(t.tower.range),1)]),_:1}),n(a,{label:"简介"},{default:c(()=>[f("div",{innerHTML:t.tower.getInfoHtml(),style:{"line-height":"1.5em"}},null,8,tn)]),_:1})]),_:1})]),_:1})}}}),Dl=M.sortBy(M.map(R.$_wolfAtt_Obj,(o,t)=>({id:t,name:o.name,label:`${ge(t)} [${t}]`})),"id"),aa=Dl.filter(o=>o.name.startsWith("camp_")),sa=Dl.filter(o=>o.id.startsWith("D_")),an=M.difference(Dl,aa,sa),wl=M.chain(Object.values(R.$_skillAtt_Obj.towerSkill)).groupBy(o=>o.kindId).mapValues(o=>({id:o[0].id,params:o[0].params})).value(),na=M.chain(R.$_map_Obj).map((o,t)=>M.extend(o,{id:t})).toArray().sortBy("index").value(),ia=na.map(o=>({label:`${o.id} ${o.name}`,value:o.id})),sn=M.chain(R.$_wolfAtt_Obj).map(o=>({value:o.id,label:`${ge(o.id)} [${o.id}]`})).sortBy("id").value(),Rl=M.chain(R.$_wolfAtt_Obj).filter(o=>o.pop<99).map(o=>({value:o.id,label:`${ge(o.id)} [${o.id}]`})).sortBy("id").value(),Cl=M.chain(R.$_wolfAtt_Obj).filter(o=>o.pop>=99).map(o=>({value:o.id,label:`${ge(o.id)} [${o.id}]`})).sortBy("id").value(),nn={key:0,class:"ml-2 space-x-2"},on=B({__name:"TowerSkillItem",props:rt({tower:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:rt(["update:model-value"],["update:modelValue"]),setup(o,{emit:t}){const e=o,a=Le(o,"modelValue"),s=W(),i=()=>{s.value=wl[a.value.kindId],a.value.params=s.value.params.slice()};return ve(()=>a.value.kindId,(d,_)=>{var g;if(_!=d){delete e.tower.skills[_];const p=new j(s.value.id,((g=e.tower.skills[d])==null?void 0:g.level)??50,e.tower).getSubClasses();p.m_data=new S(a.value),e.tower.skills[d]=p}}),ve(a,(d,_)=>{e.tower.skills[d.kindId].m_data=new S(d)},{deep:!0}),Ea(()=>{a.value.kindId&&delete e.tower.skills[a.value.kindId]}),(d,_)=>{const g=ke,p=Ve,u=wt,I=fe;return h(),x("div",null,[n(p,{modelValue:a.value.kindId,"onUpdate:modelValue":[_[0]||(_[0]=T=>a.value.kindId=T),i]},{default:c(()=>[(h(!0),x(V,null,$(Object.keys(r(wl)),T=>(h(),x(V,{key:T},[T in d.tower.skills?de("",!0):(h(),y(g,{key:0,label:T,value:T},null,8,["label","value"]))],64))),128))]),_:1},8,["modelValue"]),r(s)?(h(),x("span",nn,[(h(!0),x(V,null,$(r(s).params,(T,E)=>(h(),x(V,null,[typeof T=="string"?(h(),y(u,{key:0,modelValue:a.value.params[E],"onUpdate:modelValue":D=>a.value.params[E]=D,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])):(h(),y(I,{key:1,modelValue:a.value.params[E],"onUpdate:modelValue":D=>a.value.params[E]=D,size:"small","controls-position":"right",step:r(Ue)(T),style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue","step"]))],64))),256))])):de("",!0)])}}}),rn=B({__name:"TowerSkillTable",props:{tower:{}},setup(o){const t=ne([]),e=W(),a=()=>{t.push({data:{kindId:"",params:[]}})},s=(i,d)=>{t.splice(i,1)};return(i,d)=>{const _=je,g=fe,p=Ye;return h(),x("div",null,[n(r(Xe),{ref_key:"skillTableRef",ref:e,data:r(t),stripe:"",border:"","table-layout":"auto",style:{"font-size":"small"}},{default:c(()=>[n(_,{label:"Skill","header-align":"center"},{default:c(u=>[n(on,{tower:i.tower,modelValue:u.row.data,"onUpdate:modelValue":I=>u.row.data=I},null,8,["tower","modelValue","onUpdate:modelValue"])]),_:1}),n(_,{label:"Level","header-align":"center",width:130},{default:c(u=>[i.tower.skills[u.row.data.kindId]?(h(),y(g,{key:0,modelValue:i.tower.skills[u.row.data.kindId].level,"onUpdate:modelValue":I=>i.tower.skills[u.row.data.kindId].level=I,style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"])):de("",!0)]),_:1}),n(_,{label:"Info","header-align":"center"},{default:c(u=>{var I;return[C(b((I=i.tower.skills[u.row.data.kindId])==null?void 0:I.skillInfo),1)]}),_:1}),n(_,{label:"操作",width:100,align:"center"},{default:c(u=>[n(p,{size:"small",type:"danger",onClick:I=>s(u.$index,u.row)},{default:c(()=>[C(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),n(p,{onClick:a},{default:c(()=>[C("新增")]),_:1})])}}}),un=B({__name:"index",setup(o){const t=ne(new Dt(null));return t.m_data=new vl(R.$_towerAtt_Obj.shaota),(e,a)=>{const s=Ct,i=Ot;return h(),x(V,null,[n(i,{gutter:20},{default:c(()=>[n(s,{span:12},{default:c(()=>[n(en,{tower:r(t)},null,8,["tower"])]),_:1}),n(s,{span:12},{default:c(()=>[n(ln,{tower:r(t)},null,8,["tower"])]),_:1})]),_:1}),n(rn,{tower:r(t),class:"mt-2"},null,8,["tower"])],64)}}}),dn=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"}));class cn extends gt{constructor(t){super(),this.m_data=Wt.getOnlyExample().getData(t)}get gemData(){return this.m_data}}const _n=["innerHTML"],mn=f("p",null,"注：升级经验为塔下一级的 buildValue 值",-1),pn=B({__name:"index",setup(o){const t=ne({isDefendMap:!1,towerId:"shaota",gemId:"",level:1,buildFrom:0,buildTo:1,buildPower:50}),e=M.map(R.$_towerAtt_Obj,(_,g)=>[_.name,g]),a=M.chain(R.$_global_properties.gem).toPairs().sortBy(_=>Number(Math.abs(_[1].index))).map(_=>[`${_[1].name} [${_[1].index}]`,_[0]]).value(),s=F(()=>{const _=new Dt(t.towerId);return _.level=t.level,t.gemId!==""&&_.setGem(new cn(t.gemId)),_}),i=()=>{Z.currentMap=new Z(t.isDefendMap?Z.DEFEND_MAP_1:Z.ENDLESS_MAP_1)},d=F(()=>{let _=0;if(t.buildFrom>t.buildTo)return NaN;for(let g=t.buildFrom+1;g<=t.buildTo;g++)_+=s.value.buildValue(g);return Math.round(_/t.buildPower)});return(_,g)=>{const p=ba,u=be,I=ke,T=Ve,E=Ct,D=Ot,v=fe,N=Me;return h(),y(N,{model:r(t),"label-width":"120px"},{default:c(()=>[n(u,{label:"是否为防线"},{default:c(()=>[n(p,{modelValue:r(t).isDefendMap,"onUpdate:modelValue":g[0]||(g[0]=w=>r(t).isDefendMap=w),onChange:i},null,8,["modelValue"])]),_:1}),n(D,null,{default:c(()=>[n(E,{span:12},{default:c(()=>[n(u,{label:"塔"},{default:c(()=>[n(T,{modelValue:r(t).towerId,"onUpdate:modelValue":g[1]||(g[1]=w=>r(t).towerId=w)},{default:c(()=>[(h(!0),x(V,null,$(r(e),([w,O])=>(h(),y(I,{key:O,label:w,value:O},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(E,{span:12},{default:c(()=>[n(u,{label:"宝石"},{default:c(()=>[n(T,{modelValue:r(t).gemId,"onUpdate:modelValue":g[2]||(g[2]=w=>r(t).gemId=w)},{default:c(()=>[n(I,{label:"无",value:""}),(h(!0),x(V,null,$(r(a),([w,O])=>(h(),y(I,{key:O,label:w,value:O},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(D,null,{default:c(()=>[n(E,{span:8},{default:c(()=>[n(u,{label:"等级"},{default:c(()=>[n(v,{modelValue:r(t).level,"onUpdate:modelValue":g[3]||(g[3]=w=>r(t).level=w),min:1},null,8,["modelValue"])]),_:1})]),_:1}),n(E,{span:8},{default:c(()=>[n(u,{label:"等级上限"},{default:c(()=>[f("label",null,b(r(s).towerData.levelMax),1)]),_:1})]),_:1}),n(E,{span:8},{default:c(()=>[n(u,{label:"升级经验"},{default:c(()=>[f("label",null,b(r(s).buildValue(r(s).level+1)),1)]),_:1})]),_:1})]),_:1}),n(D,null,{default:c(()=>[n(E,{span:8},{default:c(()=>[n(u,{label:"攻击力"},{default:c(()=>[f("label",null,b(r(s).damage()),1)]),_:1})]),_:1}),n(E,{span:8},{default:c(()=>[n(u,{label:"攻击频率"},{default:c(()=>[f("label",null,b(r(s).rate),1)]),_:1})]),_:1}),n(E,{span:8},{default:c(()=>[n(u,{label:"攻击范围"},{default:c(()=>[f("label",null,b(r(s).range),1)]),_:1})]),_:1})]),_:1}),n(u,{label:"简介"},{default:c(()=>[f("div",{innerHTML:r(s).getInfoHtml(),style:{"line-height":"1.5em"}},null,8,_n)]),_:1}),n(D,null,{default:c(()=>[n(E,{span:8},{default:c(()=>[n(u,{label:"ability"},{default:c(()=>[f("label",null,b(r(s).ability.toFixed(1)),1)]),_:1})]),_:1}),n(E,{span:8},{default:c(()=>[n(u,{label:"power"},{default:c(()=>[f("label",null,b(r(s).power),1)]),_:1})]),_:1}),n(E,{span:8},{default:c(()=>[n(u,{label:"buffEffect"},{default:c(()=>[f("label",null,b(r(s).buffEffect().toFixed(1)),1)]),_:1})]),_:1})]),_:1}),n(D,null,{default:c(()=>[n(E,{span:8},{default:c(()=>[n(u,{label:"buildValue"},{default:c(()=>[f("label",null,b(r(s).buildValue()),1)]),_:1})]),_:1}),n(E,{span:8},{default:c(()=>[n(u,{label:"buildCost"},{default:c(()=>[f("label",null,b(r(s).buildCost()),1)]),_:1})]),_:1}),n(E,{span:8},{default:c(()=>[n(u,{label:"valueCost"},{default:c(()=>[f("label",null,b(r(s).valueCost()),1)]),_:1})]),_:1})]),_:1}),f("div",null,[n(u,{label:"升级计算",style:{"margin-bottom":"0 !important"}},{default:c(()=>[C(" 从 "),n(v,{modelValue:r(t).buildFrom,"onUpdate:modelValue":g[4]||(g[4]=w=>r(t).buildFrom=w),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),C(" 级到 "),n(v,{modelValue:r(t).buildTo,"onUpdate:modelValue":g[5]||(g[5]=w=>r(t).buildTo=w),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),C(" 级， 苦工总力量 "),n(v,{modelValue:r(t).buildPower,"onUpdate:modelValue":g[6]||(g[6]=w=>r(t).buildPower=w),size:"small","controls-position":"right",style:{width:"8em",margin:"0.5em"}},null,8,["modelValue"])]),_:1}),n(u,{style:{"margin-bottom":"0 !important"}},{default:c(()=>[C(" 需要时间："),f("label",null,b(r(Vs)(r(d))),1)]),_:1}),mn])]),_:1},8,["model"])}}}),hn=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"})),gn=f("h2",{style:{"text-align":"center"}},"狼出现频率（按数量，供参考）",-1),oa=B({__name:"WaveDistribChart",props:{mapData:{},height:{default:600},width:{default:600}},setup(o){Kt([Tl,wa,yt,Pt,Vt,Ra,Mt,Ca]);const t=o,e=F(()=>hs(t.mapData)),a=F(()=>[t.mapData.name,...ge(t.mapData.monsterList)]),s=F(()=>M.range(e.value.all.length)),i=F(()=>M.zip(a.value,[e.value.all,...e.value.each]).map((_,g)=>({title:_[0],pdf:_[1],cdf:[...Qa(_[1])]}))),d=F(()=>({color:i.value.flatMap(_=>[ot(_.title,70,50),ot(_.title,50,80)]),tooltip:{trigger:"axis",valueFormatter:_=>Ps(_,6)},title:i.value.map((_,g)=>({text:_.title,left:"center",textVerticalAlign:"middle",top:t.height*((g+.5)/i.value.length)-5,z:-1,textStyle:{fontSize:t.height/i.value.length*.4,color:"#ccc"}})),xAxis:i.value.map((_,g)=>({gridIndex:g,type:"category",axisTick:{alignWithLabel:!0},data:s.value})),yAxis:i.value.flatMap((_,g)=>[{gridIndex:g,type:"value",alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}},{gridIndex:g,type:"value",position:"right",min:0,max:1,interval:.2,alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}}]),grid:i.value.map((_,g)=>({top:t.height*(g/i.value.length)+10,bottom:t.height*(1-(g+1)/i.value.length)+20})),series:i.value.flatMap((_,g)=>[{xAxisIndex:g,yAxisIndex:g*2,type:"bar",barWidth:"90%",data:_.pdf},{xAxisIndex:g,yAxisIndex:g*2+1,type:"line",smooth:!0,data:_.cdf}])}));return(_,g)=>{const p=We("v-chart");return h(),x("div",null,[gn,n(p,{option:r(d),autoresize:"",style:{height:"600px"}},null,8,["option"])])}}}),ra=B({__name:"DifficultySelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const t=Object.entries(R.$_wave_hard_Obj).map(([a,s])=>({value:parseFloat(a),label:`${s.desc.split("^")[1]} (x${a}, +${s.add_score})`})),e=Le(o,"modelValue");return(a,s)=>{const i=ut;return h(),y(i,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=d=>e.value=d),options:r(t)},null,8,["modelValue","options"])}}}),fn=B({__name:"WolfNumberChart",props:{data:{},max:{}},setup(o){Kt([Pt,Tl,yt,Vt,Mt]);const t=o,e=F(()=>({color:["#C00000"],xAxis:{type:"value",interval:1,axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},max:t.max},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.data.map(a=>a.name)},grid:{left:100,top:0,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.data.map(a=>a.num)}}));return(a,s)=>{const i=We("v-chart");return h(),x("div",null,[n(i,{class:"chart",option:r(e),autoresize:""},null,8,["option"])])}}}),An=qe(fn,[["__scopeId","data-v-2f4c44da"]]),ua=o=>(yl("data-v-344482e5"),o=o(),Pl(),o),En=ua(()=>f("h3",null,"波工具",-1)),In={class:"space-y-2"},Tn=ua(()=>f("label",null,"下表为预留量",-1)),Ln={class:"text-center markup-table"},vn=B({__name:"WaveTool",props:{mapData:{},mapMonsterData:{},level:{},diff:{}},setup(o){const{toClipboard:t}=Il(),e=async p=>{p&&(await t(p),Et.success("已复制到剪贴板"))},a=o,s=ne({count:0,avgHp:0,reservation:new Array(20).fill(0),extra:"",result:"",resultRaw:""}),i=W([]);ve(()=>a.mapData,()=>{Object.assign(s,{count:0,avgHp:0,resetReservation:a.mapData.monsterProportion.map(p=>0),extra:"",result:"",resultRaw:""}),i.value=[]});const _=()=>{s.reservation.fill(0)},g=()=>{let p=ps(a.mapData,s.reservation);if(!p){Et.error("预留量不合法，请重新输入！");return}let{mlist:u,clist:I}=p;s.extra&&(u=M.shuffle(u.concat(s.extra.split(",").map(T=>pe.get(T.trim()))))),s.resultRaw=JSON.stringify(u.map(T=>T.id)),s.result=u.map(T=>ge(T.id)).join(", "),i.value=I.map(T=>({name:ge(T.data.id),num:T.num})),s.count=M.sumBy(I,T=>T.num),s.avgHp=Math.round(M.sumBy(u,T=>T.getHpMax(a.level,a.diff))/u.length)};return(p,u)=>{const I=Ye,T=fe,E=wt,D=Rt;return h(),y(D,{class:"wave-tool"},{default:c(()=>[En,f("div",In,[f("div",null,[n(I,{onClick:g},{default:c(()=>[C("随机生成波")]),_:1}),f("span",null,[C(" 共 "),n(T,{modelValue:r(s).count,"onUpdate:modelValue":u[0]||(u[0]=v=>r(s).count=v),size:"small",style:{width:"100px"}},null,8,["modelValue"]),C(" 只狼，平均血量 "),n(E,{modelValue:r(s).avgHp,"onUpdate:modelValue":u[1]||(u[1]=v=>r(s).avgHp=v),modelModifiers:{number:!0},style:{width:"100px"}},null,8,["modelValue"])])]),f("div",null,[Tn,n(I,{size:"small",onClick:_},{default:c(()=>[C("重置")]),_:1})]),f("table",Ln,[f("tbody",null,[f("tr",null,[(h(!0),x(V,null,$(p.mapMonsterData,v=>(h(),x("td",{key:v.id},b(v.name),1))),128))]),f("tr",null,[(h(!0),x(V,null,$(p.mapMonsterData,(v,N)=>(h(),x("td",{key:v.id},[n(T,{modelValue:r(s).reservation[N],"onUpdate:modelValue":w=>r(s).reservation[N]=w,size:"small",min:0,style:{width:"80px"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))])])]),f("div",null,[C(" 额外："),n(E,{modelValue:r(s).extra,"onUpdate:modelValue":u[2]||(u[2]=v=>r(s).extra=v),placeholder:"多个请用半角逗号分隔",spellcheck:!1,style:{width:"calc(100% - 60px)"}},null,8,["modelValue"])]),f("div",null,[C(" 波： "),n(E,{modelValue:r(s).resultRaw,"onUpdate:modelValue":u[3]||(u[3]=v=>r(s).resultRaw=v),style:{width:"calc(100% - 75px)"},spellcheck:!1},null,8,["modelValue"]),n(I,{icon:r(bl),onClick:u[4]||(u[4]=v=>e(r(s).resultRaw))},null,8,["icon"])]),f("div",null,[C(" 波： "),n(E,{modelValue:r(s).result,"onUpdate:modelValue":u[5]||(u[5]=v=>r(s).result=v),style:{width:"calc(100% - 75px)"},spellcheck:!1},null,8,["modelValue"]),n(I,{icon:r(bl),onClick:u[6]||(u[6]=v=>e(r(s).result))},null,8,["icon"])]),n(An,{data:r(i),max:10},null,8,["data"])])]),_:1})}}}),Dn=qe(vn,[["__scopeId","data-v-344482e5"]]),bn={class:"space-x-8"},xn={class:"space-x-4"},Sn=f("span",null,"（假设每波+2且不引狼）",-1),da=B({__name:"LevelPreview",props:rt({mapData:{},mapMonsterData:{}},{wid:{default:"dahuil"},widModifiers:{},score:{default:0},scoreModifiers:{},diff:{default:1},diffModifiers:{}}),emits:["update:wid","update:score","update:diff"],setup(o){const t=o,e=Le(o,"wid"),a=Le(o,"score"),s=Le(o,"diff"),i=F(()=>pe.getOnlyExample().getData(e.value)),d=F(()=>t.mapData.getDifficultyLevel(a.value)),_=F(()=>i.value.getHpMax(d.value,s.value)),g=F(()=>t.mapMonsterData.map(p=>({name:p.name,value:p.getHpMax(d.value,s.value)})));return(p,u)=>{const I=ut,T=ze,E=be,D=fe,v=We("vue-latex");return h(),x(V,null,[n(E,{label:"狼"},{default:c(()=>[n(I,{modelValue:e.value,"onUpdate:modelValue":u[0]||(u[0]=N=>e.value=N),options:r(sn),filterable:""},null,8,["modelValue","options"]),n(T,{effect:"light"},{default:c(()=>[C(" 血量系数："+b(r(i).hpMaxA)+","+b(r(i).hpMaxB)+","+b(r(i).hpMaxC),1)]),_:1})]),_:1}),n(E,{label:"进度"},{default:c(()=>[n(D,{modelValue:a.value,"onUpdate:modelValue":u[1]||(u[1]=N=>a.value=N),min:0},null,8,["modelValue"]),n(T,{effect:"light",class:"tag-button",onClick:u[2]||(u[2]=N=>a.value=p.mapData.scoreMax)},{default:c(()=>[C(" 通关进度："+b(p.mapData.scoreMax),1)]),_:1})]),_:1}),n(E,{label:"难度"},{default:c(()=>[n(ra,{modelValue:s.value,"onUpdate:modelValue":u[3]||(u[3]=N=>s.value=N)},null,8,["modelValue"])]),_:1}),n(E,null,{default:c(()=>[f("div",bn,[f("span",null,[C(" 等级： "),n(v,{expression:`L(x)=\\sqrt{h_a + h_b x}=${r(d).toFixed(2)}`},null,8,["expression"])]),f("span",null,"最大血量："+b(r(_)),1)])]),_:1}),n(E,null,{default:c(()=>[C(" 银币： "),n(v,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${p.mapData.calcPKGold(r(d))}`},null,8,["expression"])]),_:1}),n(E,null,{default:c(()=>[C(" 经验： "),n(v,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${p.mapData.calcPKExp(r(d))}`},null,8,["expression"])]),_:1}),n(E,null,{default:c(()=>[f("div",xn,[f("span",null,"总银币："+b(p.mapData.calcAccumulative().gold),1),f("span",null,"总经验："+b(p.mapData.calcAccumulative().exp),1),Sn])]),_:1}),n(Xl,{"hp-data":r(g),height:100*Math.sqrt(p.mapMonsterData.length)},null,8,["hp-data","height"]),n(Dn,{"map-data":p.mapData,mapMonsterData:p.mapMonsterData,level:r(d),diff:s.value},null,8,["map-data","mapMonsterData","level","diff"])],64)}}}),Nn={class:"text-center markup-table table-auto"},wn=f("thead",null,[f("th",null,"Boss"),f("th",null,"权重"),f("th",null,"概率"),f("th",null,"难度系数")],-1),Rn=B({__name:"UmapRandomBossTable",props:{mapData:{}},setup(o){const t=o,{mapData:e}=Vl(t);let a=0;const s=()=>M.zip(e.value.randomBossList,Wl(e.value.randomBossList.map(p=>p[0]))).map(p=>({index:a++,id:p[0][1],weight:p[1],diff:parseFloat(p[0][2])})),i=ne(s()),d=W(null),_=F(()=>M.sumBy(i,"weight"));ve(e,()=>i.splice(0,i.length,...s())),ve(i,()=>{const p=jl(i.map(u=>u.weight));e.value.randomBossList=i.map((u,I)=>[p[I],u.id,u.diff.toFixed(1),{}])},{deep:!0});const g=p=>{i.push({index:a++,id:p,weight:1,diff:1}),d.value=null};return(p,u)=>{const I=ut,T=fe;return h(),x("table",Nn,[wn,f("tbody",null,[(h(!0),x(V,null,$(r(i),(E,D)=>(h(),x("tr",null,[f("td",null,[(h(),y(I,{key:E.index,modelValue:E.id,"onUpdate:modelValue":v=>E.id=v,options:r(Cl),filterable:"",clearable:"",onClear:v=>r(i).removeAt(D),size:"small",style:{width:"200px"}},null,8,["modelValue","onUpdate:modelValue","options","onClear"]))]),f("td",null,[n(T,{modelValue:E.weight,"onUpdate:modelValue":v=>E.weight=v,min:0,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])]),f("td",null,b((E.weight/r(_)).toFixed(3)),1),f("td",null,[n(ra,{modelValue:E.diff,"onUpdate:modelValue":v=>E.diff=v,style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])])]))),256)),f("tr",null,[f("td",null,[n(I,{modelValue:r(d),"onUpdate:modelValue":u[0]||(u[0]=E=>ce(d)?d.value=E:null),options:r(Cl),filterable:"",onChange:g,size:"small"},null,8,["modelValue","options"])])])])])}}}),Cn={class:"text-center markup-table"},On=f("thead",null,[f("th",null,"狼"),f("th",null,"权重"),f("th",null,"概率"),f("th",null,"pop")],-1),Kn=B({__name:"UmapWolfTable",props:{mapData:{}},setup(o){const t=o,{mapData:e}=Vl(t);let a=0;const s=()=>M.zip(e.value.monsterProportion,Wl(e.value.monsterProportion.map(u=>u[0]))).map(u=>({index:a++,id:u[0][1],weight:u[1]})),i=ne(s()),d=W(null),_=F(()=>i.map(u=>pe.getOnlyExample().getData(u.id))),g=F(()=>M.sumBy(i,"weight"));ve(e,()=>i.splice(0,i.length,...s())),ve(i,()=>{const u=jl(i.map(I=>I.weight));e.value.monsterList=i.map(I=>I.id),e.value.monsterProportion=i.map((I,T)=>[u[T],I.id])},{deep:!0});const p=u=>{i.push({index:a++,id:u,weight:1}),d.value=null};return(u,I)=>{const T=ut,E=fe;return h(),x("table",Cn,[On,f("tbody",null,[(h(!0),x(V,null,$(r(i),(D,v)=>(h(),x("tr",null,[f("td",null,[(h(),y(T,{key:D.index,modelValue:D.id,"onUpdate:modelValue":N=>D.id=N,options:r(Rl),filterable:"",clearable:"",onClear:N=>r(i).removeAt(v),size:"small",style:{width:"200px"}},null,8,["modelValue","onUpdate:modelValue","options","onClear"]))]),f("td",null,[n(E,{modelValue:D.weight,"onUpdate:modelValue":N=>D.weight=N,min:0,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])]),f("td",null,b((D.weight/r(g)).toFixed(3)),1),f("td",null,b(r(_)[v].population),1)]))),256)),f("tr",null,[f("td",null,[n(T,{modelValue:r(d),"onUpdate:modelValue":I[0]||(I[0]=D=>ce(d)?d.value=D:null),options:r(Rl),filterable:"",onChange:p,size:"small"},null,8,["modelValue","options"])])])])])}}}),yn=f("span",null,"A",-1),Pn=f("span",null,"B",-1),Vn=B({__name:"UmapDataForm",props:{mapData:{default:new _t(R.$_map_Obj.m0B)},mapDataModifiers:{}},emits:rt(["export"],["update:mapData"]),setup(o){const t=W(R.$_map_Obj.m0B),e=Le(o,"mapData"),a=ne({mid:"m0B",wid:"dahuil",score:0,diff:1});El(()=>{t.value=R.$_map_Obj[a.mid],e.value=new _t(t.value)});const s=F(()=>e.value.monsterList.map(i=>pe.getOnlyExample().getData(i)));return(i,d)=>{const _=Ye,g=ut,p=be,u=wt,I=fe,T=Fl,E=Me;return h(),x(V,null,[n(_,{onClick:d[0]||(d[0]=D=>i.$emit("export",e.value))},{default:c(()=>[C("导出")]),_:1}),n(E,{model:r(a),"label-width":"120px"},{default:c(()=>[n(p,{label:"原型"},{default:c(()=>[n(g,{modelValue:r(a).mid,"onUpdate:modelValue":d[1]||(d[1]=D=>r(a).mid=D),options:r(ia),filterable:""},null,8,["modelValue","options"])]),_:1}),n(p,{label:"名称"},{default:c(()=>[n(u,{modelValue:e.value.name,"onUpdate:modelValue":d[2]||(d[2]=D=>e.value.name=D),style:{width:"200px"}},null,8,["modelValue"])]),_:1}),n(p,{label:"通关进度"},{default:c(()=>[n(I,{modelValue:e.value.scoreMax,"onUpdate:modelValue":d[3]||(d[3]=D=>e.value.scoreMax=D)},null,8,["modelValue"])]),_:1}),n(p,{label:"Population"},{default:c(()=>[n(I,{modelValue:e.value.populationMax,"onUpdate:modelValue":d[4]||(d[4]=D=>e.value.populationMax=D)},null,8,["modelValue"])]),_:1}),n(p,{label:"难度系数"},{default:c(()=>[yn,n(I,{modelValue:e.value.hardA,"onUpdate:modelValue":d[5]||(d[5]=D=>e.value.hardA=D),size:"small"},null,8,["modelValue"]),Pn,n(I,{modelValue:e.value.hardB,"onUpdate:modelValue":d[6]||(d[6]=D=>e.value.hardB=D),size:"small"},null,8,["modelValue"])]),_:1}),n(p,{label:"该地图的狼"},{default:c(()=>[n(Kn,{mapData:e.value,style:{width:"100%"}},null,8,["mapData"])]),_:1}),n(p,{label:"随机 Boss"},{default:c(()=>[n(Rn,{mapData:e.value,style:{width:"100%"}},null,8,["mapData"])]),_:1}),n(T),n(da,{mapData:e.value,mapMonsterData:r(s)},null,8,["mapData","mapMonsterData"])]),_:1},8,["model"])],64)}}}),Mn=B({__name:"index",setup(o){const{toClipboard:t}=Il(),e=W(),a=W("wolf"),s=W(!1),i=W({}),d=W(""),_=W(),g=u=>{s.value=!0;const I={name:u.name,pass_score:u.scoreMax,yield_val:u.hardA,hard_ness:u.hardB,pop_max:u.populationMax,wolf_proportion:u.monsterProportion,random_boss:u.randomBossList};i.value=I,d.value=JSON.stringify(I)},p=()=>{t(d.value,_.value.$el),Et.success("已复制到剪贴板")};return(u,I)=>{const T=Ct,E=ht,D=pt,v=Ot,N=Ye,w=Ul;return h(),x(V,null,[n(v,null,{default:c(()=>[n(T,{md:16},{default:c(()=>[n(Vn,{"map-data":r(e),"onUpdate:mapData":I[0]||(I[0]=O=>ce(e)?e.value=O:null),onExport:g},null,8,["map-data"])]),_:1}),n(T,{md:8,sm:16},{default:c(()=>[r(e)?(h(),y(D,{key:0,modelValue:r(a),"onUpdate:modelValue":I[1]||(I[1]=O=>ce(a)?a.value=O:null),class:"chart-area"},{default:c(()=>[n(E,{label:"狼分布",name:"wolf"},{default:c(()=>[n(oa,{"map-data":r(e)},null,8,["map-data"])]),_:1})]),_:1},8,["modelValue"])):de("",!0)]),_:1})]),_:1}),n(w,{modelValue:r(s),"onUpdate:modelValue":I[2]||(I[2]=O=>ce(s)?s.value=O:null),title:"导出数据"},{default:c(()=>[n(r(kl),{data:r(i),virtual:"",deep:2},null,8,["data"]),n(N,{onClick:p,ref_key:"someRef",ref:_},{default:c(()=>[C("复制到剪贴板")]),_:1},512)]),_:1},8,["modelValue"])],64)}}}),kn=Object.freeze(Object.defineProperty({__proto__:null,default:Mn},Symbol.toStringTag,{value:"Module"})),Un={key:0,style:{"text-align":"center"}},Fn={key:1,style:{"text-align":"center"}},$n=B({__name:"BossDistribChart",props:{mid:{}},setup(o){const t=o;Kt([Oa,yt,Pt,Ka,Vt,Mt]);const e=ne({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:[{left:"5%",right:"4%",bottom:"52%",containLabel:!0},{left:"5%",right:"4%",top:"52%",containLabel:!0}],dataset:{source:[]},xAxis:[{gridIndex:0},{gridIndex:1}],yAxis:[{type:"category",gridIndex:0},{type:"category",gridIndex:1}],series:[]}),a=F(()=>{var s;return!!((s=R.$_map_Obj[t.mid].random_boss)!=null&&s.length)});return El(()=>{const s=R.$_map_Obj[t.mid].random_boss;if(!s)return;const i=s.map((p,u)=>{var I;return[Object.keys(p[3].properties.card)[0],p[1],Math.round((p[0]-(((I=s[u-1])==null?void 0:I[0])??0))*1e3)/10]}),d=M.uniq(i.map(p=>p[0])).sort(),_=M.uniq(i.map(p=>p[1])).sort(),g=[["boss",...d]].concat(_.map(p=>[p].concat(new Array(d.length).fill(0))));for(const p of i)g[_.indexOf(p[1])+1][d.indexOf(p[0])+1]=p[2];for(let p=0;p<d.length;p++)g[0][p+1]=ge(d[p]);for(let p=0;p<_.length;p++)g[p+1][0]=ge(_[p]);e.dataset.source=g,e.series=[...new Array(d.length).fill({type:"bar",stack:`${t.mid}-totalA`,label:{show:!0},emphasis:{focus:"series"}}),...new Array(_.length).fill({type:"bar",stack:`${t.mid}-totalB`,seriesLayoutBy:"row",label:{show:!0},emphasis:{focus:"series"},xAxisIndex:1,yAxisIndex:1})]}),(s,i)=>(h(),x("div",null,[r(a)?(h(),x("h2",Un,"随机Boss奖励分布")):(h(),x("h2",Fn,"本图没有随机Boss哦")),r(a)?(h(),y(r(Ml),{key:2,option:r(e),autoresize:"","update-options":{notMerge:!0},style:{height:"600px"}},null,8,["option"])):de("",!0)]))}}),Bn=B({__name:"UmapInfoForm",props:{mid:{},midModifiers:{},mapData:{default:Z.getMapData("m1")},mapDataModifiers:{}},emits:["update:mid","update:mapData"],setup(o){const t=Le(o,"mid"),e=ne({mid:"m1",mid2:"",wid:"dahuil",diff:1}),a=F(()=>R.$_map_Obj[e.mid]),s=Le(o,"mapData"),i=F(()=>e.mid2===""?s.value:Z.getMapData(e.mid2)),d=F(()=>s.value.monsterList.map(p=>pe.getOnlyExample().getData(p)));El(()=>{t.value=e.mid,s.value=Z.getMapData(e.mid)});const _=p=>p.map(u=>{let I=R.$_wolfAtt_Obj[u[1]];return{id:u[1],prob:u[0],name:I.name,pop:I.pop}}),g=p=>p?p.map(u=>{let I=R.$_wolfAtt_Obj[u[1]];return{id:u[1],prob:u[0],name:I.name,diff:parseFloat(u[2])}}):[];return(p,u)=>{const I=ut,T=ze,E=be,D=ke,v=Ve,N=Fl,w=Me;return h(),y(w,{model:r(e),"label-width":"120px"},{default:c(()=>[n(E,{label:"地图"},{default:c(()=>[n(I,{modelValue:r(e).mid,"onUpdate:modelValue":u[0]||(u[0]=O=>r(e).mid=O),options:r(ia),filterable:""},null,8,["modelValue","options"]),n(T,{effect:"light"},{default:c(()=>[C(" 难度系数："+b(s.value.hardA)+","+b(s.value.hardB),1)]),_:1}),n(T,{effect:"light"},{default:c(()=>[C(" Population："+b(s.value.populationMax),1)]),_:1})]),_:1}),n(E,{label:"引狼到"},{default:c(()=>[n(v,{modelValue:r(e).mid2,"onUpdate:modelValue":u[1]||(u[1]=O=>r(e).mid2=O),filterable:"",clearable:""},{default:c(()=>[n(D,{label:"无",value:""}),(h(!0),x(V,null,$(r(na),O=>(h(),y(D,{key:O.id,label:`${O.id} ${O.name}`,value:O.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(E,{label:"该地图的狼"},{default:c(()=>[(h(!0),x(V,null,$(_(r(a).wolf_proportion),O=>(h(),y(T,{key:O.id,type:"success",class:"mx-1 tag-button",effect:"light",onClick:le=>r(e).wid=O.id},{default:c(()=>[f("sub",null,b(O.prob),1),C(" "+b(O.name)+" ",1),f("sup",null,b(O.pop),1)]),_:2},1032,["onClick"]))),128))]),_:1}),"random_boss"in r(a)?(h(),y(E,{key:0,label:"随机 Boss"},{default:c(()=>[(h(!0),x(V,null,$(g(r(a).random_boss),(O,le)=>(h(),y(T,{key:le,type:"success",class:"mx-1 tag-button",effect:"light",onClick:k=>{r(e).wid=O.id,r(e).diff=O.diff}},{default:c(()=>[f("sub",null,b(O.prob),1),C(" "+b(O.name)+" ",1),f("sub",null,b(O.diff),1)]),_:2},1032,["onClick"]))),128))]),_:1})):de("",!0),n(N),n(da,{mapData:r(i),mapMonsterData:r(d),wid:r(e).wid,"onUpdate:wid":u[2]||(u[2]=O=>r(e).wid=O),diff:r(e).diff,"onUpdate:diff":u[3]||(u[3]=O=>r(e).diff=O)},null,8,["mapData","mapMonsterData","wid","diff"])]),_:1},8,["model"])}}}),Hn=qe(Bn,[["__scopeId","data-v-3cb9b010"]]),Gn=B({__name:"index",setup(o){const t=W("m1"),e=W(),a=W("wolf");return(s,i)=>{const d=Ct,_=ht,g=pt,p=Ot;return h(),y(p,null,{default:c(()=>[n(d,{md:16},{default:c(()=>[n(Hn,{mid:r(t),"onUpdate:mid":i[0]||(i[0]=u=>ce(t)?t.value=u:null),"map-data":r(e),"onUpdate:mapData":i[1]||(i[1]=u=>ce(e)?e.value=u:null)},null,8,["mid","map-data"])]),_:1}),n(d,{md:8,sm:16},{default:c(()=>[r(e)?(h(),y(g,{key:0,modelValue:r(a),"onUpdate:modelValue":i[2]||(i[2]=u=>ce(a)?a.value=u:null),class:"chart-area"},{default:c(()=>[n(_,{label:"狼分布",name:"wolf"},{default:c(()=>[n(oa,{"map-data":r(e)},null,8,["map-data"])]),_:1}),n(_,{label:"Boss分布",name:"boss"},{default:c(()=>[n($n,{mid:r(t)},null,8,["mid"])]),_:1})]),_:1},8,["modelValue"])):de("",!0)]),_:1})]),_:1})}}}),Wn=Object.freeze(Object.defineProperty({__proto__:null,default:Gn},Symbol.toStringTag,{value:"Module"})),jn=f("p",null,"前排解释：",-1),Xn=f("p",null,"狼的等级随进度增加而增加。难度系数 hardA 影响初始狼等级，hardB 影响等级增长速率。",-1),zn=f("p",null,"population 影响一波狼的容量。每只狼都会占用一定容量。",-1),Yn=f("p",null,"不同随机boss有出现权重。出现率、难度、奖励水平是相对应的，难的比较稀有，奖励也会比较好。",-1),qn=B({__name:"index",setup(o){const t=M.map(R.$_map_Obj,(s,i)=>M.extend(s,{id:i})),e=(s,i)=>{let d=s.need_lev||0,_=i.need_lev||0;return d-_},a=s=>s.map(i=>{const d=pe.getOnlyExample().getData(i[1]);return{prob:i[0],name:d.name,pop:d.population}});return(s,i)=>{const d=je,_=ze,g=Xe;return h(),x(V,null,[jn,Xn,zn,Yn,n(g,{data:r(t),"default-sort":{prop:"index",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},height:"600px",style:{width:"100%","font-size":"80%"},class:"testbox"},{default:c(()=>[n(d,{prop:"index",label:"index",sortable:"",align:"center",fixed:"",width:"70"}),n(d,{prop:"id",label:"id",sortable:"",align:"center",fixed:"",width:"80"}),n(d,{prop:"name",label:"name",sortable:"",align:"center",fixed:"",width:"80"}),n(d,{prop:"pass_score",label:"scoreMax",sortable:"",align:"center"}),n(d,{label:"hardnessFactor"},{default:c(()=>[n(d,{prop:"yield_val",label:"hardA",sortable:"",align:"center"}),n(d,{prop:"hard_ness",label:"hardB",sortable:"",align:"center"})]),_:1}),n(d,{prop:"pop_max",label:"populationMax",sortable:"",align:"center"}),n(d,{prop:"interval",label:"unkennelDelay",sortable:"",align:"center"}),n(d,{prop:"interval_rule",label:"unkennelRule",sortable:"",align:"center"}),n(d,{prop:"teleport_rule",label:"teleportRule",sortable:"",align:"center"}),n(d,{prop:"need_lev",label:"needLevel",sortable:"","sort-method":e,align:"center"}),n(d,{prop:"pass_by",label:"passBy",align:"center"},{default:c(p=>[C(b(p.row.pass_by.map(u=>r(R).$_map_Obj[u].name).join(", ")),1)]),_:1}),n(d,{prop:"wolf_proportion",label:"monsterList","cell-style":{"text-align":"left"}},{default:c(p=>[(h(!0),x(V,null,$(a(p.row.wolf_proportion),u=>(h(),y(_,{key:u.prob,class:"ml-2"},{default:c(()=>[f("sub",null,b(u.prob),1),C(" "+b(u.name)+" ",1),f("sup",null,b(u.pop),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["data"])],64)}}}),Jn=Object.freeze(Object.defineProperty({__proto__:null,default:qn},Symbol.toStringTag,{value:"Module"})),Zn=B({__name:"index",setup(o){const t=ne({level:1}),e=F(()=>((2*(t.level+1)+3)*(t.level+1)+4)*(t.level+1)+20),a=F(()=>Math.round((.015*t.level+.8)*t.level+2)),s=F(()=>Math.floor(t.level/4+1)),i=F(()=>(t.level+7)*a.value);return(d,_)=>{const g=fe,p=be,u=Me;return h(),y(u,{model:r(t),"label-width":"120px"},{default:c(()=>[n(p,{label:"等级"},{default:c(()=>[n(g,{modelValue:r(t).level,"onUpdate:modelValue":_[0]||(_[0]=I=>r(t).level=I),min:1},null,8,["modelValue"])]),_:1}),n(p,{label:"升级经验"},{default:c(()=>[f("label",null,b(r(e)),1)]),_:1}),n(p,{label:"力量"},{default:c(()=>[f("label",null,b(r(a)),1)]),_:1}),n(p,{label:"连升等级"},{default:c(()=>[f("label",null,b(r(s)),1)]),_:1}),n(p,{label:"苦工价格"},{default:c(()=>[f("label",null,b(r(i)),1)]),_:1})]),_:1},8,["model"])}}}),Qn=Object.freeze(Object.defineProperty({__proto__:null,default:Zn},Symbol.toStringTag,{value:"Module"})),it=class it extends He{constructor(e,a=1,s=1,i=0){super();l(this,"index",0);l(this,"m_level",0);l(this,"exp",0);l(this,"hp",0);l(this,"hpMax",0);l(this,"hpRate");l(this,"skillList",[]);this.tag="Monster",this.updateData(e),this.hpRate=s,this.updateLevelExp(a,i),this.index=it.COUNT++}updateData(e){e==""&&(e="dahuil");let a=e.indexOf("|");a!=-1&&(e=e.slice(0,a)),this.m_data=pe.getOnlyExample().getData(e),this.m_data==null&&(this.m_data=pe.getOnlyExample().getData("dahuil"))}createSkills(e){return e.map(a=>new _e(a[He.SKILL_ID],a[He.SKILL_LEVEL],this).getSubClasses())}initSkills(){this.skills={};const e=this.data.skills;if(e!=null){this.skillList=this.createSkills(e);for(const a of this.skillList)this.skills[a.data.kindId]=a}}conflictSkillList(e){const a=[];if(e==null)return[];const s=R.$_conflict_skill_kind,i=e.data.kindId;this.skills[i]&&a.push(_e.getKindName(i));for(const d of s)if(d.indexOf(i)!=-1)for(let _=0;_<d.length;_++)i!=d[_]&&this.skills[d[_]]&&a.push(_e.getKindName(d[_]));return a}getSkillById(e){let a,s=null;for(a in this.skills)if(s=this.skills[a],s.data.id==e)return s;return null}updateLevelExp(e=0,a=0){this.level=e,this.exp=a}get allSkillsScore(){let e=1;for(const a of this.skillList)a.enabled&&(e*=this.getSkillScore(a.data.id,a.level));return e}getSkillScore(e,a){let s=null,i=R.$_skill_grade_score,d=e.indexOf("_");return e.indexOf("_")==-1?1:(s=e.slice(d+1,e.length),i[s]&&i[s][String(a)]?i[s][String(a)]:1)}get levelMax(){return R.$_camp_wolf_lv_max}get expMax(){let e=this.m_level+1;return Math.round(this.monsterData.expMaxA+this.monsterData.expMaxB*e+this.monsterData.expMaxC*e*e+this.monsterData.expMaxD*e*e*e)}get level(){return this.m_level}set level(e){this.m_level=Math.max(Math.min(e,this.levelMax),0),Z.currentMap&&Z.currentMap&&(this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate)),this.hpMax<=1&&(this.hpMax=1)}refreshLevel(){this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate*1),this.hpMax<=1&&(this.hpMax=1)}get monsterData(){return this.m_data}get power(){let e=R.$_wolf_worth_factor,a=this.hpMax,s=this.monsterData.speedBase,i=this.allSkillsScore;return Math.round(a*s*i*e[2])}get skillInfo(){if(this.skills==null)return"";const e=Object.values(this.skills);return e.sort((a,s)=>a.index-s.index),e.map(a=>a.skillInfo).join("")}};l(it,"MONSTER_SAY_ARRAY",[m.getLanguageStr(1250),m.getLanguageStr(1251),m.getLanguageStr(1252),m.getLanguageStr(1253),m.getLanguageStr(1254),m.getLanguageStr(1255),m.getLanguageStr(1256),m.getLanguageStr(1257),m.getLanguageStr(1258),m.getLanguageStr(1259)]),l(it,"WEIGHTILY_SIZE",487500),l(it,"COUNT",0);let mt=it;const ei=B({__name:"WolfSelect",setup(o){return(t,e)=>{const a=ke,s=xa,i=Ve;return h(),y(i,{filterable:""},{default:c(()=>[n(s,{label:"前线"},{default:c(()=>[(h(!0),x(V,null,$(r(an),d=>(h(),y(a,{key:d.id,label:d.label,value:d.id},null,8,["label","value"]))),128))]),_:1}),n(s,{label:"防线"},{default:c(()=>[(h(!0),x(V,null,$(r(aa),d=>(h(),y(a,{key:d.id,label:d.label,value:d.id},null,8,["label","value"]))),128))]),_:1}),n(s,{label:"噩梦"},{default:c(()=>[(h(!0),x(V,null,$(r(sa),d=>(h(),y(a,{key:d.id,label:d.label,value:d.id},null,8,["label","value"]))),128))]),_:1})]),_:1})}}}),ti={class:"text-xs"},li={class:"sk-tag text-xs"},ai=B({__name:"WolfSkillTable",props:{wolf:{}},emits:["change"],setup(o,{emit:t}){const e=o,a=t,s=W(),i=M.groupBy(R.$_skillAtt_Obj.monsterSkill,E=>E.kindId);M.each(i,(E,D)=>i[D]=M.sortBy(E,"id"));const d=Object.keys(i).sort();let _=ne([]);ve(()=>e.wolf.data.id,()=>{var E,D;e.wolf.initSkills(),_.length=0,_.push(...e.wolf.skillList.map((v,N)=>g(v,N))),(E=s.value)==null||E.clearSelection(),(D=s.value)==null||D.toggleAllSelection()});const g=(E,D=0)=>ne({index:D,kindId:E.data.kindId,id:E.data.id,name:E.data.name,level:E.level,levelMax:E.levelMax,score:E.skillScore,info:E.skillInfo,tags:E.skillTag1+E.skillTag2+E.skillTag3,skill:E});function p(E){E.id=i[E.kindId][0].id,E.level=1,u(E)}const u=E=>{const D=_.indexOf(E),v=new _e(E.id,E.level,e.wolf).getSubClasses();e.wolf.skillList[D]=v,Object.assign(E,g(v,D)),a("change")},I=()=>{var D;const E=g(new _e("WeakFire_X1",1,e.wolf).getSubClasses(),_.length);_.push(E),(D=s.value)==null||D.toggleRowSelection(E,!0),a("change")},T=E=>{e.wolf.skillList.forEach(D=>D.enabled=E.find(v=>v.skill==D)!==void 0)};return(E,D)=>{const v=je,N=ke,w=Ve,O=fe,le=Ye;return h(),x("div",null,[n(r(Xe),{ref_key:"skillTableRef",ref:s,data:r(_),"row-key":"index",style:{"font-size":"small"},onSelectionChange:T},{default:c(()=>[n(v,{type:"selection","reverse-selection":"",width:30}),n(v,{label:"KindId",width:160,"header-align":"center"},{default:c(k=>[n(w,{modelValue:k.row.kindId,"onUpdate:modelValue":Q=>k.row.kindId=Q,onChange:Q=>p(k.row),style:{"font-size":"small"}},{default:c(()=>[(h(!0),x(V,null,$(r(d),Q=>(h(),y(N,{key:Q,label:Q,value:Q},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(v,{label:"Id",width:200,"header-align":"center"},{default:c(k=>[n(w,{modelValue:k.row.id,"onUpdate:modelValue":Q=>k.row.id=Q,onChange:Q=>u(k.row),style:{"font-size":"small"}},{default:c(()=>[(h(!0),x(V,null,$(r(i)[k.row.kindId],Q=>(h(),y(N,{key:Q.id,label:Q.id,value:Q.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(v,{prop:"name",label:"Name",width:120,"header-align":"center",align:"center"}),n(v,{prop:"level",label:"Level",width:120,"header-align":"center",align:"center"},{default:c(k=>[n(O,{modelValue:k.row.level,"onUpdate:modelValue":Q=>k.row.level=Q,min:1,max:k.row.levelMax,size:"small",style:{width:"80px"},onChange:Q=>u(k.row)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:1}),n(v,{prop:"levelMax",label:"Level Max",width:120,"header-align":"center",align:"center"}),n(v,{prop:"score",label:"Score",width:120,"header-align":"center",align:"center"}),n(v,{label:"Info"},{default:c(k=>[f("span",ti,b(k.row.info),1),f("span",li,b(k.row.tags),1)]),_:1})]),_:1},8,["data"]),n(le,{onClick:I},{default:c(()=>[C("增加一行")]),_:1})])}}}),si=qe(ai,[["__scopeId","data-v-7964810f"]]),ni={class:"ml-2"},ii={class:"ml-8"},oi=f("p",null,"技能",-1),ri=B({__name:"WolfCalcOne",props:{wolf:{}},setup(o){const t=ne({wid:"al",level:1,expMax:0}),e=o;s();const a=i=>{e.wolf.updateData(i),s()};ve(()=>e.wolf.level,s);function s(){e.wolf.refreshLevel(),t.expMax=e.wolf.expMax}return(i,d)=>{const _=be,g=fe,p=Me;return h(),x(V,null,[n(p,{"label-width":80},{default:c(()=>[n(_,{label:"狼"},{default:c(()=>[n(ei,{modelValue:r(t).wid,"onUpdate:modelValue":d[0]||(d[0]=u=>r(t).wid=u),onChange:a},null,8,["modelValue"])]),_:1}),n(_,{label:"等级"},{default:c(()=>[n(g,{modelValue:i.wolf.m_level,"onUpdate:modelValue":d[1]||(d[1]=u=>i.wolf.m_level=u),min:1},null,8,["modelValue"]),f("span",ni,"最高等级："+b(i.wolf.levelMax),1)]),_:1}),n(_,{label:"速度"},{default:c(()=>[C(b(i.wolf.monsterData.speedBase),1)]),_:1}),n(_,{label:"升级经验"},{default:c(()=>[C(b(r(t).expMax),1)]),_:1}),n(_,{label:"血量"},{default:c(()=>[C(b(i.wolf.hpMax),1)]),_:1}),n(_,{label:"实力"},{default:c(()=>[C(b(i.wolf.power),1)]),_:1})]),_:1}),f("div",ii,[oi,n(si,{wolf:i.wolf},null,8,["wolf"])])],64)}}}),ui=f("h2",null,"狼相关计算",-1),di=B({__name:"index",setup(o){const t=ne([new mt("dahuil")]),e=W(t[0].index),a=F(()=>{const[i,d]=R.$_wolf_worth_factor;return Math.round(Math.pow(M.sumBy(t,_=>Math.pow(_.power,i)),d))}),s=(i,d)=>{if(d==="add"){const _=new mt("dahuil");t.push(_),e.value=_.index}else if(d==="remove"){const _=t;let g=e.value;g===i&&_.forEach((p,u)=>{if(p.index===i){const I=_[u+1]||_[u-1];I&&(g=I.index)}}),e.value=g,t.splice(t.findIndex(p=>p.index===i),1)}};return(i,d)=>{const _=ht,g=pt;return h(),x("div",null,[ui,f("div",null,"总实力："+b(r(a)),1),n(g,{modelValue:r(e),"onUpdate:modelValue":d[0]||(d[0]=p=>ce(e)?e.value=p:null),type:"border-card",editable:"",onEdit:s,class:"m-4"},{default:c(()=>[(h(!0),x(V,null,$(r(t),(p,u)=>(h(),y(_,{key:p.index,label:p.monsterData.name,name:p.index},{default:c(()=>[n(ri,{wolf:p},null,8,["wolf"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])}}}),ci=Object.freeze(Object.defineProperty({__proto__:null,default:di},Symbol.toStringTag,{value:"Module"})),ft=o=>(yl("data-v-ca5efb48"),o=o(),Pl(),o),_i=ft(()=>f("h1",null,"狼数据",-1)),mi=ft(()=>f("p",null,"前排解释：",-1)),pi=ft(()=>f("p",null,"pop 为狼在一波中占的容量，一般来说 pop 越大则出现机会越少。",-1)),hi=ft(()=>f("p",null,"charm 影响到寻路，charm 为负值越小则其他狼越会排斥它。",-1)),gi=ft(()=>f("p",null,"hp_factor 影响血量关于等级增长，是二次函数系数。",-1)),fi={class:"sk-list"},Ai={key:0,class:"sk-debuff"},Ei={key:1,class:"sk-buff"},Ii={class:"sk-name"},Ti={class:"sk-id"},Li={class:"sk-info"},vi={key:2,class:"sk-tag"},Di={key:3,class:"sk-tag"},bi={key:4,class:"sk-tag"},xi=B({__name:"index",setup(o){console.log("init wolfs");const t=M.map(R.$_wolfAtt_Obj,(e,a)=>a).sort().map(e=>{let a=new mt(e,0,0);a.initSkills();let s=a.monsterData;return{id:e,data:s,skills:Object.values(a.skills)}});return console.log(t),(e,a)=>{const s=je,i=Xe;return h(),x(V,null,[_i,mi,pi,hi,gi,n(i,{data:r(t),"default-sort":{prop:"id",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},"row-key":"id","max-height":"600",style:{width:"100%","max-width":"1200px"}},{default:c(()=>[n(s,{prop:"id",label:"id",sortable:"",width:150}),n(s,{prop:"data.name",label:"name",sortable:""}),n(s,{prop:"data.speedBase",label:"speedBase",sortable:""}),n(s,{prop:"data.population",label:"population",sortable:""}),n(s,{prop:"data.charm",label:"charm",sortable:"",width:100}),n(s,{label:"size"},{default:c(()=>[n(s,{prop:"data.width",label:"width",sortable:"",width:100}),n(s,{prop:"data.height",label:"height",sortable:"",width:100})]),_:1}),n(s,{label:"hpFactor"},{default:c(()=>[n(s,{prop:"data.hpMaxA",label:"a",sortable:"",width:100}),n(s,{prop:"data.hpMaxB",label:"b",sortable:"",width:100}),n(s,{prop:"data.hpMaxC",label:"c",sortable:"",width:100})]),_:1}),n(s,{label:"skills",type:"expand",width:"60"},{default:c(d=>[f("div",fi,[(h(!0),x(V,null,$(d.row.skills,_=>(h(),x("p",{key:_.data.id},[_.isDebuff?(h(),x("span",Ai,"↓")):(h(),x("span",Ei,"↑")),f("span",Ii,b(_.name),1),f("span",Ti,"["+b(_.data.id)+"]",1),f("span",Li,b(_.skillInfo),1),_.skillTag1?(h(),x("span",vi,b(_.skillTag1),1)):de("",!0),_.skillTag2?(h(),x("span",Di,b(_.skillTag2),1)):de("",!0),_.skillTag3?(h(),x("span",bi,b(_.skillTag3),1)):de("",!0)]))),128))])]),_:1})]),_:1},8,["data"])],64)}}}),Si=qe(xi,[["__scopeId","data-v-ca5efb48"]]),Ni=Object.freeze(Object.defineProperty({__proto__:null,default:Si},Symbol.toStringTag,{value:"Module"}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

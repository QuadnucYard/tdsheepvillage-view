var na=Object.defineProperty;var ia=(o,t,e)=>t in o?na(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var a=(o,t,e)=>(ia(o,typeof t!="symbol"?t+"":t,e),e);import{E as bt,a as xt,b as We,c as je,d as Xe,e as Pe,f as Me,g as Ve,h as De,i as fe,j as ra,k as Ye,l as Rl,m as Nt,n as fl,o as wt,p as Al,q as El,r as oa,s as Rt,t as Cl,u as ua}from"./element-plus-745e52c6.js";import{l as da}from"./vatex-5c8f9151.js";import{ae as ze,o as g,S as P,R as c,an as Ol,T as Il,ao as ca,d as G,b as Y,i as _a,c as D,O as i,u as d,B as Ae,a as A,P as M,ag as H,V as x,W as T,X as pe,y as B,U as yl,J as ne,ap as ct,aq as Be,n as ma,L as ha,ar as pa,e as ot,I as ga,w as Tl,as as Kl,at as Pl}from"./@vue-fd9eda8b.js";import{B as Ml}from"./vue-echarts-af19811e.js";import{V as Vl}from"./vue-json-pretty-42d122c3.js";import{c as fa,a as Aa,u as Ea,b as Ia}from"./vue-router-fc0acb93.js";import{l as U}from"./lodash-es-f1aaab28.js";import{u as Ta,k as La}from"./@element-plus-ed9a5cee.js";import{u as kl}from"./vue-clipboard3-9b4f599e.js";/* empty css                            */import{u as Ct,i as Ll,a as Ot,b as yt,c as Kt,d as Pt,e as va,f as Da,g as Sa,h as ba,j as xa}from"./echarts-d3dfb9e8.js";import{C as Na}from"./color-b12075af.js";import{d as re,l as wa,a as Mt,b as Ra,w as Ca}from"./assets-0d483344.js";import{X as Oa}from"./x2js-8ae16efe.js";import"./async-validator-dee29e8b.js";import"./@vueuse-2fb746c0.js";import"./@ctrl-f8748455.js";import"./@sxzz-c75af06c.js";import"./memoize-one-297ddbcb.js";import"./escape-html-099bfe2e.js";import"./@xmldom-8222efe8.js";import"./normalize-wheel-es-ed76fb12.js";import"./katex-32f78592.js";import"./resize-detector-a5205554.js";import"./vue-d1503af4.js";import"./clipboard-77e6e508.js";import"./tslib-54e39b60.js";import"./zrender-5b234405.js";import"./color-string-327061cf.js";import"./color-name-b7949e8c.js";import"./simple-swizzle-d8bc59f1.js";import"./is-arrayish-4445f582.js";import"./color-convert-01838e1d.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();(function(){String.prototype.isNullOrEmpty||(String.prototype.isNullOrEmpty=function(){return!this}),Array.prototype.firstOrDefault||(Array.prototype.firstOrDefault=function(o){for(let t=0;t<this.length;t++){const e=this[t];if(o(e))return e}return null}),Array.prototype.removeAt||(Array.prototype.removeAt=function(o){const t=this[o];return this.splice(o,1),t}),Array.prototype.removeOne||(Array.prototype.removeOne=function(o){const t=this.indexOf(o);return t>=0?(this.splice(t,1),!0):!1}),Array.prototype.removeRange||(Array.prototype.removeRange=function(o){for(let t=0;t<o.length;t++)this.removeOne(o[t])}),Array.prototype.addRange||(Array.prototype.addRange=function(o){for(let t=0;t<o.length;t++)this.push(o[t])}),Array.prototype.contains||(Array.prototype.contains=function(o){return this.indexOf(o)!=-1}),Array.prototype.empty||(Array.prototype.empty=function(){return this.length==0})})();const qe=(o,t)=>{const e=o.__vccOpts||o;for(const[l,s]of t)e[l]=s;return e},ya={};function Ka(o,t){const e=ze("router-view");return g(),P(e,null,{default:c(({Component:l})=>[(g(),P(Ol,null,[(g(),P(Il(l)))],1024))]),_:1})}const Pa=qe(ya,[["render",Ka]]),Ma="modulepreload",Va=function(o,t){return new URL(o,t).href},bl={},_e=function(t,e,l){if(!e||e.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(e.map(n=>{if(n=Va(n,l),n in bl)return;bl[n]=!0;const u=n.endsWith(".css"),r=u?'[rel="stylesheet"]':"";if(!!l)for(let h=s.length-1;h>=0;h--){const b=s[h];if(b.href===n&&(!u||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${r}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Ma,u||(p.as="script",p.crossOrigin=""),p.href=n,document.head.appendChild(p),u)return new Promise((h,b)=>{p.addEventListener("load",h),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t()).catch(n=>{const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=n,window.dispatchEvent(u),!u.defaultPrevented)throw n})},ka=(o,t)=>{const e=o[t];return e?typeof e=="function"?e():Promise.resolve(e):new Promise((l,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})},Ul=[{name:"notice",label:"Notice"},{name:"user",label:"User"},{name:"towers",label:"Towers"},{name:"wolfs",label:"Wolfs"},{name:"umaps",label:"Umaps"},{name:"umap-detail",label:"Umap Detail"},{name:"umap-design",label:"Umap Design"},{name:"dmaps",label:"Dream Maps"},{name:"dmap-detail",label:"Dream Map Detail"},{name:"wolf-calc",label:"Wolf Calculation"},{name:"baoxiang",label:"Baoxiang Properties"},{name:"dream-design",label:"Dream Design"},{name:"tower-design",label:"Tower Design"}],Ua=[{path:"/",name:"index",component:()=>_e(()=>Promise.resolve().then(()=>Ha),void 0,import.meta.url),children:Ul.map(o=>({path:"/"+o.name,name:o.name,meta:{keepAlive:!0},component:()=>ka(Object.assign({"../views/sections/baoxiang/index.vue":()=>_e(()=>Promise.resolve().then(()=>ss),void 0,import.meta.url),"../views/sections/dmap-detail/index.vue":()=>_e(()=>Promise.resolve().then(()=>Ns),void 0,import.meta.url),"../views/sections/dmaps/index.vue":()=>_e(()=>Promise.resolve().then(()=>ys),void 0,import.meta.url),"../views/sections/dream-design/index.vue":()=>_e(()=>Promise.resolve().then(()=>Vs),void 0,import.meta.url),"../views/sections/notice/index.vue":()=>_e(()=>Promise.resolve().then(()=>Hs),void 0,import.meta.url),"../views/sections/tower-design/index.vue":()=>_e(()=>Promise.resolve().then(()=>ln),void 0,import.meta.url),"../views/sections/towers/index.vue":()=>_e(()=>Promise.resolve().then(()=>on),void 0,import.meta.url),"../views/sections/umap-design/index.vue":()=>_e(()=>Promise.resolve().then(()=>En),void 0,import.meta.url),"../views/sections/umap-detail/index.vue":()=>_e(()=>Promise.resolve().then(()=>On),void 0,import.meta.url),"../views/sections/umaps/index.vue":()=>_e(()=>Promise.resolve().then(()=>kn),void 0,import.meta.url),"../views/sections/user/index.vue":()=>_e(()=>Promise.resolve().then(()=>Fn),void 0,import.meta.url),"../views/sections/wolf-calc/index.vue":()=>_e(()=>Promise.resolve().then(()=>Zn),void 0,import.meta.url),"../views/sections/wolfs/index.vue":()=>_e(()=>Promise.resolve().then(()=>pi),void 0,import.meta.url)}),`../views/sections/${o.name}/index.vue`)})),redirect:"notice"}],Fa=fa({history:Aa("/tdsheepvillage-view/"),routes:Ua});const vl=ca(Pa);vl.use(Fa).use(da);vl.component("VChart",Ml);vl.mount("#app");const $a={class:"content"},Ba=G({__name:"index",setup(o){const t=Ea(),e=Ia(),l=Y(""),s=(n,u)=>{t.push({name:n.paneName})};return _a(()=>{l.value=e.name}),(n,u)=>{const r=xt,m=bt,p=ze("router-view");return g(),D("main",null,[i(m,{modelValue:d(l),"onUpdate:modelValue":u[0]||(u[0]=h=>Ae(l)?l.value=h:null),type:"card",onTabClick:s},{default:c(()=>[(g(!0),D(M,null,H(d(Ul),h=>(g(),P(r,{key:h.name,label:h.label,name:h.name},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),A("div",$a,[i(p,null,{default:c(({Component:h})=>[(g(),P(Ol,null,[(g(),P(Il(h)))],1024))]),_:1})])])}}});const Ha=Object.freeze(Object.defineProperty({__proto__:null,default:Ba},Symbol.toStringTag,{value:"Module"}));function Ga(o,t=!1){t||(o=o.toLowerCase());let e=1315423911;for(let l=o.length-1;l>=0;l--)e^=(e<<5)+o.charCodeAt(l)+(e>>2);return e&2147483647}const Wa=function(o){return/^[a-zA-Z]+$/.test(o)},ja=function(o,t){return o<t?-1:o>t?1:0};function*Xa(o){let t=0;for(const e of o)t+=e,yield t}function ke(o){if(o===0)return 1;if(o=Math.abs(o),o%1===0)return Math.pow(10,Math.floor(Math.log10(o)));const t=o.toString();return Math.pow(10,t.indexOf(".")-t.length+1)}function Vt(o){return U.mapValues(o,(t,e)=>kt(t,e))}function kt(o,t){return U.mapValues(o,(e,l)=>Ya(e,t,l))}function Ya(o,t,e){return{...o,type:t,id:e}}const N=function(){const o=new Oa;let t=re.camp_system_simple;const e=r=>parseInt(new RegExp("(?<=m).+(?=[A-Z]*)").exec(Wa(r[r.length-1])?r:r+"A")[0],36),l=Object.keys(re.umaps).sort((r,m)=>ja(e(r),e(m))),s=Vt(re.building),n=Vt(re.skill),u={$_global_language_str:o.xml2dom(wa),$_global_properties:Vt(re.properties),$_skillAtt_Obj:n,$_skillPackage_Obj:re.skill_package,$_map_Obj:re.umaps,$_towerAtt_Obj:s.tower,$_bulletAtt_Obj:re.bullet,$_wolfAtt_Obj:kt(re.wolfs,"wolf"),$_wallAtt_Obj:s.wall,$_barrierAtt_Obj:re.barrier,$_level_up_gift:re.level_up_gift,$_pass_map_gift:re.pass_map_gift,$_wave_hard_Obj:re.wolf_hard_ness,$Maps:re.version_ctrl.Maps,$_wolfs_unlock_lv:t.camp_wolf_lv_max_factor,$_wolfs_unlock_gold:t.camp_wolf_gold_max_factor,$_camp_hold_time:t.hold_time,$_camp_pk_cd_time:t.pk_cd_time,$_camp_pk_times_max:t.pk_times_max,$_camp_defend_times_max:t.defend_times_max,$_camp_pk_arena_times_max:t.pk_arena_times_max,$_camp_defend_arena_times_max:t.defend_arena_times_max,$_camp_mining_rate:t.mine_rate,$_camp_sell_building_dis:t.sell_building_dis,$_tower_worth_factor:t.tower_worth_factor,$_wolf_worth_factor:t.wolf_worth_factor,$_defend_map_snarp_max:t.defend_map_snarp_max,$_defend_succ_factor:t.defend_succ_factor,$_defend_failed_factor:t.defend_failed_factor,$_defend_arena_succ_factor:t.defend_arena_succ_factor,$_defend_arena_failed_factor:t.defend_arena_failed_factor,$_conflict_skill_kind:t.conflict_skill_kind,$_skill_lvup_spend:t.skill_lvup_spend,$_skill_grade_score:t.skill_grade_score,$_camp_use_exp_wolf_max:t.use_exp_wolf_max,$_camp_use_exp_tower_max:t.use_exp_tower_max,$_camp_wolf_lv_max:t.wolf_lv_max,$_camp_need_user_level:t.camp_need_user_level,$_camp_arena_need_user_level:t.arena_need_user_level,$_camp_create_mine_help_max:t.create_mine_help_max,$_camp_create_mine_help_friends_num:t.create_mine_help_friends_num,$_dream_wolf_hard_ness:Mt.dm_wolf_hard_ness,umapsById:l.map(r=>[r,re.umaps[r]]),dream_data:Mt,dream_maps:kt(Mt.dmaps,"dmaps"),dream_waves:Ra};return console.log("init",u.umapsById),u}(),ft=o=>U.mapValues(o,t=>{let e=t.name;return e.includes("^")?e.substring(e.indexOf("^")+1):e}),Ut=Object.assign({},ft(N.$_map_Obj),ft(N.$_wolfAtt_Obj),ft(N.$_towerAtt_Obj),...Object.values(N.$_global_properties).map(o=>ft(o)));console.log("dict",Ut);function he(o){return typeof o=="string"?Ut[o]:o.map(t=>Ut[t])}const za={key:0},qa={key:0},Ja={class:"ml-4"},Za={key:1},Qa={key:1},es={key:0},ts={key:1},ls={class:"ml-4"},as=G({__name:"index",setup(o){const t=U.chain(N.$_global_properties.card).values().filter(e=>e.id.startsWith("baoxiang")).sortBy(e=>Math.abs(e.index)).value();return(e,l)=>{const s=je,n=Xe,u=We;return g(),D("div",null,[i(u,{data:d(t),style:{"font-size":"small"}},{default:c(()=>[i(s,{label:"id",prop:"id",width:120}),i(s,{label:"name",prop:"name",width:160}),i(s,{label:"open_num",prop:"open_num",width:100}),i(s,{label:"info",prop:"info",width:400}),i(s,{label:"data"},{default:c(r=>[r.row.default_gift?(g(),D("ul",za,[(g(!0),D(M,null,H(r.row.default_gift,(m,p)=>(g(),D(M,{key:p},[String(p)=="properties"?(g(),D("li",qa,[i(n,{type:"warning"},{default:c(()=>[x(T(p),1)]),_:2},1024),A("ul",Ja,[(g(!0),D(M,null,H(m,(h,b)=>(g(),D("li",{key:b},[i(n,null,{default:c(()=>[x(T(b),1)]),_:2},1024),(g(!0),D(M,null,H(h,(S,I)=>(g(),P(n,{key:I,type:"info",title:I},{default:c(()=>[x(T(d(he)(String(I)))+": "+T(S),1)]),_:2},1032,["title"]))),128))]))),128))])])):(g(),D("li",Za,[i(n,{type:"warning"},{default:c(()=>[x(T(p),1)]),_:2},1024),i(n,{type:"info"},{default:c(()=>[x(T(m),1)]),_:2},1024)]))],64))),128))])):pe("",!0),r.row.data?(g(),D("ul",Qa,[(g(!0),D(M,null,H(r.row.data,m=>(g(),D(M,{key:m[0]},[m[1]=="invite_score"?(g(),D("li",es,[i(n,{type:"success"},{default:c(()=>[x(T(m[0]),1)]),_:2},1024),i(n,{type:"warning"},{default:c(()=>[x(T(m[1]),1)]),_:2},1024),i(n,null,{default:c(()=>[x(T(m[2]),1)]),_:2},1024)])):pe("",!0),m[1]=="properties"?(g(),D("li",ts,[i(n,{type:"success"},{default:c(()=>[x(T(m[0]),1)]),_:2},1024),i(n,{type:"warning"},{default:c(()=>[x(T(m[1]),1)]),_:2},1024),A("ul",ls,[(g(!0),D(M,null,H(m[2],p=>(g(),D("li",{key:p[0]},[i(n,{type:"success"},{default:c(()=>[x(T(p[0]),1)]),_:2},1024),i(n,{type:"warning"},{default:c(()=>[x(T(p[1]),1)]),_:2},1024),i(n,null,{default:c(()=>[(g(!0),D(M,null,H(p[2],h=>(g(),P(n,{title:h,type:"info",key:h},{default:c(()=>[x(T(d(he)(h)),1)]),_:2},1032,["title"]))),128))]),_:2},1024)]))),128))])])):pe("",!0)],64))),128))])):pe("",!0)]),_:1})]),_:1},8,["data"])])}}}),ss=Object.freeze(Object.defineProperty({__proto__:null,default:as},Symbol.toStringTag,{value:"Module"})),me=class me{static formatTime(t,e=!1){let l=t%60,s=Math.floor(t/60)%60,n=Math.floor(t/3600),u="";if(e){if(n>0)return u=n.toString()+_.getLanguageStr(21),u+(s.toString()+_.getLanguageStr(22));if(s>0)return u+=s.toString()+_.getLanguageStr(22),u+(l.toString()+_.getLanguageStr(23));l>=0&&(u+=l.toString()+_.getLanguageStr(23))}else n>=0&&(u=(n>9?n.toString():"0"+n.toString())+":"),s>=0&&(u+=(s>9?s.toString():"0"+s.toString())+":"),l>=0&&(u+=Math.floor(l)>9?Math.floor(l).toString():"0"+Math.floor(l).toString());return u}static formatTime_day(t){let e=Math.floor(t/3600),l=Math.floor(e/24),s=Math.ceil(t/60)%60,n=e%24,u="";return l>0&&(u=l.toString()+_.getLanguageStr(20)),n>0&&(u+=n.toString()+_.getLanguageStr(21)),s>0&&(u+=s.toString()+_.getLanguageStr(22)),u}static formatTime_M(t,e=!1){let l=Math.floor(t/60)%60,s=Math.floor(t/3600),n="";return e?s>0?(n=s.toString()+_.getLanguageStr(21),n+(l.toString()+_.getLanguageStr(22))):l>0?n+(l.toString()+_.getLanguageStr(22)):_.getLanguageStr(24):(s>=0&&(n=s.toString()+":"),l>=0&&(n+=l.toString()+":"),n)}static getElementNum(t){let e,l=0;for(e in t)l++;return l}static randomElement(t){let e,l=0,s=me.getElementNum(t),n=Math.floor(Math.random()*s);for(e of t){if(l==n)return e;l++}return null}static formatHtmlText_normal(t,e=10,l=3355443,s=""){return me.formatHtmlText(t,l,!1,14,s,e)}static getSimpleNumStr(t,e=!1){let l;return t>1e4?(l=e?_.getLanguageStr(116):_.getLanguageStr(108),Math.round(t/1e4)+l):String(t)}static getValueByIndex(t,e){for(const l in e)if(l!=me.DEFAULT){const s=me.getIDPos(l);if(t>=s.x&&t<=s.y)return e[l]}return e[me.DEFAULT]??1}static getIDPos(t){var e=t.indexOf("_");return{x:parseInt(t.slice(0,e)),y:parseInt(t.slice(e+1,t.length))}}static fillSpace(t,e=10,l=!0){let s=0,n=0,u=0,r=0,m="";for(n=0;n<t.length;n++)u=t.charCodeAt(n),u>=32&&u<=126?s=1:s=2,r+=s;for(n=r;n<e;n++)m+=" ";return l?m+=t:m=t+m,m}static formatHtmlText(t,e=3355443,l=!1,s=14,n="",u=12,r=null){let m="",p="",h="#"+e.toString(16);return u<1e3?(m=t,p=me.formatLine(m,`
`,u*2,r)):p=t,l?'<font color="'+h+'" size="'+s+'" face="'+n+'"><b>'+p+"</b></font>":'<font color="'+h+'" size="'+s+'" face="'+n+'">'+p+"</font>"}static getLine(t=40,e="=",l="",s=5){let n=0,u="";for(e==""&&(e="="),l==""&&(l="left"),n=0;n<t;n++)u+=e;return HtmlTextFormat.format(u,l,6316128,s)}static formatHtmlTextBr(t,e="left"){let l="";for(let s=0;s<t.length;s++)l+='<P ALIGN="'+e+'">'+t[s]+"</P>";return l}static formatLine(t,e=`
`,l=16,s=null){let n=0,u=0,r=0,m=null,p="",h=0;for(s==null&&(s=[]),l<=1&&(l=2),n=0;n<t.length;n++)r=t.charCodeAt(n),m=t.charAt(n),m==`
`?(h=0,p+=m):(s.indexOf(m)!=-1?u=0:r>=32&&r<=126?u=1:u=2,h+=u,h>l&&(p+=e,h=u),p+=m);return p}static clearLine(t){return t=t.replace(`
`,""),t=t.replace("<br>",""),t.replace("</br>","")}static isHtml(t){let e=t.indexOf("<"),l=t.indexOf(">");return e!=-1&&l!=-1&&e<l}static insertStr(t,e=`
`,l=4,s=1){let n="",u="",r=0;for(s<=0&&(s=int.MAX_VALUE),l<=0&&(l=1);r<s;)u=t.substr(r*l,l),r++,u.length!=l&&(n+=u),u+=e,n+=u;return n+t.substr(r*l)}static getGlobalAttValue_byID(t,e=0){return t["id_"+e]}static setObjAttributeValue(t,e,l){for(let s=0;s<e.length;s++)t[e[s][l]]=e[s];return t}static getObjAttributeValue(t,e){return t[e]==null&&t[e]==null?null:t[e]}static isNullAndUndefined(t){return t==null||t==null}static isNullForArray(t){return!(t!=null&&t.length>0)}static addObjectNewAtt(t,e){let l=null;if(!me.isNullAndUndefined(e))for(l in e)t[l]=e[l];return t}static isSameDate(t,e){return!t||!e?!1:t.getUTCFullYear()==e.getUTCFullYear()&&t.getUTCMonth()==e.getUTCMonth()&&t.getUTCDate()==e.getUTCDate()}static getRandom(t,e){let l=0;return t==e?t:(t>e&&(l=t,t=e,e=l),l=e-t+1,Math.floor(t+Math.random()*l))}static replaceString(t,e,l){let s=new RegExp(e,"g");return t.replace(s,l)}static getDateSecond(t){return Math.floor(t.getTime()*.001)}static isNoChildrenInArr(t){let e=!1;return t!=null&&t.length>0?e=!1:e=!0,e}static isNoChildrenInObj(t){let e=0,l=null,s=!0;if(t){e=0;for(l in t)e++;e>0&&(s=!1)}return s}static toString(t,e=0,l=!1){let s=0,n=0,u=null,r="";if(e++,t==null)return"null";let m=typeof t,p=0;switch(m){case"number":return t.toString()+"";case"string":return'"'+t+'"';case"object":if(t instanceof Array){if(p=me.getElementNum(t),p>1)for(e>1&&(r+=`
`),n=0;n<e-1;n++)r+="	";for(r+="[",s=0;s<t.length;s++){if(p>1)for(r+=`
`,n=0;n<e;n++)r+="	";r+=toString(t[s],e),r+=","}if(p>0&&(r=r.slice(0,r.length-1)),p>1)for(r+=`
`,n=0;n<e-1;n++)r+="	";r+="]"}else if(t instanceof Date)r="new Date("+t.getTime()+")";else{if(p=me.getElementNum(t),p>1)for(e>1&&(r+=`
`),n=0;n<e-1;n++)r+="	";r+="{";for(u in t){if(p>1)for(r+=`
`,n=0;n<e;n++)r+="	";!isNaN(Number(u.slice(0,1)))||u.search(/[^a-zA-Z0-9_]/)!=-1?r+='"'+u+'":'+me.toString(t[u],e):r+=u+":"+me.toString(t[u],e),r+=","}if(p>0&&(r=r.slice(0,r.length-1)),p>1)for(r+=`
`,n=0;n<e-1;n++)r+="	";r+="}"}break;case"boolean":return t.toString()+""}return r}static getTodayEndUTCTime(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),23,59,59)}static replaceAllBySplit(t,e,l){return t==null?null:t.split(e).join(l)}static formatNumberToString(t){let e;return t>=1e3&&t<=9999?(t=Math.floor(t*.001),e=t.toString()+"千"):t>=1e4?(t=Math.floor(t*1e-4),e=t.toString()+"万"):e=t.toString(),e}};a(me,"DEFAULT","default");let Ft=me;const Ze=class Ze{static getLanguageStr(t,...e){let l=null,s=null,n="";if(N.$_global_language_str!=null&&(N.$_global_language_str.getElementsByTagName("id"+t)[0]!=null?N.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str")=="CHILD2010"?n=N.$_global_language_str.getElementsByTagName("id"+t)[0].children().toString():n=N.$_global_language_str.getElementsByTagName("id"+t)[0].getAttribute("str"):n=null),n.length<=0)return"";let u=n.search("%%");for(;u!=-1;)s=n.slice(u,u+6),n=n.replace(s,Ze.getLanguageStr(parseInt(s.slice(2)))),u=n.search("%%");for(let r=0;r<e.length;r++)l="%"+r,n=Ft.replaceString(n,l,e[r]);return n}static getDataProfileTxt(t){let e=null,l=!1,s=null,n=null,u=null,r=t;return t&&(e=String(t),l=e.indexOf(Ze.INTER_CONFIG_SPLIT_CHAR)>-1,s=null,n="",u="",l?(s=e.split(Ze.INTER_CONFIG_SPLIT_CHAR),n=s[0],u=s[1],N.$_global_dataProfile_txt!=null?(N.$_global_dataProfile_txt.getElementsByTagName(n)[0]!=null?r=N.$_global_dataProfile_txt.getElementsByTagName(n)[0].getAttribute("s").toString():r=u,r=r.replace(/\\n/g,`
`)):r=u):r=e,s=null,e="",n="",u=""),r}};a(Ze,"INTER_CONFIG_SPLIT_CHAR","^");let _=Ze;const oe=class oe{constructor(t){a(this,"typeId");a(this,"kindId");a(this,"id");a(this,"name");a(this,"info");a(this,"help");this.typeId=t[oe.DATA_TYPE_ID],this.kindId=t[oe.DATA_KIND_ID],this.id=t[oe.DATA_ID],this.name=_.getDataProfileTxt(t[oe.DATA_NAME]),this.info=_.getDataProfileTxt(t[oe.DATA_INFO]),this.help=t[oe.DATA_HELP]?_.getDataProfileTxt(t[oe.DATA_HELP]):""}};a(oe,"DATA_TYPE_ID","typeId"),a(oe,"DATA_KIND_ID","kindId"),a(oe,"DATA_ID","id"),a(oe,"DATA_NAME","name"),a(oe,"DATA_INFO","info"),a(oe,"DATA_HELP","help");let ce=oe;const z=class z extends ce{constructor(e){super(e);a(this,"res");a(this,"resColor");e[z.DATA_RESOURCE_CLASS]==null?this.res=e[ce.DATA_ID]:this.res=e[z.DATA_RESOURCE_CLASS],this.resColor=e[z.DATA_RESOURCE_COLOR_CLASS]}};a(z,"TYPE_MONSTER","wolf"),a(z,"TYPE_TOWER","tower"),a(z,"TYPE_WALL","wall"),a(z,"TYPE_BARRIER","barrier"),a(z,"TYPE_ENTRANCE","typeEntrance"),a(z,"TYPE_EXPORT","typeExport"),a(z,"TYPE_BOX","box"),a(z,"TYPE_GEM_ITEM","gem"),a(z,"TYPE_TRAP_ITEM","snarp"),a(z,"TYPE_CARD_ITEM","card"),a(z,"TYPE_WOLF_CARD_ITEM","wc"),a(z,"TYPE_TAME_ITEM","tame"),a(z,"TYPE_FIX_ITEM","bomb"),a(z,"ID_SPADE_ITEM","mc"),a(z,"ID_GEM_HAMMER","gem_hammer"),a(z,"ID_GEM_OPENER","gem_opener"),a(z,"DATA_RESOURCE_CLASS","res"),a(z,"DATA_RESOURCE_COLOR_CLASS","resColor");let ve=z;class Je{constructor(){a(this,"m_manager",{});this.clearData()}getDataById(t){return this.m_manager[t]}get manager(){return this.m_manager}clearData(){this.m_manager=new Object}}const $=class $ extends ve{constructor(e){super(e);a(this,"scoreMax");a(this,"populationMax");a(this,"hardA");a(this,"hardB");a(this,"passBy");a(this,"unkennelDelay");a(this,"unkennelRule");a(this,"bossList");a(this,"monsterList");a(this,"monsterProportion");a(this,"teleportRule");this.scoreMax=e[$.DATA_SCORE_MAX]?e[$.DATA_SCORE_MAX]:$.DEFAULT_SCORE_MAX,this.populationMax=e[$.DATA_POPULATION_MAX]?e[$.DATA_POPULATION_MAX]:$.DEFAULT_POPULATION_MAX,this.hardA=e[$.DATA_HARD_A],this.hardB=e[$.DATA_HARD_B],this.passBy=e[$.DATA_PASS_BY],this.unkennelDelay=e[$.DATA_UNKENNEL_RATE],this.unkennelRule=e[$.DATA_UNKENNEL_RULE],this.bossList=e[$.DATA_BOSS_LIST],this.monsterList=e[$.DATA_MONSTER_LIST]?e[$.DATA_MONSTER_LIST].map(l=>l[1]):[],this.monsterProportion=e[$.DATA_MONSTER_LIST],this.teleportRule=e[$.DATA_TELEPORT_RULE]}getDifficultyLevel(e){return Math.sqrt(this.hardA+this.hardB*e)}calcPKGold(e){const l=this.populationMax;return Math.round((2+1.07*l)*Math.pow(e/.39,2/3))}calcPKExp(e){const l=this.populationMax;return Math.round((3.5+.14*l)*Math.pow(e/.39,2/3))}calcAccumulative(){let e=0,l=0;for(let s=0;s<=this.scoreMax;s+=2){let n=this.getDifficultyLevel(s);e+=this.calcPKGold(n),l+=this.calcPKExp(n)}return{gold:e,exp:l}}};a($,"DEFAULT_SCORE_MAX",100),a($,"DEFAULT_POPULATION_MAX",10),a($,"RULE_MULTICAST",1),a($,"DATA_SCORE_MAX","pass_score"),a($,"DATA_POPULATION_MAX","pop_max"),a($,"DATA_HARD_A","yield_val"),a($,"DATA_HARD_B","hard_ness"),a($,"DATA_PASS_BY","passBy"),a($,"DATA_UNKENNEL_RATE","interval"),a($,"DATA_UNKENNEL_RULE","interval_rule"),a($,"DATA_BOSS_LIST","boss"),a($,"DATA_MONSTER_LIST","wolf_proportion"),a($,"DATA_TELEPORT_RULE","teleport_rule"),a($,"DATA_DEBUG","debug");let _t=$;const Ie=class Ie extends Je{constructor(){super(),Ie.onlyExample=this,this.loadData(N.$_map_Obj)}static getOnlyExample(){return Ie.onlyExample==null&&(Ie.onlyExample=new Ie),Ie.onlyExample}loadData(t){for(const e in t){const l=t[e];l[ce.DATA_ID]=e,this.m_manager[e]=new _t(t[e])}}getData(t){return this.getDataById(t)}};a(Ie,"DATA_COUNT",6),a(Ie,"onlyExample");let At=Ie;class pt{constructor(){a(this,"m_data");this.m_data=new ce({})}get baseData(){return this.m_data}}class ns extends pt{constructor(){super()}}class Z extends pt{constructor(e,l=!0){super();a(this,"score",0);a(this,"isDream",!1);this.m_data=At.getOnlyExample().getData(e)}static getMapData(e){return At.getOnlyExample().getData(e)}get gameMapData(){return this.m_data}get canUnkennelAdjust(){return!1}}a(Z,"DEFEND_MAP_1","mfx1"),a(Z,"ENDLESS_MAP_1","m11"),a(Z,"currentMap");function is(o,t){let e=o.toFixed(8),l=e.indexOf(".");return l==-1||e.length-l-1<=t?e:o.toFixed(t).replace(/\.?0+$/,"")}function $t(o,t=0,e=!1,l="14",s=""){return`<span style="color:#${t.toString(16).padStart(6,"0")};${e?"font-weight:bold;":""}${l?`font-size:${l};`:""}${s?`font-family:${s};`:""}">${o.replaceAll(`
`,"<br>")}</span>`}function rs(o){return Math.floor(o/3600)+":"+Math.floor(o/60%60).toString().padStart(2,"0")+":"+(o%60).toString().padStart(2,"0")}class F extends ve{constructor(t){super(t)}}a(F,"KIND_HIT","hit"),a(F,"KIND_INVASION","invasion"),a(F,"KIND_TELEPORT","teleport"),a(F,"KIND_BUFF_TOP","buffTop"),a(F,"KIND_BUFF_MID","buffMid"),a(F,"KIND_BUFF_BOT","buffBot"),a(F,"KIND_MAGIC","effectMagic"),a(F,"KIND_PATH","effectPath"),a(F,"KIND_CRIT","effectCrit"),a(F,"KIND_SUMMON","effectSummon"),a(F,"KIND_CLOUD","effectCloud"),a(F,"KIND_MIRROR","effectMirror"),a(F,"KIND_CURE","effectCure"),a(F,"KIND_CURE_ONE","effectCureOne"),a(F,"KIND_SNEER","effectSneer"),a(F,"KIND_LINKS","effectLinks"),a(F,"KIND_RELIVE","effectRelive"),a(F,"KIND_SUICIDE","effectSuicide"),a(F,"KIND_BLINK_IN","effectBlinkIn"),a(F,"KIND_BLINK_OUT","effectBlinkOut"),a(F,"KIND_LIGHTNING","lightning"),a(F,"KIND_FIELD_ATTACK","allAttack"),a(F,"KIND_FIELD_ATTACK_AOE","allAttackAOE"),a(F,"KIND_CUSS","effectCuss"),a(F,"KIND_CUSS_BREAK","effectCussBreak"),a(F,"KIND_SIGN_SUMMON","signSummon"),a(F,"KIND_SIGN_CURE","signCure"),a(F,"KIND_SIGN_CLOUD","signCloud"),a(F,"KIND_SIGN_SHIELD","signShield"),a(F,"KIND_SIGN_TRANSFORM","signTransform"),a(F,"KIND_BOSS","effectBoss");const be=class be extends ve{constructor(e){super(e);a(this,"parameter");a(this,"levels");this.parameter=e[be.DATA_PARAMETER],this.levels=e[be.DATA_LEVELS]}getLevelParam(e,l){return this.parameter!=null?this.parameter[l]:this.levels!=null?(e=Math.min(Math.max(0,e-1),this.levels.length-1),this.levels[e][l]):null}hasLevel(){return this.parameter==null}};a(be,"TYPE_TOWER_SKILL","typeTowerSkill"),a(be,"TYPE_MONSTER_SKILL","typeMonsterSkill"),a(be,"DATA_PARAMETER","params"),a(be,"DATA_LEVELS","levels");let Ge=be;class L extends Ge{constructor(t){super(t),t[ce.DATA_TYPE_ID]=Ge.TYPE_TOWER_SKILL}}a(L,"KIND_AURA","Aura"),a(L,"KIND_CHANGE_BULLET","Bultype"),a(L,"KIND_CHANGE_DAMAGE","ChangeDam"),a(L,"KIND_CHANGE_RATE","ChangeRate"),a(L,"KIND_CHANGE_RANGE","ChangeRange"),a(L,"KIND_FIELD_ATTACK","ALLAP"),a(L,"KIND_DIVIDED_ATTACK","DivAP"),a(L,"KIND_SCATTER_ATTACK","ScaAP"),a(L,"KIND_COMBO_ATTACK","ComAP"),a(L,"KIND_GUIDED_BULLET","GuidedBul"),a(L,"KIND_ATTACK_RATE","AttackRate"),a(L,"KIND_AOE_ATTACK","AoeAP"),a(L,"KIND_THROUGHOUT_ATTACK","ThoAP"),a(L,"KIND_BOUNCE_ATTACK","BouAP"),a(L,"KIND_FLOAT_DAMAGE","FloatDam"),a(L,"KIND_CRIT","Crit"),a(L,"KIND_REDUCED_DEFENSE","RedDef"),a(L,"KIND_POISON","Poison"),a(L,"KIND_SLOW","Slow"),a(L,"KIND_BURN_COLD","BC"),a(L,"KIND_BEAT_BACK","Beat"),a(L,"KIND_SILENCE","Silence"),a(L,"KIND_VERTIGO","Vertigo"),a(L,"KIND_INTIMIDATE","Intimidate"),a(L,"KIND_CUSS","Cuss"),a(L,"KIND_BURN","Burn"),a(L,"KIND_COLD","Cold");const E=class E extends Ge{constructor(t){super(t),t[ce.DATA_TYPE_ID]=Ge.TYPE_MONSTER_SKILL}static get allMonsterSkill(){return[E.KIND_FLY,E.KIND_AIRBORNE,E.KIND_ISOLATION,E.KIND_RELIVE,E.KIND_SUICIDE,E.KIND_REINCARNATE,E.KIND_RESIST_FIRE,E.KIND_RESIST_FROST,E.KIND_RESIST_POISON,E.KIND_RESIST_BEAT,E.KIND_RESIST_SILENCE,E.KIND_RESIST_VERTIGO,E.KIND_RESIST_CRIT,E.KIND_RESIST_LIGHT,E.KIND_RESIST_STRSMOOTH,E.KIND_SLOWF,E.KIND_WEAK_FIRE,E.KIND_WEAK_FROST,E.KIND_WEAK_POISON,E.KIND_WEAK_BEAT,E.KIND_WEAK_SILENCE,E.KIND_WEAK_VERTIGO,E.KIND_WEAK_CRIT,E.KIND_WEAK_LIGHT,E.KIND_RUN,E.KIND_MIRROR,E.KIND_SUMMON,E.KIND_CLOUD,E.KIND_CURE,E.KIND_BLINK,E.KIND_HIDE,E.KIND_SHIELD,E.KIND_SNEER,E.KIND_TRANSFORM,E.KIND_LINKS]}};a(E,"EVENT_RED",1),a(E,"EVENT_YELLOW",2),a(E,"EVENT_GREEN",3),a(E,"EVENT_FULL",4),a(E,"EVENT_INTIMIDATE",20),a(E,"EVENT_VERTIGO",21),a(E,"EVENT_SILENCE",22),a(E,"EVENT_SLOW",23),a(E,"EVENT_REDUCED_DEFENSE",24),a(E,"EVENT_POISON",25),a(E,"EVENT_BURN",26),a(E,"EVENT_COLD",27),a(E,"EVENT_HIT",40),a(E,"EVENT_CRIT",41),a(E,"EVENT_BEAT_BACK",42),a(E,"EVENT_FRIENT_DIE",43),a(E,"EVENT_DIE",44),a(E,"KIND_FLY","fly"),a(E,"KIND_AIRBORNE","airborne"),a(E,"KIND_ISOLATION","isolation"),a(E,"KIND_RELIVE","revive"),a(E,"KIND_SUICIDE","burst"),a(E,"KIND_REINCARNATE","reborn"),a(E,"KIND_SLOWF","slowf"),a(E,"KIND_RESIST_FIRE","resistFire"),a(E,"KIND_RESIST_FROST","resistFrost"),a(E,"KIND_RESIST_POISON","resistPoison"),a(E,"KIND_RESIST_SLOW","resistSlow"),a(E,"KIND_RESIST_BEAT","resistBeat"),a(E,"KIND_RESIST_SILENCE","resistSilence"),a(E,"KIND_RESIST_VERTIGO","resistVertigo"),a(E,"KIND_RESIST_CRIT","resistCrit"),a(E,"KIND_RESIST_LIGHT","resistLight"),a(E,"KIND_RESIST_INTIMIDATE","resistIntimidate"),a(E,"KIND_WEAK_FIRE","weakFire"),a(E,"KIND_WEAK_FROST","weakFrost"),a(E,"KIND_WEAK_POISON","weakPoison"),a(E,"KIND_WEAK_SLOW","weakSlow"),a(E,"KIND_WEAK_BEAT","weakBeat"),a(E,"KIND_WEAK_SILENCE","weakSilence"),a(E,"KIND_WEAK_VERTIGO","weakVertigo"),a(E,"KIND_WEAK_CRIT","weakCrit"),a(E,"KIND_WEAK_LIGHT","weakLight"),a(E,"KIND_WEAK_INTIMIDATE","weakIntimidate"),a(E,"KIND_RESIST_STRSMOOTH","strsmooth"),a(E,"KIND_RUN","sprint"),a(E,"KIND_MIRROR","divide"),a(E,"KIND_SUMMON","summon"),a(E,"KIND_CLOUD","cloud"),a(E,"KIND_CURE","massTreatment"),a(E,"KIND_BLINK","blink"),a(E,"KIND_HIDE","invisible"),a(E,"KIND_SHIELD","shield"),a(E,"KIND_SNEER","taunt"),a(E,"KIND_TRANSFORM","morph"),a(E,"KIND_LINKS","links");let f=E;const ue=class ue extends Je{constructor(){super(),ue.onlyExample=this,this.loadData(N.$_skillAtt_Obj)}static getOnlyExample(){return ue.onlyExample==null&&(ue.onlyExample=new ue),ue.onlyExample}loadData(t){for(const e in t[ue.TOWER_SKILL]){const l=t[ue.TOWER_SKILL][e];l[ce.DATA_ID]=e,this.m_manager[e]=new L(l)}for(const e in t[ue.MONSTER_SKILL]){const l=t[ue.MONSTER_SKILL][e];l[ce.DATA_ID]=e,this.m_manager[e]=new f(l)}}getData(t){return this.getDataById(t)}};a(ue,"onlyExample"),a(ue,"TOWER_SKILL","towerSkill"),a(ue,"MONSTER_SKILL","monsterSkill"),a(ue,"TRAP_SKILL","trapSkill");let Bt=ue;const Ue=class Ue extends ce{constructor(e){super(e);a(this,"skillsList");e[Ue.DATA_SKILLS_LIST]instanceof Array?this.skillsList=e[Ue.DATA_SKILLS_LIST]:e[Ue.DATA_SKILLS_LIST]instanceof String&&(this.skillsList=[e[Ue.DATA_SKILLS_LIST]])}};a(Ue,"DATA_SKILLS_LIST","skills");let Ht=Ue;const xe=class xe extends Je{constructor(){super(),xe.onlyExample=this,this.loadData(N.$_skillPackage_Obj)}static getOnlyExample(){return xe.onlyExample==null&&(xe.onlyExample=new xe),xe.onlyExample}loadData(t){for(const e in t){const l=t[e];l[ce.DATA_ID]=e,this.m_manager[e]=new Ht(t[e])}}getData(t){return this.getDataById(t)}};a(xe,"onlyExample");let Gt=xe;class K{static toPercentage(t){return String(Math.round(t*100*100)/100)+"%"}static toGridStr(t){return String(Math.round(t/100)/10)}static getPosID(t,e){return t+"_"+e}}class Fl extends pt{constructor(e,l,s=!1){super();a(this,"level",0);a(this,"index",0);a(this,"enabled",!0);a(this,"m_skillInfo","");a(this,"m_nextLevelSkillInfo","");a(this,"skillTag1","");a(this,"skillTag2","");a(this,"skillTag3","");a(this,"nextLevelSkillTag1","");a(this,"nextLevelSkillTag2","");a(this,"nextLevelSkillTag3","");a(this,"m_updateFunction",()=>{});if(s){this.m_data=new It({id:e+"_0",kindId:e});return}this.m_data=Bt.getOnlyExample().getData(e),this.level=l,this.enabled=!0}get data(){return this.m_data}get skillInfo(){return this.m_updateFunction!=null&&this.m_updateFunction(),this.m_skillInfo||(this.m_skillInfo=""),this.m_skillInfo}get nextLevelSkillInfo(){return this.m_nextLevelSkillInfo||(this.m_nextLevelSkillInfo=""),this.m_nextLevelSkillInfo}}class W extends Fl{constructor(e,l,s){super(e,l);a(this,"tower");this.tower=s}static create(e,l,s){const n=new W("",l,s);return n.m_data=e,n}shouldTransferBullet(){switch(this.data.kindId){case L.KIND_GUIDED_BULLET:case L.KIND_ATTACK_RATE:case L.KIND_AOE_ATTACK:case L.KIND_THROUGHOUT_ATTACK:case L.KIND_BOUNCE_ATTACK:case L.KIND_FLOAT_DAMAGE:case L.KIND_CRIT:case L.KIND_REDUCED_DEFENSE:case L.KIND_POISON:case L.KIND_SLOW:case L.KIND_BURN_COLD:case L.KIND_BEAT_BACK:case L.KIND_SILENCE:case L.KIND_VERTIGO:case L.KIND_INTIMIDATE:case L.KIND_CUSS:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case L.KIND_AURA:return new jt(this.data.id,this.level,this.tower);case L.KIND_CHANGE_BULLET:return new $l(this.data.id,this.level,this.tower);case L.KIND_CHANGE_DAMAGE:return new Bl(this.data.id,this.level,this.tower);case L.KIND_CHANGE_RATE:return new Gl(this.data.id,this.level,this.tower);case L.KIND_CHANGE_RANGE:return new Hl(this.data.id,this.level,this.tower);case L.KIND_FIELD_ATTACK:return new el(this.data.id,this.level,this.tower);case L.KIND_DIVIDED_ATTACK:return new Zt(this.data.id,this.level,this.tower);case L.KIND_SCATTER_ATTACK:return new al(this.data.id,this.level,this.tower);case L.KIND_COMBO_ATTACK:return new zt(this.data.id,this.level,this.tower);case L.KIND_GUIDED_BULLET:return new cs(this.data.id,this.level,this.tower);case L.KIND_ATTACK_RATE:return new os(this.data.id,this.level,this.tower);case L.KIND_AOE_ATTACK:return new Wt(this.data.id,this.level,this.tower);case L.KIND_THROUGHOUT_ATTACK:return new il(this.data.id,this.level,this.tower);case L.KIND_BOUNCE_ATTACK:return new Yt(this.data.id,this.level,this.tower);case L.KIND_FLOAT_DAMAGE:return new ds(this.data.id,this.level,this.tower);case L.KIND_CRIT:return new qt(this.data.id,this.level,this.tower);case L.KIND_REDUCED_DEFENSE:return new ll(this.data.id,this.level,this.tower);case L.KIND_POISON:return new tl(this.data.id,this.level,this.tower);case L.KIND_SLOW:return new nl(this.data.id,this.level,this.tower);case L.KIND_BURN_COLD:return new us(this.data.id,this.level,this.tower);case L.KIND_BEAT_BACK:return new Xt(this.data.id,this.level,this.tower);case L.KIND_SILENCE:return new sl(this.data.id,this.level,this.tower);case L.KIND_VERTIGO:return new rl(this.data.id,this.level,this.tower);case L.KIND_INTIMIDATE:return new Qt(this.data.id,this.level,this.tower);case L.KIND_CUSS:return new Jt(this.data.id,this.level,this.tower);default:return this}}}const Ne=class Ne extends W{constructor(t,e,l){super(t,e,l),this.index=1050,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3001,this.radiiInfo,K.toPercentage(this.nextEffectRate))}}get radii(){return this.data.getLevelParam(this.level,0)+Ne.DEFAULT_RADII}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Ne.DEFAULT_NEXT_EFFECT_RATE,Ne.MAX_NEXT_EFFECT_RATE)}get radiiInfo(){return this.radii.toString()}};a(Ne,"DEFAULT_RADII",0),a(Ne,"DEFAULT_NEXT_EFFECT_RATE",0),a(Ne,"MAX_NEXT_EFFECT_RATE",1);let Wt=Ne;class os extends W{constructor(t,e,l){super(t,e,l),this.index=1040,this.m_updateFunction=()=>{let s=this.floorRate,n=this.airRate;s<=0&&n>0?this.m_skillInfo=_.getLanguageStr(3029):n<=0&&s>0?this.m_skillInfo=_.getLanguageStr(3028):s!=1?this.m_skillInfo=_.getLanguageStr(3030,K.toPercentage(s)):n!=1&&(this.m_skillInfo=_.getLanguageStr(3031,K.toPercentage(n)))}}get floorRate(){return this.data.getLevelParam(this.level,0)}get airRate(){return this.data.getLevelParam(this.level,1)}}const Lt=class Lt extends W{constructor(t,e,l){super(t,e,l),this.index=1500,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3002)}}get spId(){return this.data.getLevelParam(this.level,0)}get spLevel(){return this.data.getLevelParam(this.level,1)}get radii(){return this.data.getLevelParam(this.level,2)*this.level+Lt.DEFAULT_RADII}};a(Lt,"DEFAULT_RADII",1e3);let jt=Lt;const Fe=class Fe extends W{constructor(t,e,l){super(t,e,l),this.index=1060,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3003,K.toPercentage(this.chances),this.distanceInfo)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Fe.DEFAULT_CHANCES,1),0)}get beatBackDistance(){return this.data.getLevelParam(this.level,1)+Fe.DEFAULT_BEAT_BACK_DISTANCE}get distanceInfo(){return this.beatBackDistance.toString()}};a(Fe,"SHIFT_TIME",.2),a(Fe,"DEFAULT_CHANCES",0),a(Fe,"DEFAULT_BEAT_BACK_DISTANCE",0);let Xt=Fe;const Te=class Te extends W{constructor(t,e,l){super(t,e,l),this.index=1070,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3004,this.bounceNum,K.toPercentage(1-this.nextEffectRate),this.attackInfo)}}get bounceNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Te.DEFAULT_BOUNCE_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)*this.level+Te.DEFAULT_NEXT_EFFECT_RATE,Te.MAX_NEXT_EFFECT_RATE)}get attackInfo(){var e;let t=null;return((e=this.tower)==null?void 0:e.newBullet().bulletData.hitEffectId)==F.KIND_LIGHTNING?t=_.getLanguageStr(3516):t=_.getLanguageStr(3515),t}};a(Te,"DEFAULT_BOUNCE_NUM",.5),a(Te,"DEFAULT_NEXT_EFFECT_RATE",.35),a(Te,"MAX_NEXT_EFFECT_RATE",1),a(Te,"MAX_DISTANCE",3e3);let Yt=Te;class us extends W{constructor(t,e,l){super(t,e,l),this.index=1080,this.m_updateFunction=()=>{this.burnColdValue>0?this.m_skillInfo=_.getLanguageStr(3005,this.burn):this.m_skillInfo=_.getLanguageStr(3006,K.toPercentage(this.cold))}}get burnColdValue(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return this.data.getLevelParam(this.level,0)<0&&(e=-e),Math.floor(e)}get burn(){return Math.floor(Math.sqrt(this.burnColdValue))}get cold(){let t=1;this.tower&&(t=this.tower.buffEffect());let e=Math.pow(this.data.getLevelParam(this.level,0)*this.level*t,2);return Math.pow(e,.25)*.03}}class $l extends W{constructor(t,e,l){super(t,e,l)}get bulletId(){return this.data.getLevelParam(this.level,0)}}class Bl extends W{constructor(t,e,l){super(t,e,l),this.index=1e3,this.m_updateFunction=()=>{this.damageRate>1?this.m_skillInfo=_.getLanguageStr(3007,K.toPercentage(this.damageRate-1)):this.damageRate<1&&(this.m_skillInfo=_.getLanguageStr(3008,K.toPercentage(1-this.damageRate)))}}get damageAdd(){return this.data.getLevelParam(this.level,0)*this.level}get damageRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get damageA(){return this.data.getLevelParam(this.level,2)}get damageB(){return this.data.getLevelParam(this.level,3)}get damageC(){return this.data.getLevelParam(this.level,4)}isChangeBase(){return!(this.damageA==0&&this.damageB==0&&this.damageC==0)}}class Hl extends W{constructor(t,e,l){super(t,e,l),this.index=1010,this.m_updateFunction=()=>{this.rangeRate>1?this.m_skillInfo=_.getLanguageStr(3009,K.toPercentage(this.rangeRate-1)):this.m_skillInfo=_.getLanguageStr(3010,K.toPercentage(1-this.rangeRate)),this.rangeMin>0&&(this.m_skillInfo+=_.getLanguageStr(3027))}}get rangeAdd(){return this.data.getLevelParam(this.level,0)*this.level}get rangeRate(){return this.data.getLevelParam(this.level,1)*this.level+1}get range(){return this.data.getLevelParam(this.level,2)}get rangeMin(){return this.data.getLevelParam(this.level,3)}isChangeBase(){return this.range!=0}}class Gl extends W{constructor(t,e,l){super(t,e,l),this.index=1020,this.m_updateFunction=()=>{this.rateRate>1?this.m_skillInfo=_.getLanguageStr(3011,K.toPercentage(this.rateRate-1)):this.m_skillInfo=_.getLanguageStr(3012,K.toPercentage(1-this.rateRate))}}get rateRate(){return this.data.getLevelParam(this.level,0)+this.data.getLevelParam(this.level,1)*this.level+1}get rate(){return this.data.getLevelParam(this.level,2)}isChangeBase(){return this.rate!=0}}const $e=class $e extends W{constructor(t,e,l){super(t,e,l),this.index=1090,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3013,K.toPercentage(this.chances),this.extraBullet+1)}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)+$e.DEFAULT_CHANCES,1),0)}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,1)*this.level+$e.DEFAULT_EXTRA_BULLET)}};a($e,"DEFAULT_CHANCES",0),a($e,"DEFAULT_EXTRA_BULLET",.5),a($e,"DEFAULT_RATE",.08);let zt=$e;const we=class we extends W{constructor(t,e,l){super(t,e,l),this.index=1100,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3014,K.toPercentage(this.chances),this.damageEffectRate.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+we.DEFAULT_CHANCES,1),0)}get damageEffectRate(){return this.data.getLevelParam(this.level,1)*this.level+we.DEFAULT_DAMAGE_EFFECT_RATE+1}get buffEffectRate(){return this.data.getLevelParam(this.level,2)*this.level+we.DEFAULT_BUFF_EFFECT_RATE+1}};a(we,"DEFAULT_CHANCES",.1),a(we,"DEFAULT_DAMAGE_EFFECT_RATE",.5),a(we,"DEFAULT_BUFF_EFFECT_RATE",.1);let qt=we;const Qe=class Qe extends W{constructor(t,e,l){super(t,e,l),this.index=1110,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3026,Math.round(this.cussPower),this.duration.toFixed(0))}}get cussPower(){return this.data.getLevelParam(this.level,0)*this.level*this.tower.level+Qe.DEFAULT_CUSS_POWER}get duration(){return this.data.getLevelParam(this.level,1)+Qe.DEFAULT_DURATION}};a(Qe,"DEFAULT_CUSS_POWER",0),a(Qe,"DEFAULT_DURATION",0);let Jt=Qe;const vt=class vt extends W{constructor(t,e,l){super(t,e,l),this.index=1120,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3015,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+vt.DEFAULT_EXTRA_BULLET)}};a(vt,"DEFAULT_EXTRA_BULLET",.5);let Zt=vt;class ds extends W{constructor(t,e,l){super(t,e,l),this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3017)}}get floatDamageRate(){return this.data.getLevelParam(this.level,0)*this.level}}class cs extends W{constructor(t,e,l){super(t,e,l),this.m_skillInfo=""}get guideRatio(){return this.data.getLevelParam(this.level,0)}get bulletSpeedRate(){return this.data.getLevelParam(this.level,1)+1}get bulletAccSpeed(){return this.data.getLevelParam(this.level,2)}get guideInfo(){let t=null,e=this.guideRatio;return e<.1?t=_.getLanguageStr(3500):e<.2?t=_.getLanguageStr(3501):e<.3?t=_.getLanguageStr(3502):e<.4?t=_.getLanguageStr(3503):t=_.getLanguageStr(3504),t}}const et=class et extends W{constructor(t,e,l){super(t,e,l),this.index=1140,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3019,K.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+et.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+et.DEFAULT_DURATION}};a(et,"DEFAULT_CHANCES",.05),a(et,"DEFAULT_DURATION",0);let Qt=et;const Dt=class Dt extends W{constructor(t,e,l){super(t,e,l),this.index=1130,this.m_skillInfo=_.getLanguageStr(3016)}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+Dt.DEFAULT_CHANCES,1),0)}};a(Dt,"DEFAULT_CHANCES",.05);let el=Dt;const tt=class tt extends W{constructor(e,l,s){super(e,l,s);a(this,"m_poisonRate",-1);this.index=1150,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3e3,Math.round(this.poisonRate*this.tower.damage()),this.duration.toFixed(0))}}get poisonRate(){return this.m_poisonRate<0?this.data.getLevelParam(this.level,0)*this.level+tt.DEFAULT_POISON_RATE:this.m_poisonRate}set poisonRate(e){this.m_poisonRate<0&&(this.m_poisonRate=e)}get duration(){return this.data.getLevelParam(this.level,1)+tt.DEFAULT_DURATION}};a(tt,"DEFAULT_POISON_RATE",0),a(tt,"DEFAULT_DURATION",0);let tl=tt;const lt=class lt extends W{constructor(t,e,l){super(t,e,l),this.index=1160,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3020,K.toPercentage(this.reducedDefenseRate),this.duration.toFixed(1))}}get reducedDefenseRate(){return this.data.getLevelParam(this.level,0)*this.level+lt.DEFAULT_REDUCED_DEFENSE_RATE}get duration(){return this.data.getLevelParam(this.level,1)+lt.DEFAULT_DURATION}};a(lt,"DEFAULT_REDUCED_DEFENSE_RATE",.1),a(lt,"DEFAULT_DURATION",0);let ll=lt;const St=class St extends W{constructor(t,e,l){super(t,e,l),this.index=1170,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3021,this.extraBullet+1)}}get extraBullet(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+St.DEFAULT_EXTRA_BULLET)}};a(St,"DEFAULT_EXTRA_BULLET",.5);let al=St;const at=class at extends W{constructor(t,e,l){super(t,e,l),this.index=1180,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3022,K.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+at.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+at.DEFAULT_DURATION}};a(at,"DEFAULT_CHANCES",.05),a(at,"DEFAULT_DURATION",0);let sl=at;const st=class st extends W{constructor(t,e,l){super(t,e,l),this.index=1190,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3023,K.toPercentage(this.slowRate),this.duration.toFixed(1))}}get slowRate(){return this.data.getLevelParam(this.level,0)*this.level+st.DEFAULT_SLOW_RATE}get duration(){return this.data.getLevelParam(this.level,1)+st.DEFAULT_DURATION}};a(st,"DEFAULT_SLOW_RATE",.1),a(st,"DEFAULT_DURATION",0);let nl=st;const Re=class Re extends W{constructor(t,e,l){super(t,e,l),this.index=1200,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3024,this.throughoutNum)}}get throughoutNum(){return Math.floor(this.data.getLevelParam(this.level,0)*this.level+Re.DEFAULT_THROUGHOUT_NUM)}get nextEffectRate(){return Math.min(this.data.getLevelParam(this.level,1)+Re.DEFAULT_NEXT_EFFECT_RATE,Re.MAX_NEXT_EFFECT_RATE)}};a(Re,"DEFAULT_THROUGHOUT_NUM",.5),a(Re,"DEFAULT_NEXT_EFFECT_RATE",0),a(Re,"MAX_NEXT_EFFECT_RATE",1);let il=Re;const nt=class nt extends W{constructor(t,e,l){super(t,e,l),this.index=1210,this.m_updateFunction=()=>{this.m_skillInfo=_.getLanguageStr(3025,K.toPercentage(this.chances),this.duration.toFixed(1))}}get chances(){return Math.max(Math.min(this.data.getLevelParam(this.level,0)*this.level+nt.DEFAULT_CHANCES,1),0)}get duration(){return this.data.getLevelParam(this.level,1)+nt.DEFAULT_DURATION}};a(nt,"DEFAULT_CHANCES",0),a(nt,"DEFAULT_DURATION",0);let rl=nt;const ae=class ae extends Fl{constructor(e,l,s,n=!1){super(e,l,n);a(this,"monster");a(this,"m_levelMax",0);this.monster=s,this.m_data.typeId=Ge.TYPE_MONSTER_SKILL}static getKindName(e){switch(e){case f.KIND_FLY:return _.getLanguageStr(2507);case f.KIND_AIRBORNE:return _.getLanguageStr(2510);case f.KIND_RESIST_FIRE:return _.getLanguageStr(2515,_.getLanguageStr(2710));case f.KIND_RESIST_FROST:return _.getLanguageStr(2515,_.getLanguageStr(2711));case f.KIND_RESIST_POISON:return _.getLanguageStr(2515,_.getLanguageStr(2712));case f.KIND_RESIST_SLOW:return _.getLanguageStr(2515,_.getLanguageStr(2719));case f.KIND_RESIST_BEAT:return _.getLanguageStr(2515,_.getLanguageStr(2717));case f.KIND_RESIST_SILENCE:return _.getLanguageStr(2515,_.getLanguageStr(2722));case f.KIND_RESIST_VERTIGO:return _.getLanguageStr(2515,_.getLanguageStr(2715));case f.KIND_RESIST_CRIT:return _.getLanguageStr(2515,_.getLanguageStr(2716));case f.KIND_RESIST_LIGHT:return _.getLanguageStr(2515,_.getLanguageStr(2714));case f.KIND_RESIST_INTIMIDATE:return _.getLanguageStr(2515,_.getLanguageStr(2718));case f.KIND_RESIST_STRSMOOTH:return _.getLanguageStr(2723);case f.KIND_SLOWF:return _.getLanguageStr(2725);case f.KIND_WEAK_FIRE:return _.getLanguageStr(2516,_.getLanguageStr(2710));case f.KIND_WEAK_FROST:return _.getLanguageStr(2516,_.getLanguageStr(2711));case f.KIND_WEAK_POISON:return _.getLanguageStr(2516,_.getLanguageStr(2712));case f.KIND_WEAK_SLOW:return _.getLanguageStr(2516,_.getLanguageStr(2719));case f.KIND_WEAK_BEAT:return _.getLanguageStr(2516,_.getLanguageStr(2717));case f.KIND_WEAK_SILENCE:return _.getLanguageStr(2516,_.getLanguageStr(2722));case f.KIND_WEAK_VERTIGO:return _.getLanguageStr(2516,_.getLanguageStr(2715));case f.KIND_WEAK_CRIT:return _.getLanguageStr(2516,_.getLanguageStr(2716));case f.KIND_WEAK_LIGHT:return _.getLanguageStr(2516,_.getLanguageStr(2714));case f.KIND_WEAK_INTIMIDATE:return _.getLanguageStr(2516,_.getLanguageStr(2718));case f.KIND_ISOLATION:return _.getLanguageStr(2517);case f.KIND_RUN:return _.getLanguageStr(2500);case f.KIND_MIRROR:return _.getLanguageStr(2501);case f.KIND_SUMMON:return _.getLanguageStr(2502);case f.KIND_CLOUD:return _.getLanguageStr(2503);case f.KIND_CURE:return _.getLanguageStr(2504);case f.KIND_BLINK:return _.getLanguageStr(2505);case f.KIND_HIDE:return _.getLanguageStr(2506);case f.KIND_RELIVE:return _.getLanguageStr(2508);case f.KIND_SUICIDE:return _.getLanguageStr(2509);case f.KIND_SHIELD:return _.getLanguageStr(2511);case f.KIND_SNEER:return _.getLanguageStr(2512);case f.KIND_REINCARNATE:return _.getLanguageStr(2514);case f.KIND_TRANSFORM:return _.getLanguageStr(2513);case f.KIND_LINKS:return _.getLanguageStr(2727);default:return""}}get name(){return this.canLevelUp(1)?_.getLanguageStr(2416,this.data.name,this.level):this.data.name}get isDebuff(){return this.grade.indexOf(ae.RES_FG_X)!=-1}get skillSign(){return this.isDebuff?$t(_.getLanguageStr(2422),0,!0,13):$t(_.getLanguageStr(2421),16711680,!0,13)}get isDowerSkill(){return!1}get isLearnSkill(){return!1}getConflictStr(){let e=null,l=0,s=0,n=N.$_conflict_skill_kind,u="";for(l=0;l<n.length;l++)if(e=n[l],e.indexOf(this.data.kindId)!=-1)for(s=0;s<e.length;s++)e[s]!=this.data.kindId&&(u+=ae.getKindName(e[s]),u+=_.getLanguageStr(2406));return u.length>0&&(u=u.slice(0,u.length-1)),u}canLevelUp(e=-1){return e<0&&(e=this.level),e<this.levelMax}get levelMax(){if(this.m_levelMax<=0){const e=N.$_skill_lvup_spend,l=this.grade;if(e[l])for(const s in e[l])this.m_levelMax=Math.max(this.m_levelMax,parseInt(s))+1;else this.m_levelMax=1}return this.m_levelMax}levelUpSpend(e=-1){e<0&&(e=this.level);let l=N.$_skill_lvup_spend,s=this.grade;return l[s]&&l[s][String(e)]?l[s][String(e)]:null}get skillScore(){let e=N.$_skill_grade_score,l=this.grade;return e[l]&&e[l][String(this.level)]?e[l][String(this.level)]:1}get grade(){let e=this.data.id,l=e.indexOf("_");return l==-1?ae.RES_FG_X:e.slice(l+1,e.length)}isEventSkill(){switch(this.data.kindId){case f.KIND_RUN:return!0;default:return!1}}getSubClasses(){switch(this.data.kindId){case f.KIND_FLY:return new ps(this.data.id,this.level,this.monster);case f.KIND_AIRBORNE:return new ol(this.data.id,this.level,this.monster);case f.KIND_RESIST_FIRE:case f.KIND_RESIST_FROST:case f.KIND_RESIST_POISON:case f.KIND_RESIST_SLOW:case f.KIND_RESIST_BEAT:case f.KIND_RESIST_SILENCE:case f.KIND_RESIST_VERTIGO:case f.KIND_RESIST_CRIT:case f.KIND_RESIST_LIGHT:case f.KIND_RESIST_INTIMIDATE:case f.KIND_RESIST_STRSMOOTH:case f.KIND_SLOWF:case f.KIND_WEAK_FIRE:case f.KIND_WEAK_FROST:case f.KIND_WEAK_POISON:case f.KIND_WEAK_SLOW:case f.KIND_WEAK_BEAT:case f.KIND_WEAK_SILENCE:case f.KIND_WEAK_VERTIGO:case f.KIND_WEAK_CRIT:case f.KIND_WEAK_LIGHT:case f.KIND_WEAK_INTIMIDATE:return new Se(this.data.id,this.level,this.monster);case f.KIND_ISOLATION:return new gs(this.data.id,this.level,this.monster);case f.KIND_RUN:return new As(this.data.id,this.level,this.monster);case f.KIND_MIRROR:return new Wl(this.data.id,this.level,this.monster);case f.KIND_SUMMON:return new Yl(this.data.id,this.level,this.monster);case f.KIND_CLOUD:return new ms(this.data.id,this.level,this.monster);case f.KIND_CURE:return new hs(this.data.id,this.level,this.monster);case f.KIND_BLINK:return new _s(this.data.id,this.level,this.monster);case f.KIND_HIDE:return new ul(this.data.id,this.level,this.monster);case f.KIND_RELIVE:return new Xl(this.data.id,this.level,this.monster);case f.KIND_SUICIDE:return new dl(this.data.id,this.level,this.monster);case f.KIND_SHIELD:return new Es(this.data.id,this.level,this.monster);case f.KIND_SNEER:return new Is(this.data.id,this.level,this.monster);case f.KIND_REINCARNATE:return new jl(this.data.id,this.level,this.monster);case f.KIND_TRANSFORM:return new Ts(this.data.id,this.level,this.monster);case f.KIND_LINKS:return new fs(this.data.id,this.level,this.monster);default:return this}}};a(ae,"RES_SKILL","skill_"),a(ae,"RES_FG_A","A"),a(ae,"RES_FG_B","B"),a(ae,"RES_FG_C","C"),a(ae,"RES_FG_Z","Z"),a(ae,"RES_FG_X","X"),a(ae,"RES_FG_0","0"),a(ae,"RES_BG","bg"),a(ae,"PHOTO_WIDTH",34),a(ae,"PHOTO_HEIGHT",34),a(ae,"PHOTO_ROUND",8);let de=ae;class Ee extends de{constructor(t,e,l){super(t,e,l)}warmup(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cooldown(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}chances(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}eventType(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,3)}duration(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,4)}refreshTag(t=!1){this.skillTag1=this.getTagEventType(),this.nextLevelSkillTag1=this.getTagEventType(this.level+1),this.skillTag2=this.getTagCooldown(),this.nextLevelSkillTag2=this.getTagCooldown(this.level+1),t&&(this.skillTag3=this.getTagDuration(),this.nextLevelSkillTag3=this.getTagDuration(this.level+1))}getTagEventType(t=-1){let e=0;t<0&&(t=this.level);let l="",s=this.eventType(t);if(s.length!=4){for(e=0;e<s.length;e++)s[e]==f.EVENT_RED?l+=_.getLanguageStr(2402)+_.getLanguageStr(2406):s[e]==f.EVENT_YELLOW?l+=_.getLanguageStr(2403)+_.getLanguageStr(2406):s[e]==f.EVENT_GREEN?l+=_.getLanguageStr(2404)+_.getLanguageStr(2406):s[e]==f.EVENT_FULL&&(l+=_.getLanguageStr(2405)+_.getLanguageStr(2406));l=l.slice(0,l.length-1),l=_.getLanguageStr(2400,l)}return l}getTagCooldown(t=-1){return t<0&&(t=this.level),""+_.getLanguageStr(2401,this.cooldown(t))}getTagDuration(t=-1){return t<0&&(t=this.level),""+_.getLanguageStr(2407,this.duration(t))}}class ol extends de{constructor(t,e,l){super(t,e,l),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2201)}}heightSpeed(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}pathLengthMin(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}pathLengthMax(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,2)}}a(ol,"BALLOON","balloon"),a(ol,"DEFAULT_HEIGHT",2e3);class _s extends Ee{constructor(t,e,l){super(t,e,l),this.index=100,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2303,K.toGridStr(this.range())),this.m_nextLevelSkillInfo=_.getLanguageStr(2303,K.toGridStr(this.range(this.level+1))),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}}class ms extends Ee{constructor(t,e,l){super(t,e,l),this.index=110,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2302,this.cloudTime()),this.m_nextLevelSkillInfo=_.getLanguageStr(2302,this.cloudTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class hs extends Ee{constructor(t,e,l){super(t,e,l),this.index=140,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2300,K.toGridStr(this.cureRange()),K.toPercentage(this.cureRate())),this.m_nextLevelSkillInfo=_.getLanguageStr(2300,K.toGridStr(this.cureRange(this.level+1)),K.toPercentage(this.cureRate(this.level+1))),this.refreshTag()}}cureRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}cureRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class ps extends de{constructor(t,e,l){super(t,e,l),this.index=90,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2200),this.m_nextLevelSkillInfo=_.getLanguageStr(2200)}}get flyHeight(){return this.data.getLevelParam(this.level,0)}}class ul extends Ee{constructor(t,e,l){super(t,e,l),this.index=150,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2305,this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2305,this.duration(this.level+1)),this.refreshTag()}}}a(ul,"HIDE_TIME",1),a(ul,"HIDE_ALPHA",.1);class gs extends de{constructor(t,e,l){super(t,e,l),this.index=500,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2202)}}}class fs extends Ee{constructor(t,e,l){super(t,e,l),this.index=116,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2728,K.toGridStr(this.range()),K.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2728,K.toGridStr(this.range(this.level+1)),K.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class Wl extends Ee{constructor(t,e,l){super(t,e,l),this.index=130,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2306,this.mirrorNum(),K.toPercentage(this.hpRate()),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2306,this.mirrorNum(this.level+1),K.toPercentage(this.hpRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}mirrorNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}a(Wl,"DEFAULT_DISTANCE",750);class jl extends de{constructor(t,e,l){super(t,e,l),this.index=85,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2215,this.monsterName()),this.m_nextLevelSkillInfo=_.getLanguageStr(2215,this.monsterName(this.level+1))}}monsterIdList(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}monsterName(t=-1){let e=0,l=this.monsterIdList(t),s="";for(e=0;e<l.length;e++)s+=ge.getOnlyExample().getData(l[e]).name,s+=_.getLanguageStr(2406);return s.slice(0,s.length-1),s}}a(jl,"REINCARNATE_TIME",5);class Xl extends de{constructor(t,e,l){super(t,e,l),this.index=170,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2213,this.reliveNum(),K.toPercentage(this.reliveHpRate())),this.m_nextLevelSkillInfo=_.getLanguageStr(2213,this.reliveNum(this.level+1),K.toPercentage(this.reliveHpRate(this.level+1)))}}reliveNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}reliveHpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}a(Xl,"RELIVE_TIME",8);class Se extends de{constructor(e,l,s){super(e,l,s);a(this,"maxHP",0);this.index=300,this.m_updateFunction=function(){this.m_skillInfo=this.resistInfo(),this.m_nextLevelSkillInfo=this.resistInfo(this.level+1)}}getResist(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,0)}getRange(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}getMaxHP(e=-1){return e<0&&(e=this.level),this.data.getLevelParam(e,1)}resistInfo(e=-1){let l=this.getResist(e),s="",n=K.toPercentage(Math.abs(l));return l==0||(l>0?s=_.getLanguageStr(2409):s=_.getLanguageStr(2408),this.data.kindId==f.KIND_SLOWF&&(s=K.toGridStr(this.getRange())),s=_.getLanguageStr(this.resistInfoNumber,s,n),this.data.kindId==f.KIND_RESIST_STRSMOOTH&&this.getMaxHP(e)>0&&(s+=_.getLanguageStr(2730,this.getMaxHP(e)))),s}get resistInfoNumber(){switch(this.data.kindId){case f.KIND_RESIST_FIRE:case f.KIND_WEAK_FIRE:return 2203;case f.KIND_RESIST_FROST:case f.KIND_WEAK_FROST:return 2204;case f.KIND_RESIST_POISON:case f.KIND_WEAK_POISON:return 2205;case f.KIND_RESIST_SLOW:case f.KIND_WEAK_SLOW:return 2206;case f.KIND_RESIST_BEAT:case f.KIND_WEAK_BEAT:return 2207;case f.KIND_RESIST_SILENCE:case f.KIND_WEAK_SILENCE:return 2208;case f.KIND_RESIST_VERTIGO:case f.KIND_WEAK_VERTIGO:return 2209;case f.KIND_RESIST_CRIT:case f.KIND_WEAK_CRIT:return 2210;case f.KIND_RESIST_LIGHT:case f.KIND_WEAK_LIGHT:return 2211;case f.KIND_RESIST_INTIMIDATE:case f.KIND_WEAK_INTIMIDATE:return 2212;case f.KIND_RESIST_STRSMOOTH:return 2724;case f.KIND_SLOWF:return 2726;default:return 0}}}a(Se,"IMMUNITY",2701),a(Se,"RESIST_SUPER",2702),a(Se,"RESIST_HIGH",2703),a(Se,"RESIST",2704),a(Se,"FEAR",2705),a(Se,"FEAR_HIGH",2706),a(Se,"FEAR_SUPER",2707);class As extends Ee{constructor(t,e,l){super(t,e,l),this.index=160,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2304,K.toPercentage(this.speedRate()-1),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2304,K.toPercentage(this.speedRate(this.level+1)-1),this.duration(this.level+1)),this.refreshTag()}}speedRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)+1}}class Es extends Ee{constructor(t,e,l){super(t,e,l),this.index=105,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2308,K.toPercentage(this.shieldRate()),this.shieldTime()),this.m_nextLevelSkillInfo=_.getLanguageStr(2308,K.toPercentage(this.shieldRate(this.level+1)),this.shieldTime(this.level+1)),this.refreshTag(!0)}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}class Is extends Ee{constructor(t,e,l){super(t,e,l),this.index=106,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2309,K.toGridStr(this.range()),K.toPercentage(this.shieldRate()),this.duration()),this.m_nextLevelSkillInfo=_.getLanguageStr(2309,K.toGridStr(this.range(this.level+1)),K.toPercentage(this.shieldRate(this.level+1)),this.duration(this.level+1)),this.refreshTag()}}range(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}shieldRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}}class dl extends de{constructor(t,e,l){super(t,e,l),this.index=185,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2214,K.toGridStr(this.cloudRange()),this.cloudTime()),this.m_nextLevelSkillInfo=_.getLanguageStr(2214,K.toGridStr(this.cloudRange(this.level+1)),this.cloudTime(this.level+1))}}cloudRange(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,0)}cloudTime(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,1)}}a(dl,"isEveryTime",!0),a(dl,"SUICIDE_TIME",.5);class Yl extends Ee{constructor(t,e,l){super(t,e,l),this.index=120,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2301,this.summonNum(),K.toPercentage(this.hpRate()),this.summonName()),this.m_nextLevelSkillInfo=_.getLanguageStr(2301,this.summonNum(this.level+1),K.toPercentage(this.hpRate(this.level+1)),this.summonName(this.level+1)),this.refreshTag(!0)}}summonId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}summonName(t=-1){return t<0&&(t=this.level),ge.getOnlyExample().getData(this.summonId(t)).name}summonNum(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,6)}hpRate(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,7)}}a(Yl,"DEFAULT_DISTANCE",750);class Ts extends Ee{constructor(t,e,l){super(t,e,l),this.index=95,this.m_updateFunction=function(){this.m_skillInfo=_.getLanguageStr(2307,this.transformName()),this.m_nextLevelSkillInfo=_.getLanguageStr(2307,this.transformName(this.level+1)),this.refreshTag(!0)}}transformId(t=-1){return t<0&&(t=this.level),this.data.getLevelParam(t,5)}transformName(t=-1){return t<0&&(t=this.level),ge.getOnlyExample().getData(this.transformId(t)).name}}class zl extends pt{constructor(e,l=1){super();a(this,"level");this.m_data=Gt.getOnlyExample().getData(e),this.level=l}get skillsPackageData(){return this.m_data}}class ql{}a(ql,"COLOR_LIST",[6316128,13631488,13668352,43520,28927,8913056,0]);const le=class le extends ve{constructor(e){super(e);a(this,"m_price");a(this,"priceCoin",0);a(this,"priceGold",0);a(this,"priceScore",0);a(this,"unlockMapId","");a(this,"index",0);this.m_price=e[le.DATA_PRICE],this.initPrice(),this.unlockMapId=e[le.DATA_UNLOCK_MAP_ID],this.index=e[le.DATA_INDEX]}get price(){return this instanceof mt&&Z.currentMap&&Z.currentMap.isDefendMap&&this.campPrice instanceof Array?this.campPrice:this.m_price}initPrice(){let e=this.price;if(e)if(e instanceof Array){const l=e;l[0]==le.DATA_COIN?this.priceCoin=l[1]:l[0]==le.DATA_GOLD?this.priceGold=l[1]:l[0]==le.DATA_SCORE&&(this.priceScore=l[1])}else this.priceCoin=e[le.DATA_COIN],this.priceGold=e[le.DATA_GOLD],this.priceScore=e[le.DATA_SCORE]}get isRare(){if(this.priceCoin>0){if(this.priceCoin>=N.$_rare_item_coin||this.index<0)return!0}else if(this.priceScore>0&&(this.priceScore>=N.$_rare_item_invite_score||this.index<0))return!0;return!1}};a(le,"DATA_PRICE","price"),a(le,"DATA_UNLOCK_MAP_ID","unlock_mid"),a(le,"DATA_COIN","coin"),a(le,"DATA_GOLD","gold"),a(le,"DATA_SCORE","invite_score"),a(le,"DATA_INDEX","index");let Et=le;const se=class se extends Et{constructor(e){super(e);a(this,"gemLevel");a(this,"towerSkillPackage");a(this,"nextLevelId");a(this,"colorIndex");this.typeId=ve.TYPE_GEM_ITEM,this.gemLevel=e[se.DATA_GEM_LEVEL],this.towerSkillPackage=e[se.DATA_TOWER_SKILL_PACKAGE],this.nextLevelId=e[se.DATA_NEXT_LEVEL_ID],this.colorIndex=e[se.DATA_COLOR_INDEX],this.res=this.resString}getSkillPackage(e){if(this.towerSkillPackage==null)return null;let l=/\D/gi;e=e.match(l).join("");let s=this.towerSkillPackage[e];return s==null?null:new zl(s[se.SKILL_PACKAGE_ID],s[se.SKILL_PACKAGE_LEVEL])}get color(){return ql.COLOR_LIST[this.colorIndex]}get resString(){return"hong"+this.gemLevel}};a(se,"TYPE_PURE","typePure"),a(se,"TYPE_MIX","typeMix"),a(se,"DATA_GEM_LEVEL","gamLevel"),a(se,"DATA_TOWER_SKILL_PACKAGE","sp"),a(se,"DATA_NEXT_LEVEL_ID","nextId"),a(se,"DATA_COLOR_INDEX","color"),a(se,"SKILL_PACKAGE_ID","id"),a(se,"SKILL_PACKAGE_LEVEL","lv");let cl=se;const Ce=class Ce extends Je{constructor(){super(),Ce.onlyExample=this,this.loadData(N.$_global_properties[ve.TYPE_GEM_ITEM])}static getOnlyExample(){return Ce.onlyExample==null&&(Ce.onlyExample=new Ce),Ce.onlyExample}loadData(t){let e;for(e in t)this.m_manager[e]=new cl(t[e])}initData(){}getData(t){return this.getDataById(t)}};a(Ce,"onlyExample");let _l=Ce;const J=class J extends Et{constructor(e){super(e);a(this,"skillPackageId");a(this,"skillPackageLevel");a(this,"skills");a(this,"xGrid");a(this,"yGrid");if(this.skillPackageId=e[J.DATA_SKILL_PACKAGE_ID],this.skillPackageLevel=e[J.DATA_SKILL_PACKAGE_LEVEL],e[J.DATA_SKILLS]instanceof Array)this.skills=e[J.DATA_SKILLS];else if(e[J.DATA_SKILLS]instanceof Object){this.skills=[];for(const l in e[J.DATA_SKILLS])this.skills.push({skid:l,lev:e[J.DATA_SKILLS][l]})}e[J.DATA_X_GRID]?this.xGrid=e[J.DATA_X_GRID]:this.xGrid=1,e[J.DATA_Y_GRID]?this.yGrid=e[J.DATA_Y_GRID]:this.yGrid=1}};a(J,"DATA_A","a"),a(J,"DATA_B","b"),a(J,"DATA_C","c"),a(J,"DATA_D","d"),a(J,"DATA_SKILL_PACKAGE_ID","skill"),a(J,"DATA_SKILL_PACKAGE_LEVEL","skillLv"),a(J,"DATA_SKILLS","skills"),a(J,"DATA_X_GRID","x_grid"),a(J,"DATA_Y_GRID","y_grid");let ee=J;const X=class X extends ee{constructor(e){super(e);a(this,"m_buildValueA",0);a(this,"m_buildValueB",0);a(this,"m_buildValueC",0);a(this,"m_campPrice",["",0]);a(this,"m_campBuildValueA",0);a(this,"m_campBuildValueB",0);a(this,"m_campBuildValueC",0);a(this,"range");a(this,"rate");a(this,"limitNum");e[X.DATA_BUILD_VALUE]?(this.m_buildValueA=e[X.DATA_BUILD_VALUE][ee.DATA_A],this.m_buildValueB=e[X.DATA_BUILD_VALUE][ee.DATA_B],this.m_buildValueC=e[X.DATA_BUILD_VALUE][ee.DATA_C]):e[X.DATA_EXP_VALUE]&&(this.m_buildValueA=e[X.DATA_EXP_VALUE][ee.DATA_A],this.m_buildValueB=e[X.DATA_EXP_VALUE][ee.DATA_B],this.m_buildValueC=e[X.DATA_EXP_VALUE][ee.DATA_C]),e[X.DATA_CAMP_PRICE]&&(this.m_campPrice=e[X.DATA_CAMP_PRICE]),e[X.DATA_CAMP_BUILD_VALUE]&&(this.m_campBuildValueA=e[X.DATA_CAMP_BUILD_VALUE][ee.DATA_A],this.m_campBuildValueB=e[X.DATA_CAMP_BUILD_VALUE][ee.DATA_B],this.m_campBuildValueC=e[X.DATA_CAMP_BUILD_VALUE][ee.DATA_C]),this.range=e[X.DATA_RANGE],this.rate=Math.round(e[X.DATA_RATE]*10),this.limitNum=e[X.DATA_LIMIT_NUM]}get buildValueA(){return Z.currentMap&&Z.currentMap.isDefendMap?this.m_campBuildValueA:this.m_buildValueA}get buildValueB(){return Z.currentMap&&Z.currentMap.isDefendMap?this.m_campBuildValueB:this.m_buildValueB}get buildValueC(){return Z.currentMap&&Z.currentMap.isDefendMap?this.m_campBuildValueC:this.m_buildValueC}get campPrice(){return this.m_campPrice}get buildCostPrice(){return this.price[0]}get buildCost(){return this.price[1]}get buildValueAConst(){return this.m_buildValueA}get buildValueBConst(){return this.m_buildValueB}get buildValueCConst(){return this.m_buildValueC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}};a(X,"DATA_BUILD_VALUE","build_val"),a(X,"DATA_EXP_VALUE","exp_val"),a(X,"DATA_CAMP_PRICE","camp_price"),a(X,"DATA_CAMP_BUILD_VALUE","camp_build_val"),a(X,"DATA_RANGE","range"),a(X,"DATA_RATE","rate"),a(X,"DATA_LIMIT_NUM","limit_num");let mt=X;const k=class k extends mt{constructor(e){super(e);a(this,"valueList");a(this,"effectType");a(this,"effectKind");a(this,"effectRange");a(this,"useNum");a(this,"colddown");a(this,"delay");a(this,"attackEffectId");this.typeId=ve.TYPE_TRAP_ITEM,this.valueList=e[k.DATA_VALUE_LIST],this.effectType=e[k.DATA_EFFECT_TYPE],this.effectKind=e[k.DATA_EFFECT_KIND],e[k.DATA_USE_NUM]?this.useNum=e[k.DATA_USE_NUM]:this.useNum=1,e[k.DATA_COLDDOWN]?this.colddown=e[k.DATA_COLDDOWN]:this.colddown=.1,e[k.DATA_DELAY]?this.delay=e[k.DATA_DELAY]:this.delay=0,e[k.DATA_EFFECT_RANGE]?this.effectRange=e[k.DATA_EFFECT_RANGE]:this.effectRange=this.range,this.attackEffectId=e[k.DATA_EFFECT]}};a(k,"KIND_BLAST","1"),a(k,"KIND_DAMAGE","2"),a(k,"KIND_VERTIGO","3"),a(k,"KIND_SLOW","4"),a(k,"KIND_BEAT_BACK","5"),a(k,"KIND_COLD_BULLET","50"),a(k,"KIND_BULLET","100"),a(k,"KIND_BULLET_RANDOM","101"),a(k,"EFFECT_TYPE_FLOOR","1"),a(k,"EFFECT_TYPE_AIR","2"),a(k,"EFFECT_TYPE_ALL","3"),a(k,"EFFECT_TYPE_LIGHTNING","4"),a(k,"EFFECT_KIND_SINGLE","1"),a(k,"EFFECT_KIND_MULTI","2"),a(k,"DATA_VALUE_LIST","value"),a(k,"DATA_EFFECT_TYPE","effectType"),a(k,"DATA_EFFECT_KIND","effectKind"),a(k,"DATA_EFFECT_RANGE","effectRange"),a(k,"DATA_USE_NUM","use_times"),a(k,"DATA_COLDDOWN","colddown"),a(k,"DATA_DELAY","delay"),a(k,"DATA_EFFECT","effect");let ml=k;class Dl extends mt{constructor(e){super(e);a(this,"m_buildCostA");a(this,"m_buildCostB");a(this,"m_buildCostC");a(this,"m_campBuildCostA");a(this,"m_campBuildCostB");a(this,"m_campBuildCostC");a(this,"damageA");a(this,"damageB");a(this,"damageC");a(this,"bulletId","");a(this,"buffEffect");a(this,"levelMax");this.m_buildCostA=e.build_cost.a,this.m_buildCostB=e.build_cost.b,this.m_buildCostC=e.build_cost.c,this.m_campBuildCostA=e.camp_build_cost.a,this.m_campBuildCostB=e.camp_build_cost.b,this.m_campBuildCostC=e.camp_build_cost.c,this.damageA=e.damage.a,this.damageB=e.damage.b,this.damageC=e.damage.c,this.buffEffect=e.buffEffect,this.levelMax=e.lev_max,this.bulletId=e.bId}get buildCostA(){var e;return(e=Z.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostA:this.m_buildCostA}get buildCostB(){var e;return(e=Z.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostB:this.m_buildCostB}get buildCostC(){var e;return(e=Z.currentMap)!=null&&e.isDefendMap?this.m_campBuildCostC:this.m_buildCostC}get buildCostAConst(){return this.m_buildCostA}get buildCostBConst(){return this.m_buildCostB}get buildCostCConst(){return this.m_buildCostC}get buildCostPriceConst(){return this.m_price[0]}get buildCostConst(){return this.m_price[1]}get isMagicTower(){return this.id=="xiangqianta"}}const Oe=class Oe extends Je{constructor(){super(),Oe.onlyExample=this,this.loadData(N.$_towerAtt_Obj)}static getOnlyExample(){return Oe.onlyExample==null&&(Oe.onlyExample=new Oe),Oe.onlyExample}loadData(t){for(const e in t){const l=t[e];l[ce.DATA_ID]=e,this.m_manager[e]=new Dl(t[e])}}getData(t){return this.getDataById(t)}};a(Oe,"onlyExample");let hl=Oe;const j=class j extends ee{constructor(e){super(e);a(this,"shapeMode");a(this,"damageMode");a(this,"radii");a(this,"shadow");a(this,"fallAccSpeed");a(this,"floorPathId");a(this,"hitEffectId");this.shapeMode=e[j.DATA_SHAPE_MODE],this.damageMode=e[j.DATA_DAMAGE_MODE],this.radii=e[j.DATA_RADII],e[j.DATA_SHADOW]?this.shadow=e[j.DATA_SHADOW]:this.shadow=1,this.fallAccSpeed=e[j.DATA_FALL_ACC_SPEED],this.floorPathId=e[j.DATA_FLOOR_PATH_ID],this.hitEffectId=e[j.DATA_HIT_EFFECT_ID]}};a(j,"SHAPE_COMMON",0),a(j,"SHAPE_DIRECTION",1),a(j,"SHAPE_ROLL",2),a(j,"DAMAGE_NULL",0),a(j,"DAMAGE_COMMON",1),a(j,"DAMAGE_PERFORATIVE",2),a(j,"DAMAGE_MAGICAL",3),a(j,"DAMAGE_SIEGE",4),a(j,"DAMAGE_MIXED",5),a(j,"FALL_ACC_SPEED_THRESHOLD",-7),a(j,"DATA_SHAPE_MODE","shapeMode"),a(j,"DATA_DAMAGE_MODE","damageMode"),a(j,"DATA_RADII","radii"),a(j,"DATA_SHADOW","shadow"),a(j,"DATA_FALL_ACC_SPEED","fallAcc"),a(j,"DATA_FLOOR_PATH_ID","path"),a(j,"DATA_HIT_EFFECT_ID","effect");let pl=j;const ye=class ye extends Je{constructor(){super(),ye.onlyExample=this,this.loadData(N.$_bulletAtt_Obj)}static getOnlyExample(){return ye.onlyExample==null&&(ye.onlyExample=new ye),ye.onlyExample}loadData(t){for(const e in t){const l=t[e];l[ce.DATA_ID]=e,this.m_manager[e]=new pl(t[e])}}getData(t){return this.getDataById(t)}};a(ye,"onlyExample");let gl=ye;const y=class y extends ee{constructor(e){super(e);a(this,"hpMaxA");a(this,"hpMaxB");a(this,"hpMaxC");a(this,"expMaxA",0);a(this,"expMaxB",0);a(this,"expMaxC",0);a(this,"expMaxD",0);a(this,"speedBase");a(this,"charm");a(this,"height");a(this,"width");a(this,"speakList",[]);a(this,"population");e[y.DATA_HP_MAX]?(this.hpMaxA=e[y.DATA_HP_MAX][ee.DATA_A],this.hpMaxB=e[y.DATA_HP_MAX][ee.DATA_B],this.hpMaxC=e[y.DATA_HP_MAX][ee.DATA_C]):(this.hpMaxA=e[y.DATA_HP_MAX_A],this.hpMaxB=e[y.DATA_HP_MAX_B],this.hpMaxC=e[y.DATA_HP_MAX_C]),e[y.DATA_EXP_MAX]&&(this.expMaxA=e[y.DATA_EXP_MAX][ee.DATA_A],this.expMaxB=e[y.DATA_EXP_MAX][ee.DATA_B],this.expMaxC=e[y.DATA_EXP_MAX][ee.DATA_C],this.expMaxD=e[y.DATA_EXP_MAX][ee.DATA_D]),this.speedBase=e[y.DATA_SPEED_BASE],this.charm=e[y.DATA_CHARM],this.height=e[y.DATA_HEIGHT],this.width=e[y.DATA_WIDTH],e[y.DATA_SPEAK_LIST]instanceof Array&&(this.speakList=e[y.DATA_SPEAK_LIST]),this.population=e[y.DATA_POPULATION]}getSpeak(e=0){if(this.speakList instanceof Array&&this.speakList.length>e){if(this.speakList[e]instanceof String)return this.speakList[e];if(this.speakList[e]instanceof Array){const l=this.speakList[e];return l[Math.floor(Math.random()*l.length)]}}return""}getSpeakEnter(){return this.getSpeak(y.SPEAK_ENTER)}getSpeakIdle(){return this.getSpeak(y.SPEAK_IDLE)}getSpeakInjury(){return this.getSpeak(y.SPEAK_INJURY)}getSpeakDie(){return this.getSpeak(y.SPEAK_DIE)}getSpeakInvade(){return this.getSpeak(y.SPEAK_INVADE)}getSpeakCast(){return this.getSpeak(y.SPEAK_CAST)}get isBoss(){return this.population>=100}get isRandomBoss(){return this.population==99}getHpMax(e,l=1){return Math.floor((this.hpMaxA+e*(this.hpMaxB+e*this.hpMaxC))*l)}};a(y,"SPEAK_ENTER",0),a(y,"SPEAK_IDLE",1),a(y,"SPEAK_INJURY",2),a(y,"SPEAK_DIE",3),a(y,"SPEAK_INVADE",4),a(y,"SPEAK_CAST",5),a(y,"DEFENSE_NULL",0),a(y,"DEFENSE_LIGHT",1),a(y,"DEFENSE_COMMON",2),a(y,"DEFENSE_HEAVY",3),a(y,"DEFENSE_BUILDING",4),a(y,"DEFENSE_BOSS",5),a(y,"DEFENSE_HOLY",6),a(y,"DEFENSE_INVINCIBLE",7),a(y,"DATA_HP_MAX","hp_factor"),a(y,"DATA_EXP_MAX","explev"),a(y,"DATA_HP_MAX_A","ha"),a(y,"DATA_HP_MAX_B","hb"),a(y,"DATA_HP_MAX_C","hc"),a(y,"DATA_SPEED_BASE","speed"),a(y,"DATA_CHARM","charm"),a(y,"DATA_HEIGHT","height"),a(y,"DATA_WIDTH","width"),a(y,"DATA_SPEAK_LIST","speak"),a(y,"DATA_POPULATION","pop");let It=y;const Ke=class Ke extends Je{constructor(){super(),Ke.onlyExample=this,this.loadData(N.$_wolfAtt_Obj)}static getOnlyExample(){return Ke.onlyExample==null&&(Ke.onlyExample=new Ke),Ke.onlyExample}loadData(t){for(const e in t){const l=t[e];l[ce.DATA_ID]=e,this.m_manager[e]=new It(l)}}getBossList(t){const e=[];if(!(t instanceof Array))return e;for(let l=0;l<t.length;l++){const s=this.getData(t[l]);s&&s.isBoss&&e.push(t[l])}return e}getRandomBossList(t){const e=[];if(!(t instanceof Array))return e;for(let l=0;l<t.length;l++){const s=this.getData(t[l]);s&&s.isRandomBoss&&e.push(t[l])}return e}getData(t){return this.getDataById(t)}};a(Ke,"onlyExample");let ge=Ke;function Jl(o,t){const e=N.$_wolfAtt_Obj[o].pop;return e<99?e:t??e}function Ls(o,t=1){return U.sumBy(o,e=>Jl(e,t))}function xl(o,t){return Math.round((2+1.07*t)*Math.pow(o/.39,2/3))}function vs(o,t){const e=N.dream_data.dm_opt_cfg.tower_sum_exp;return Math.round(t*Math.pow(o,e.power)*e.popu+e.p)}function Ds(o,t){const e=N.$_map_Obj[o],l=e.wolf_proportion;let s=e.pop_max;const n=l.map(b=>b[0]),u=l.map(b=>Jl(b[1]));let r=l.map(b=>b[1]),m=u.length;if(m==0)return[[],[]];let p=[],h=new Array(m).fill(0);if(t&&(p=t.flatMap((b,S)=>new Array(b).fill(r[S])),h=t,t.length=u.length,s-=U.chain(u).zip(t).sumBy(b=>b[0]*b[1]).value(),s<0))return null;for(;s>0;){for(;m>0&&s<u[m-1];)m--;if(m==0)break;let b;do{const S=Math.random()*n[m-1];b=U.findIndex(n,I=>S<I)}while(s<u[b]);s-=u[b],p.push(r[b]),h[b]++}return[t?U.shuffle(p):p,U.zip(r,h)]}function Ss(o){return Ga(o)}function rt(o,t,e){return Na.hsl(Ss(o),t,e).string()}const Zl=G({__name:"WolfHpChart",props:{hpData:{},width:{default:600},height:{default:200}},setup(o){Ct([Ll,Ot,yt,Kt,Pt]);const t=o,e=B(()=>({color:["#00A2E8"],title:{text:"当前狼血量",left:"center",textStyle:{fontStyle:"normal",fontFamily:"sans-serif",fontSize:16}},tooltip:{},xAxis:{type:"value",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}}},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.hpData.map(l=>l.name)},grid:{left:100,top:30,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.hpData.map(l=>l.value),itemStyle:{color:function(l){return rt(l.name,80,45)}}}}));return(l,s)=>{const n=ze("v-chart");return g(),P(n,{class:"chart",option:d(e),style:yl({width:`${l.width}px`,height:`${l.height}px`}),autoresize:""},null,8,["option","style"])}}}),bs={class:"space-x-4"},xs=G({__name:"index",setup(o){const t=U.chain(N.dream_maps).toArray().sortBy("index").value(),e=ne({mid:"m2A",score:1}),l=B(()=>N.dream_maps[e.mid]),s=R=>R%10===0?(R-10)%100+10:R%10,n=R=>{const C=s(R).toString(),w=N.dream_waves[e.mid];return R%10==0?w.boss[C]:w.wolf[C]},u=B(()=>n(e.score).map(R=>ge.getOnlyExample().getData(R))),r=(R,C)=>{const w=s(C).toString();return N.dream_waves[e.mid].popu[w]},m=B(()=>r(e.mid,e.score)),p=R=>vs(R,r(e.mid,R==0?1:R==9?10:s(R))),h=B(()=>p(e.score)),b=B(()=>Math.sqrt(l.value.hard_ness*e.score+l.value.yield_val)),S=B(()=>{for(const[R,C]of Object.entries(N.dream_data.dm_wolf_hard_ness)){const[w,v]=R.split("_");if(e.score>=Number.parseInt(w)&&e.score<=Number.parseInt(v))return C}return N.dream_data.dm_wolf_hard_ness.default}),I=B(()=>u.value.map(R=>({name:R.name,value:R.getHpMax(b.value,S.value)}))),O=B(()=>{let R=0,C=0;for(let w=1;w<=e.score;w++){let v=Math.sqrt(l.value.yield_val+l.value.hard_ness*w);R+=xl(v,r(e.mid,w)),C+=p(w)}return{gold:R,exp:C}});return(R,C)=>{const w=Me,v=Ve,te=Xe,V=De,Q=fe,ut=ze("vue-latex"),q=Pe;return g(),P(q,{model:d(e),"label-width":"120px"},{default:c(()=>[i(V,{label:"地图"},{default:c(()=>[i(v,{modelValue:d(e).mid,"onUpdate:modelValue":C[0]||(C[0]=ie=>d(e).mid=ie)},{default:c(()=>[(g(!0),D(M,null,H(d(t),ie=>(g(),P(w,{key:ie.id,label:`${ie.id} ${ie.name}`,value:ie.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),i(te,{effect:"light",class:"mx-1"},{default:c(()=>[x(" 难度系数："+T(d(l).hard_ness)+", "+T(d(l).yield_val),1)]),_:1})]),_:1}),i(V,{label:"进度"},{default:c(()=>[i(Q,{modelValue:d(e).score,"onUpdate:modelValue":C[1]||(C[1]=ie=>d(e).score=ie),min:0},null,8,["modelValue"]),i(te,{effect:"light",class:"mx-1"},{default:c(()=>[x(" HpRate："+T(d(S)),1)]),_:1}),i(te,{effect:"light",class:"mx-1"},{default:c(()=>[x(" Population："+T(d(m)),1)]),_:1})]),_:1}),i(V,null,{default:c(()=>[x(" 银币： "),i(ut,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${d(xl)(d(b),d(m))}`},null,8,["expression"])]),_:1}),i(V,null,{default:c(()=>[x(" 经验： "),i(ut,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${d(h)}`},null,8,["expression"])]),_:1}),i(V,null,{default:c(()=>[A("div",bs,[A("span",null,"总银币："+T(d(O).gold),1),A("span",null,"总经验："+T(d(O).exp),1)])]),_:1}),i(Zl,{"hp-data":d(I),height:300},null,8,["hp-data"])]),_:1},8,["model"])}}});const Ns=Object.freeze(Object.defineProperty({__proto__:null,default:xs},Symbol.toStringTag,{value:"Module"})),ws={key:0,class:"space-y-1"},Rs={class:"space-x-0.5"},Cs=G({__name:"index",setup(o){const t=U.sortBy(Object.values(N.dream_maps),"name").map(e=>({...e,...N.dream_waves[e.id],waves:Object.assign({},N.dream_waves[e.id].wolf,N.dream_waves[e.id].boss)}));return(e,l)=>{const s=je,n=Xe,u=We;return g(),D("div",null,[i(u,{data:d(t)},{default:c(()=>[i(s,{prop:"id",label:"id",sortable:"",align:"center"}),i(s,{prop:"name",label:"name",sortable:"",align:"center"}),i(s,{prop:"interval",label:"interval",sortable:"",align:"center"}),i(s,{prop:"interval_rule",label:"interval_rule",sortable:"",align:"center"}),i(s,{prop:"hard_ness",label:"hard_ness",sortable:"",align:"center"}),i(s,{prop:"yield_val",label:"yield_val",sortable:"",align:"center"}),i(s,{label:"waves",type:"expand",width:"80"},{default:c(r=>[r.row.waves?(g(),D("div",ws,[A("table",null,[(g(!0),D(M,null,H(r.row.waves,(m,p)=>(g(),D("tr",{key:p},[A("td",null,[i(n,null,{default:c(()=>[x(T(p),1)]),_:2},1024)]),A("td",Rs,[(g(!0),D(M,null,H(m,h=>(g(),P(n,{key:h,style:yl({color:d(rt)(h,40,40),"background-color":d(rt)(h,80,90),"border-color":d(rt)(h,50,80)})},{default:c(()=>[x(T(d(he)(h)),1)]),_:2},1032,["style"]))),128))]),A("td",null,[i(n,null,{default:c(()=>[x(T(r.row.popu[p]),1)]),_:2},1024)])]))),128))]),(g(!0),D(M,null,H(r.row.waves,(m,p)=>(g(),D("div",{key:p,class:"space-x-1"}))),128))])):pe("",!0)]),_:1})]),_:1},8,["data"])])}}});const Os=qe(Cs,[["__scopeId","data-v-3255a3ed"]]),ys=Object.freeze(Object.defineProperty({__proto__:null,default:Os},Symbol.toStringTag,{value:"Module"})),Ks=G({__name:"DreamWaveEditor",props:ct({wolfList:{}},{modelValue:{},modelModifiers:{}}),emits:ct(["change"],["update:modelValue"]),setup(o,{emit:t}){const e=o,l=Be(o,"modelValue"),s=t,n=Y(""),u=Y(!1),r=Y(),m=Y(e.wolfList.slice()),p=O=>{l.value.splice(l.value.indexOf(O),1),s("change")},h=()=>{u.value=!0,ma(()=>{r.value.focus()})},b=O=>{console.log(O),m.value=O?e.wolfList.filter(S(O)):e.wolfList},S=O=>R=>R.id.toLowerCase().includes(O.toLowerCase())||R.value.includes(O),I=O=>{l.value.push(O),l.value.sort((R,C)=>R.id.localeCompare(C.id)),u.value=!1,n.value="",s("change")};return(O,R)=>{const C=Xe,w=ra,v=Me,te=Ye;return g(),D("div",null,[A("div",null,[(g(!0),D(M,null,H(l.value,V=>(g(),P(C,{key:V.id,type:"info",effect:"plain",class:"m-0.5",closable:"","disable-transitions":!1,onClose:Q=>p(V)},{default:c(()=>[A("ruby",null,[x(T(V.value)+" ",1),A("rt",null,T(V.id),1)])]),_:2},1032,["onClose"]))),128)),d(u)?(g(),P(d(Ve),{key:0,ref_key:"InputRef",ref:r,modelValue:d(n),"onUpdate:modelValue":R[0]||(R[0]=V=>Ae(n)?n.value=V:null),filterable:"","filter-method":b,class:"inline-block m-0.5",placeholder:"Select",size:"small",onChange:I},{default:c(()=>[(g(!0),D(M,null,H(d(m),V=>(g(),P(v,{key:V.id,value:V},{default:c(()=>[x(T(V.value)+" ",1),i(w,{class:"mx-1",type:"primary"},{default:c(()=>[x("["+T(V.id)+"]",1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(g(),P(te,{key:1,class:"button-new-tag m-0.5",type:"primary",plain:"",size:"small",onClick:h},{default:c(()=>[x(" + ")]),_:1}))])])}}}),Ps={class:"dialog-footer"},Ms=G({__name:"index",setup(o){const{toClipboard:t}=kl(),e=Y(!1),l=Y(""),s=Y(!1),n=Y({}),u=Y(""),r=Y(),m=Object.keys(N.$_wolfAtt_Obj).map(C=>({id:C,value:he(C)})),p=[1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100],h=Y(p.map(C=>({key:C,wolf:[],popu:0,popFixed:!1}))),b=(C,w=!1)=>{(!C.popFixed||w)&&(C.popFixed=!1,C.popu=Ls(C.wolf.map(v=>v.id)))},S=C=>{C.popu==0?(C.popFixed=!1,b(C)):C.popFixed=!0},I=()=>{const C=JSON.parse(l.value);h.value=p.map(w=>({key:w,wolf:(C.wolf[w]??C.boss[w]??[]).map(v=>({id:v,value:he(v)})),popu:C.popu[w],popFixed:!0})),e.value=!1},O=()=>{s.value=!0;const C={wolf:{},boss:{},popu:{}};for(const w of h.value){const v=w.wolf.map(te=>te.id);C[w.key<10?"wolf":"boss"][w.key]=v,w.key<10?C.wolf[w.key]=v:C.boss[w.key]=v,C.popu[w.key]=w.popu}n.value=C,u.value=JSON.stringify(C)},R=()=>{t(u.value,r.value.$el),fl.success("已复制到剪贴板")};return(C,w)=>{const v=Ye,te=je,V=fe,Q=We,ut=Rl;return g(),D("div",null,[i(v,{onClick:w[0]||(w[0]=q=>e.value=!0)},{default:c(()=>[x("导入")]),_:1}),i(v,{onClick:O},{default:c(()=>[x("导出")]),_:1}),i(Q,{data:d(h),style:{"max-width":"1200px"}},{default:c(()=>[i(te,{prop:"key",label:"Key",width:80,align:"center"}),i(te,{label:"Wolf"},{default:c(q=>[i(Ks,{"wolf-list":d(m),modelValue:q.row.wolf,"onUpdate:modelValue":ie=>q.row.wolf=ie,onChange:ie=>b(q.row)},null,8,["wolf-list","modelValue","onUpdate:modelValue","onChange"])]),_:1}),i(te,{label:"Population",width:160,align:"center"},{default:c(q=>[i(V,{modelValue:q.row.popu,"onUpdate:modelValue":ie=>q.row.popu=ie,size:"small",min:0,onChange:ie=>S(q.row),style:{width:"90px"},class:ha({primary:q.row.popFixed})},null,8,["modelValue","onUpdate:modelValue","onChange","class"]),i(v,{icon:q.row.popFixed?d(Ta):d(La),circle:"",size:"small",class:"m-0.5",onClick:ie=>q.row.popFixed?b(q.row,!0):q.row.popFixed=!0},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),i(ut,{modelValue:d(e),"onUpdate:modelValue":w[3]||(w[3]=q=>Ae(e)?e.value=q:null),title:"导出数据"},{footer:c(()=>[A("span",Ps,[i(v,{onClick:w[2]||(w[2]=q=>e.value=!1)},{default:c(()=>[x("取消")]),_:1}),i(v,{type:"primary",onClick:I},{default:c(()=>[x(" 确定 ")]),_:1})])]),default:c(()=>[i(d(Nt),{type:"textarea",rows:10,modelValue:d(l),"onUpdate:modelValue":w[1]||(w[1]=q=>Ae(l)?l.value=q:null),spellcheck:!1},null,8,["modelValue"])]),_:1},8,["modelValue"]),i(ut,{modelValue:d(s),"onUpdate:modelValue":w[4]||(w[4]=q=>Ae(s)?s.value=q:null),title:"导出数据"},{default:c(()=>[i(d(Vl),{data:d(n),virtual:"",deep:2},null,8,["data"]),i(v,{onClick:R,ref_key:"someRef",ref:r},{default:c(()=>[x("复制到剪贴板")]),_:1},512)]),_:1},8,["modelValue"])])}}});const Vs=Object.freeze(Object.defineProperty({__proto__:null,default:Ms},Symbol.toStringTag,{value:"Module"})),ks={class:"markdown-body"},Us=pa("<h1>羊村设计大赛快来参加一下吧</h1><p>在苦工们的努力建设之下，新羊村的首个可公开版本不久就要上线了。</p><p>在我们有机会一睹真容前呢，先说个好消息。感谢耳阝鱼禾与技术的沟通，怀旧版可以开放四图啦！</p><p>不过呢，由于<strong>没有官方策划人手投入</strong>，要想玩到新关卡，还得靠我们自己来设计新图呢……</p><p>新的一年，举办羊村首届设计大赛，有兴趣的快来参加吧！</p><h2>时间</h2><p><strong>2024/1/6 18:00 ~ 2024/1/20 18:00（UTC+8）</strong></p><p>视参与情况可能会延长。</p><h2>赛道</h2><p><strong>比赛分为以下赛道</strong></p><h3>赛道 1：怀旧版新地图</h3><p>打造自己的羊村四图！需要提供如下内容（不必都有，但内容尽可能完善）：</p><ol><li><strong>地图资源</strong>。每个地图有一个 swf 文件，其中内嵌代码配置了地形数据（每个格子的类型，如可行走地面、传送阵、传送带）。可使用 ffdec 解包老羊村的地图资源，然后用 Adobe Animate 进行重新设计，导出成所需的 swf 格式。也可只提供概念风格设计，画出格子分布、前景和背景，给出特殊地块的位置。</li><li><strong>地图配置数据</strong>。小工具将会开放地图设计工具，导出所需的配置数据格式。主要内容为： <ul><li>地图名称</li><li>通关分数</li><li>难度系数</li><li>狼的种类和权重</li><li>出怪间隔</li><li>随机 boss 及奖励的分布</li><li>最终 boss 波出怪列表</li></ul></li></ol><p>考虑操作存在一定技术性，可以不提供具体的资源/配置文件，但需要有方案使得我们可以快速实现这些设想。</p><p>暂时不考虑怀旧的新狼、新建筑、新道具的设计。</p><p>新地图可以是老羊村已有地图的<strong>重新设计</strong>，如改变狼的配置，扩充格子，移动甚至拆除障碍，增加特殊地块等。发挥创造力的时刻到了！</p><p><strong>新地图越多越好！在通过内部测试后会向大众开放！</strong></p><h3>赛道 2：新羊村地图</h3><p>可设计内容包括：</p><ol><li><strong>章节</strong>。一个章节有大约 10 个关卡，可以设计这个章节的主题、剧情，描述各关卡风格差异。 <ul><li>目前考虑的主题有：工业遗迹、海洋、湖泊、洞穴等。可以在此基础上发挥，也可自创新的章节。</li></ul></li><li><strong>地图地形</strong>。地图均为六边形格子，行走方向为 0°、60°、120°。地图宽高不超过 13x11（出口入口除外）。 <ul><li>希望地块布局不限于方方正正。可以发挥想象，加入各种只能放塔、只能走狼、只能飞行经过的格子。</li><li>同时给出较为详细的地图美术风格设计，描述场景布置、美术表现。</li></ul></li><li><strong>地图特殊机制和障碍</strong><ul><li>原版内容包括： <ul><li>机制：传送阵、弹簧、传送带、箱子等。</li><li>障碍：火山、反应炉、核电厂等。</li><li>特殊地形：增强毒效果的格子。</li></ul></li><li>希望在新的章节里有富有主题特色的机制加入。</li><li>目前考虑的机制包括：狼可以行走但会减速的水面，狼狂奔加速、被击退距离增加的冰面等。</li></ul></li></ol><h3>赛道 3：新羊村角色</h3><p>提供<strong>美术设计方案</strong>。此处角色包括：</p><ol><li>进攻方（狼）。可以是原版狼的美术重置，也可以是新狼。其他种族也是可以的！</li><li>防守方（英雄角色，塔）。英雄可以同时作为攻防方。目前已有一大批英雄的设计方案，但暂未公开。可以考虑在给出形象设计后与合适的角色进行匹配。</li><li>其他想加入的角色。</li></ol><p>因为新羊村会全面采用 3D 美术，这里只需要给出 <strong>2D 概念设计图</strong>。</p><p><s>有不被采纳的风险，但奖励会照常发放。</s></p><h3>赛道 4：周边</h3><p>其实我也不知道周边有啥……玩偶？挂件？</p><p>反正设计出来就有奖。</p><h2>奖励</h2><p>公开投票，每个赛道独立排名，奖项宁缺毋滥。会考虑设计贡献度和工作量。</p><ul><li>Track 1 &amp; 2 <ul><li>1st：20R</li><li>2nd：10R</li><li>3rd：5R</li><li>创意奖：5R x 2</li></ul></li><li>Track 3 <ul><li>1st：15R</li><li>2nd：10R</li><li>3rd：5R</li></ul></li><li>Track 4 <ul><li>视质量，10R 起步</li></ul></li></ul><p>同一赛道不重复获奖。</p><p>解释权归 Stankle 所有，所有奖励由 Stankle 自掏腰包。</p>",33),Fs=[Us],$s={__name:"design-contest",setup(o,{expose:t}){return t({frontmatter:{}}),(l,s)=>(g(),D("div",ks,Fs))}},Bs=G({__name:"index",setup(o){return(t,e)=>{const l=wt,s=xt,n=bt;return g(),P(n,null,{default:c(()=>[i(s,{label:"设计大赛"},{default:c(()=>[i(l,null,{default:c(()=>[(g(),P(Il(d($s))))]),_:1})]),_:1})]),_:1})}}}),Hs=Object.freeze(Object.defineProperty({__proto__:null,default:Bs},Symbol.toStringTag,{value:"Module"})),Le=class Le extends ns{constructor(){super();a(this,"id","");a(this,"skills",{});a(this,"tag");this.tag="BaseUnit"}init(){this.initSkills()}initSkills(){}get data(){return this.m_data}};a(Le,"SKILL_ID","skid"),a(Le,"SKILL_LEVEL","lev"),a(Le,"STATUS_RATE",200),a(Le,"STATUS_TIME",Le.STATUS_RATE/1e3),a(Le,"AOE_SILENCE_RANGE",1e3),a(Le,"AOE_SILENCE_TIME",2);let He=Le;class Gs extends He{constructor(){super()}get buildingData(){return this.m_data}get range(){return this.buildingData.range}get skillInfo(){const t=Object.values(this.skills);t.sort((l,s)=>l.index-s.index);const e=t.map(l=>l.skillInfo).filter(l=>l!="").join(`
`);return e==""?this.buildingData.info:e}}class Ws extends He{constructor(e){super();a(this,"damage",0);a(this,"range",0);a(this,"attackType");this.m_data=gl.getOnlyExample().getData(e),this.attackType=ml.EFFECT_TYPE_ALL}get bulletData(){return this.m_data}}const dt=class dt extends Gs{constructor(e){super();a(this,"m_level",0);a(this,"gem",null);a(this,"m_attackType","");this.tag="Tower",e&&(this.m_data=hl.getOnlyExample().getData(e),this.initTower()),this.level=1}static fromData(e){const l=new dt(null);return l.m_data=e,l.initTower(),l}get towerData(){return this.m_data}initTower(){this.initSkills()}initSkills(){if(this.skills={},this.towerData.skillPackageId!=""){const e=new zl(this.towerData.skillPackageId,this.towerData.skillPackageLevel);if(e!=null&&e.skillsPackageData!=null)for(const l of e.skillsPackageData.skillsList){const s=new W(l,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}}if(this.gem){const e=this.gem.gemData.getSkillPackage(this.data.id);if(e!=null&&e.skillsPackageData!=null)for(const l of e.skillsPackageData.skillsList){const s=new W(l,e.level,this).getSubClasses();this.skills[s.data.kindId]=s}this.skills[L.KIND_SCATTER_ATTACK]&&delete this.skills[L.KIND_DIVIDED_ATTACK]}}get color(){return this.gem!=null?this.gem.gemData.color:6316128}get level(){return this.m_level}set level(e){this.m_level=e}get gemLevel(){return this.gem?this.gem.gemData.gemLevel:0}get ability(){const e=this.gemLevel;return this.towerData.isMagicTower?e==0?0:this.m_level*(.8+e/5)*2:this.m_level*(1+e/10)}get power(){const e=this.level,l=N.$_tower_worth_factor,s=this.gemLevel,n=this.valueCostConst(e);return Math.round((n+Math.pow(s,l[0])*l[1])*(l[2]+s/l[3]))}buildValue(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildValueA+this.towerData.buildValueB*e+this.towerData.buildValueC*e*e)}buildCost(e=-1){return e==-1&&(e=this.level),Math.floor(this.towerData.buildCostA+this.towerData.buildCostB*e+this.towerData.buildCostC*e*e)}valueCost(e=-1){e==-1&&(e=this.level);const l=e*this.towerData.buildCostA+(e*e+e)/2*this.towerData.buildCostB+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostC+this.towerData.buildCost-this.towerData.buildCostA-this.towerData.buildCostB-this.towerData.buildCostC;return Math.round(l)}valueCostConst(e=-1){e==-1&&(e=this.level);const l=e*this.towerData.buildCostAConst+(e*e+e)/2*this.towerData.buildCostBConst+(e*e*e+e*e*3/2+e/2)/3*this.towerData.buildCostCConst+this.towerData.buildCostConst-this.towerData.buildCostAConst-this.towerData.buildCostBConst-this.towerData.buildCostCConst;return Math.round(l)}buffEffect(e=-1){return e==-1&&(e=this.level),this.towerData.buffEffect*e+1}damage(e=-1){let l=0;if(e==-1&&(e=this.level),this.skills[L.KIND_CHANGE_DAMAGE]instanceof Bl){let s=this.skills[L.KIND_CHANGE_DAMAGE];s.isChangeBase()?l=Math.round((s.damageA+s.damageB*e+s.damageC*e*e)*s.damageRate+s.damageAdd):l=Math.round((this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e)*s.damageRate+s.damageAdd)}else l=Math.round(this.towerData.damageA+this.towerData.damageB*e+this.towerData.damageC*e*e);return Math.max(l,0)}get range(){let e=0;if(this.skills[L.KIND_CHANGE_RANGE]instanceof Hl){let l=this.skills[L.KIND_CHANGE_RANGE];l.isChangeBase()?e=l.range*l.rangeRate+l.rangeAdd:e=this.towerData.range*l.rangeRate+l.rangeAdd}else e=this.towerData.range;return e}get rate(){let e=0;if(this.skills[L.KIND_CHANGE_RATE]instanceof Gl){let l=this.skills[L.KIND_CHANGE_RATE];l.isChangeBase()?e=Math.round(l.rate*l.rateRate):e=Math.round(this.towerData.rate*l.rateRate)}else e=this.towerData.rate;return e}setGem(e){this.gem=e,this.initSkills()}newBullet(){return new Ws(this.getBulletId())}getBulletId(){let e=null;return this.skills[L.KIND_CHANGE_BULLET]instanceof $l?(e=this.skills[L.KIND_CHANGE_BULLET],e.bulletId):this.towerData.bulletId}getInfoHtml(){return $t(this.skillInfo,this.color,!1,"14px")}};a(dt,"TOWER","tower"),a(dt,"GEM","gem");let Tt=dt;const js={class:"space-x-2"},Xs=G({__name:"TowerDataForm",props:{tower:{}},setup(o){const t=o;ne({});const e=Y(N.$_towerAtt_Obj.shaota),l=s=>{t.tower.m_data=new Dl(s)};return(s,n)=>{const u=Me,r=Ve,m=De,p=fe,h=Pe,b=wt;return g(),P(b,null,{default:c(()=>[i(h,{"label-width":"100px"},{default:c(()=>[i(m,{label:"原型"},{default:c(()=>[i(r,{modelValue:d(e),"onUpdate:modelValue":n[0]||(n[0]=S=>Ae(e)?e.value=S:null),"value-key":"id",onChange:l},{default:c(()=>[(g(!0),D(M,null,H(d(N).$_towerAtt_Obj,(S,I)=>(g(),P(u,{key:I,label:S.name,value:S},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(m,{label:"等级"},{default:c(()=>[i(p,{modelValue:s.tower.m_level,"onUpdate:modelValue":n[1]||(n[1]=S=>s.tower.m_level=S)},null,8,["modelValue"])]),_:1}),i(m,{label:"damage"},{default:c(()=>[A("div",js,[A("span",null,[x(" a: "),i(p,{modelValue:s.tower.towerData.damageA,"onUpdate:modelValue":n[2]||(n[2]=S=>s.tower.towerData.damageA=S),"controls-position":"right",step:d(ke)(d(e).damage.a),style:{width:"100px"}},null,8,["modelValue","step"])]),A("span",null,[x(" b: "),i(p,{modelValue:s.tower.towerData.damageB,"onUpdate:modelValue":n[3]||(n[3]=S=>s.tower.towerData.damageB=S),"controls-position":"right",step:d(ke)(d(e).damage.b),style:{width:"100px"}},null,8,["modelValue","step"])]),A("span",null,[x(" c: "),i(p,{modelValue:s.tower.towerData.damageC,"onUpdate:modelValue":n[4]||(n[4]=S=>s.tower.towerData.damageC=S),"controls-position":"right",step:d(ke)(d(e).damage.c),style:{width:"100px"}},null,8,["modelValue","step"])])])]),_:1}),i(m,{label:"rate"},{default:c(()=>[i(p,{modelValue:s.tower.towerData.rate,"onUpdate:modelValue":n[5]||(n[5]=S=>s.tower.towerData.rate=S),step:d(ke)(d(e).rate)},null,8,["modelValue","step"])]),_:1}),i(m,{label:"range"},{default:c(()=>[i(p,{modelValue:s.tower.towerData.range,"onUpdate:modelValue":n[6]||(n[6]=S=>s.tower.towerData.range=S),step:d(ke)(d(e).range)},null,8,["modelValue","step"])]),_:1}),i(m,{label:"buffEffect"},{default:c(()=>[i(p,{modelValue:s.tower.towerData.buffEffect,"onUpdate:modelValue":n[7]||(n[7]=S=>s.tower.towerData.buffEffect=S),step:d(ke)(d(e).buffEffect)},null,8,["modelValue","step"])]),_:1})]),_:1})]),_:1})}}}),Ys=["innerHTML"],zs=G({__name:"TowerInfo",props:{tower:{}},setup(o){return(t,e)=>{const l=De,s=Pe,n=wt;return g(),P(n,null,{default:c(()=>[i(s,{"label-width":"80px"},{default:c(()=>[i(l,{label:"damage"},{default:c(()=>[x(T(t.tower.damage()),1)]),_:1}),i(l,{label:"rate"},{default:c(()=>[x(T(t.tower.rate),1)]),_:1}),i(l,{label:"range"},{default:c(()=>[x(T(t.tower.range),1)]),_:1}),i(l,{label:"简介"},{default:c(()=>[A("div",{innerHTML:t.tower.getInfoHtml(),style:{"line-height":"1.5em"}},null,8,Ys)]),_:1})]),_:1})]),_:1})}}}),Sl=U.sortBy(U.map(N.$_wolfAtt_Obj,(o,t)=>({id:t,name:o.name,label:`${he(t)} [${t}]`})),"id"),Ql=Sl.filter(o=>o.name.startsWith("camp_")),ea=Sl.filter(o=>o.id.startsWith("D_")),qs=U.difference(Sl,Ql,ea),Nl=U.chain(Object.values(N.$_skillAtt_Obj.towerSkill)).groupBy(o=>o.kindId).mapValues(o=>({id:o[0].id,params:o[0].params})).value(),ta=U.chain(N.$_map_Obj).map((o,t)=>U.extend(o,{id:t})).toArray().sortBy("index").value(),la=ta.map(o=>({label:`${o.id} ${o.name}`,value:o.id})),Js=U.chain(N.$_wolfAtt_Obj).map(o=>({value:o.id,label:`${he(o.id)} [${o.id}]`})).sortBy("id").value(),wl=U.chain(N.$_wolfAtt_Obj).filter(o=>o.pop<99).map(o=>({value:o.id,label:`${he(o.id)} [${o.id}]`})).sortBy("id").value(),Zs={key:0,class:"ml-2 space-x-2"},Qs=G({__name:"TowerSkillItem",props:ct({tower:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ct(["update:model-value"],["update:modelValue"]),setup(o,{emit:t}){const e=o,l=Be(o,"modelValue"),s=Y(),n=()=>{s.value=Nl[l.value.kindId],l.value.params=s.value.params.slice()};return ot(()=>l.value.kindId,(u,r)=>{var m;if(r!=u){delete e.tower.skills[r];const p=new W(s.value.id,((m=e.tower.skills[u])==null?void 0:m.level)??50,e.tower).getSubClasses();p.m_data=new L(l.value),e.tower.skills[u]=p}}),ot(l,(u,r)=>{e.tower.skills[u.kindId].m_data=new L(u)},{deep:!0}),ga(()=>{l.value.kindId&&delete e.tower.skills[l.value.kindId]}),(u,r)=>{const m=Me,p=Ve,h=Nt,b=fe;return g(),D("div",null,[i(p,{modelValue:l.value.kindId,"onUpdate:modelValue":[r[0]||(r[0]=S=>l.value.kindId=S),n]},{default:c(()=>[(g(!0),D(M,null,H(Object.keys(d(Nl)),S=>(g(),D(M,{key:S},[S in u.tower.skills?pe("",!0):(g(),P(m,{key:0,label:S,value:S},null,8,["label","value"]))],64))),128))]),_:1},8,["modelValue"]),d(s)?(g(),D("span",Zs,[(g(!0),D(M,null,H(d(s).params,(S,I)=>(g(),D(M,null,[typeof S=="string"?(g(),P(h,{key:0,modelValue:l.value.params[I],"onUpdate:modelValue":O=>l.value.params[I]=O,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])):(g(),P(b,{key:1,modelValue:l.value.params[I],"onUpdate:modelValue":O=>l.value.params[I]=O,size:"small","controls-position":"right",step:d(ke)(S),style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue","step"]))],64))),256))])):pe("",!0)])}}}),en=G({__name:"TowerSkillTable",props:{tower:{}},setup(o){const t=ne([]),e=Y(),l=()=>{t.push({data:{kindId:"",params:[]}})},s=(n,u)=>{t.splice(n,1)};return(n,u)=>{const r=je,m=fe,p=Ye;return g(),D("div",null,[i(d(We),{ref_key:"skillTableRef",ref:e,data:d(t),stripe:"",border:"","table-layout":"auto",style:{"font-size":"small"}},{default:c(()=>[i(r,{label:"Skill","header-align":"center"},{default:c(h=>[i(Qs,{tower:n.tower,modelValue:h.row.data,"onUpdate:modelValue":b=>h.row.data=b},null,8,["tower","modelValue","onUpdate:modelValue"])]),_:1}),i(r,{label:"Level","header-align":"center",width:130},{default:c(h=>[n.tower.skills[h.row.data.kindId]?(g(),P(m,{key:0,modelValue:n.tower.skills[h.row.data.kindId].level,"onUpdate:modelValue":b=>n.tower.skills[h.row.data.kindId].level=b,style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"])):pe("",!0)]),_:1}),i(r,{label:"Info","header-align":"center"},{default:c(h=>{var b;return[x(T((b=n.tower.skills[h.row.data.kindId])==null?void 0:b.skillInfo),1)]}),_:1}),i(r,{label:"操作",width:100,align:"center"},{default:c(h=>[i(p,{size:"small",type:"danger",onClick:b=>s(h.$index,h.row)},{default:c(()=>[x(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),i(p,{onClick:l},{default:c(()=>[x("新增")]),_:1})])}}}),tn=G({__name:"index",setup(o){const t=ne(new Tt(null));return t.m_data=new Dl(N.$_towerAtt_Obj.shaota),(e,l)=>{const s=El,n=Al;return g(),D(M,null,[i(n,{gutter:20},{default:c(()=>[i(s,{span:12},{default:c(()=>[i(Xs,{tower:d(t)},null,8,["tower"])]),_:1}),i(s,{span:12},{default:c(()=>[i(zs,{tower:d(t)},null,8,["tower"])]),_:1})]),_:1}),i(en,{tower:d(t),class:"mt-2"},null,8,["tower"])],64)}}}),ln=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"}));class an extends pt{constructor(t){super(),this.m_data=_l.getOnlyExample().getData(t)}get gemData(){return this.m_data}}const sn=["innerHTML"],nn=A("p",null,"注：升级经验为塔下一级的 buildValue 值",-1),rn=G({__name:"index",setup(o){const t=ne({isDefendMap:!1,towerId:"shaota",gemId:"",level:1,buildFrom:0,buildTo:1,buildPower:50}),e=U.map(N.$_towerAtt_Obj,(r,m)=>[r.name,m]),l=U.chain(N.$_global_properties.gem).toPairs().sortBy(r=>Number(Math.abs(r[1].index))).map(r=>[`${r[1].name} [${r[1].index}]`,r[0]]).value(),s=B(()=>{const r=new Tt(t.towerId);return r.level=t.level,t.gemId!==""&&r.setGem(new an(t.gemId)),r}),n=()=>{Z.currentMap=new Z(t.isDefendMap?Z.DEFEND_MAP_1:Z.ENDLESS_MAP_1)},u=B(()=>{let r=0;if(t.buildFrom>t.buildTo)return NaN;for(let m=t.buildFrom+1;m<=t.buildTo;m++)r+=s.value.buildValue(m);return Math.round(r/t.buildPower)});return(r,m)=>{const p=oa,h=De,b=Me,S=Ve,I=El,O=Al,R=fe,C=Pe;return g(),P(C,{model:d(t),"label-width":"120px"},{default:c(()=>[i(h,{label:"是否为防线"},{default:c(()=>[i(p,{modelValue:d(t).isDefendMap,"onUpdate:modelValue":m[0]||(m[0]=w=>d(t).isDefendMap=w),onChange:n},null,8,["modelValue"])]),_:1}),i(O,null,{default:c(()=>[i(I,{span:12},{default:c(()=>[i(h,{label:"塔"},{default:c(()=>[i(S,{modelValue:d(t).towerId,"onUpdate:modelValue":m[1]||(m[1]=w=>d(t).towerId=w)},{default:c(()=>[(g(!0),D(M,null,H(d(e),([w,v])=>(g(),P(b,{key:v,label:w,value:v},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(I,{span:12},{default:c(()=>[i(h,{label:"宝石"},{default:c(()=>[i(S,{modelValue:d(t).gemId,"onUpdate:modelValue":m[2]||(m[2]=w=>d(t).gemId=w)},{default:c(()=>[i(b,{label:"无",value:""}),(g(!0),D(M,null,H(d(l),([w,v])=>(g(),P(b,{key:v,label:w,value:v},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(O,null,{default:c(()=>[i(I,{span:8},{default:c(()=>[i(h,{label:"等级"},{default:c(()=>[i(R,{modelValue:d(t).level,"onUpdate:modelValue":m[3]||(m[3]=w=>d(t).level=w),min:1},null,8,["modelValue"])]),_:1})]),_:1}),i(I,{span:8},{default:c(()=>[i(h,{label:"等级上限"},{default:c(()=>[A("label",null,T(d(s).towerData.levelMax),1)]),_:1})]),_:1}),i(I,{span:8},{default:c(()=>[i(h,{label:"升级经验"},{default:c(()=>[A("label",null,T(d(s).buildValue(d(s).level+1)),1)]),_:1})]),_:1})]),_:1}),i(O,null,{default:c(()=>[i(I,{span:8},{default:c(()=>[i(h,{label:"攻击力"},{default:c(()=>[A("label",null,T(d(s).damage()),1)]),_:1})]),_:1}),i(I,{span:8},{default:c(()=>[i(h,{label:"攻击频率"},{default:c(()=>[A("label",null,T(d(s).rate),1)]),_:1})]),_:1}),i(I,{span:8},{default:c(()=>[i(h,{label:"攻击范围"},{default:c(()=>[A("label",null,T(d(s).range),1)]),_:1})]),_:1})]),_:1}),i(h,{label:"简介"},{default:c(()=>[A("div",{innerHTML:d(s).getInfoHtml(),style:{"line-height":"1.5em"}},null,8,sn)]),_:1}),i(O,null,{default:c(()=>[i(I,{span:8},{default:c(()=>[i(h,{label:"ability"},{default:c(()=>[A("label",null,T(d(s).ability.toFixed(1)),1)]),_:1})]),_:1}),i(I,{span:8},{default:c(()=>[i(h,{label:"power"},{default:c(()=>[A("label",null,T(d(s).power),1)]),_:1})]),_:1}),i(I,{span:8},{default:c(()=>[i(h,{label:"buffEffect"},{default:c(()=>[A("label",null,T(d(s).buffEffect().toFixed(1)),1)]),_:1})]),_:1})]),_:1}),i(O,null,{default:c(()=>[i(I,{span:8},{default:c(()=>[i(h,{label:"buildValue"},{default:c(()=>[A("label",null,T(d(s).buildValue()),1)]),_:1})]),_:1}),i(I,{span:8},{default:c(()=>[i(h,{label:"buildCost"},{default:c(()=>[A("label",null,T(d(s).buildCost()),1)]),_:1})]),_:1}),i(I,{span:8},{default:c(()=>[i(h,{label:"valueCost"},{default:c(()=>[A("label",null,T(d(s).valueCost()),1)]),_:1})]),_:1})]),_:1}),A("div",null,[i(h,{label:"升级计算",style:{"margin-bottom":"0 !important"}},{default:c(()=>[x(" 从 "),i(R,{modelValue:d(t).buildFrom,"onUpdate:modelValue":m[4]||(m[4]=w=>d(t).buildFrom=w),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),x(" 级到 "),i(R,{modelValue:d(t).buildTo,"onUpdate:modelValue":m[5]||(m[5]=w=>d(t).buildTo=w),size:"small","controls-position":"right",style:{width:"5em",margin:"0.5em"}},null,8,["modelValue"]),x(" 级， 苦工总力量 "),i(R,{modelValue:d(t).buildPower,"onUpdate:modelValue":m[6]||(m[6]=w=>d(t).buildPower=w),size:"small","controls-position":"right",style:{width:"8em",margin:"0.5em"}},null,8,["modelValue"])]),_:1}),i(h,{style:{"margin-bottom":"0 !important"}},{default:c(()=>[x(" 需要时间："),A("label",null,T(d(rs)(d(u))),1)]),_:1}),nn])]),_:1},8,["model"])}}}),on=Object.freeze(Object.defineProperty({__proto__:null,default:rn},Symbol.toStringTag,{value:"Module"})),un=G({__name:"DifficultySelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const t=Object.entries(N.$_wave_hard_Obj).map(([l,s])=>({value:parseFloat(l),label:`${s.desc.split("^")[1]} (x${l}, +${s.add_score})`})),e=Be(o,"modelValue");return(l,s)=>{const n=Rt;return g(),P(n,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=u=>e.value=u),options:d(t)},null,8,["modelValue","options"])}}}),dn={class:"space-x-8"},cn={class:"space-x-4"},_n=A("span",null,"（假设每波+2且不引狼）",-1),aa=G({__name:"LevelPreview",props:ct({mapData:{},mapMonsterData:{}},{wid:{default:"dahuil"},widModifiers:{},score:{default:0},scoreModifiers:{},diff:{default:1},diffModifiers:{}}),emits:["update:wid","update:score","update:diff"],setup(o){const t=o,e=Be(o,"wid"),l=Be(o,"score"),s=Be(o,"diff"),n=B(()=>ge.getOnlyExample().getData(e.value)),u=B(()=>t.mapData.getDifficultyLevel(l.value)),r=B(()=>n.value.getHpMax(u.value,s.value)),m=B(()=>t.mapMonsterData.map(p=>({name:p.name,value:p.getHpMax(u.value,s.value)})));return ot(m,()=>console.log(m.value)),(p,h)=>{const b=Rt,S=Xe,I=De,O=fe,R=ze("vue-latex");return g(),D(M,null,[i(I,{label:"狼"},{default:c(()=>[i(b,{modelValue:e.value,"onUpdate:modelValue":h[0]||(h[0]=C=>e.value=C),options:d(Js)},null,8,["modelValue","options"]),i(S,{effect:"light"},{default:c(()=>[x(" 血量系数："+T(d(n).hpMaxA)+","+T(d(n).hpMaxB)+","+T(d(n).hpMaxC),1)]),_:1})]),_:1}),i(I,{label:"进度"},{default:c(()=>[i(O,{modelValue:l.value,"onUpdate:modelValue":h[1]||(h[1]=C=>l.value=C),min:0},null,8,["modelValue"]),i(S,{effect:"light",class:"tag-button",onClick:h[2]||(h[2]=C=>l.value=p.mapData.scoreMax)},{default:c(()=>[x(" 通关进度："+T(p.mapData.scoreMax),1)]),_:1})]),_:1}),i(I,{label:"难度"},{default:c(()=>[i(un,{modelValue:s.value,"onUpdate:modelValue":h[3]||(h[3]=C=>s.value=C)},null,8,["modelValue"])]),_:1}),i(I,null,{default:c(()=>[A("div",dn,[A("span",null,[x(" 等级： "),i(R,{expression:`L(x)=\\sqrt{h_a + h_b x}=${d(u).toFixed(2)}`},null,8,["expression"])]),A("span",null,"最大血量："+T(d(r)),1)])]),_:1}),i(I,null,{default:c(()=>[x(" 银币： "),i(R,{expression:`G(x) = (2+1.07p)(\\frac{L(x)}{0.39})^{2/3} = ${p.mapData.calcPKGold(d(u))}`},null,8,["expression"])]),_:1}),i(I,null,{default:c(()=>[x(" 经验： "),i(R,{expression:`E(x) = (3.5+0.14p)(\\frac{L(x)}{0.39})^{2/3} = ${p.mapData.calcPKExp(d(u))}`},null,8,["expression"])]),_:1}),i(I,null,{default:c(()=>[A("div",cn,[A("span",null,"总银币："+T(p.mapData.calcAccumulative().gold),1),A("span",null,"总经验："+T(p.mapData.calcAccumulative().exp),1),_n])]),_:1}),i(Zl,{"hp-data":d(m),height:100*Math.sqrt(p.mapMonsterData.length)},null,8,["hp-data","height"])],64)}}}),mn=A("span",null,"A",-1),hn=A("span",null,"B",-1),pn={class:"text-center",style:{width:"100%","max-width":"400px"}},gn=A("thead",null,[A("th",null,"狼"),A("th",null,"权重"),A("th",null,"概率"),A("th",null,"pop")],-1),fn=G({__name:"UmapDataForm",emits:["export"],setup(o){const t=Y(N.$_map_Obj.m0B),e=Y(new _t(t.value)),l=ne({mid:"m0B",wid:"dahuil",score:0,diff:1});Tl(()=>{t.value=N.$_map_Obj[l.mid],e.value=new _t(t.value)});const s=ne([]),n=Y(null),u=B(()=>s.map(p=>ge.getOnlyExample().getData(p.id))),r=B(()=>U.sumBy(s,"weight"));ot(s,()=>{const p=[];for(const{weight:h}of s)p.push(p.length==0?h:p.at(-1)+h);e.value.monsterList=s.map(h=>h.id),e.value.monsterProportion=s.map((h,b)=>[p[b]/r.value,h.id])},{deep:!0});const m=p=>{s.push({id:p,weight:1}),n.value=null};return(p,h)=>{const b=Ye,S=Rt,I=De,O=Nt,R=fe,C=Cl,w=Pe;return g(),D(M,null,[i(b,{onClick:h[0]||(h[0]=v=>p.$emit("export",d(e)))},{default:c(()=>[x("导出")]),_:1}),i(w,{model:d(l),"label-width":"120px"},{default:c(()=>[i(I,{label:"原型"},{default:c(()=>[i(S,{modelValue:d(l).mid,"onUpdate:modelValue":h[1]||(h[1]=v=>d(l).mid=v),options:d(la)},null,8,["modelValue","options"])]),_:1}),i(I,{label:"名称"},{default:c(()=>[i(O,{modelValue:d(e).name,"onUpdate:modelValue":h[2]||(h[2]=v=>d(e).name=v),style:{width:"200px"}},null,8,["modelValue"])]),_:1}),i(I,{label:"通关进度"},{default:c(()=>[i(R,{modelValue:d(e).scoreMax,"onUpdate:modelValue":h[3]||(h[3]=v=>d(e).scoreMax=v)},null,8,["modelValue"])]),_:1}),i(I,{label:"Population"},{default:c(()=>[i(R,{modelValue:d(e).populationMax,"onUpdate:modelValue":h[4]||(h[4]=v=>d(e).populationMax=v)},null,8,["modelValue"])]),_:1}),i(I,{label:"难度系数"},{default:c(()=>[mn,i(R,{modelValue:d(e).hardA,"onUpdate:modelValue":h[5]||(h[5]=v=>d(e).hardA=v),size:"small"},null,8,["modelValue"]),hn,i(R,{modelValue:d(e).hardB,"onUpdate:modelValue":h[6]||(h[6]=v=>d(e).hardB=v),size:"small"},null,8,["modelValue"])]),_:1}),i(I,{label:"该地图的狼"},{default:c(()=>[A("table",pn,[gn,A("tbody",null,[(g(!0),D(M,null,H(d(s),(v,te)=>(g(),D("tr",null,[A("td",null,[(g(),P(S,{key:te,modelValue:v.id,"onUpdate:modelValue":V=>v.id=V,options:d(wl),clearable:"",onClear:V=>d(s).removeAt(te),size:"small",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","options","onClear"]))]),A("td",null,[i(R,{modelValue:v.weight,"onUpdate:modelValue":V=>v.weight=V,min:0,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),A("td",null,T((v.weight/d(r)).toFixed(3)),1),A("td",null,T(d(u)[te].population),1)]))),256)),A("tr",null,[A("td",null,[i(S,{modelValue:d(n),"onUpdate:modelValue":h[7]||(h[7]=v=>Ae(n)?n.value=v:null),options:d(wl),onChange:m,size:"small",style:{width:"100%"}},null,8,["modelValue","options"])])])])])]),_:1}),i(C),i(aa,{mapData:d(e),mapMonsterData:d(u)},null,8,["mapData","mapMonsterData"])]),_:1},8,["model"])],64)}}}),An=G({__name:"index",setup(o){const{toClipboard:t}=kl(),e=Y(!1),l=Y({}),s=Y(""),n=Y(),u=m=>{e.value=!0;const p={name:m.name,pass_score:m.scoreMax,yield_val:m.hardA,hard_ness:m.hardB,pop_max:m.populationMax,wolf_proportion:m.monsterProportion};l.value=p,s.value=JSON.stringify(p)},r=()=>{t(s.value,n.value.$el),fl.success("已复制到剪贴板")};return(m,p)=>{const h=Ye,b=Rl;return g(),D(M,null,[i(fn,{onExport:u}),i(b,{modelValue:d(e),"onUpdate:modelValue":p[0]||(p[0]=S=>Ae(e)?e.value=S:null),title:"导出数据"},{default:c(()=>[i(d(Vl),{data:d(l),virtual:"",deep:2},null,8,["data"]),i(h,{onClick:r,ref_key:"someRef",ref:n},{default:c(()=>[x("复制到剪贴板")]),_:1},512)]),_:1},8,["modelValue"])],64)}}}),En=Object.freeze(Object.defineProperty({__proto__:null,default:An},Symbol.toStringTag,{value:"Module"})),In=G({__name:"BossDistribChart",props:{mid:{}},setup(o){const t=o;Ct([va,Ot,yt,Da,Kt,Pt]);const e=ne({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:[{left:"5%",right:"4%",bottom:"52%",containLabel:!0},{left:"5%",right:"4%",top:"52%",containLabel:!0}],dataset:{source:[]},xAxis:[{gridIndex:0},{gridIndex:1}],yAxis:[{type:"category",gridIndex:0},{type:"category",gridIndex:1}],series:[]});return Tl(()=>{const l=N.$_map_Obj[t.mid].random_boss;if(!l)return;const s=l.map((m,p)=>{var h;return[Object.keys(m[3].properties.card)[0],m[1],Math.round((m[0]-(((h=l[p-1])==null?void 0:h[0])??0))*1e3)/10]}),n=U.uniq(s.map(m=>m[0])).sort(),u=U.uniq(s.map(m=>m[1])).sort(),r=[["boss",...n]].concat(u.map(m=>[m].concat(new Array(n.length).fill(0))));for(const m of s)r[u.indexOf(m[1])+1][n.indexOf(m[0])+1]=m[2];for(let m=0;m<n.length;m++)r[0][m+1]=he(n[m]);for(let m=0;m<u.length;m++)r[m+1][0]=he(u[m]);e.dataset.source=r,e.series=[...new Array(n.length).fill({type:"bar",stack:`${t.mid}-totalA`,label:{show:!0},emphasis:{focus:"series"}}),...new Array(u.length).fill({type:"bar",stack:`${t.mid}-totalB`,seriesLayoutBy:"row",label:{show:!0},emphasis:{focus:"series"},xAxisIndex:1,yAxisIndex:1})]}),(l,s)=>(g(),D("div",null,[i(d(Ml),{option:d(e),autoresize:"","update-options":{notMerge:!0},style:{height:"600px"}},null,8,["option"])]))}}),Tn=G({__name:"WolfNumberChart",props:{data:{},max:{}},setup(o){Ct([yt,Ll,Ot,Kt,Pt]);const t=o,e=B(()=>({color:["#C00000"],xAxis:{type:"value",interval:1,axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},max:t.max},yAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{fontSize:14},data:t.data.map(l=>l.name)},grid:{left:100,top:0,bottom:20},series:{type:"bar",barWidth:"60%",label:{show:!0,position:"right"},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},data:t.data.map(l=>l.num)}}));return(l,s)=>{const n=ze("v-chart");return g(),P(n,{class:"chart",option:d(e)},null,8,["option"])}}});const Ln=qe(Tn,[["__scopeId","data-v-247bc23b"]]),sa=o=>(Kl("data-v-dabd02c1"),o=o(),Pl(),o),vn=sa(()=>A("h3",null,"波工具",-1)),Dn=sa(()=>A("label",null,"下表为预留量",-1)),Sn=G({__name:"WaveTool",props:{mid:{},mapMonsterData:{}},setup(o){const t=o,e=ne({count:0,avgHp:"",reservation:[0,0,0,0,0,0,0],extra:"",result:"",resultRaw:""});let l=ne([]);const s=()=>{e.reservation.fill(0)},n=()=>{let u=Ds(t.mid,[...e.reservation]);if(!u){fl.error("预留量不合法，请重新输入！");return}let[r,m]=u;e.extra&&(r=U.shuffle(r.concat(e.extra.split(",").map(p=>p.trim())))),e.resultRaw=`[${r.map(p=>`"${p}"`).join(",")}]`,e.result=he(r).join(","),l=m.map(p=>({name:he(p[0]),num:p[1]})),e.count=U.sumBy(m,p=>p[1])};return(u,r)=>{const m=Ye,p=fe,h=Nt,b=wt;return g(),P(b,{id:"wave-tool"},{default:c(()=>[vn,i(m,{onClick:n},{default:c(()=>[x("随机生成波")]),_:1}),A("span",null,[x(" 共 "),i(p,{modelValue:d(e).count,"onUpdate:modelValue":r[0]||(r[0]=S=>d(e).count=S)},null,8,["modelValue"]),x(" 只狼，平均血量 "),i(h,{modelValue:d(e).avgHp,"onUpdate:modelValue":r[1]||(r[1]=S=>d(e).avgHp=S),modelModifiers:{number:!0},style:{width:"100px"}},null,8,["modelValue"])]),i(m,null,{default:c(()=>[x("组成推算")]),_:1}),A("div",null,[A("p",null,[Dn,i(m,{size:"small",onClick:s},{default:c(()=>[x("重置")]),_:1})]),A("table",null,[A("tbody",null,[A("tr",null,[(g(!0),D(M,null,H(u.mapMonsterData,S=>(g(),D("td",{key:S.id},T(S.name),1))),128))]),A("tr",null,[(g(!0),D(M,null,H(u.mapMonsterData,(S,I)=>(g(),D("td",{key:S.id},[i(p,{modelValue:d(e).reservation[I],"onUpdate:modelValue":O=>d(e).reservation[I]=O,size:"small","controls-position":"right",min:0},null,8,["modelValue","onUpdate:modelValue"])]))),128))])])]),A("p",null,[x(" 额外："),i(h,{modelValue:d(e).extra,"onUpdate:modelValue":r[2]||(r[2]=S=>d(e).extra=S),style:{width:"580px"},placeholder:"多个请用半角逗号分隔",spellcheck:"false"},null,8,["modelValue"])]),A("p",null,[x("波："),i(h,{modelValue:d(e).resultRaw,"onUpdate:modelValue":r[3]||(r[3]=S=>d(e).resultRaw=S),style:{width:"600px"},spellcheck:"false"},null,8,["modelValue"])]),A("p",null,[x("波："),i(h,{modelValue:d(e).result,"onUpdate:modelValue":r[4]||(r[4]=S=>d(e).result=S),style:{width:"600px"},spellcheck:"false"},null,8,["modelValue"])])]),i(Ln,{data:d(l),max:10},null,8,["data"])]),_:1})}}});const bn=qe(Sn,[["__scopeId","data-v-dabd02c1"]]),xn=G({__name:"UmapInfoForm",props:{mid:{},midModifiers:{}},emits:["update:mid"],setup(o){const t=Be(o,"mid"),e=ne({mid:"m1",mid2:"",wid:"dahuil",diff:1});Tl(()=>{t.value=e.mid});const l=B(()=>N.$_map_Obj[e.mid]),s=B(()=>Z.getMapData(e.mid)),n=B(()=>e.mid2===""?s.value:Z.getMapData(e.mid2)),u=B(()=>s.value.monsterList.map(p=>ge.getOnlyExample().getData(p))),r=p=>p.map(h=>{let b=N.$_wolfAtt_Obj[h[1]];return{id:h[1],prob:h[0],name:b.name,pop:b.pop}}),m=p=>p?p.map(h=>{let b=N.$_wolfAtt_Obj[h[1]];return{id:h[1],prob:h[0],name:b.name,diff:parseFloat(h[2])}}):[];return(p,h)=>{const b=Rt,S=Xe,I=De,O=Me,R=Ve,C=Cl,w=Pe;return g(),D(M,null,[i(w,{model:d(e),"label-width":"120px"},{default:c(()=>[i(I,{label:"地图"},{default:c(()=>[i(b,{modelValue:d(e).mid,"onUpdate:modelValue":h[0]||(h[0]=v=>d(e).mid=v),options:d(la)},null,8,["modelValue","options"]),i(S,{effect:"light"},{default:c(()=>[x(" 难度系数："+T(d(s).hardA)+","+T(d(s).hardB),1)]),_:1}),i(S,{effect:"light"},{default:c(()=>[x(" Population："+T(d(s).populationMax),1)]),_:1})]),_:1}),i(I,{label:"引狼到"},{default:c(()=>[i(R,{modelValue:d(e).mid2,"onUpdate:modelValue":h[1]||(h[1]=v=>d(e).mid2=v),clearable:""},{default:c(()=>[i(O,{label:"无",value:""}),(g(!0),D(M,null,H(d(ta),v=>(g(),P(O,{key:v.id,label:`${v.id} ${v.name}`,value:v.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(I,{label:"该地图的狼"},{default:c(()=>[(g(!0),D(M,null,H(r(d(l).wolf_proportion),v=>(g(),P(S,{key:v.id,type:"success",class:"mx-1 tag-button",effect:"light",onClick:te=>d(e).wid=v.id},{default:c(()=>[A("sub",null,T(v.prob),1),x(" "+T(v.name)+" ",1),A("sup",null,T(v.pop),1)]),_:2},1032,["onClick"]))),128))]),_:1}),"random_boss"in d(l)?(g(),P(I,{key:0,label:"随机 Boss"},{default:c(()=>[(g(!0),D(M,null,H(m(d(l).random_boss),v=>(g(),P(S,{key:v.id,type:"success",class:"mx-1 tag-button",effect:"light",onClick:te=>{d(e).wid=v.id,d(e).diff=v.diff}},{default:c(()=>[A("sub",null,T(v.prob),1),x(" "+T(v.name)+" ",1),A("sub",null,T(v.diff),1)]),_:2},1032,["onClick"]))),128))]),_:1})):pe("",!0),i(C),i(aa,{mapData:d(n),mapMonsterData:d(u),wid:d(e).wid,"onUpdate:wid":h[2]||(h[2]=v=>d(e).wid=v),diff:d(e).diff,"onUpdate:diff":h[3]||(h[3]=v=>d(e).diff=v)},null,8,["mapData","mapMonsterData","wid","diff"])]),_:1},8,["model"]),i(bn,{mid:d(e).mid,mapMonsterData:d(u)},null,8,["mid","mapMonsterData"])],64)}}});const Nn=qe(xn,[["__scopeId","data-v-ea3fcd5d"]]),wn=A("h2",{style:{"text-align":"center"}},"狼出现频率（按数量，供参考）",-1),Rn=G({__name:"WaveDistribChart",props:{mid:{},height:{default:600},width:{default:600}},setup(o){Ct([Ll,Sa,Ot,yt,Kt,ba,Pt,xa]);const t=o,e=B(()=>Ca[t.mid]),l=B(()=>[N.$_map_Obj[t.mid].name,...N.$_map_Obj[t.mid].wolf_proportion.map(r=>he(r[1]))]),s=B(()=>U.range(e.value.all.length)),n=B(()=>U.zip(l.value,[e.value.all,...e.value.each]).map((r,m)=>({title:r[0],pdf:r[1],cdf:[...Xa(r[1])]}))),u=B(()=>({color:n.value.flatMap(r=>[rt(r.title,70,50),rt(r.title,50,80)]),tooltip:{trigger:"axis",valueFormatter:r=>is(r,6)},title:n.value.map((r,m)=>({text:r.title,left:"center",textVerticalAlign:"middle",top:t.height*((m+.5)/n.value.length)-5,z:-1,textStyle:{fontSize:t.height/n.value.length*.4,color:"#ccc"}})),xAxis:n.value.map((r,m)=>({gridIndex:m,type:"category",axisTick:{alignWithLabel:!0},data:s.value})),yAxis:n.value.flatMap((r,m)=>[{gridIndex:m,type:"value",alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}},{gridIndex:m,type:"value",position:"right",min:0,max:1,interval:.2,alignTicks:!0,axisLine:{show:!0},axisTick:{show:!0,inside:!0,length:3}}]),grid:n.value.map((r,m)=>({top:t.height*(m/n.value.length)+10,bottom:t.height*(1-(m+1)/n.value.length)+20})),series:n.value.flatMap((r,m)=>[{xAxisIndex:m,yAxisIndex:m*2,type:"bar",barWidth:"90%",data:r.pdf},{xAxisIndex:m,yAxisIndex:m*2+1,type:"line",smooth:!0,data:r.cdf}])}));return(r,m)=>{const p=ze("v-chart");return g(),D("div",null,[wn,i(p,{option:d(u),autoresize:"",style:{height:"600px"}},null,8,["option"])])}}}),Cn=G({__name:"index",setup(o){const t=Y("m1"),e=Y("wolf");return(l,s)=>{const n=El,u=xt,r=bt,m=Al;return g(),P(m,null,{default:c(()=>[i(n,{md:16},{default:c(()=>[i(Nn,{mid:d(t),"onUpdate:mid":s[0]||(s[0]=p=>Ae(t)?t.value=p:null)},null,8,["mid"])]),_:1}),i(n,{md:8,sm:16},{default:c(()=>[i(r,{modelValue:d(e),"onUpdate:modelValue":s[1]||(s[1]=p=>Ae(e)?e.value=p:null),class:"chart-area"},{default:c(()=>[i(u,{label:"狼分布",name:"wolf"},{default:c(()=>[i(Rn,{mid:d(t)},null,8,["mid"])]),_:1}),i(u,{label:"Boss分布",name:"boss"},{default:c(()=>[i(In,{mid:d(t)},null,8,["mid"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});const On=Object.freeze(Object.defineProperty({__proto__:null,default:Cn},Symbol.toStringTag,{value:"Module"})),yn=A("p",null,"前排解释：",-1),Kn=A("p",null,"狼的等级随进度增加而增加。难度系数 hardA 影响初始狼等级，hardB 影响等级增长速率。",-1),Pn=A("p",null,"population 影响一波狼的容量。每只狼都会占用一定容量。",-1),Mn=A("p",null,"不同随机boss有出现权重。出现率、难度、奖励水平是相对应的，难的比较稀有，奖励也会比较好。",-1),Vn=G({__name:"index",setup(o){const t=U.map(N.$_map_Obj,(s,n)=>U.extend(s,{id:n})),e=(s,n)=>{let u=s.need_lev||0,r=n.need_lev||0;return u-r},l=s=>s.map(n=>{const u=ge.getOnlyExample().getData(n[1]);return{prob:n[0],name:u.name,pop:u.population}});return(s,n)=>{const u=je,r=Xe,m=We;return g(),D(M,null,[yn,Kn,Pn,Mn,i(m,{data:d(t),"default-sort":{prop:"index",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},height:"600px",style:{width:"100%","font-size":"80%"},class:"testbox"},{default:c(()=>[i(u,{prop:"index",label:"index",sortable:"",align:"center",fixed:"",width:"70"}),i(u,{prop:"id",label:"id",sortable:"",align:"center",fixed:"",width:"80"}),i(u,{prop:"name",label:"name",sortable:"",align:"center",fixed:"",width:"80"}),i(u,{prop:"pass_score",label:"scoreMax",sortable:"",align:"center"}),i(u,{label:"hardnessFactor"},{default:c(()=>[i(u,{prop:"yield_val",label:"hardA",sortable:"",align:"center"}),i(u,{prop:"hard_ness",label:"hardB",sortable:"",align:"center"})]),_:1}),i(u,{prop:"pop_max",label:"populationMax",sortable:"",align:"center"}),i(u,{prop:"interval",label:"unkennelDelay",sortable:"",align:"center"}),i(u,{prop:"interval_rule",label:"unkennelRule",sortable:"",align:"center"}),i(u,{prop:"teleport_rule",label:"teleportRule",sortable:"",align:"center"}),i(u,{prop:"need_lev",label:"needLevel",sortable:"","sort-method":e,align:"center"}),i(u,{prop:"pass_by",label:"passBy",align:"center"},{default:c(p=>[x(T(p.row.pass_by.map(h=>d(N).$_map_Obj[h].name).join(", ")),1)]),_:1}),i(u,{prop:"wolf_proportion",label:"monsterList","cell-style":{"text-align":"left"}},{default:c(p=>[(g(!0),D(M,null,H(l(p.row.wolf_proportion),h=>(g(),P(r,{key:h.prob,class:"ml-2"},{default:c(()=>[A("sub",null,T(h.prob),1),x(" "+T(h.name)+" ",1),A("sup",null,T(h.pop),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["data"])],64)}}});const kn=Object.freeze(Object.defineProperty({__proto__:null,default:Vn},Symbol.toStringTag,{value:"Module"})),Un=G({__name:"index",setup(o){const t=ne({level:1}),e=B(()=>((2*(t.level+1)+3)*(t.level+1)+4)*(t.level+1)+20),l=B(()=>Math.round((.015*t.level+.8)*t.level+2)),s=B(()=>Math.floor(t.level/4+1)),n=B(()=>(t.level+7)*l.value);return(u,r)=>{const m=fe,p=De,h=Pe;return g(),P(h,{model:d(t),"label-width":"120px"},{default:c(()=>[i(p,{label:"等级"},{default:c(()=>[i(m,{modelValue:d(t).level,"onUpdate:modelValue":r[0]||(r[0]=b=>d(t).level=b),min:1},null,8,["modelValue"])]),_:1}),i(p,{label:"升级经验"},{default:c(()=>[A("label",null,T(d(e)),1)]),_:1}),i(p,{label:"力量"},{default:c(()=>[A("label",null,T(d(l)),1)]),_:1}),i(p,{label:"连升等级"},{default:c(()=>[A("label",null,T(d(s)),1)]),_:1}),i(p,{label:"苦工价格"},{default:c(()=>[A("label",null,T(d(n)),1)]),_:1})]),_:1},8,["model"])}}}),Fn=Object.freeze(Object.defineProperty({__proto__:null,default:Un},Symbol.toStringTag,{value:"Module"})),it=class it extends He{constructor(e,l=1,s=1,n=0){super();a(this,"index",0);a(this,"m_level",0);a(this,"exp",0);a(this,"hp",0);a(this,"hpMax",0);a(this,"hpRate");a(this,"skillList",[]);this.tag="Monster",this.updateData(e),this.hpRate=s,this.updateLevelExp(l,n),this.index=it.COUNT++}updateData(e){e==""&&(e="dahuil");let l=e.indexOf("|");l!=-1&&(e=e.slice(0,l)),this.m_data=ge.getOnlyExample().getData(e),this.m_data==null&&(this.m_data=ge.getOnlyExample().getData("dahuil"))}createSkills(e){return e.map(l=>new de(l[He.SKILL_ID],l[He.SKILL_LEVEL],this).getSubClasses())}initSkills(){this.skills={};const e=this.data.skills;if(e!=null){this.skillList=this.createSkills(e);for(const l of this.skillList)this.skills[l.data.kindId]=l}}conflictSkillList(e){const l=[];if(e==null)return[];const s=N.$_conflict_skill_kind,n=e.data.kindId;this.skills[n]&&l.push(de.getKindName(n));for(const u of s)if(u.indexOf(n)!=-1)for(let r=0;r<u.length;r++)n!=u[r]&&this.skills[u[r]]&&l.push(de.getKindName(u[r]));return l}getSkillById(e){let l,s=null;for(l in this.skills)if(s=this.skills[l],s.data.id==e)return s;return null}updateLevelExp(e=0,l=0){this.level=e,this.exp=l}get allSkillsScore(){let e=1;for(const l of this.skillList)l.enabled&&(e*=this.getSkillScore(l.data.id,l.level));return e}getSkillScore(e,l){let s=null,n=N.$_skill_grade_score,u=e.indexOf("_");return e.indexOf("_")==-1?1:(s=e.slice(u+1,e.length),n[s]&&n[s][String(l)]?n[s][String(l)]:1)}get levelMax(){return N.$_camp_wolf_lv_max}get expMax(){let e=this.m_level+1;return Math.round(this.monsterData.expMaxA+this.monsterData.expMaxB*e+this.monsterData.expMaxC*e*e+this.monsterData.expMaxD*e*e*e)}get level(){return this.m_level}set level(e){this.m_level=Math.max(Math.min(e,this.levelMax),0),Z.currentMap&&Z.currentMap&&(this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate)),this.hpMax<=1&&(this.hpMax=1)}refreshLevel(){this.hpMax=Math.floor((this.monsterData.hpMaxA+this.monsterData.hpMaxB*this.m_level+this.monsterData.hpMaxC*this.m_level*this.m_level)*this.hpRate*1),this.hpMax<=1&&(this.hpMax=1)}get monsterData(){return this.m_data}get power(){let e=N.$_wolf_worth_factor,l=this.hpMax,s=this.monsterData.speedBase,n=this.allSkillsScore;return Math.round(l*s*n*e[2])}get skillInfo(){if(this.skills==null)return"";const e=Object.values(this.skills);return e.sort((l,s)=>l.index-s.index),e.map(l=>l.skillInfo).join("")}};a(it,"MONSTER_SAY_ARRAY",[_.getLanguageStr(1250),_.getLanguageStr(1251),_.getLanguageStr(1252),_.getLanguageStr(1253),_.getLanguageStr(1254),_.getLanguageStr(1255),_.getLanguageStr(1256),_.getLanguageStr(1257),_.getLanguageStr(1258),_.getLanguageStr(1259)]),a(it,"WEIGHTILY_SIZE",487500),a(it,"COUNT",0);let ht=it;const $n=G({__name:"WolfSelect",setup(o){return(t,e)=>{const l=Me,s=ua,n=Ve;return g(),P(n,null,{default:c(()=>[i(s,{label:"前线"},{default:c(()=>[(g(!0),D(M,null,H(d(qs),u=>(g(),P(l,{key:u.id,label:u.label,value:u.id},null,8,["label","value"]))),128))]),_:1}),i(s,{label:"防线"},{default:c(()=>[(g(!0),D(M,null,H(d(Ql),u=>(g(),P(l,{key:u.id,label:u.label,value:u.id},null,8,["label","value"]))),128))]),_:1}),i(s,{label:"噩梦"},{default:c(()=>[(g(!0),D(M,null,H(d(ea),u=>(g(),P(l,{key:u.id,label:u.label,value:u.id},null,8,["label","value"]))),128))]),_:1})]),_:1})}}}),Bn={class:"text-xs"},Hn={class:"sk-tag text-xs"},Gn=G({__name:"WolfSkillTable",props:{wolf:{}},emits:["change"],setup(o,{emit:t}){const e=o,l=t,s=Y(),n=U.groupBy(N.$_skillAtt_Obj.monsterSkill,I=>I.kindId);U.each(n,(I,O)=>n[O]=U.sortBy(I,"id"));const u=Object.keys(n).sort();let r=ne([]);ot(()=>e.wolf.data.id,()=>{var I,O;e.wolf.initSkills(),r.length=0,r.push(...e.wolf.skillList.map((R,C)=>m(R,C))),(I=s.value)==null||I.clearSelection(),(O=s.value)==null||O.toggleAllSelection()});const m=(I,O=0)=>ne({index:O,kindId:I.data.kindId,id:I.data.id,name:I.data.name,level:I.level,levelMax:I.levelMax,score:I.skillScore,info:I.skillInfo,tags:I.skillTag1+I.skillTag2+I.skillTag3,skill:I});function p(I){I.id=n[I.kindId][0].id,I.level=1,h(I)}const h=I=>{const O=r.indexOf(I),R=new de(I.id,I.level,e.wolf).getSubClasses();e.wolf.skillList[O]=R,Object.assign(I,m(R,O)),l("change")},b=()=>{var O;const I=m(new de("WeakFire_X1",1,e.wolf).getSubClasses(),r.length);r.push(I),(O=s.value)==null||O.toggleRowSelection(I,!0),l("change")},S=I=>{e.wolf.skillList.forEach(O=>O.enabled=I.find(R=>R.skill==O)!==void 0)};return(I,O)=>{const R=je,C=Me,w=Ve,v=fe,te=Ye;return g(),D("div",null,[i(d(We),{ref_key:"skillTableRef",ref:s,data:d(r),"row-key":"index",style:{"font-size":"small"},onSelectionChange:S},{default:c(()=>[i(R,{type:"selection","reverse-selection":"",width:30}),i(R,{label:"KindId",width:160,"header-align":"center"},{default:c(V=>[i(w,{modelValue:V.row.kindId,"onUpdate:modelValue":Q=>V.row.kindId=Q,onChange:Q=>p(V.row),style:{"font-size":"small"}},{default:c(()=>[(g(!0),D(M,null,H(d(u),Q=>(g(),P(C,{key:Q,label:Q,value:Q},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),i(R,{label:"Id",width:200,"header-align":"center"},{default:c(V=>[i(w,{modelValue:V.row.id,"onUpdate:modelValue":Q=>V.row.id=Q,onChange:Q=>h(V.row),style:{"font-size":"small"}},{default:c(()=>[(g(!0),D(M,null,H(d(n)[V.row.kindId],Q=>(g(),P(C,{key:Q.id,label:Q.id,value:Q.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),i(R,{prop:"name",label:"Name",width:120,"header-align":"center",align:"center"}),i(R,{prop:"level",label:"Level",width:120,"header-align":"center",align:"center"},{default:c(V=>[i(v,{modelValue:V.row.level,"onUpdate:modelValue":Q=>V.row.level=Q,min:1,max:V.row.levelMax,size:"small",style:{width:"80px"},onChange:Q=>h(V.row)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:1}),i(R,{prop:"levelMax",label:"Level Max",width:120,"header-align":"center",align:"center"}),i(R,{prop:"score",label:"Score",width:120,"header-align":"center",align:"center"}),i(R,{label:"Info"},{default:c(V=>[A("span",Bn,T(V.row.info),1),A("span",Hn,T(V.row.tags),1)]),_:1})]),_:1},8,["data"]),i(te,{onClick:b},{default:c(()=>[x("增加一行")]),_:1})])}}});const Wn=qe(Gn,[["__scopeId","data-v-7964810f"]]),jn={class:"ml-2"},Xn={class:"ml-8"},Yn=A("p",null,"技能",-1),zn=G({__name:"WolfCalcOne",props:{wolf:{}},setup(o){const t=ne({wid:"al",level:1,expMax:0}),e=o;s();const l=n=>{e.wolf.updateData(n),s()};ot(()=>e.wolf.level,s);function s(){e.wolf.refreshLevel(),t.expMax=e.wolf.expMax}return(n,u)=>{const r=De,m=fe,p=Pe;return g(),D(M,null,[i(p,{"label-width":80},{default:c(()=>[i(r,{label:"狼"},{default:c(()=>[i($n,{modelValue:d(t).wid,"onUpdate:modelValue":u[0]||(u[0]=h=>d(t).wid=h),onChange:l},null,8,["modelValue"])]),_:1}),i(r,{label:"等级"},{default:c(()=>[i(m,{modelValue:n.wolf.m_level,"onUpdate:modelValue":u[1]||(u[1]=h=>n.wolf.m_level=h),min:1},null,8,["modelValue"]),A("span",jn,"最高等级："+T(n.wolf.levelMax),1)]),_:1}),i(r,{label:"速度"},{default:c(()=>[x(T(n.wolf.monsterData.speedBase),1)]),_:1}),i(r,{label:"升级经验"},{default:c(()=>[x(T(d(t).expMax),1)]),_:1}),i(r,{label:"血量"},{default:c(()=>[x(T(n.wolf.hpMax),1)]),_:1}),i(r,{label:"实力"},{default:c(()=>[x(T(n.wolf.power),1)]),_:1})]),_:1}),A("div",Xn,[Yn,i(Wn,{wolf:n.wolf},null,8,["wolf"])])],64)}}}),qn=A("h2",null,"狼相关计算",-1),Jn=G({__name:"index",setup(o){const t=ne([new ht("dahuil")]),e=Y(t[0].index),l=B(()=>{const[n,u]=N.$_wolf_worth_factor;return Math.round(Math.pow(U.sumBy(t,r=>Math.pow(r.power,n)),u))}),s=(n,u)=>{if(u==="add"){const r=new ht("dahuil");t.push(r),e.value=r.index}else if(u==="remove"){const r=t;let m=e.value;m===n&&r.forEach((p,h)=>{if(p.index===n){const b=r[h+1]||r[h-1];b&&(m=b.index)}}),e.value=m,t.splice(t.findIndex(p=>p.index===n),1)}};return(n,u)=>{const r=xt,m=bt;return g(),D("div",null,[qn,A("div",null,"总实力："+T(d(l)),1),i(m,{modelValue:d(e),"onUpdate:modelValue":u[0]||(u[0]=p=>Ae(e)?e.value=p:null),type:"border-card",editable:"",onEdit:s,class:"m-4"},{default:c(()=>[(g(!0),D(M,null,H(d(t),(p,h)=>(g(),P(r,{key:p.index,label:p.monsterData.name,name:p.index},{default:c(()=>[i(zn,{wolf:p},null,8,["wolf"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])}}}),Zn=Object.freeze(Object.defineProperty({__proto__:null,default:Jn},Symbol.toStringTag,{value:"Module"})),gt=o=>(Kl("data-v-ca5efb48"),o=o(),Pl(),o),Qn=gt(()=>A("h1",null,"狼数据",-1)),ei=gt(()=>A("p",null,"前排解释：",-1)),ti=gt(()=>A("p",null,"pop 为狼在一波中占的容量，一般来说 pop 越大则出现机会越少。",-1)),li=gt(()=>A("p",null,"charm 影响到寻路，charm 为负值越小则其他狼越会排斥它。",-1)),ai=gt(()=>A("p",null,"hp_factor 影响血量关于等级增长，是二次函数系数。",-1)),si={class:"sk-list"},ni={key:0,class:"sk-debuff"},ii={key:1,class:"sk-buff"},ri={class:"sk-name"},oi={class:"sk-id"},ui={class:"sk-info"},di={key:2,class:"sk-tag"},ci={key:3,class:"sk-tag"},_i={key:4,class:"sk-tag"},mi=G({__name:"index",setup(o){console.log("init wolfs");const t=U.map(N.$_wolfAtt_Obj,(e,l)=>l).sort().map(e=>{let l=new ht(e,0,0);l.initSkills();let s=l.monsterData;return{id:e,data:s,skills:Object.values(l.skills)}});return console.log(t),(e,l)=>{const s=je,n=We;return g(),D(M,null,[Qn,ei,ti,li,ai,i(n,{data:d(t),"default-sort":{prop:"id",order:"ascending"},"table-layout":"auto",stripe:"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},"row-key":"id","max-height":"600",style:{width:"100%","max-width":"1200px"}},{default:c(()=>[i(s,{prop:"id",label:"id",sortable:"",width:150}),i(s,{prop:"data.name",label:"name",sortable:""}),i(s,{prop:"data.speedBase",label:"speedBase",sortable:""}),i(s,{prop:"data.population",label:"population",sortable:""}),i(s,{prop:"data.charm",label:"charm",sortable:"",width:100}),i(s,{label:"size"},{default:c(()=>[i(s,{prop:"data.width",label:"width",sortable:"",width:100}),i(s,{prop:"data.height",label:"height",sortable:"",width:100})]),_:1}),i(s,{label:"hpFactor"},{default:c(()=>[i(s,{prop:"data.hpMaxA",label:"a",sortable:"",width:100}),i(s,{prop:"data.hpMaxB",label:"b",sortable:"",width:100}),i(s,{prop:"data.hpMaxC",label:"c",sortable:"",width:100})]),_:1}),i(s,{label:"skills",type:"expand",width:"60"},{default:c(u=>[A("div",si,[(g(!0),D(M,null,H(u.row.skills,r=>(g(),D("p",{key:r.data.id},[r.isDebuff?(g(),D("span",ni,"↓")):(g(),D("span",ii,"↑")),A("span",ri,T(r.name),1),A("span",oi,"["+T(r.data.id)+"]",1),A("span",ui,T(r.skillInfo),1),r.skillTag1?(g(),D("span",di,T(r.skillTag1),1)):pe("",!0),r.skillTag2?(g(),D("span",ci,T(r.skillTag2),1)):pe("",!0),r.skillTag3?(g(),D("span",_i,T(r.skillTag3),1)):pe("",!0)]))),128))])]),_:1})]),_:1},8,["data"])],64)}}});const hi=qe(mi,[["__scopeId","data-v-ca5efb48"]]),pi=Object.freeze(Object.defineProperty({__proto__:null,default:hi},Symbol.toStringTag,{value:"Module"}));
